const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["index2.js","index12.js","index15.js","default.js","index13.js","index14.js","index3.js","index16.js","index17.js","index18.js","index4.js","index5.js","index6.js","index19.js","index20.js","index21.js","index22.js","index23.js","index24.js","index7.js","blank-line.js","index25.js","index26.js","index27.js","index8.js","index28.js","index9.js","index10.js","index11.js"])))=>i.map(i=>d[i]);
function cH(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(r,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function sw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var c0={exports:{}},Ru={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2;function uH(){if(f2)return Ru;f2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,i){var s=null;if(i!==void 0&&(s=""+i),o.key!==void 0&&(s=""+o.key),"key"in o){i={};for(var a in o)a!=="key"&&(i[a]=o[a])}else i=o;return o=i.ref,{$$typeof:t,type:r,key:s,ref:o!==void 0?o:null,props:i}}return Ru.Fragment=e,Ru.jsx=n,Ru.jsxs=n,Ru}var h2;function dH(){return h2||(h2=1,c0.exports=uH()),c0.exports}var w=dH(),u0={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function fH(){if(p2)return ze;p2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(R){return R===null||typeof R!="object"?null:(R=p&&R[p]||R["@@iterator"],typeof R=="function"?R:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,C={};function k(R,K,ae){this.props=R,this.context=K,this.refs=C,this.updater=ae||b}k.prototype.isReactComponent={},k.prototype.setState=function(R,K){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,K,"setState")},k.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function E(){}E.prototype=k.prototype;function T(R,K,ae){this.props=R,this.context=K,this.refs=C,this.updater=ae||b}var N=T.prototype=new E;N.constructor=T,v(N,k.prototype),N.isPureReactComponent=!0;var _=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function H(R,K,ae,ce,ve,Ie){return ae=Ie.ref,{$$typeof:t,type:R,key:K,ref:ae!==void 0?ae:null,props:Ie}}function P(R,K){return H(R.type,K,void 0,void 0,void 0,R.props)}function W(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function ie(R){var K={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ae){return K[ae]})}var ge=/\/+/g;function ne(R,K){return typeof R=="object"&&R!==null&&R.key!=null?ie(""+R.key):K.toString(36)}function fe(){}function he(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(fe,fe):(R.status="pending",R.then(function(K){R.status==="pending"&&(R.status="fulfilled",R.value=K)},function(K){R.status==="pending"&&(R.status="rejected",R.reason=K)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function oe(R,K,ae,ce,ve){var Ie=typeof R;(Ie==="undefined"||Ie==="boolean")&&(R=null);var me=!1;if(R===null)me=!0;else switch(Ie){case"bigint":case"string":case"number":me=!0;break;case"object":switch(R.$$typeof){case t:case e:me=!0;break;case h:return me=R._init,oe(me(R._payload),K,ae,ce,ve)}}if(me)return ve=ve(R),me=ce===""?"."+ne(R,0):ce,_(ve)?(ae="",me!=null&&(ae=me.replace(ge,"$&/")+"/"),oe(ve,K,ae,"",function(ct){return ct})):ve!=null&&(W(ve)&&(ve=P(ve,ae+(ve.key==null||R&&R.key===ve.key?"":(""+ve.key).replace(ge,"$&/")+"/")+me)),K.push(ve)),1;me=0;var ue=ce===""?".":ce+":";if(_(R))for(var Te=0;Te<R.length;Te++)ce=R[Te],Ie=ue+ne(ce,Te),me+=oe(ce,K,ae,Ie,ve);else if(Te=g(R),typeof Te=="function")for(R=Te.call(R),Te=0;!(ce=R.next()).done;)ce=ce.value,Ie=ue+ne(ce,Te++),me+=oe(ce,K,ae,Ie,ve);else if(Ie==="object"){if(typeof R.then=="function")return oe(he(R),K,ae,ce,ve);throw K=String(R),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return me}function B(R,K,ae){if(R==null)return R;var ce=[],ve=0;return oe(R,ce,"","",function(Ie){return K.call(ae,Ie,ve++)}),ce}function Y(R){if(R._status===-1){var K=R._result;K=K(),K.then(function(ae){(R._status===0||R._status===-1)&&(R._status=1,R._result=ae)},function(ae){(R._status===0||R._status===-1)&&(R._status=2,R._result=ae)}),R._status===-1&&(R._status=0,R._result=K)}if(R._status===1)return R._result.default;throw R._result}var J=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function Z(){}return ze.Children={map:B,forEach:function(R,K,ae){B(R,function(){K.apply(this,arguments)},ae)},count:function(R){var K=0;return B(R,function(){K++}),K},toArray:function(R){return B(R,function(K){return K})||[]},only:function(R){if(!W(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},ze.Component=k,ze.Fragment=n,ze.Profiler=o,ze.PureComponent=T,ze.StrictMode=r,ze.Suspense=u,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,ze.__COMPILER_RUNTIME={__proto__:null,c:function(R){return O.H.useMemoCache(R)}},ze.cache=function(R){return function(){return R.apply(null,arguments)}},ze.cloneElement=function(R,K,ae){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ce=v({},R.props),ve=R.key,Ie=void 0;if(K!=null)for(me in K.ref!==void 0&&(Ie=void 0),K.key!==void 0&&(ve=""+K.key),K)!$.call(K,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&K.ref===void 0||(ce[me]=K[me]);var me=arguments.length-2;if(me===1)ce.children=ae;else if(1<me){for(var ue=Array(me),Te=0;Te<me;Te++)ue[Te]=arguments[Te+2];ce.children=ue}return H(R.type,ve,void 0,void 0,Ie,ce)},ze.createContext=function(R){return R={$$typeof:s,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:i,_context:R},R},ze.createElement=function(R,K,ae){var ce,ve={},Ie=null;if(K!=null)for(ce in K.key!==void 0&&(Ie=""+K.key),K)$.call(K,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ve[ce]=K[ce]);var me=arguments.length-2;if(me===1)ve.children=ae;else if(1<me){for(var ue=Array(me),Te=0;Te<me;Te++)ue[Te]=arguments[Te+2];ve.children=ue}if(R&&R.defaultProps)for(ce in me=R.defaultProps,me)ve[ce]===void 0&&(ve[ce]=me[ce]);return H(R,Ie,void 0,void 0,null,ve)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(R){return{$$typeof:a,render:R}},ze.isValidElement=W,ze.lazy=function(R){return{$$typeof:h,_payload:{_status:-1,_result:R},_init:Y}},ze.memo=function(R,K){return{$$typeof:d,type:R,compare:K===void 0?null:K}},ze.startTransition=function(R){var K=O.T,ae={};O.T=ae;try{var ce=R(),ve=O.S;ve!==null&&ve(ae,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Z,J)}catch(Ie){J(Ie)}finally{O.T=K}},ze.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},ze.use=function(R){return O.H.use(R)},ze.useActionState=function(R,K,ae){return O.H.useActionState(R,K,ae)},ze.useCallback=function(R,K){return O.H.useCallback(R,K)},ze.useContext=function(R){return O.H.useContext(R)},ze.useDebugValue=function(){},ze.useDeferredValue=function(R,K){return O.H.useDeferredValue(R,K)},ze.useEffect=function(R,K,ae){var ce=O.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(R,K)},ze.useId=function(){return O.H.useId()},ze.useImperativeHandle=function(R,K,ae){return O.H.useImperativeHandle(R,K,ae)},ze.useInsertionEffect=function(R,K){return O.H.useInsertionEffect(R,K)},ze.useLayoutEffect=function(R,K){return O.H.useLayoutEffect(R,K)},ze.useMemo=function(R,K){return O.H.useMemo(R,K)},ze.useOptimistic=function(R,K){return O.H.useOptimistic(R,K)},ze.useReducer=function(R,K,ae){return O.H.useReducer(R,K,ae)},ze.useRef=function(R){return O.H.useRef(R)},ze.useState=function(R){return O.H.useState(R)},ze.useSyncExternalStore=function(R,K,ae){return O.H.useSyncExternalStore(R,K,ae)},ze.useTransition=function(){return O.H.useTransition()},ze.version="19.1.1",ze}var m2;function Vm(){return m2||(m2=1,u0.exports=fH()),u0.exports}var S=Vm();const _e=sw(S),lw=cH({__proto__:null,default:_e},[S]);var d0={exports:{}},Du={},f0={exports:{}},h0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2;function hH(){return g2||(g2=1,function(t){function e(B,Y){var J=B.length;B.push(Y);e:for(;0<J;){var Z=J-1>>>1,R=B[Z];if(0<o(R,Y))B[Z]=Y,B[J]=R,J=Z;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],J=B.pop();if(J!==Y){B[0]=J;e:for(var Z=0,R=B.length,K=R>>>1;Z<K;){var ae=2*(Z+1)-1,ce=B[ae],ve=ae+1,Ie=B[ve];if(0>o(ce,J))ve<R&&0>o(Ie,ce)?(B[Z]=Ie,B[ve]=J,Z=ve):(B[Z]=ce,B[ae]=J,Z=ae);else if(ve<R&&0>o(Ie,J))B[Z]=Ie,B[ve]=J,Z=ve;else break e}}return Y}function o(B,Y){var J=B.sortIndex-Y.sortIndex;return J!==0?J:B.id-Y.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],d=[],h=1,p=null,g=3,b=!1,v=!1,C=!1,k=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function _(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function O(B){if(C=!1,_(B),!v)if(n(u)!==null)v=!0,$||($=!0,ne());else{var Y=n(d);Y!==null&&oe(O,Y.startTime-B)}}var $=!1,H=-1,P=5,W=-1;function ie(){return k?!0:!(t.unstable_now()-W<P)}function ge(){if(k=!1,$){var B=t.unstable_now();W=B;var Y=!0;try{e:{v=!1,C&&(C=!1,T(H),H=-1),b=!0;var J=g;try{t:{for(_(B),p=n(u);p!==null&&!(p.expirationTime>B&&ie());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,g=p.priorityLevel;var R=Z(p.expirationTime<=B);if(B=t.unstable_now(),typeof R=="function"){p.callback=R,_(B),Y=!0;break t}p===n(u)&&r(u),_(B)}else r(u);p=n(u)}if(p!==null)Y=!0;else{var K=n(d);K!==null&&oe(O,K.startTime-B),Y=!1}}break e}finally{p=null,g=J,b=!1}Y=void 0}}finally{Y?ne():$=!1}}}var ne;if(typeof N=="function")ne=function(){N(ge)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,he=fe.port2;fe.port1.onmessage=ge,ne=function(){he.postMessage(null)}}else ne=function(){E(ge,0)};function oe(B,Y){H=E(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var J=g;g=Y;try{return B()}finally{g=J}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=g;g=B;try{return Y()}finally{g=J}},t.unstable_scheduleCallback=function(B,Y,J){var Z=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Z+J:Z):J=Z,B){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=J+R,B={id:h++,callback:Y,priorityLevel:B,startTime:J,expirationTime:R,sortIndex:-1},J>Z?(B.sortIndex=J,e(d,B),n(u)===null&&B===n(d)&&(C?(T(H),H=-1):C=!0,oe(O,J-Z))):(B.sortIndex=R,e(u,B),v||b||(v=!0,$||($=!0,ne()))),B},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(B){var Y=g;return function(){var J=g;g=Y;try{return B.apply(this,arguments)}finally{g=J}}}}(h0)),h0}var b2;function pH(){return b2||(b2=1,f0.exports=hH()),f0.exports}var p0={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2;function mH(){if(y2)return An;y2=1;var t=Vm();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function i(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,An.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return i(u,d,null,h)},An.flushSync=function(u){var d=s.T,h=r.p;try{if(s.T=null,r.p=2,u)return u()}finally{s.T=d,r.p=h,r.d.f()}},An.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},An.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},An.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=a(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:b}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},An.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=a(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},An.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=a(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},An.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=a(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},An.requestFormReset=function(u){r.d.r(u)},An.unstable_batchedUpdates=function(u,d){return u(d)},An.useFormState=function(u,d,h){return s.H.useFormState(u,d,h)},An.useFormStatus=function(){return s.H.useHostTransitionStatus()},An.version="19.1.1",An}var v2;function MN(){if(v2)return p0.exports;v2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),p0.exports=mH(),p0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w2;function gH(){if(w2)return Du;w2=1;var t=pH(),e=Vm(),n=MN();function r(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var c=l,f=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(f=c.return),l=c.return;while(l)}return c.tag===3?f:null}function s(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function a(l){if(i(l)!==l)throw Error(r(188))}function u(l){var c=l.alternate;if(!c){if(c=i(l),c===null)throw Error(r(188));return c!==l?null:l}for(var f=l,m=c;;){var y=f.return;if(y===null)break;var x=y.alternate;if(x===null){if(m=y.return,m!==null){f=m;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===f)return a(y),l;if(x===m)return a(y),c;x=x.sibling}throw Error(r(188))}if(f.return!==m.return)f=y,m=x;else{for(var M=!1,A=y.child;A;){if(A===f){M=!0,f=y,m=x;break}if(A===m){M=!0,m=y,f=x;break}A=A.sibling}if(!M){for(A=x.child;A;){if(A===f){M=!0,f=x,m=y;break}if(A===m){M=!0,m=x,f=y;break}A=A.sibling}if(!M)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?l:c}function d(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=d(l),c!==null)return c;l=l.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),N=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function ne(l){return l===null||typeof l!="object"?null:(l=ge&&l[ge]||l["@@iterator"],typeof l=="function"?l:null)}var fe=Symbol.for("react.client.reference");function he(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===fe?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case O:return"Suspense";case $:return"SuspenseList";case W:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case b:return"Portal";case N:return(l.displayName||"Context")+".Provider";case T:return(l._context.displayName||"Context")+".Consumer";case _:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case H:return c=l.displayName||null,c!==null?c:he(l.type)||"Memo";case P:c=l._payload,l=l._init;try{return he(l(c))}catch{}}return null}var oe=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Z=[],R=-1;function K(l){return{current:l}}function ae(l){0>R||(l.current=Z[R],Z[R]=null,R--)}function ce(l,c){R++,Z[R]=l.current,l.current=c}var ve=K(null),Ie=K(null),me=K(null),ue=K(null);function Te(l,c){switch(ce(me,c),ce(Ie,l),ce(ve,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?VE(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=VE(c),l=zE(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ae(ve),ce(ve,l)}function ct(){ae(ve),ae(Ie),ae(me)}function rt(l){l.memoizedState!==null&&ce(ue,l);var c=ve.current,f=zE(c,l.type);c!==f&&(ce(Ie,l),ce(ve,f))}function st(l){Ie.current===l&&(ae(ve),ae(Ie)),ue.current===l&&(ae(ue),Mu._currentValue=J)}var vt=Object.prototype.hasOwnProperty,rn=t.unstable_scheduleCallback,Fn=t.unstable_cancelCallback,Ai=t.unstable_shouldYield,Fs=t.unstable_requestPaint,En=t.unstable_now,CC=t.unstable_getCurrentPriorityLevel,Bc=t.unstable_ImmediatePriority,L=t.unstable_UserBlockingPriority,F=t.unstable_NormalPriority,ee=t.unstable_LowPriority,be=t.unstable_IdlePriority,pe=t.log,de=t.unstable_setDisableYieldValue,Me=null,Pe=null;function tt(l){if(typeof pe=="function"&&de(l),Pe&&typeof Pe.setStrictMode=="function")try{Pe.setStrictMode(Me,l)}catch{}}var kt=Math.clz32?Math.clz32:Xg,Jl=Math.log,uo=Math.LN2;function Xg(l){return l>>>=0,l===0?32:31-(Jl(l)/uo|0)|0}var Ni=256,Oi=4194304;function jo(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Gs(l,c,f){var m=l.pendingLanes;if(m===0)return 0;var y=0,x=l.suspendedLanes,M=l.pingedLanes;l=l.warmLanes;var A=m&134217727;return A!==0?(m=A&~x,m!==0?y=jo(m):(M&=A,M!==0?y=jo(M):f||(f=A&~l,f!==0&&(y=jo(f))))):(A=m&~x,A!==0?y=jo(A):M!==0?y=jo(M):f||(f=m&~l,f!==0&&(y=jo(f)))),y===0?0:c!==0&&c!==y&&(c&x)===0&&(x=y&-y,f=c&-c,x>=f||x===32&&(f&4194048)!==0)?c:y}function qs(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function bf(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SC(){var l=Ni;return Ni<<=1,(Ni&4194048)===0&&(Ni=256),l}function kC(){var l=Oi;return Oi<<=1,(Oi&62914560)===0&&(Oi=4194304),l}function Jg(l){for(var c=[],f=0;31>f;f++)c.push(l);return c}function Ic(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function XB(l,c,f,m,y,x){var M=l.pendingLanes;l.pendingLanes=f,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=f,l.entangledLanes&=f,l.errorRecoveryDisabledLanes&=f,l.shellSuspendCounter=0;var A=l.entanglements,D=l.expirationTimes,U=l.hiddenUpdates;for(f=M&~f;0<f;){var Q=31-kt(f),re=1<<Q;A[Q]=0,D[Q]=-1;var G=U[Q];if(G!==null)for(U[Q]=null,Q=0;Q<G.length;Q++){var q=G[Q];q!==null&&(q.lane&=-536870913)}f&=~re}m!==0&&EC(l,m,0),x!==0&&y===0&&l.tag!==0&&(l.suspendedLanes|=x&~(M&~c))}function EC(l,c,f){l.pendingLanes|=c,l.suspendedLanes&=~c;var m=31-kt(c);l.entangledLanes|=c,l.entanglements[m]=l.entanglements[m]|1073741824|f&4194090}function MC(l,c){var f=l.entangledLanes|=c;for(l=l.entanglements;f;){var m=31-kt(f),y=1<<m;y&c|l[m]&c&&(l[m]|=c),f&=~y}}function Qg(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function eb(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function TC(){var l=Y.p;return l!==0?l:(l=window.event,l===void 0?32:s2(l.type))}function JB(l,c){var f=Y.p;try{return Y.p=l,c()}finally{Y.p=f}}var Ri=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Ri,Gn="__reactProps$"+Ri,Ql="__reactContainer$"+Ri,tb="__reactEvents$"+Ri,QB="__reactListeners$"+Ri,eI="__reactHandles$"+Ri,AC="__reactResources$"+Ri,Hc="__reactMarker$"+Ri;function nb(l){delete l[Mn],delete l[Gn],delete l[tb],delete l[QB],delete l[eI]}function ea(l){var c=l[Mn];if(c)return c;for(var f=l.parentNode;f;){if(c=f[Ql]||f[Mn]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(l=GE(l);l!==null;){if(f=l[Mn])return f;l=GE(l)}return c}l=f,f=l.parentNode}return null}function ta(l){if(l=l[Mn]||l[Ql]){var c=l.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return l}return null}function Pc(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(r(33))}function na(l){var c=l[AC];return c||(c=l[AC]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function on(l){l[Hc]=!0}var NC=new Set,OC={};function Ks(l,c){ra(l,c),ra(l+"Capture",c)}function ra(l,c){for(OC[l]=c,l=0;l<c.length;l++)NC.add(c[l])}var tI=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),RC={},DC={};function nI(l){return vt.call(DC,l)?!0:vt.call(RC,l)?!1:tI.test(l)?DC[l]=!0:(RC[l]=!0,!1)}function yf(l,c,f){if(nI(c))if(f===null)l.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+f)}}function vf(l,c,f){if(f===null)l.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+f)}}function Vo(l,c,f,m){if(m===null)l.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(f);return}l.setAttributeNS(c,f,""+m)}}var rb,_C;function oa(l){if(rb===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);rb=c&&c[1]||"",_C=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rb+l+_C}var ob=!1;function ib(l,c){if(!l||ob)return"";ob=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(q){var G=q}Reflect.construct(l,[],re)}else{try{re.call()}catch(q){G=q}l.call(re.prototype)}}else{try{throw Error()}catch(q){G=q}(re=l())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(q){if(q&&G&&typeof q.stack=="string")return[q.stack,G.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=m.DetermineComponentFrameRoot(),M=x[0],A=x[1];if(M&&A){var D=M.split(`
`),U=A.split(`
`);for(y=m=0;m<D.length&&!D[m].includes("DetermineComponentFrameRoot");)m++;for(;y<U.length&&!U[y].includes("DetermineComponentFrameRoot");)y++;if(m===D.length||y===U.length)for(m=D.length-1,y=U.length-1;1<=m&&0<=y&&D[m]!==U[y];)y--;for(;1<=m&&0<=y;m--,y--)if(D[m]!==U[y]){if(m!==1||y!==1)do if(m--,y--,0>y||D[m]!==U[y]){var Q=`
`+D[m].replace(" at new "," at ");return l.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",l.displayName)),Q}while(1<=m&&0<=y);break}}}finally{ob=!1,Error.prepareStackTrace=f}return(f=l?l.displayName||l.name:"")?oa(f):""}function rI(l){switch(l.tag){case 26:case 27:case 5:return oa(l.type);case 16:return oa("Lazy");case 13:return oa("Suspense");case 19:return oa("SuspenseList");case 0:case 15:return ib(l.type,!1);case 11:return ib(l.type.render,!1);case 1:return ib(l.type,!0);case 31:return oa("Activity");default:return""}}function LC(l){try{var c="";do c+=rI(l),l=l.return;while(l);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Er(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function BC(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function oI(l){var c=BC(l)?"checked":"value",f=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),m=""+l[c];if(!l.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,x=f.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return y.call(this)},set:function(M){m=""+M,x.call(this,M)}}),Object.defineProperty(l,c,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function wf(l){l._valueTracker||(l._valueTracker=oI(l))}function IC(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var f=c.getValue(),m="";return l&&(m=BC(l)?l.checked?"true":"false":l.value),l=m,l!==f?(c.setValue(l),!0):!1}function xf(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var iI=/[\n"\\]/g;function Mr(l){return l.replace(iI,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function sb(l,c,f,m,y,x,M,A){l.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?l.type=M:l.removeAttribute("type"),c!=null?M==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+Er(c)):l.value!==""+Er(c)&&(l.value=""+Er(c)):M!=="submit"&&M!=="reset"||l.removeAttribute("value"),c!=null?lb(l,M,Er(c)):f!=null?lb(l,M,Er(f)):m!=null&&l.removeAttribute("value"),y==null&&x!=null&&(l.defaultChecked=!!x),y!=null&&(l.checked=y&&typeof y!="function"&&typeof y!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?l.name=""+Er(A):l.removeAttribute("name")}function HC(l,c,f,m,y,x,M,A){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(l.type=x),c!=null||f!=null){if(!(x!=="submit"&&x!=="reset"||c!=null))return;f=f!=null?""+Er(f):"",c=c!=null?""+Er(c):f,A||c===l.value||(l.value=c),l.defaultValue=c}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=A?l.checked:!!m,l.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(l.name=M)}function lb(l,c,f){c==="number"&&xf(l.ownerDocument)===l||l.defaultValue===""+f||(l.defaultValue=""+f)}function ia(l,c,f,m){if(l=l.options,c){c={};for(var y=0;y<f.length;y++)c["$"+f[y]]=!0;for(f=0;f<l.length;f++)y=c.hasOwnProperty("$"+l[f].value),l[f].selected!==y&&(l[f].selected=y),y&&m&&(l[f].defaultSelected=!0)}else{for(f=""+Er(f),c=null,y=0;y<l.length;y++){if(l[y].value===f){l[y].selected=!0,m&&(l[y].defaultSelected=!0);return}c!==null||l[y].disabled||(c=l[y])}c!==null&&(c.selected=!0)}}function PC(l,c,f){if(c!=null&&(c=""+Er(c),c!==l.value&&(l.value=c),f==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=f!=null?""+Er(f):""}function jC(l,c,f,m){if(c==null){if(m!=null){if(f!=null)throw Error(r(92));if(oe(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),c=f}f=Er(c),l.defaultValue=f,m=l.textContent,m===f&&m!==""&&m!==null&&(l.value=m)}function sa(l,c){if(c){var f=l.firstChild;if(f&&f===l.lastChild&&f.nodeType===3){f.nodeValue=c;return}}l.textContent=c}var sI=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function VC(l,c,f){var m=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":m?l.setProperty(c,f):typeof f!="number"||f===0||sI.has(c)?c==="float"?l.cssFloat=f:l[c]=(""+f).trim():l[c]=f+"px"}function zC(l,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(l=l.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var y in c)m=c[y],c.hasOwnProperty(y)&&f[y]!==m&&VC(l,y,m)}else for(var x in c)c.hasOwnProperty(x)&&VC(l,x,c[x])}function ab(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lI=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aI=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cf(l){return aI.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var cb=null;function ub(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var la=null,aa=null;function UC(l){var c=ta(l);if(c&&(l=c.stateNode)){var f=l[Gn]||null;e:switch(l=c.stateNode,c.type){case"input":if(sb(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=l;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Mr(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var m=f[c];if(m!==l&&m.form===l.form){var y=m[Gn]||null;if(!y)throw Error(r(90));sb(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(c=0;c<f.length;c++)m=f[c],m.form===l.form&&IC(m)}break e;case"textarea":PC(l,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&ia(l,!!f.multiple,c,!1)}}}var db=!1;function $C(l,c,f){if(db)return l(c,f);db=!0;try{var m=l(c);return m}finally{if(db=!1,(la!==null||aa!==null)&&(lh(),la&&(c=la,l=aa,aa=la=null,UC(c),l)))for(c=0;c<l.length;c++)UC(l[c])}}function jc(l,c){var f=l.stateNode;if(f===null)return null;var m=f[Gn]||null;if(m===null)return null;f=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break e;default:l=!1}if(l)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var zo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fb=!1;if(zo)try{var Vc={};Object.defineProperty(Vc,"passive",{get:function(){fb=!0}}),window.addEventListener("test",Vc,Vc),window.removeEventListener("test",Vc,Vc)}catch{fb=!1}var Di=null,hb=null,Sf=null;function FC(){if(Sf)return Sf;var l,c=hb,f=c.length,m,y="value"in Di?Di.value:Di.textContent,x=y.length;for(l=0;l<f&&c[l]===y[l];l++);var M=f-l;for(m=1;m<=M&&c[f-m]===y[x-m];m++);return Sf=y.slice(l,1<m?1-m:void 0)}function kf(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function Ef(){return!0}function GC(){return!1}function qn(l){function c(f,m,y,x,M){this._reactName=f,this._targetInst=y,this.type=m,this.nativeEvent=x,this.target=M,this.currentTarget=null;for(var A in l)l.hasOwnProperty(A)&&(f=l[A],this[A]=f?f(x):x[A]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?Ef:GC,this.isPropagationStopped=GC,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ef)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ef)},persist:function(){},isPersistent:Ef}),c}var Zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mf=qn(Zs),zc=h({},Zs,{view:0,detail:0}),cI=qn(zc),pb,mb,Uc,Tf=h({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bb,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Uc&&(Uc&&l.type==="mousemove"?(pb=l.screenX-Uc.screenX,mb=l.screenY-Uc.screenY):mb=pb=0,Uc=l),pb)},movementY:function(l){return"movementY"in l?l.movementY:mb}}),qC=qn(Tf),uI=h({},Tf,{dataTransfer:0}),dI=qn(uI),fI=h({},zc,{relatedTarget:0}),gb=qn(fI),hI=h({},Zs,{animationName:0,elapsedTime:0,pseudoElement:0}),pI=qn(hI),mI=h({},Zs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),gI=qn(mI),bI=h({},Zs,{data:0}),KC=qn(bI),yI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xI(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=wI[l])?!!c[l]:!1}function bb(){return xI}var CI=h({},zc,{key:function(l){if(l.key){var c=yI[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=kf(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?vI[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bb,charCode:function(l){return l.type==="keypress"?kf(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?kf(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),SI=qn(CI),kI=h({},Tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ZC=qn(kI),EI=h({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bb}),MI=qn(EI),TI=h({},Zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),AI=qn(TI),NI=h({},Tf,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),OI=qn(NI),RI=h({},Zs,{newState:0,oldState:0}),DI=qn(RI),_I=[9,13,27,32],yb=zo&&"CompositionEvent"in window,$c=null;zo&&"documentMode"in document&&($c=document.documentMode);var LI=zo&&"TextEvent"in window&&!$c,YC=zo&&(!yb||$c&&8<$c&&11>=$c),WC=" ",XC=!1;function JC(l,c){switch(l){case"keyup":return _I.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QC(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var ca=!1;function BI(l,c){switch(l){case"compositionend":return QC(c);case"keypress":return c.which!==32?null:(XC=!0,WC);case"textInput":return l=c.data,l===WC&&XC?null:l;default:return null}}function II(l,c){if(ca)return l==="compositionend"||!yb&&JC(l,c)?(l=FC(),Sf=hb=Di=null,ca=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return YC&&c.locale!=="ko"?null:c.data;default:return null}}var HI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eS(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!HI[l.type]:c==="textarea"}function tS(l,c,f,m){la?aa?aa.push(m):aa=[m]:la=m,c=hh(c,"onChange"),0<c.length&&(f=new Mf("onChange","change",null,f,m),l.push({event:f,listeners:c}))}var Fc=null,Gc=null;function PI(l){BE(l,0)}function Af(l){var c=Pc(l);if(IC(c))return l}function nS(l,c){if(l==="change")return c}var rS=!1;if(zo){var vb;if(zo){var wb="oninput"in document;if(!wb){var oS=document.createElement("div");oS.setAttribute("oninput","return;"),wb=typeof oS.oninput=="function"}vb=wb}else vb=!1;rS=vb&&(!document.documentMode||9<document.documentMode)}function iS(){Fc&&(Fc.detachEvent("onpropertychange",sS),Gc=Fc=null)}function sS(l){if(l.propertyName==="value"&&Af(Gc)){var c=[];tS(c,Gc,l,ub(l)),$C(PI,c)}}function jI(l,c,f){l==="focusin"?(iS(),Fc=c,Gc=f,Fc.attachEvent("onpropertychange",sS)):l==="focusout"&&iS()}function VI(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Af(Gc)}function zI(l,c){if(l==="click")return Af(c)}function UI(l,c){if(l==="input"||l==="change")return Af(c)}function $I(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var or=typeof Object.is=="function"?Object.is:$I;function qc(l,c){if(or(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var f=Object.keys(l),m=Object.keys(c);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var y=f[m];if(!vt.call(c,y)||!or(l[y],c[y]))return!1}return!0}function lS(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function aS(l,c){var f=lS(l);l=0;for(var m;f;){if(f.nodeType===3){if(m=l+f.textContent.length,l<=c&&m>=c)return{node:f,offset:c-l};l=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=lS(f)}}function cS(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?cS(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function uS(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=xf(l.document);c instanceof l.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)l=c.contentWindow;else break;c=xf(l.document)}return c}function xb(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var FI=zo&&"documentMode"in document&&11>=document.documentMode,ua=null,Cb=null,Kc=null,Sb=!1;function dS(l,c,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Sb||ua==null||ua!==xf(m)||(m=ua,"selectionStart"in m&&xb(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Kc&&qc(Kc,m)||(Kc=m,m=hh(Cb,"onSelect"),0<m.length&&(c=new Mf("onSelect","select",null,c,f),l.push({event:c,listeners:m}),c.target=ua)))}function Ys(l,c){var f={};return f[l.toLowerCase()]=c.toLowerCase(),f["Webkit"+l]="webkit"+c,f["Moz"+l]="moz"+c,f}var da={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},kb={},fS={};zo&&(fS=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Ws(l){if(kb[l])return kb[l];if(!da[l])return l;var c=da[l],f;for(f in c)if(c.hasOwnProperty(f)&&f in fS)return kb[l]=c[f];return l}var hS=Ws("animationend"),pS=Ws("animationiteration"),mS=Ws("animationstart"),GI=Ws("transitionrun"),qI=Ws("transitionstart"),KI=Ws("transitioncancel"),gS=Ws("transitionend"),bS=new Map,Eb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Eb.push("scrollEnd");function Kr(l,c){bS.set(l,c),Ks(c,[l])}var yS=new WeakMap;function Tr(l,c){if(typeof l=="object"&&l!==null){var f=yS.get(l);return f!==void 0?f:(c={value:l,source:c,stack:LC(c)},yS.set(l,c),c)}return{value:l,source:c,stack:LC(c)}}var Ar=[],fa=0,Mb=0;function Nf(){for(var l=fa,c=Mb=fa=0;c<l;){var f=Ar[c];Ar[c++]=null;var m=Ar[c];Ar[c++]=null;var y=Ar[c];Ar[c++]=null;var x=Ar[c];if(Ar[c++]=null,m!==null&&y!==null){var M=m.pending;M===null?y.next=y:(y.next=M.next,M.next=y),m.pending=y}x!==0&&vS(f,y,x)}}function Of(l,c,f,m){Ar[fa++]=l,Ar[fa++]=c,Ar[fa++]=f,Ar[fa++]=m,Mb|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function Tb(l,c,f,m){return Of(l,c,f,m),Rf(l)}function ha(l,c){return Of(l,null,null,c),Rf(l)}function vS(l,c,f){l.lanes|=f;var m=l.alternate;m!==null&&(m.lanes|=f);for(var y=!1,x=l.return;x!==null;)x.childLanes|=f,m=x.alternate,m!==null&&(m.childLanes|=f),x.tag===22&&(l=x.stateNode,l===null||l._visibility&1||(y=!0)),l=x,x=x.return;return l.tag===3?(x=l.stateNode,y&&c!==null&&(y=31-kt(f),l=x.hiddenUpdates,m=l[y],m===null?l[y]=[c]:m.push(c),c.lane=f|536870912),x):null}function Rf(l){if(50<yu)throw yu=0,_y=null,Error(r(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var pa={};function ZI(l,c,f,m){this.tag=l,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(l,c,f,m){return new ZI(l,c,f,m)}function Ab(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Uo(l,c){var f=l.alternate;return f===null?(f=ir(l.tag,c,l.key,l.mode),f.elementType=l.elementType,f.type=l.type,f.stateNode=l.stateNode,f.alternate=l,l.alternate=f):(f.pendingProps=c,f.type=l.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=l.flags&65011712,f.childLanes=l.childLanes,f.lanes=l.lanes,f.child=l.child,f.memoizedProps=l.memoizedProps,f.memoizedState=l.memoizedState,f.updateQueue=l.updateQueue,c=l.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=l.sibling,f.index=l.index,f.ref=l.ref,f.refCleanup=l.refCleanup,f}function wS(l,c){l.flags&=65011714;var f=l.alternate;return f===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,c=f.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function Df(l,c,f,m,y,x){var M=0;if(m=l,typeof l=="function")Ab(l)&&(M=1);else if(typeof l=="string")M=W8(l,f,ve.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case W:return l=ir(31,f,c,y),l.elementType=W,l.lanes=x,l;case v:return Xs(f.children,y,x,c);case C:M=8,y|=24;break;case k:return l=ir(12,f,c,y|2),l.elementType=k,l.lanes=x,l;case O:return l=ir(13,f,c,y),l.elementType=O,l.lanes=x,l;case $:return l=ir(19,f,c,y),l.elementType=$,l.lanes=x,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:case N:M=10;break e;case T:M=9;break e;case _:M=11;break e;case H:M=14;break e;case P:M=16,m=null;break e}M=29,f=Error(r(130,l===null?"null":typeof l,"")),m=null}return c=ir(M,f,c,y),c.elementType=l,c.type=m,c.lanes=x,c}function Xs(l,c,f,m){return l=ir(7,l,m,c),l.lanes=f,l}function Nb(l,c,f){return l=ir(6,l,null,c),l.lanes=f,l}function Ob(l,c,f){return c=ir(4,l.children!==null?l.children:[],l.key,c),c.lanes=f,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var ma=[],ga=0,_f=null,Lf=0,Nr=[],Or=0,Js=null,$o=1,Fo="";function Qs(l,c){ma[ga++]=Lf,ma[ga++]=_f,_f=l,Lf=c}function xS(l,c,f){Nr[Or++]=$o,Nr[Or++]=Fo,Nr[Or++]=Js,Js=l;var m=$o;l=Fo;var y=32-kt(m)-1;m&=~(1<<y),f+=1;var x=32-kt(c)+y;if(30<x){var M=y-y%5;x=(m&(1<<M)-1).toString(32),m>>=M,y-=M,$o=1<<32-kt(c)+y|f<<y|m,Fo=x+l}else $o=1<<x|f<<y|m,Fo=l}function Rb(l){l.return!==null&&(Qs(l,1),xS(l,1,0))}function Db(l){for(;l===_f;)_f=ma[--ga],ma[ga]=null,Lf=ma[--ga],ma[ga]=null;for(;l===Js;)Js=Nr[--Or],Nr[Or]=null,Fo=Nr[--Or],Nr[Or]=null,$o=Nr[--Or],Nr[Or]=null}var In=null,It=null,lt=!1,el=null,fo=!1,_b=Error(r(519));function tl(l){var c=Error(r(418,""));throw Wc(Tr(c,l)),_b}function CS(l){var c=l.stateNode,f=l.type,m=l.memoizedProps;switch(c[Mn]=l,c[Gn]=m,f){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(f=0;f<wu.length;f++)Xe(wu[f],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":Xe("invalid",c),HC(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),wf(c);break;case"select":Xe("invalid",c);break;case"textarea":Xe("invalid",c),jC(c,m.value,m.defaultValue,m.children),wf(c)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||m.suppressHydrationWarning===!0||jE(c.textContent,f)?(m.popover!=null&&(Xe("beforetoggle",c),Xe("toggle",c)),m.onScroll!=null&&Xe("scroll",c),m.onScrollEnd!=null&&Xe("scrollend",c),m.onClick!=null&&(c.onclick=ph),c=!0):c=!1,c||tl(l)}function SS(l){for(In=l.return;In;)switch(In.tag){case 5:case 13:fo=!1;return;case 27:case 3:fo=!0;return;default:In=In.return}}function Zc(l){if(l!==In)return!1;if(!lt)return SS(l),lt=!0,!1;var c=l.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=l.type,f=!(f!=="form"&&f!=="button")||Yy(l.type,l.memoizedProps)),f=!f),f&&It&&tl(l),SS(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8)if(f=l.data,f==="/$"){if(c===0){It=Yr(l.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;l=l.nextSibling}It=null}}else c===27?(c=It,Zi(l.type)?(l=Qy,Qy=null,It=l):It=c):It=In?Yr(l.stateNode.nextSibling):null;return!0}function Yc(){It=In=null,lt=!1}function kS(){var l=el;return l!==null&&(Yn===null?Yn=l:Yn.push.apply(Yn,l),el=null),l}function Wc(l){el===null?el=[l]:el.push(l)}var Lb=K(null),nl=null,Go=null;function _i(l,c,f){ce(Lb,c._currentValue),c._currentValue=f}function qo(l){l._currentValue=Lb.current,ae(Lb)}function Bb(l,c,f){for(;l!==null;){var m=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),l===f)break;l=l.return}}function Ib(l,c,f,m){var y=l.child;for(y!==null&&(y.return=l);y!==null;){var x=y.dependencies;if(x!==null){var M=y.child;x=x.firstContext;e:for(;x!==null;){var A=x;x=y;for(var D=0;D<c.length;D++)if(A.context===c[D]){x.lanes|=f,A=x.alternate,A!==null&&(A.lanes|=f),Bb(x.return,f,l),m||(M=null);break e}x=A.next}}else if(y.tag===18){if(M=y.return,M===null)throw Error(r(341));M.lanes|=f,x=M.alternate,x!==null&&(x.lanes|=f),Bb(M,f,l),M=null}else M=y.child;if(M!==null)M.return=y;else for(M=y;M!==null;){if(M===l){M=null;break}if(y=M.sibling,y!==null){y.return=M.return,M=y;break}M=M.return}y=M}}function Xc(l,c,f,m){l=null;for(var y=c,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var M=y.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var A=y.type;or(y.pendingProps.value,M.value)||(l!==null?l.push(A):l=[A])}}else if(y===ue.current){if(M=y.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(l!==null?l.push(Mu):l=[Mu])}y=y.return}l!==null&&Ib(c,l,f,m),c.flags|=262144}function Bf(l){for(l=l.firstContext;l!==null;){if(!or(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function rl(l){nl=l,Go=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Tn(l){return ES(nl,l)}function If(l,c){return nl===null&&rl(l),ES(l,c)}function ES(l,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Go===null){if(l===null)throw Error(r(308));Go=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else Go=Go.next=c;return f}var YI=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(f,m){l.push(m)}};this.abort=function(){c.aborted=!0,l.forEach(function(f){return f()})}},WI=t.unstable_scheduleCallback,XI=t.unstable_NormalPriority,en={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hb(){return{controller:new YI,data:new Map,refCount:0}}function Jc(l){l.refCount--,l.refCount===0&&WI(XI,function(){l.controller.abort()})}var Qc=null,Pb=0,ba=0,ya=null;function JI(l,c){if(Qc===null){var f=Qc=[];Pb=0,ba=Vy(),ya={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Pb++,c.then(MS,MS),c}function MS(){if(--Pb===0&&Qc!==null){ya!==null&&(ya.status="fulfilled");var l=Qc;Qc=null,ba=0,ya=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function QI(l,c){var f=[],m={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return l.then(function(){m.status="fulfilled",m.value=c;for(var y=0;y<f.length;y++)(0,f[y])(c)},function(y){for(m.status="rejected",m.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),m}var TS=B.S;B.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&JI(l,c),TS!==null&&TS(l,c)};var ol=K(null);function jb(){var l=ol.current;return l!==null?l:Et.pooledCache}function Hf(l,c){c===null?ce(ol,ol.current):ce(ol,c.pool)}function AS(){var l=jb();return l===null?null:{parent:en._currentValue,pool:l}}var eu=Error(r(460)),NS=Error(r(474)),Pf=Error(r(542)),Vb={then:function(){}};function OS(l){return l=l.status,l==="fulfilled"||l==="rejected"}function jf(){}function RS(l,c,f){switch(f=l[f],f===void 0?l.push(c):f!==c&&(c.then(jf,jf),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,_S(l),l;default:if(typeof c.status=="string")c.then(jf,jf);else{if(l=Et,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=c,l.status="pending",l.then(function(m){if(c.status==="pending"){var y=c;y.status="fulfilled",y.value=m}},function(m){if(c.status==="pending"){var y=c;y.status="rejected",y.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,_S(l),l}throw tu=c,eu}}var tu=null;function DS(){if(tu===null)throw Error(r(459));var l=tu;return tu=null,l}function _S(l){if(l===eu||l===Pf)throw Error(r(483))}var Li=!1;function zb(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ub(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Bi(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ii(l,c,f){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(ut&2)!==0){var y=m.pending;return y===null?c.next=c:(c.next=y.next,y.next=c),m.pending=c,c=Rf(l),vS(l,null,f),c}return Of(l,m,c,f),Rf(l)}function nu(l,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var m=c.lanes;m&=l.pendingLanes,f|=m,c.lanes=f,MC(l,f)}}function $b(l,c){var f=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var y=null,x=null;if(f=f.firstBaseUpdate,f!==null){do{var M={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};x===null?y=x=M:x=x.next=M,f=f.next}while(f!==null);x===null?y=x=c:x=x.next=c}else y=x=c;f={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:m.shared,callbacks:m.callbacks},l.updateQueue=f;return}l=f.lastBaseUpdate,l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=c}var Fb=!1;function ru(){if(Fb){var l=ya;if(l!==null)throw l}}function ou(l,c,f,m){Fb=!1;var y=l.updateQueue;Li=!1;var x=y.firstBaseUpdate,M=y.lastBaseUpdate,A=y.shared.pending;if(A!==null){y.shared.pending=null;var D=A,U=D.next;D.next=null,M===null?x=U:M.next=U,M=D;var Q=l.alternate;Q!==null&&(Q=Q.updateQueue,A=Q.lastBaseUpdate,A!==M&&(A===null?Q.firstBaseUpdate=U:A.next=U,Q.lastBaseUpdate=D))}if(x!==null){var re=y.baseState;M=0,Q=U=D=null,A=x;do{var G=A.lane&-536870913,q=G!==A.lane;if(q?(nt&G)===G:(m&G)===G){G!==0&&G===ba&&(Fb=!0),Q!==null&&(Q=Q.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var He=l,Le=A;G=c;var pt=f;switch(Le.tag){case 1:if(He=Le.payload,typeof He=="function"){re=He.call(pt,re,G);break e}re=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Le.payload,G=typeof He=="function"?He.call(pt,re,G):He,G==null)break e;re=h({},re,G);break e;case 2:Li=!0}}G=A.callback,G!==null&&(l.flags|=64,q&&(l.flags|=8192),q=y.callbacks,q===null?y.callbacks=[G]:q.push(G))}else q={lane:G,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Q===null?(U=Q=q,D=re):Q=Q.next=q,M|=G;if(A=A.next,A===null){if(A=y.shared.pending,A===null)break;q=A,A=q.next,q.next=null,y.lastBaseUpdate=q,y.shared.pending=null}}while(!0);Q===null&&(D=re),y.baseState=D,y.firstBaseUpdate=U,y.lastBaseUpdate=Q,x===null&&(y.shared.lanes=0),Fi|=M,l.lanes=M,l.memoizedState=re}}function LS(l,c){if(typeof l!="function")throw Error(r(191,l));l.call(c)}function BS(l,c){var f=l.callbacks;if(f!==null)for(l.callbacks=null,l=0;l<f.length;l++)LS(f[l],c)}var va=K(null),Vf=K(0);function IS(l,c){l=Qo,ce(Vf,l),ce(va,c),Qo=l|c.baseLanes}function Gb(){ce(Vf,Qo),ce(va,va.current)}function qb(){Qo=Vf.current,ae(va),ae(Vf)}var Hi=0,Ke=null,ft=null,Kt=null,zf=!1,wa=!1,il=!1,Uf=0,iu=0,xa=null,e8=0;function zt(){throw Error(r(321))}function Kb(l,c){if(c===null)return!1;for(var f=0;f<c.length&&f<l.length;f++)if(!or(l[f],c[f]))return!1;return!0}function Zb(l,c,f,m,y,x){return Hi=x,Ke=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,B.H=l===null||l.memoizedState===null?vk:wk,il=!1,x=f(m,y),il=!1,wa&&(x=PS(c,f,m,y)),HS(l),x}function HS(l){B.H=Zf;var c=ft!==null&&ft.next!==null;if(Hi=0,Kt=ft=Ke=null,zf=!1,iu=0,xa=null,c)throw Error(r(300));l===null||sn||(l=l.dependencies,l!==null&&Bf(l)&&(sn=!0))}function PS(l,c,f,m){Ke=l;var y=0;do{if(wa&&(xa=null),iu=0,wa=!1,25<=y)throw Error(r(301));if(y+=1,Kt=ft=null,l.updateQueue!=null){var x=l.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}B.H=l8,x=c(f,m)}while(wa);return x}function t8(){var l=B.H,c=l.useState()[0];return c=typeof c.then=="function"?su(c):c,l=l.useState()[0],(ft!==null?ft.memoizedState:null)!==l&&(Ke.flags|=1024),c}function Yb(){var l=Uf!==0;return Uf=0,l}function Wb(l,c,f){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~f}function Xb(l){if(zf){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}zf=!1}Hi=0,Kt=ft=Ke=null,wa=!1,iu=Uf=0,xa=null}function Kn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ke.memoizedState=Kt=l:Kt=Kt.next=l,Kt}function Zt(){if(ft===null){var l=Ke.alternate;l=l!==null?l.memoizedState:null}else l=ft.next;var c=Kt===null?Ke.memoizedState:Kt.next;if(c!==null)Kt=c,ft=l;else{if(l===null)throw Ke.alternate===null?Error(r(467)):Error(r(310));ft=l,l={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Kt===null?Ke.memoizedState=Kt=l:Kt=Kt.next=l}return Kt}function Jb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(l){var c=iu;return iu+=1,xa===null&&(xa=[]),l=RS(xa,l,c),c=Ke,(Kt===null?c.memoizedState:Kt.next)===null&&(c=c.alternate,B.H=c===null||c.memoizedState===null?vk:wk),l}function $f(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return su(l);if(l.$$typeof===N)return Tn(l)}throw Error(r(438,String(l)))}function Qb(l){var c=null,f=Ke.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var m=Ke.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(y){return y.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Jb(),Ke.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(l),m=0;m<l;m++)f[m]=ie;return c.index++,f}function Ko(l,c){return typeof c=="function"?c(l):c}function Ff(l){var c=Zt();return ey(c,ft,l)}function ey(l,c,f){var m=l.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var y=l.baseQueue,x=m.pending;if(x!==null){if(y!==null){var M=y.next;y.next=x.next,x.next=M}c.baseQueue=y=x,m.pending=null}if(x=l.baseState,y===null)l.memoizedState=x;else{c=y.next;var A=M=null,D=null,U=c,Q=!1;do{var re=U.lane&-536870913;if(re!==U.lane?(nt&re)===re:(Hi&re)===re){var G=U.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),re===ba&&(Q=!0);else if((Hi&G)===G){U=U.next,G===ba&&(Q=!0);continue}else re={lane:0,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(A=D=re,M=x):D=D.next=re,Ke.lanes|=G,Fi|=G;re=U.action,il&&f(x,re),x=U.hasEagerState?U.eagerState:f(x,re)}else G={lane:re,revertLane:U.revertLane,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},D===null?(A=D=G,M=x):D=D.next=G,Ke.lanes|=re,Fi|=re;U=U.next}while(U!==null&&U!==c);if(D===null?M=x:D.next=A,!or(x,l.memoizedState)&&(sn=!0,Q&&(f=ya,f!==null)))throw f;l.memoizedState=x,l.baseState=M,l.baseQueue=D,m.lastRenderedState=x}return y===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function ty(l){var c=Zt(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=l;var m=f.dispatch,y=f.pending,x=c.memoizedState;if(y!==null){f.pending=null;var M=y=y.next;do x=l(x,M.action),M=M.next;while(M!==y);or(x,c.memoizedState)||(sn=!0),c.memoizedState=x,c.baseQueue===null&&(c.baseState=x),f.lastRenderedState=x}return[x,m]}function jS(l,c,f){var m=Ke,y=Zt(),x=lt;if(x){if(f===void 0)throw Error(r(407));f=f()}else f=c();var M=!or((ft||y).memoizedState,f);M&&(y.memoizedState=f,sn=!0),y=y.queue;var A=US.bind(null,m,y,l);if(lu(2048,8,A,[l]),y.getSnapshot!==c||M||Kt!==null&&Kt.memoizedState.tag&1){if(m.flags|=2048,Ca(9,Gf(),zS.bind(null,m,y,f,c),null),Et===null)throw Error(r(349));x||(Hi&124)!==0||VS(m,c,f)}return f}function VS(l,c,f){l.flags|=16384,l={getSnapshot:c,value:f},c=Ke.updateQueue,c===null?(c=Jb(),Ke.updateQueue=c,c.stores=[l]):(f=c.stores,f===null?c.stores=[l]:f.push(l))}function zS(l,c,f,m){c.value=f,c.getSnapshot=m,$S(c)&&FS(l)}function US(l,c,f){return f(function(){$S(c)&&FS(l)})}function $S(l){var c=l.getSnapshot;l=l.value;try{var f=c();return!or(l,f)}catch{return!0}}function FS(l){var c=ha(l,2);c!==null&&ur(c,l,2)}function ny(l){var c=Kn();if(typeof l=="function"){var f=l;if(l=f(),il){tt(!0);try{f()}finally{tt(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:l},c}function GS(l,c,f,m){return l.baseState=f,ey(l,ft,typeof m=="function"?m:Ko)}function n8(l,c,f,m,y){if(Kf(l))throw Error(r(485));if(l=c.action,l!==null){var x={payload:y,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){x.listeners.push(M)}};B.T!==null?f(!0):x.isTransition=!1,m(x),f=c.pending,f===null?(x.next=c.pending=x,qS(c,x)):(x.next=f.next,c.pending=f.next=x)}}function qS(l,c){var f=c.action,m=c.payload,y=l.state;if(c.isTransition){var x=B.T,M={};B.T=M;try{var A=f(y,m),D=B.S;D!==null&&D(M,A),KS(l,c,A)}catch(U){ry(l,c,U)}finally{B.T=x}}else try{x=f(y,m),KS(l,c,x)}catch(U){ry(l,c,U)}}function KS(l,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){ZS(l,c,m)},function(m){return ry(l,c,m)}):ZS(l,c,f)}function ZS(l,c,f){c.status="fulfilled",c.value=f,YS(c),l.state=f,c=l.pending,c!==null&&(f=c.next,f===c?l.pending=null:(f=f.next,c.next=f,qS(l,f)))}function ry(l,c,f){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=f,YS(c),c=c.next;while(c!==m)}l.action=null}function YS(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function WS(l,c){return c}function XS(l,c){if(lt){var f=Et.formState;if(f!==null){e:{var m=Ke;if(lt){if(It){t:{for(var y=It,x=fo;y.nodeType!==8;){if(!x){y=null;break t}if(y=Yr(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){It=Yr(y.nextSibling),m=y.data==="F!";break e}}tl(m)}m=!1}m&&(c=f[0])}}return f=Kn(),f.memoizedState=f.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WS,lastRenderedState:c},f.queue=m,f=gk.bind(null,Ke,m),m.dispatch=f,m=ny(!1),x=ay.bind(null,Ke,!1,m.queue),m=Kn(),y={state:c,dispatch:null,action:l,pending:null},m.queue=y,f=n8.bind(null,Ke,y,x,f),y.dispatch=f,m.memoizedState=l,[c,f,!1]}function JS(l){var c=Zt();return QS(c,ft,l)}function QS(l,c,f){if(c=ey(l,c,WS)[0],l=Ff(Ko)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=su(c)}catch(M){throw M===eu?Pf:M}else m=c;c=Zt();var y=c.queue,x=y.dispatch;return f!==c.memoizedState&&(Ke.flags|=2048,Ca(9,Gf(),r8.bind(null,y,f),null)),[m,x,l]}function r8(l,c){l.action=c}function ek(l){var c=Zt(),f=ft;if(f!==null)return QS(c,f,l);Zt(),c=c.memoizedState,f=Zt();var m=f.queue.dispatch;return f.memoizedState=l,[c,m,!1]}function Ca(l,c,f,m){return l={tag:l,create:f,deps:m,inst:c,next:null},c=Ke.updateQueue,c===null&&(c=Jb(),Ke.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=l.next=l:(m=f.next,f.next=l,l.next=m,c.lastEffect=l),l}function Gf(){return{destroy:void 0,resource:void 0}}function tk(){return Zt().memoizedState}function qf(l,c,f,m){var y=Kn();m=m===void 0?null:m,Ke.flags|=l,y.memoizedState=Ca(1|c,Gf(),f,m)}function lu(l,c,f,m){var y=Zt();m=m===void 0?null:m;var x=y.memoizedState.inst;ft!==null&&m!==null&&Kb(m,ft.memoizedState.deps)?y.memoizedState=Ca(c,x,f,m):(Ke.flags|=l,y.memoizedState=Ca(1|c,x,f,m))}function nk(l,c){qf(8390656,8,l,c)}function rk(l,c){lu(2048,8,l,c)}function ok(l,c){return lu(4,2,l,c)}function ik(l,c){return lu(4,4,l,c)}function sk(l,c){if(typeof c=="function"){l=l();var f=c(l);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function lk(l,c,f){f=f!=null?f.concat([l]):null,lu(4,4,sk.bind(null,c,l),f)}function oy(){}function ak(l,c){var f=Zt();c=c===void 0?null:c;var m=f.memoizedState;return c!==null&&Kb(c,m[1])?m[0]:(f.memoizedState=[l,c],l)}function ck(l,c){var f=Zt();c=c===void 0?null:c;var m=f.memoizedState;if(c!==null&&Kb(c,m[1]))return m[0];if(m=l(),il){tt(!0);try{l()}finally{tt(!1)}}return f.memoizedState=[m,c],m}function iy(l,c,f){return f===void 0||(Hi&1073741824)!==0?l.memoizedState=c:(l.memoizedState=f,l=fE(),Ke.lanes|=l,Fi|=l,f)}function uk(l,c,f,m){return or(f,c)?f:va.current!==null?(l=iy(l,f,m),or(l,c)||(sn=!0),l):(Hi&42)===0?(sn=!0,l.memoizedState=f):(l=fE(),Ke.lanes|=l,Fi|=l,c)}function dk(l,c,f,m,y){var x=Y.p;Y.p=x!==0&&8>x?x:8;var M=B.T,A={};B.T=A,ay(l,!1,c,f);try{var D=y(),U=B.S;if(U!==null&&U(A,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Q=QI(D,m);au(l,c,Q,cr(l))}else au(l,c,m,cr(l))}catch(re){au(l,c,{then:function(){},status:"rejected",reason:re},cr())}finally{Y.p=x,B.T=M}}function o8(){}function sy(l,c,f,m){if(l.tag!==5)throw Error(r(476));var y=fk(l).queue;dk(l,y,c,J,f===null?o8:function(){return hk(l),f(m)})}function fk(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:J},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:f},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function hk(l){var c=fk(l).next.queue;au(l,c,{},cr())}function ly(){return Tn(Mu)}function pk(){return Zt().memoizedState}function mk(){return Zt().memoizedState}function i8(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var f=cr();l=Bi(f);var m=Ii(c,l,f);m!==null&&(ur(m,c,f),nu(m,c,f)),c={cache:Hb()},l.payload=c;return}c=c.return}}function s8(l,c,f){var m=cr();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Kf(l)?bk(c,f):(f=Tb(l,c,f,m),f!==null&&(ur(f,l,m),yk(f,c,m)))}function gk(l,c,f){var m=cr();au(l,c,f,m)}function au(l,c,f,m){var y={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Kf(l))bk(c,y);else{var x=l.alternate;if(l.lanes===0&&(x===null||x.lanes===0)&&(x=c.lastRenderedReducer,x!==null))try{var M=c.lastRenderedState,A=x(M,f);if(y.hasEagerState=!0,y.eagerState=A,or(A,M))return Of(l,c,y,0),Et===null&&Nf(),!1}catch{}finally{}if(f=Tb(l,c,y,m),f!==null)return ur(f,l,m),yk(f,c,m),!0}return!1}function ay(l,c,f,m){if(m={lane:2,revertLane:Vy(),action:m,hasEagerState:!1,eagerState:null,next:null},Kf(l)){if(c)throw Error(r(479))}else c=Tb(l,f,m,2),c!==null&&ur(c,l,2)}function Kf(l){var c=l.alternate;return l===Ke||c!==null&&c===Ke}function bk(l,c){wa=zf=!0;var f=l.pending;f===null?c.next=c:(c.next=f.next,f.next=c),l.pending=c}function yk(l,c,f){if((f&4194048)!==0){var m=c.lanes;m&=l.pendingLanes,f|=m,c.lanes=f,MC(l,f)}}var Zf={readContext:Tn,use:$f,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},vk={readContext:Tn,use:$f,useCallback:function(l,c){return Kn().memoizedState=[l,c===void 0?null:c],l},useContext:Tn,useEffect:nk,useImperativeHandle:function(l,c,f){f=f!=null?f.concat([l]):null,qf(4194308,4,sk.bind(null,c,l),f)},useLayoutEffect:function(l,c){return qf(4194308,4,l,c)},useInsertionEffect:function(l,c){qf(4,2,l,c)},useMemo:function(l,c){var f=Kn();c=c===void 0?null:c;var m=l();if(il){tt(!0);try{l()}finally{tt(!1)}}return f.memoizedState=[m,c],m},useReducer:function(l,c,f){var m=Kn();if(f!==void 0){var y=f(c);if(il){tt(!0);try{f(c)}finally{tt(!1)}}}else y=c;return m.memoizedState=m.baseState=y,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:y},m.queue=l,l=l.dispatch=s8.bind(null,Ke,l),[m.memoizedState,l]},useRef:function(l){var c=Kn();return l={current:l},c.memoizedState=l},useState:function(l){l=ny(l);var c=l.queue,f=gk.bind(null,Ke,c);return c.dispatch=f,[l.memoizedState,f]},useDebugValue:oy,useDeferredValue:function(l,c){var f=Kn();return iy(f,l,c)},useTransition:function(){var l=ny(!1);return l=dk.bind(null,Ke,l.queue,!0,!1),Kn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,f){var m=Ke,y=Kn();if(lt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),Et===null)throw Error(r(349));(nt&124)!==0||VS(m,c,f)}y.memoizedState=f;var x={value:f,getSnapshot:c};return y.queue=x,nk(US.bind(null,m,x,l),[l]),m.flags|=2048,Ca(9,Gf(),zS.bind(null,m,x,f,c),null),f},useId:function(){var l=Kn(),c=Et.identifierPrefix;if(lt){var f=Fo,m=$o;f=(m&~(1<<32-kt(m)-1)).toString(32)+f,c="«"+c+"R"+f,f=Uf++,0<f&&(c+="H"+f.toString(32)),c+="»"}else f=e8++,c="«"+c+"r"+f.toString(32)+"»";return l.memoizedState=c},useHostTransitionStatus:ly,useFormState:XS,useActionState:XS,useOptimistic:function(l){var c=Kn();c.memoizedState=c.baseState=l;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=ay.bind(null,Ke,!0,f),f.dispatch=c,[l,c]},useMemoCache:Qb,useCacheRefresh:function(){return Kn().memoizedState=i8.bind(null,Ke)}},wk={readContext:Tn,use:$f,useCallback:ak,useContext:Tn,useEffect:rk,useImperativeHandle:lk,useInsertionEffect:ok,useLayoutEffect:ik,useMemo:ck,useReducer:Ff,useRef:tk,useState:function(){return Ff(Ko)},useDebugValue:oy,useDeferredValue:function(l,c){var f=Zt();return uk(f,ft.memoizedState,l,c)},useTransition:function(){var l=Ff(Ko)[0],c=Zt().memoizedState;return[typeof l=="boolean"?l:su(l),c]},useSyncExternalStore:jS,useId:pk,useHostTransitionStatus:ly,useFormState:JS,useActionState:JS,useOptimistic:function(l,c){var f=Zt();return GS(f,ft,l,c)},useMemoCache:Qb,useCacheRefresh:mk},l8={readContext:Tn,use:$f,useCallback:ak,useContext:Tn,useEffect:rk,useImperativeHandle:lk,useInsertionEffect:ok,useLayoutEffect:ik,useMemo:ck,useReducer:ty,useRef:tk,useState:function(){return ty(Ko)},useDebugValue:oy,useDeferredValue:function(l,c){var f=Zt();return ft===null?iy(f,l,c):uk(f,ft.memoizedState,l,c)},useTransition:function(){var l=ty(Ko)[0],c=Zt().memoizedState;return[typeof l=="boolean"?l:su(l),c]},useSyncExternalStore:jS,useId:pk,useHostTransitionStatus:ly,useFormState:ek,useActionState:ek,useOptimistic:function(l,c){var f=Zt();return ft!==null?GS(f,ft,l,c):(f.baseState=l,[l,f.queue.dispatch])},useMemoCache:Qb,useCacheRefresh:mk},Sa=null,cu=0;function Yf(l){var c=cu;return cu+=1,Sa===null&&(Sa=[]),RS(Sa,l,c)}function uu(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function Wf(l,c){throw c.$$typeof===p?Error(r(525)):(l=Object.prototype.toString.call(c),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function xk(l){var c=l._init;return c(l._payload)}function Ck(l){function c(j,I){if(l){var z=j.deletions;z===null?(j.deletions=[I],j.flags|=16):z.push(I)}}function f(j,I){if(!l)return null;for(;I!==null;)c(j,I),I=I.sibling;return null}function m(j){for(var I=new Map;j!==null;)j.key!==null?I.set(j.key,j):I.set(j.index,j),j=j.sibling;return I}function y(j,I){return j=Uo(j,I),j.index=0,j.sibling=null,j}function x(j,I,z){return j.index=z,l?(z=j.alternate,z!==null?(z=z.index,z<I?(j.flags|=67108866,I):z):(j.flags|=67108866,I)):(j.flags|=1048576,I)}function M(j){return l&&j.alternate===null&&(j.flags|=67108866),j}function A(j,I,z,te){return I===null||I.tag!==6?(I=Nb(z,j.mode,te),I.return=j,I):(I=y(I,z),I.return=j,I)}function D(j,I,z,te){var Ce=z.type;return Ce===v?Q(j,I,z.props.children,te,z.key):I!==null&&(I.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===P&&xk(Ce)===I.type)?(I=y(I,z.props),uu(I,z),I.return=j,I):(I=Df(z.type,z.key,z.props,null,j.mode,te),uu(I,z),I.return=j,I)}function U(j,I,z,te){return I===null||I.tag!==4||I.stateNode.containerInfo!==z.containerInfo||I.stateNode.implementation!==z.implementation?(I=Ob(z,j.mode,te),I.return=j,I):(I=y(I,z.children||[]),I.return=j,I)}function Q(j,I,z,te,Ce){return I===null||I.tag!==7?(I=Xs(z,j.mode,te,Ce),I.return=j,I):(I=y(I,z),I.return=j,I)}function re(j,I,z){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=Nb(""+I,j.mode,z),I.return=j,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case g:return z=Df(I.type,I.key,I.props,null,j.mode,z),uu(z,I),z.return=j,z;case b:return I=Ob(I,j.mode,z),I.return=j,I;case P:var te=I._init;return I=te(I._payload),re(j,I,z)}if(oe(I)||ne(I))return I=Xs(I,j.mode,z,null),I.return=j,I;if(typeof I.then=="function")return re(j,Yf(I),z);if(I.$$typeof===N)return re(j,If(j,I),z);Wf(j,I)}return null}function G(j,I,z,te){var Ce=I!==null?I.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ce!==null?null:A(j,I,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case g:return z.key===Ce?D(j,I,z,te):null;case b:return z.key===Ce?U(j,I,z,te):null;case P:return Ce=z._init,z=Ce(z._payload),G(j,I,z,te)}if(oe(z)||ne(z))return Ce!==null?null:Q(j,I,z,te,null);if(typeof z.then=="function")return G(j,I,Yf(z),te);if(z.$$typeof===N)return G(j,I,If(j,z),te);Wf(j,z)}return null}function q(j,I,z,te,Ce){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return j=j.get(z)||null,A(I,j,""+te,Ce);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case g:return j=j.get(te.key===null?z:te.key)||null,D(I,j,te,Ce);case b:return j=j.get(te.key===null?z:te.key)||null,U(I,j,te,Ce);case P:var Ze=te._init;return te=Ze(te._payload),q(j,I,z,te,Ce)}if(oe(te)||ne(te))return j=j.get(z)||null,Q(I,j,te,Ce,null);if(typeof te.then=="function")return q(j,I,z,Yf(te),Ce);if(te.$$typeof===N)return q(j,I,z,If(I,te),Ce);Wf(I,te)}return null}function He(j,I,z,te){for(var Ce=null,Ze=null,Ae=I,Be=I=0,an=null;Ae!==null&&Be<z.length;Be++){Ae.index>Be?(an=Ae,Ae=null):an=Ae.sibling;var it=G(j,Ae,z[Be],te);if(it===null){Ae===null&&(Ae=an);break}l&&Ae&&it.alternate===null&&c(j,Ae),I=x(it,I,Be),Ze===null?Ce=it:Ze.sibling=it,Ze=it,Ae=an}if(Be===z.length)return f(j,Ae),lt&&Qs(j,Be),Ce;if(Ae===null){for(;Be<z.length;Be++)Ae=re(j,z[Be],te),Ae!==null&&(I=x(Ae,I,Be),Ze===null?Ce=Ae:Ze.sibling=Ae,Ze=Ae);return lt&&Qs(j,Be),Ce}for(Ae=m(Ae);Be<z.length;Be++)an=q(Ae,j,Be,z[Be],te),an!==null&&(l&&an.alternate!==null&&Ae.delete(an.key===null?Be:an.key),I=x(an,I,Be),Ze===null?Ce=an:Ze.sibling=an,Ze=an);return l&&Ae.forEach(function(Qi){return c(j,Qi)}),lt&&Qs(j,Be),Ce}function Le(j,I,z,te){if(z==null)throw Error(r(151));for(var Ce=null,Ze=null,Ae=I,Be=I=0,an=null,it=z.next();Ae!==null&&!it.done;Be++,it=z.next()){Ae.index>Be?(an=Ae,Ae=null):an=Ae.sibling;var Qi=G(j,Ae,it.value,te);if(Qi===null){Ae===null&&(Ae=an);break}l&&Ae&&Qi.alternate===null&&c(j,Ae),I=x(Qi,I,Be),Ze===null?Ce=Qi:Ze.sibling=Qi,Ze=Qi,Ae=an}if(it.done)return f(j,Ae),lt&&Qs(j,Be),Ce;if(Ae===null){for(;!it.done;Be++,it=z.next())it=re(j,it.value,te),it!==null&&(I=x(it,I,Be),Ze===null?Ce=it:Ze.sibling=it,Ze=it);return lt&&Qs(j,Be),Ce}for(Ae=m(Ae);!it.done;Be++,it=z.next())it=q(Ae,j,Be,it.value,te),it!==null&&(l&&it.alternate!==null&&Ae.delete(it.key===null?Be:it.key),I=x(it,I,Be),Ze===null?Ce=it:Ze.sibling=it,Ze=it);return l&&Ae.forEach(function(aH){return c(j,aH)}),lt&&Qs(j,Be),Ce}function pt(j,I,z,te){if(typeof z=="object"&&z!==null&&z.type===v&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case g:e:{for(var Ce=z.key;I!==null;){if(I.key===Ce){if(Ce=z.type,Ce===v){if(I.tag===7){f(j,I.sibling),te=y(I,z.props.children),te.return=j,j=te;break e}}else if(I.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===P&&xk(Ce)===I.type){f(j,I.sibling),te=y(I,z.props),uu(te,z),te.return=j,j=te;break e}f(j,I);break}else c(j,I);I=I.sibling}z.type===v?(te=Xs(z.props.children,j.mode,te,z.key),te.return=j,j=te):(te=Df(z.type,z.key,z.props,null,j.mode,te),uu(te,z),te.return=j,j=te)}return M(j);case b:e:{for(Ce=z.key;I!==null;){if(I.key===Ce)if(I.tag===4&&I.stateNode.containerInfo===z.containerInfo&&I.stateNode.implementation===z.implementation){f(j,I.sibling),te=y(I,z.children||[]),te.return=j,j=te;break e}else{f(j,I);break}else c(j,I);I=I.sibling}te=Ob(z,j.mode,te),te.return=j,j=te}return M(j);case P:return Ce=z._init,z=Ce(z._payload),pt(j,I,z,te)}if(oe(z))return He(j,I,z,te);if(ne(z)){if(Ce=ne(z),typeof Ce!="function")throw Error(r(150));return z=Ce.call(z),Le(j,I,z,te)}if(typeof z.then=="function")return pt(j,I,Yf(z),te);if(z.$$typeof===N)return pt(j,I,If(j,z),te);Wf(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,I!==null&&I.tag===6?(f(j,I.sibling),te=y(I,z),te.return=j,j=te):(f(j,I),te=Nb(z,j.mode,te),te.return=j,j=te),M(j)):f(j,I)}return function(j,I,z,te){try{cu=0;var Ce=pt(j,I,z,te);return Sa=null,Ce}catch(Ae){if(Ae===eu||Ae===Pf)throw Ae;var Ze=ir(29,Ae,null,j.mode);return Ze.lanes=te,Ze.return=j,Ze}finally{}}}var ka=Ck(!0),Sk=Ck(!1),Rr=K(null),ho=null;function Pi(l){var c=l.alternate;ce(tn,tn.current&1),ce(Rr,l),ho===null&&(c===null||va.current!==null||c.memoizedState!==null)&&(ho=l)}function kk(l){if(l.tag===22){if(ce(tn,tn.current),ce(Rr,l),ho===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(ho=l)}}else ji()}function ji(){ce(tn,tn.current),ce(Rr,Rr.current)}function Zo(l){ae(Rr),ho===l&&(ho=null),ae(tn)}var tn=K(0);function Xf(l){for(var c=l;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Jy(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function cy(l,c,f,m){c=l.memoizedState,f=f(m,c),f=f==null?c:h({},c,f),l.memoizedState=f,l.lanes===0&&(l.updateQueue.baseState=f)}var uy={enqueueSetState:function(l,c,f){l=l._reactInternals;var m=cr(),y=Bi(m);y.payload=c,f!=null&&(y.callback=f),c=Ii(l,y,m),c!==null&&(ur(c,l,m),nu(c,l,m))},enqueueReplaceState:function(l,c,f){l=l._reactInternals;var m=cr(),y=Bi(m);y.tag=1,y.payload=c,f!=null&&(y.callback=f),c=Ii(l,y,m),c!==null&&(ur(c,l,m),nu(c,l,m))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var f=cr(),m=Bi(f);m.tag=2,c!=null&&(m.callback=c),c=Ii(l,m,f),c!==null&&(ur(c,l,f),nu(c,l,f))}};function Ek(l,c,f,m,y,x,M){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,x,M):c.prototype&&c.prototype.isPureReactComponent?!qc(f,m)||!qc(y,x):!0}function Mk(l,c,f,m){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,m),c.state!==l&&uy.enqueueReplaceState(c,c.state,null)}function sl(l,c){var f=c;if("ref"in c){f={};for(var m in c)m!=="ref"&&(f[m]=c[m])}if(l=l.defaultProps){f===c&&(f=h({},f));for(var y in l)f[y]===void 0&&(f[y]=l[y])}return f}var Jf=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function Tk(l){Jf(l)}function Ak(l){console.error(l)}function Nk(l){Jf(l)}function Qf(l,c){try{var f=l.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function Ok(l,c,f){try{var m=l.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function dy(l,c,f){return f=Bi(f),f.tag=3,f.payload={element:null},f.callback=function(){Qf(l,c)},f}function Rk(l){return l=Bi(l),l.tag=3,l}function Dk(l,c,f,m){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var x=m.value;l.payload=function(){return y(x)},l.callback=function(){Ok(c,f,m)}}var M=f.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(l.callback=function(){Ok(c,f,m),typeof y!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var A=m.stack;this.componentDidCatch(m.value,{componentStack:A!==null?A:""})})}function a8(l,c,f,m,y){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=f.alternate,c!==null&&Xc(c,f,y,!0),f=Rr.current,f!==null){switch(f.tag){case 13:return ho===null?By():f.alternate===null&&Ht===0&&(Ht=3),f.flags&=-257,f.flags|=65536,f.lanes=y,m===Vb?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([m]):c.add(m),Hy(l,m,y)),!1;case 22:return f.flags|=65536,m===Vb?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([m]):f.add(m)),Hy(l,m,y)),!1}throw Error(r(435,f.tag))}return Hy(l,m,y),By(),!1}if(lt)return c=Rr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=y,m!==_b&&(l=Error(r(422),{cause:m}),Wc(Tr(l,f)))):(m!==_b&&(c=Error(r(423),{cause:m}),Wc(Tr(c,f))),l=l.current.alternate,l.flags|=65536,y&=-y,l.lanes|=y,m=Tr(m,f),y=dy(l.stateNode,m,y),$b(l,y),Ht!==4&&(Ht=2)),!1;var x=Error(r(520),{cause:m});if(x=Tr(x,f),bu===null?bu=[x]:bu.push(x),Ht!==4&&(Ht=2),c===null)return!0;m=Tr(m,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,l=y&-y,f.lanes|=l,l=dy(f.stateNode,m,l),$b(f,l),!1;case 1:if(c=f.type,x=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Gi===null||!Gi.has(x))))return f.flags|=65536,y&=-y,f.lanes|=y,y=Rk(y),Dk(y,l,f,m),$b(f,y),!1}f=f.return}while(f!==null);return!1}var _k=Error(r(461)),sn=!1;function bn(l,c,f,m){c.child=l===null?Sk(c,null,f,m):ka(c,l.child,f,m)}function Lk(l,c,f,m,y){f=f.render;var x=c.ref;if("ref"in m){var M={};for(var A in m)A!=="ref"&&(M[A]=m[A])}else M=m;return rl(c),m=Zb(l,c,f,M,x,y),A=Yb(),l!==null&&!sn?(Wb(l,c,y),Yo(l,c,y)):(lt&&A&&Rb(c),c.flags|=1,bn(l,c,m,y),c.child)}function Bk(l,c,f,m,y){if(l===null){var x=f.type;return typeof x=="function"&&!Ab(x)&&x.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=x,Ik(l,c,x,m,y)):(l=Df(f.type,null,m,c,c.mode,y),l.ref=c.ref,l.return=c,c.child=l)}if(x=l.child,!vy(l,y)){var M=x.memoizedProps;if(f=f.compare,f=f!==null?f:qc,f(M,m)&&l.ref===c.ref)return Yo(l,c,y)}return c.flags|=1,l=Uo(x,m),l.ref=c.ref,l.return=c,c.child=l}function Ik(l,c,f,m,y){if(l!==null){var x=l.memoizedProps;if(qc(x,m)&&l.ref===c.ref)if(sn=!1,c.pendingProps=m=x,vy(l,y))(l.flags&131072)!==0&&(sn=!0);else return c.lanes=l.lanes,Yo(l,c,y)}return fy(l,c,f,m,y)}function Hk(l,c,f){var m=c.pendingProps,y=m.children,x=l!==null?l.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=x!==null?x.baseLanes|f:f,l!==null){for(y=c.child=l.child,x=0;y!==null;)x=x|y.lanes|y.childLanes,y=y.sibling;c.childLanes=x&~m}else c.childLanes=0,c.child=null;return Pk(l,c,m,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&Hf(c,x!==null?x.cachePool:null),x!==null?IS(c,x):Gb(),kk(c);else return c.lanes=c.childLanes=536870912,Pk(l,c,x!==null?x.baseLanes|f:f,f)}else x!==null?(Hf(c,x.cachePool),IS(c,x),ji(),c.memoizedState=null):(l!==null&&Hf(c,null),Gb(),ji());return bn(l,c,y,f),c.child}function Pk(l,c,f,m){var y=jb();return y=y===null?null:{parent:en._currentValue,pool:y},c.memoizedState={baseLanes:f,cachePool:y},l!==null&&Hf(c,null),Gb(),kk(c),l!==null&&Xc(l,c,m,!0),null}function eh(l,c){var f=c.ref;if(f===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(l===null||l.ref!==f)&&(c.flags|=4194816)}}function fy(l,c,f,m,y){return rl(c),f=Zb(l,c,f,m,void 0,y),m=Yb(),l!==null&&!sn?(Wb(l,c,y),Yo(l,c,y)):(lt&&m&&Rb(c),c.flags|=1,bn(l,c,f,y),c.child)}function jk(l,c,f,m,y,x){return rl(c),c.updateQueue=null,f=PS(c,m,f,y),HS(l),m=Yb(),l!==null&&!sn?(Wb(l,c,x),Yo(l,c,x)):(lt&&m&&Rb(c),c.flags|=1,bn(l,c,f,x),c.child)}function Vk(l,c,f,m,y){if(rl(c),c.stateNode===null){var x=pa,M=f.contextType;typeof M=="object"&&M!==null&&(x=Tn(M)),x=new f(m,x),c.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=uy,c.stateNode=x,x._reactInternals=c,x=c.stateNode,x.props=m,x.state=c.memoizedState,x.refs={},zb(c),M=f.contextType,x.context=typeof M=="object"&&M!==null?Tn(M):pa,x.state=c.memoizedState,M=f.getDerivedStateFromProps,typeof M=="function"&&(cy(c,f,M,m),x.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(M=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),M!==x.state&&uy.enqueueReplaceState(x,x.state,null),ou(c,m,x,y),ru(),x.state=c.memoizedState),typeof x.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(l===null){x=c.stateNode;var A=c.memoizedProps,D=sl(f,A);x.props=D;var U=x.context,Q=f.contextType;M=pa,typeof Q=="object"&&Q!==null&&(M=Tn(Q));var re=f.getDerivedStateFromProps;Q=typeof re=="function"||typeof x.getSnapshotBeforeUpdate=="function",A=c.pendingProps!==A,Q||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A||U!==M)&&Mk(c,x,m,M),Li=!1;var G=c.memoizedState;x.state=G,ou(c,m,x,y),ru(),U=c.memoizedState,A||G!==U||Li?(typeof re=="function"&&(cy(c,f,re,m),U=c.memoizedState),(D=Li||Ek(c,f,D,m,G,U,M))?(Q||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(c.flags|=4194308)):(typeof x.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=U),x.props=m,x.state=U,x.context=M,m=D):(typeof x.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{x=c.stateNode,Ub(l,c),M=c.memoizedProps,Q=sl(f,M),x.props=Q,re=c.pendingProps,G=x.context,U=f.contextType,D=pa,typeof U=="object"&&U!==null&&(D=Tn(U)),A=f.getDerivedStateFromProps,(U=typeof A=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(M!==re||G!==D)&&Mk(c,x,m,D),Li=!1,G=c.memoizedState,x.state=G,ou(c,m,x,y),ru();var q=c.memoizedState;M!==re||G!==q||Li||l!==null&&l.dependencies!==null&&Bf(l.dependencies)?(typeof A=="function"&&(cy(c,f,A,m),q=c.memoizedState),(Q=Li||Ek(c,f,Q,m,G,q,D)||l!==null&&l.dependencies!==null&&Bf(l.dependencies))?(U||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(m,q,D),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(m,q,D)),typeof x.componentDidUpdate=="function"&&(c.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof x.componentDidUpdate!="function"||M===l.memoizedProps&&G===l.memoizedState||(c.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||M===l.memoizedProps&&G===l.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=q),x.props=m,x.state=q,x.context=D,m=Q):(typeof x.componentDidUpdate!="function"||M===l.memoizedProps&&G===l.memoizedState||(c.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||M===l.memoizedProps&&G===l.memoizedState||(c.flags|=1024),m=!1)}return x=m,eh(l,c),m=(c.flags&128)!==0,x||m?(x=c.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:x.render(),c.flags|=1,l!==null&&m?(c.child=ka(c,l.child,null,y),c.child=ka(c,null,f,y)):bn(l,c,f,y),c.memoizedState=x.state,l=c.child):l=Yo(l,c,y),l}function zk(l,c,f,m){return Yc(),c.flags|=256,bn(l,c,f,m),c.child}var hy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function py(l){return{baseLanes:l,cachePool:AS()}}function my(l,c,f){return l=l!==null?l.childLanes&~f:0,c&&(l|=Dr),l}function Uk(l,c,f){var m=c.pendingProps,y=!1,x=(c.flags&128)!==0,M;if((M=x)||(M=l!==null&&l.memoizedState===null?!1:(tn.current&2)!==0),M&&(y=!0,c.flags&=-129),M=(c.flags&32)!==0,c.flags&=-33,l===null){if(lt){if(y?Pi(c):ji(),lt){var A=It,D;if(D=A){e:{for(D=A,A=fo;D.nodeType!==8;){if(!A){A=null;break e}if(D=Yr(D.nextSibling),D===null){A=null;break e}}A=D}A!==null?(c.memoizedState={dehydrated:A,treeContext:Js!==null?{id:$o,overflow:Fo}:null,retryLane:536870912,hydrationErrors:null},D=ir(18,null,null,0),D.stateNode=A,D.return=c,c.child=D,In=c,It=null,D=!0):D=!1}D||tl(c)}if(A=c.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Jy(A)?c.lanes=32:c.lanes=536870912,null;Zo(c)}return A=m.children,m=m.fallback,y?(ji(),y=c.mode,A=th({mode:"hidden",children:A},y),m=Xs(m,y,f,null),A.return=c,m.return=c,A.sibling=m,c.child=A,y=c.child,y.memoizedState=py(f),y.childLanes=my(l,M,f),c.memoizedState=hy,m):(Pi(c),gy(c,A))}if(D=l.memoizedState,D!==null&&(A=D.dehydrated,A!==null)){if(x)c.flags&256?(Pi(c),c.flags&=-257,c=by(l,c,f)):c.memoizedState!==null?(ji(),c.child=l.child,c.flags|=128,c=null):(ji(),y=m.fallback,A=c.mode,m=th({mode:"visible",children:m.children},A),y=Xs(y,A,f,null),y.flags|=2,m.return=c,y.return=c,m.sibling=y,c.child=m,ka(c,l.child,null,f),m=c.child,m.memoizedState=py(f),m.childLanes=my(l,M,f),c.memoizedState=hy,c=y);else if(Pi(c),Jy(A)){if(M=A.nextSibling&&A.nextSibling.dataset,M)var U=M.dgst;M=U,m=Error(r(419)),m.stack="",m.digest=M,Wc({value:m,source:null,stack:null}),c=by(l,c,f)}else if(sn||Xc(l,c,f,!1),M=(f&l.childLanes)!==0,sn||M){if(M=Et,M!==null&&(m=f&-f,m=(m&42)!==0?1:Qg(m),m=(m&(M.suspendedLanes|f))!==0?0:m,m!==0&&m!==D.retryLane))throw D.retryLane=m,ha(l,m),ur(M,l,m),_k;A.data==="$?"||By(),c=by(l,c,f)}else A.data==="$?"?(c.flags|=192,c.child=l.child,c=null):(l=D.treeContext,It=Yr(A.nextSibling),In=c,lt=!0,el=null,fo=!1,l!==null&&(Nr[Or++]=$o,Nr[Or++]=Fo,Nr[Or++]=Js,$o=l.id,Fo=l.overflow,Js=c),c=gy(c,m.children),c.flags|=4096);return c}return y?(ji(),y=m.fallback,A=c.mode,D=l.child,U=D.sibling,m=Uo(D,{mode:"hidden",children:m.children}),m.subtreeFlags=D.subtreeFlags&65011712,U!==null?y=Uo(U,y):(y=Xs(y,A,f,null),y.flags|=2),y.return=c,m.return=c,m.sibling=y,c.child=m,m=y,y=c.child,A=l.child.memoizedState,A===null?A=py(f):(D=A.cachePool,D!==null?(U=en._currentValue,D=D.parent!==U?{parent:U,pool:U}:D):D=AS(),A={baseLanes:A.baseLanes|f,cachePool:D}),y.memoizedState=A,y.childLanes=my(l,M,f),c.memoizedState=hy,m):(Pi(c),f=l.child,l=f.sibling,f=Uo(f,{mode:"visible",children:m.children}),f.return=c,f.sibling=null,l!==null&&(M=c.deletions,M===null?(c.deletions=[l],c.flags|=16):M.push(l)),c.child=f,c.memoizedState=null,f)}function gy(l,c){return c=th({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function th(l,c){return l=ir(22,l,null,c),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function by(l,c,f){return ka(c,l.child,null,f),l=gy(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function $k(l,c,f){l.lanes|=c;var m=l.alternate;m!==null&&(m.lanes|=c),Bb(l.return,c,f)}function yy(l,c,f,m,y){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:y}:(x.isBackwards=c,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=f,x.tailMode=y)}function Fk(l,c,f){var m=c.pendingProps,y=m.revealOrder,x=m.tail;if(bn(l,c,m.children,f),m=tn.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&$k(l,f,c);else if(l.tag===19)$k(l,f,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}m&=1}switch(ce(tn,m),y){case"forwards":for(f=c.child,y=null;f!==null;)l=f.alternate,l!==null&&Xf(l)===null&&(y=f),f=f.sibling;f=y,f===null?(y=c.child,c.child=null):(y=f.sibling,f.sibling=null),yy(c,!1,y,f,x);break;case"backwards":for(f=null,y=c.child,c.child=null;y!==null;){if(l=y.alternate,l!==null&&Xf(l)===null){c.child=y;break}l=y.sibling,y.sibling=f,f=y,y=l}yy(c,!0,f,null,x);break;case"together":yy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Yo(l,c,f){if(l!==null&&(c.dependencies=l.dependencies),Fi|=c.lanes,(f&c.childLanes)===0)if(l!==null){if(Xc(l,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(r(153));if(c.child!==null){for(l=c.child,f=Uo(l,l.pendingProps),c.child=f,f.return=c;l.sibling!==null;)l=l.sibling,f=f.sibling=Uo(l,l.pendingProps),f.return=c;f.sibling=null}return c.child}function vy(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&Bf(l)))}function c8(l,c,f){switch(c.tag){case 3:Te(c,c.stateNode.containerInfo),_i(c,en,l.memoizedState.cache),Yc();break;case 27:case 5:rt(c);break;case 4:Te(c,c.stateNode.containerInfo);break;case 10:_i(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(Pi(c),c.flags|=128,null):(f&c.child.childLanes)!==0?Uk(l,c,f):(Pi(c),l=Yo(l,c,f),l!==null?l.sibling:null);Pi(c);break;case 19:var y=(l.flags&128)!==0;if(m=(f&c.childLanes)!==0,m||(Xc(l,c,f,!1),m=(f&c.childLanes)!==0),y){if(m)return Fk(l,c,f);c.flags|=128}if(y=c.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ce(tn,tn.current),m)break;return null;case 22:case 23:return c.lanes=0,Hk(l,c,f);case 24:_i(c,en,l.memoizedState.cache)}return Yo(l,c,f)}function Gk(l,c,f){if(l!==null)if(l.memoizedProps!==c.pendingProps)sn=!0;else{if(!vy(l,f)&&(c.flags&128)===0)return sn=!1,c8(l,c,f);sn=(l.flags&131072)!==0}else sn=!1,lt&&(c.flags&1048576)!==0&&xS(c,Lf,c.index);switch(c.lanes=0,c.tag){case 16:e:{l=c.pendingProps;var m=c.elementType,y=m._init;if(m=y(m._payload),c.type=m,typeof m=="function")Ab(m)?(l=sl(m,l),c.tag=1,c=Vk(null,c,m,l,f)):(c.tag=0,c=fy(null,c,m,l,f));else{if(m!=null){if(y=m.$$typeof,y===_){c.tag=11,c=Lk(null,c,m,l,f);break e}else if(y===H){c.tag=14,c=Bk(null,c,m,l,f);break e}}throw c=he(m)||m,Error(r(306,c,""))}}return c;case 0:return fy(l,c,c.type,c.pendingProps,f);case 1:return m=c.type,y=sl(m,c.pendingProps),Vk(l,c,m,y,f);case 3:e:{if(Te(c,c.stateNode.containerInfo),l===null)throw Error(r(387));m=c.pendingProps;var x=c.memoizedState;y=x.element,Ub(l,c),ou(c,m,null,f);var M=c.memoizedState;if(m=M.cache,_i(c,en,m),m!==x.cache&&Ib(c,[en],f,!0),ru(),m=M.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:M.cache},c.updateQueue.baseState=x,c.memoizedState=x,c.flags&256){c=zk(l,c,m,f);break e}else if(m!==y){y=Tr(Error(r(424)),c),Wc(y),c=zk(l,c,m,f);break e}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(It=Yr(l.firstChild),In=c,lt=!0,el=null,fo=!0,f=Sk(c,null,m,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Yc(),m===y){c=Yo(l,c,f);break e}bn(l,c,m,f)}c=c.child}return c;case 26:return eh(l,c),l===null?(f=YE(c.type,null,c.pendingProps,null))?c.memoizedState=f:lt||(f=c.type,l=c.pendingProps,m=mh(me.current).createElement(f),m[Mn]=c,m[Gn]=l,vn(m,f,l),on(m),c.stateNode=m):c.memoizedState=YE(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return rt(c),l===null&&lt&&(m=c.stateNode=qE(c.type,c.pendingProps,me.current),In=c,fo=!0,y=It,Zi(c.type)?(Qy=y,It=Yr(m.firstChild)):It=y),bn(l,c,c.pendingProps.children,f),eh(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&lt&&((y=m=It)&&(m=H8(m,c.type,c.pendingProps,fo),m!==null?(c.stateNode=m,In=c,It=Yr(m.firstChild),fo=!1,y=!0):y=!1),y||tl(c)),rt(c),y=c.type,x=c.pendingProps,M=l!==null?l.memoizedProps:null,m=x.children,Yy(y,x)?m=null:M!==null&&Yy(y,M)&&(c.flags|=32),c.memoizedState!==null&&(y=Zb(l,c,t8,null,null,f),Mu._currentValue=y),eh(l,c),bn(l,c,m,f),c.child;case 6:return l===null&&lt&&((l=f=It)&&(f=P8(f,c.pendingProps,fo),f!==null?(c.stateNode=f,In=c,It=null,l=!0):l=!1),l||tl(c)),null;case 13:return Uk(l,c,f);case 4:return Te(c,c.stateNode.containerInfo),m=c.pendingProps,l===null?c.child=ka(c,null,m,f):bn(l,c,m,f),c.child;case 11:return Lk(l,c,c.type,c.pendingProps,f);case 7:return bn(l,c,c.pendingProps,f),c.child;case 8:return bn(l,c,c.pendingProps.children,f),c.child;case 12:return bn(l,c,c.pendingProps.children,f),c.child;case 10:return m=c.pendingProps,_i(c,c.type,m.value),bn(l,c,m.children,f),c.child;case 9:return y=c.type._context,m=c.pendingProps.children,rl(c),y=Tn(y),m=m(y),c.flags|=1,bn(l,c,m,f),c.child;case 14:return Bk(l,c,c.type,c.pendingProps,f);case 15:return Ik(l,c,c.type,c.pendingProps,f);case 19:return Fk(l,c,f);case 31:return m=c.pendingProps,f=c.mode,m={mode:m.mode,children:m.children},l===null?(f=th(m,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Uo(l.child,m),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return Hk(l,c,f);case 24:return rl(c),m=Tn(en),l===null?(y=jb(),y===null&&(y=Et,x=Hb(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=f),y=x),c.memoizedState={parent:m,cache:y},zb(c),_i(c,en,y)):((l.lanes&f)!==0&&(Ub(l,c),ou(c,null,null,f),ru()),y=l.memoizedState,x=c.memoizedState,y.parent!==m?(y={parent:m,cache:m},c.memoizedState=y,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=y),_i(c,en,m)):(m=x.cache,_i(c,en,m),m!==y.cache&&Ib(c,[en],f,!0))),bn(l,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Wo(l){l.flags|=4}function qk(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!e2(c)){if(c=Rr.current,c!==null&&((nt&4194048)===nt?ho!==null:(nt&62914560)!==nt&&(nt&536870912)===0||c!==ho))throw tu=Vb,NS;l.flags|=8192}}function nh(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?kC():536870912,l.lanes|=c,Aa|=c)}function du(l,c){if(!lt)switch(l.tailMode){case"hidden":c=l.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?l.tail=null:f.sibling=null;break;case"collapsed":f=l.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function Lt(l){var c=l.alternate!==null&&l.alternate.child===l.child,f=0,m=0;if(c)for(var y=l.child;y!==null;)f|=y.lanes|y.childLanes,m|=y.subtreeFlags&65011712,m|=y.flags&65011712,y.return=l,y=y.sibling;else for(y=l.child;y!==null;)f|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=l,y=y.sibling;return l.subtreeFlags|=m,l.childLanes=f,c}function u8(l,c,f){var m=c.pendingProps;switch(Db(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(c),null;case 1:return Lt(c),null;case 3:return f=c.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),qo(en),ct(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(l===null||l.child===null)&&(Zc(c)?Wo(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,kS())),Lt(c),null;case 26:return f=c.memoizedState,l===null?(Wo(c),f!==null?(Lt(c),qk(c,f)):(Lt(c),c.flags&=-16777217)):f?f!==l.memoizedState?(Wo(c),Lt(c),qk(c,f)):(Lt(c),c.flags&=-16777217):(l.memoizedProps!==m&&Wo(c),Lt(c),c.flags&=-16777217),null;case 27:st(c),f=me.current;var y=c.type;if(l!==null&&c.stateNode!=null)l.memoizedProps!==m&&Wo(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return Lt(c),null}l=ve.current,Zc(c)?CS(c):(l=qE(y,m,f),c.stateNode=l,Wo(c))}return Lt(c),null;case 5:if(st(c),f=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==m&&Wo(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return Lt(c),null}if(l=ve.current,Zc(c))CS(c);else{switch(y=mh(me.current),l){case 1:l=y.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:l=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":l=y.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":l=y.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":l=y.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof m.is=="string"?y.createElement("select",{is:m.is}):y.createElement("select"),m.multiple?l.multiple=!0:m.size&&(l.size=m.size);break;default:l=typeof m.is=="string"?y.createElement(f,{is:m.is}):y.createElement(f)}}l[Mn]=c,l[Gn]=m;e:for(y=c.child;y!==null;){if(y.tag===5||y.tag===6)l.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===c)break e;for(;y.sibling===null;){if(y.return===null||y.return===c)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}c.stateNode=l;e:switch(vn(l,f,m),f){case"button":case"input":case"select":case"textarea":l=!!m.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Wo(c)}}return Lt(c),c.flags&=-16777217,null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==m&&Wo(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(r(166));if(l=me.current,Zc(c)){if(l=c.stateNode,f=c.memoizedProps,m=null,y=In,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}l[Mn]=c,l=!!(l.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||jE(l.nodeValue,f)),l||tl(c)}else l=mh(l).createTextNode(m),l[Mn]=c,c.stateNode=l}return Lt(c),null;case 13:if(m=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(y=Zc(c),m!==null&&m.dehydrated!==null){if(l===null){if(!y)throw Error(r(318));if(y=c.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Mn]=c}else Yc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Lt(c),y=!1}else y=kS(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=y),y=!0;if(!y)return c.flags&256?(Zo(c),c):(Zo(c),null)}if(Zo(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=m!==null,l=l!==null&&l.memoizedState!==null,f){m=c.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool);var x=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(x=m.memoizedState.cachePool.pool),x!==y&&(m.flags|=2048)}return f!==l&&f&&(c.child.flags|=8192),nh(c,c.updateQueue),Lt(c),null;case 4:return ct(),l===null&&Fy(c.stateNode.containerInfo),Lt(c),null;case 10:return qo(c.type),Lt(c),null;case 19:if(ae(tn),y=c.memoizedState,y===null)return Lt(c),null;if(m=(c.flags&128)!==0,x=y.rendering,x===null)if(m)du(y,!1);else{if(Ht!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(x=Xf(l),x!==null){for(c.flags|=128,du(y,!1),l=x.updateQueue,c.updateQueue=l,nh(c,l),c.subtreeFlags=0,l=f,f=c.child;f!==null;)wS(f,l),f=f.sibling;return ce(tn,tn.current&1|2),c.child}l=l.sibling}y.tail!==null&&En()>ih&&(c.flags|=128,m=!0,du(y,!1),c.lanes=4194304)}else{if(!m)if(l=Xf(x),l!==null){if(c.flags|=128,m=!0,l=l.updateQueue,c.updateQueue=l,nh(c,l),du(y,!0),y.tail===null&&y.tailMode==="hidden"&&!x.alternate&&!lt)return Lt(c),null}else 2*En()-y.renderingStartTime>ih&&f!==536870912&&(c.flags|=128,m=!0,du(y,!1),c.lanes=4194304);y.isBackwards?(x.sibling=c.child,c.child=x):(l=y.last,l!==null?l.sibling=x:c.child=x,y.last=x)}return y.tail!==null?(c=y.tail,y.rendering=c,y.tail=c.sibling,y.renderingStartTime=En(),c.sibling=null,l=tn.current,ce(tn,m?l&1|2:l&1),c):(Lt(c),null);case 22:case 23:return Zo(c),qb(),m=c.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(f&536870912)!==0&&(c.flags&128)===0&&(Lt(c),c.subtreeFlags&6&&(c.flags|=8192)):Lt(c),f=c.updateQueue,f!==null&&nh(c,f.retryQueue),f=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048),l!==null&&ae(ol),null;case 24:return f=null,l!==null&&(f=l.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),qo(en),Lt(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function d8(l,c){switch(Db(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return qo(en),ct(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return st(c),null;case 13:if(Zo(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Yc()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return ae(tn),null;case 4:return ct(),null;case 10:return qo(c.type),null;case 22:case 23:return Zo(c),qb(),l!==null&&ae(ol),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return qo(en),null;case 25:return null;default:return null}}function Kk(l,c){switch(Db(c),c.tag){case 3:qo(en),ct();break;case 26:case 27:case 5:st(c);break;case 4:ct();break;case 13:Zo(c);break;case 19:ae(tn);break;case 10:qo(c.type);break;case 22:case 23:Zo(c),qb(),l!==null&&ae(ol);break;case 24:qo(en)}}function fu(l,c){try{var f=c.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var y=m.next;f=y;do{if((f.tag&l)===l){m=void 0;var x=f.create,M=f.inst;m=x(),M.destroy=m}f=f.next}while(f!==y)}}catch(A){wt(c,c.return,A)}}function Vi(l,c,f){try{var m=c.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var x=y.next;m=x;do{if((m.tag&l)===l){var M=m.inst,A=M.destroy;if(A!==void 0){M.destroy=void 0,y=c;var D=f,U=A;try{U()}catch(Q){wt(y,D,Q)}}}m=m.next}while(m!==x)}}catch(Q){wt(c,c.return,Q)}}function Zk(l){var c=l.updateQueue;if(c!==null){var f=l.stateNode;try{BS(c,f)}catch(m){wt(l,l.return,m)}}}function Yk(l,c,f){f.props=sl(l.type,l.memoizedProps),f.state=l.memoizedState;try{f.componentWillUnmount()}catch(m){wt(l,c,m)}}function hu(l,c){try{var f=l.ref;if(f!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof f=="function"?l.refCleanup=f(m):f.current=m}}catch(y){wt(l,c,y)}}function po(l,c){var f=l.ref,m=l.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(y){wt(l,c,y)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){wt(l,c,y)}else f.current=null}function Wk(l){var c=l.type,f=l.memoizedProps,m=l.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(y){wt(l,l.return,y)}}function wy(l,c,f){try{var m=l.stateNode;D8(m,l.type,f,c),m[Gn]=c}catch(y){wt(l,l.return,y)}}function Xk(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Zi(l.type)||l.tag===4}function xy(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Xk(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Zi(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Cy(l,c,f){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(l,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(l),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=ph));else if(m!==4&&(m===27&&Zi(l.type)&&(f=l.stateNode,c=null),l=l.child,l!==null))for(Cy(l,c,f),l=l.sibling;l!==null;)Cy(l,c,f),l=l.sibling}function rh(l,c,f){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?f.insertBefore(l,c):f.appendChild(l);else if(m!==4&&(m===27&&Zi(l.type)&&(f=l.stateNode),l=l.child,l!==null))for(rh(l,c,f),l=l.sibling;l!==null;)rh(l,c,f),l=l.sibling}function Jk(l){var c=l.stateNode,f=l.memoizedProps;try{for(var m=l.type,y=c.attributes;y.length;)c.removeAttributeNode(y[0]);vn(c,m,f),c[Mn]=l,c[Gn]=f}catch(x){wt(l,l.return,x)}}var Xo=!1,Ut=!1,Sy=!1,Qk=typeof WeakSet=="function"?WeakSet:Set,ln=null;function f8(l,c){if(l=l.containerInfo,Ky=xh,l=uS(l),xb(l)){if("selectionStart"in l)var f={start:l.selectionStart,end:l.selectionEnd};else e:{f=(f=l.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var y=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{f.nodeType,x.nodeType}catch{f=null;break e}var M=0,A=-1,D=-1,U=0,Q=0,re=l,G=null;t:for(;;){for(var q;re!==f||y!==0&&re.nodeType!==3||(A=M+y),re!==x||m!==0&&re.nodeType!==3||(D=M+m),re.nodeType===3&&(M+=re.nodeValue.length),(q=re.firstChild)!==null;)G=re,re=q;for(;;){if(re===l)break t;if(G===f&&++U===y&&(A=M),G===x&&++Q===m&&(D=M),(q=re.nextSibling)!==null)break;re=G,G=re.parentNode}re=q}f=A===-1||D===-1?null:{start:A,end:D}}else f=null}f=f||{start:0,end:0}}else f=null;for(Zy={focusedElem:l,selectionRange:f},xh=!1,ln=c;ln!==null;)if(c=ln,l=c.child,(c.subtreeFlags&1024)!==0&&l!==null)l.return=c,ln=l;else for(;ln!==null;){switch(c=ln,x=c.alternate,l=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&x!==null){l=void 0,f=c,y=x.memoizedProps,x=x.memoizedState,m=f.stateNode;try{var He=sl(f.type,y,f.elementType===f.type);l=m.getSnapshotBeforeUpdate(He,x),m.__reactInternalSnapshotBeforeUpdate=l}catch(Le){wt(f,f.return,Le)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,f=l.nodeType,f===9)Xy(l);else if(f===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Xy(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=c.sibling,l!==null){l.return=c.return,ln=l;break}ln=c.return}}function eE(l,c,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:zi(l,f),m&4&&fu(5,f);break;case 1:if(zi(l,f),m&4)if(l=f.stateNode,c===null)try{l.componentDidMount()}catch(M){wt(f,f.return,M)}else{var y=sl(f.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(y,c,l.__reactInternalSnapshotBeforeUpdate)}catch(M){wt(f,f.return,M)}}m&64&&Zk(f),m&512&&hu(f,f.return);break;case 3:if(zi(l,f),m&64&&(l=f.updateQueue,l!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{BS(l,c)}catch(M){wt(f,f.return,M)}}break;case 27:c===null&&m&4&&Jk(f);case 26:case 5:zi(l,f),c===null&&m&4&&Wk(f),m&512&&hu(f,f.return);break;case 12:zi(l,f);break;case 13:zi(l,f),m&4&&rE(l,f),m&64&&(l=f.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(f=x8.bind(null,f),j8(l,f))));break;case 22:if(m=f.memoizedState!==null||Xo,!m){c=c!==null&&c.memoizedState!==null||Ut,y=Xo;var x=Ut;Xo=m,(Ut=c)&&!x?Ui(l,f,(f.subtreeFlags&8772)!==0):zi(l,f),Xo=y,Ut=x}break;case 30:break;default:zi(l,f)}}function tE(l){var c=l.alternate;c!==null&&(l.alternate=null,tE(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&nb(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Ot=null,Zn=!1;function Jo(l,c,f){for(f=f.child;f!==null;)nE(l,c,f),f=f.sibling}function nE(l,c,f){if(Pe&&typeof Pe.onCommitFiberUnmount=="function")try{Pe.onCommitFiberUnmount(Me,f)}catch{}switch(f.tag){case 26:Ut||po(f,c),Jo(l,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ut||po(f,c);var m=Ot,y=Zn;Zi(f.type)&&(Ot=f.stateNode,Zn=!1),Jo(l,c,f),Cu(f.stateNode),Ot=m,Zn=y;break;case 5:Ut||po(f,c);case 6:if(m=Ot,y=Zn,Ot=null,Jo(l,c,f),Ot=m,Zn=y,Ot!==null)if(Zn)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(f.stateNode)}catch(x){wt(f,c,x)}else try{Ot.removeChild(f.stateNode)}catch(x){wt(f,c,x)}break;case 18:Ot!==null&&(Zn?(l=Ot,FE(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,f.stateNode),Ou(l)):FE(Ot,f.stateNode));break;case 4:m=Ot,y=Zn,Ot=f.stateNode.containerInfo,Zn=!0,Jo(l,c,f),Ot=m,Zn=y;break;case 0:case 11:case 14:case 15:Ut||Vi(2,f,c),Ut||Vi(4,f,c),Jo(l,c,f);break;case 1:Ut||(po(f,c),m=f.stateNode,typeof m.componentWillUnmount=="function"&&Yk(f,c,m)),Jo(l,c,f);break;case 21:Jo(l,c,f);break;case 22:Ut=(m=Ut)||f.memoizedState!==null,Jo(l,c,f),Ut=m;break;default:Jo(l,c,f)}}function rE(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Ou(l)}catch(f){wt(c,c.return,f)}}function h8(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new Qk),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new Qk),c;default:throw Error(r(435,l.tag))}}function ky(l,c){var f=h8(l);c.forEach(function(m){var y=C8.bind(null,l,m);f.has(m)||(f.add(m),m.then(y,y))})}function sr(l,c){var f=c.deletions;if(f!==null)for(var m=0;m<f.length;m++){var y=f[m],x=l,M=c,A=M;e:for(;A!==null;){switch(A.tag){case 27:if(Zi(A.type)){Ot=A.stateNode,Zn=!1;break e}break;case 5:Ot=A.stateNode,Zn=!1;break e;case 3:case 4:Ot=A.stateNode.containerInfo,Zn=!0;break e}A=A.return}if(Ot===null)throw Error(r(160));nE(x,M,y),Ot=null,Zn=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)oE(c,l),c=c.sibling}var Zr=null;function oE(l,c){var f=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:sr(c,l),lr(l),m&4&&(Vi(3,l,l.return),fu(3,l),Vi(5,l,l.return));break;case 1:sr(c,l),lr(l),m&512&&(Ut||f===null||po(f,f.return)),m&64&&Xo&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(f=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var y=Zr;if(sr(c,l),lr(l),m&512&&(Ut||f===null||po(f,f.return)),m&4){var x=f!==null?f.memoizedState:null;if(m=l.memoizedState,f===null)if(m===null)if(l.stateNode===null){e:{m=l.type,f=l.memoizedProps,y=y.ownerDocument||y;t:switch(m){case"title":x=y.getElementsByTagName("title")[0],(!x||x[Hc]||x[Mn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(m),y.head.insertBefore(x,y.querySelector("head > title"))),vn(x,m,f),x[Mn]=l,on(x),m=x;break e;case"link":var M=JE("link","href",y).get(m+(f.href||""));if(M){for(var A=0;A<M.length;A++)if(x=M[A],x.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&x.getAttribute("rel")===(f.rel==null?null:f.rel)&&x.getAttribute("title")===(f.title==null?null:f.title)&&x.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){M.splice(A,1);break t}}x=y.createElement(m),vn(x,m,f),y.head.appendChild(x);break;case"meta":if(M=JE("meta","content",y).get(m+(f.content||""))){for(A=0;A<M.length;A++)if(x=M[A],x.getAttribute("content")===(f.content==null?null:""+f.content)&&x.getAttribute("name")===(f.name==null?null:f.name)&&x.getAttribute("property")===(f.property==null?null:f.property)&&x.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&x.getAttribute("charset")===(f.charSet==null?null:f.charSet)){M.splice(A,1);break t}}x=y.createElement(m),vn(x,m,f),y.head.appendChild(x);break;default:throw Error(r(468,m))}x[Mn]=l,on(x),m=x}l.stateNode=m}else QE(y,l.type,l.stateNode);else l.stateNode=XE(y,m,l.memoizedProps);else x!==m?(x===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):x.count--,m===null?QE(y,l.type,l.stateNode):XE(y,m,l.memoizedProps)):m===null&&l.stateNode!==null&&wy(l,l.memoizedProps,f.memoizedProps)}break;case 27:sr(c,l),lr(l),m&512&&(Ut||f===null||po(f,f.return)),f!==null&&m&4&&wy(l,l.memoizedProps,f.memoizedProps);break;case 5:if(sr(c,l),lr(l),m&512&&(Ut||f===null||po(f,f.return)),l.flags&32){y=l.stateNode;try{sa(y,"")}catch(q){wt(l,l.return,q)}}m&4&&l.stateNode!=null&&(y=l.memoizedProps,wy(l,y,f!==null?f.memoizedProps:y)),m&1024&&(Sy=!0);break;case 6:if(sr(c,l),lr(l),m&4){if(l.stateNode===null)throw Error(r(162));m=l.memoizedProps,f=l.stateNode;try{f.nodeValue=m}catch(q){wt(l,l.return,q)}}break;case 3:if(yh=null,y=Zr,Zr=gh(c.containerInfo),sr(c,l),Zr=y,lr(l),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Ou(c.containerInfo)}catch(q){wt(l,l.return,q)}Sy&&(Sy=!1,iE(l));break;case 4:m=Zr,Zr=gh(l.stateNode.containerInfo),sr(c,l),lr(l),Zr=m;break;case 12:sr(c,l),lr(l);break;case 13:sr(c,l),lr(l),l.child.flags&8192&&l.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Oy=En()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,ky(l,m)));break;case 22:y=l.memoizedState!==null;var D=f!==null&&f.memoizedState!==null,U=Xo,Q=Ut;if(Xo=U||y,Ut=Q||D,sr(c,l),Ut=Q,Xo=U,lr(l),m&8192)e:for(c=l.stateNode,c._visibility=y?c._visibility&-2:c._visibility|1,y&&(f===null||D||Xo||Ut||ll(l)),f=null,c=l;;){if(c.tag===5||c.tag===26){if(f===null){D=f=c;try{if(x=D.stateNode,y)M=x.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{A=D.stateNode;var re=D.memoizedProps.style,G=re!=null&&re.hasOwnProperty("display")?re.display:null;A.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(q){wt(D,D.return,q)}}}else if(c.tag===6){if(f===null){D=c;try{D.stateNode.nodeValue=y?"":D.memoizedProps}catch(q){wt(D,D.return,q)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=l.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,ky(l,f))));break;case 19:sr(c,l),lr(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,ky(l,m)));break;case 30:break;case 21:break;default:sr(c,l),lr(l)}}function lr(l){var c=l.flags;if(c&2){try{for(var f,m=l.return;m!==null;){if(Xk(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,x=xy(l);rh(l,x,y);break;case 5:var M=f.stateNode;f.flags&32&&(sa(M,""),f.flags&=-33);var A=xy(l);rh(l,A,M);break;case 3:case 4:var D=f.stateNode.containerInfo,U=xy(l);Cy(l,U,D);break;default:throw Error(r(161))}}catch(Q){wt(l,l.return,Q)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function iE(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;iE(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function zi(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)eE(l,c.alternate,c),c=c.sibling}function ll(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:Vi(4,c,c.return),ll(c);break;case 1:po(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&Yk(c,c.return,f),ll(c);break;case 27:Cu(c.stateNode);case 26:case 5:po(c,c.return),ll(c);break;case 22:c.memoizedState===null&&ll(c);break;case 30:ll(c);break;default:ll(c)}l=l.sibling}}function Ui(l,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,y=l,x=c,M=x.flags;switch(x.tag){case 0:case 11:case 15:Ui(y,x,f),fu(4,x);break;case 1:if(Ui(y,x,f),m=x,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(U){wt(m,m.return,U)}if(m=x,y=m.updateQueue,y!==null){var A=m.stateNode;try{var D=y.shared.hiddenCallbacks;if(D!==null)for(y.shared.hiddenCallbacks=null,y=0;y<D.length;y++)LS(D[y],A)}catch(U){wt(m,m.return,U)}}f&&M&64&&Zk(x),hu(x,x.return);break;case 27:Jk(x);case 26:case 5:Ui(y,x,f),f&&m===null&&M&4&&Wk(x),hu(x,x.return);break;case 12:Ui(y,x,f);break;case 13:Ui(y,x,f),f&&M&4&&rE(y,x);break;case 22:x.memoizedState===null&&Ui(y,x,f),hu(x,x.return);break;case 30:break;default:Ui(y,x,f)}c=c.sibling}}function Ey(l,c){var f=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==f&&(l!=null&&l.refCount++,f!=null&&Jc(f))}function My(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Jc(l))}function mo(l,c,f,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)sE(l,c,f,m),c=c.sibling}function sE(l,c,f,m){var y=c.flags;switch(c.tag){case 0:case 11:case 15:mo(l,c,f,m),y&2048&&fu(9,c);break;case 1:mo(l,c,f,m);break;case 3:mo(l,c,f,m),y&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&Jc(l)));break;case 12:if(y&2048){mo(l,c,f,m),l=c.stateNode;try{var x=c.memoizedProps,M=x.id,A=x.onPostCommit;typeof A=="function"&&A(M,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(D){wt(c,c.return,D)}}else mo(l,c,f,m);break;case 13:mo(l,c,f,m);break;case 23:break;case 22:x=c.stateNode,M=c.alternate,c.memoizedState!==null?x._visibility&2?mo(l,c,f,m):pu(l,c):x._visibility&2?mo(l,c,f,m):(x._visibility|=2,Ea(l,c,f,m,(c.subtreeFlags&10256)!==0)),y&2048&&Ey(M,c);break;case 24:mo(l,c,f,m),y&2048&&My(c.alternate,c);break;default:mo(l,c,f,m)}}function Ea(l,c,f,m,y){for(y=y&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var x=l,M=c,A=f,D=m,U=M.flags;switch(M.tag){case 0:case 11:case 15:Ea(x,M,A,D,y),fu(8,M);break;case 23:break;case 22:var Q=M.stateNode;M.memoizedState!==null?Q._visibility&2?Ea(x,M,A,D,y):pu(x,M):(Q._visibility|=2,Ea(x,M,A,D,y)),y&&U&2048&&Ey(M.alternate,M);break;case 24:Ea(x,M,A,D,y),y&&U&2048&&My(M.alternate,M);break;default:Ea(x,M,A,D,y)}c=c.sibling}}function pu(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=l,m=c,y=m.flags;switch(m.tag){case 22:pu(f,m),y&2048&&Ey(m.alternate,m);break;case 24:pu(f,m),y&2048&&My(m.alternate,m);break;default:pu(f,m)}c=c.sibling}}var mu=8192;function Ma(l){if(l.subtreeFlags&mu)for(l=l.child;l!==null;)lE(l),l=l.sibling}function lE(l){switch(l.tag){case 26:Ma(l),l.flags&mu&&l.memoizedState!==null&&J8(Zr,l.memoizedState,l.memoizedProps);break;case 5:Ma(l);break;case 3:case 4:var c=Zr;Zr=gh(l.stateNode.containerInfo),Ma(l),Zr=c;break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=mu,mu=16777216,Ma(l),mu=c):Ma(l));break;default:Ma(l)}}function aE(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function gu(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];ln=m,uE(m,l)}aE(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)cE(l),l=l.sibling}function cE(l){switch(l.tag){case 0:case 11:case 15:gu(l),l.flags&2048&&Vi(9,l,l.return);break;case 3:gu(l);break;case 12:gu(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,oh(l)):gu(l);break;default:gu(l)}}function oh(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];ln=m,uE(m,l)}aE(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:Vi(8,c,c.return),oh(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,oh(c));break;default:oh(c)}l=l.sibling}}function uE(l,c){for(;ln!==null;){var f=ln;switch(f.tag){case 0:case 11:case 15:Vi(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Jc(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,ln=m;else e:for(f=l;ln!==null;){m=ln;var y=m.sibling,x=m.return;if(tE(m),m===f){ln=null;break e}if(y!==null){y.return=x,ln=y;break e}ln=x}}}var p8={getCacheForType:function(l){var c=Tn(en),f=c.data.get(l);return f===void 0&&(f=l(),c.data.set(l,f)),f}},m8=typeof WeakMap=="function"?WeakMap:Map,ut=0,Et=null,We=null,nt=0,dt=0,ar=null,$i=!1,Ta=!1,Ty=!1,Qo=0,Ht=0,Fi=0,al=0,Ay=0,Dr=0,Aa=0,bu=null,Yn=null,Ny=!1,Oy=0,ih=1/0,sh=null,Gi=null,yn=0,qi=null,Na=null,Oa=0,Ry=0,Dy=null,dE=null,yu=0,_y=null;function cr(){if((ut&2)!==0&&nt!==0)return nt&-nt;if(B.T!==null){var l=ba;return l!==0?l:Vy()}return TC()}function fE(){Dr===0&&(Dr=(nt&536870912)===0||lt?SC():536870912);var l=Rr.current;return l!==null&&(l.flags|=32),Dr}function ur(l,c,f){(l===Et&&(dt===2||dt===9)||l.cancelPendingCommit!==null)&&(Ra(l,0),Ki(l,nt,Dr,!1)),Ic(l,f),((ut&2)===0||l!==Et)&&(l===Et&&((ut&2)===0&&(al|=f),Ht===4&&Ki(l,nt,Dr,!1)),go(l))}function hE(l,c,f){if((ut&6)!==0)throw Error(r(327));var m=!f&&(c&124)===0&&(c&l.expiredLanes)===0||qs(l,c),y=m?y8(l,c):Iy(l,c,!0),x=m;do{if(y===0){Ta&&!m&&Ki(l,c,0,!1);break}else{if(f=l.current.alternate,x&&!g8(f)){y=Iy(l,c,!1),x=!1;continue}if(y===2){if(x=c,l.errorRecoveryDisabledLanes&x)var M=0;else M=l.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){c=M;e:{var A=l;y=bu;var D=A.current.memoizedState.isDehydrated;if(D&&(Ra(A,M).flags|=256),M=Iy(A,M,!1),M!==2){if(Ty&&!D){A.errorRecoveryDisabledLanes|=x,al|=x,y=4;break e}x=Yn,Yn=y,x!==null&&(Yn===null?Yn=x:Yn.push.apply(Yn,x))}y=M}if(x=!1,y!==2)continue}}if(y===1){Ra(l,0),Ki(l,c,0,!0);break}e:{switch(m=l,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Ki(m,c,Dr,!$i);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(y=Oy+300-En(),10<y)){if(Ki(m,c,Dr,!$i),Gs(m,0,!0)!==0)break e;m.timeoutHandle=UE(pE.bind(null,m,f,Yn,sh,Ny,c,Dr,al,Aa,$i,x,2,-0,0),y);break e}pE(m,f,Yn,sh,Ny,c,Dr,al,Aa,$i,x,0,-0,0)}}break}while(!0);go(l)}function pE(l,c,f,m,y,x,M,A,D,U,Q,re,G,q){if(l.timeoutHandle=-1,re=c.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(Eu={stylesheets:null,count:0,unsuspend:X8},lE(c),re=Q8(),re!==null)){l.cancelPendingCommit=re(xE.bind(null,l,c,x,f,m,y,M,A,D,Q,1,G,q)),Ki(l,x,M,!U);return}xE(l,c,x,f,m,y,M,A,D)}function g8(l){for(var c=l;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var y=f[m],x=y.getSnapshot;y=y.value;try{if(!or(x(),y))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ki(l,c,f,m){c&=~Ay,c&=~al,l.suspendedLanes|=c,l.pingedLanes&=~c,m&&(l.warmLanes|=c),m=l.expirationTimes;for(var y=c;0<y;){var x=31-kt(y),M=1<<x;m[x]=-1,y&=~M}f!==0&&EC(l,f,c)}function lh(){return(ut&6)===0?(vu(0),!1):!0}function Ly(){if(We!==null){if(dt===0)var l=We.return;else l=We,Go=nl=null,Xb(l),Sa=null,cu=0,l=We;for(;l!==null;)Kk(l.alternate,l),l=l.return;We=null}}function Ra(l,c){var f=l.timeoutHandle;f!==-1&&(l.timeoutHandle=-1,L8(f)),f=l.cancelPendingCommit,f!==null&&(l.cancelPendingCommit=null,f()),Ly(),Et=l,We=f=Uo(l.current,null),nt=c,dt=0,ar=null,$i=!1,Ta=qs(l,c),Ty=!1,Aa=Dr=Ay=al=Fi=Ht=0,Yn=bu=null,Ny=!1,(c&8)!==0&&(c|=c&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=c;0<m;){var y=31-kt(m),x=1<<y;c|=l[y],m&=~x}return Qo=c,Nf(),f}function mE(l,c){Ke=null,B.H=Zf,c===eu||c===Pf?(c=DS(),dt=3):c===NS?(c=DS(),dt=4):dt=c===_k?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ar=c,We===null&&(Ht=1,Qf(l,Tr(c,l.current)))}function gE(){var l=B.H;return B.H=Zf,l===null?Zf:l}function bE(){var l=B.A;return B.A=p8,l}function By(){Ht=4,$i||(nt&4194048)!==nt&&Rr.current!==null||(Ta=!0),(Fi&134217727)===0&&(al&134217727)===0||Et===null||Ki(Et,nt,Dr,!1)}function Iy(l,c,f){var m=ut;ut|=2;var y=gE(),x=bE();(Et!==l||nt!==c)&&(sh=null,Ra(l,c)),c=!1;var M=Ht;e:do try{if(dt!==0&&We!==null){var A=We,D=ar;switch(dt){case 8:Ly(),M=6;break e;case 3:case 2:case 9:case 6:Rr.current===null&&(c=!0);var U=dt;if(dt=0,ar=null,Da(l,A,D,U),f&&Ta){M=0;break e}break;default:U=dt,dt=0,ar=null,Da(l,A,D,U)}}b8(),M=Ht;break}catch(Q){mE(l,Q)}while(!0);return c&&l.shellSuspendCounter++,Go=nl=null,ut=m,B.H=y,B.A=x,We===null&&(Et=null,nt=0,Nf()),M}function b8(){for(;We!==null;)yE(We)}function y8(l,c){var f=ut;ut|=2;var m=gE(),y=bE();Et!==l||nt!==c?(sh=null,ih=En()+500,Ra(l,c)):Ta=qs(l,c);e:do try{if(dt!==0&&We!==null){c=We;var x=ar;t:switch(dt){case 1:dt=0,ar=null,Da(l,c,x,1);break;case 2:case 9:if(OS(x)){dt=0,ar=null,vE(c);break}c=function(){dt!==2&&dt!==9||Et!==l||(dt=7),go(l)},x.then(c,c);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:OS(x)?(dt=0,ar=null,vE(c)):(dt=0,ar=null,Da(l,c,x,7));break;case 5:var M=null;switch(We.tag){case 26:M=We.memoizedState;case 5:case 27:var A=We;if(!M||e2(M)){dt=0,ar=null;var D=A.sibling;if(D!==null)We=D;else{var U=A.return;U!==null?(We=U,ah(U)):We=null}break t}}dt=0,ar=null,Da(l,c,x,5);break;case 6:dt=0,ar=null,Da(l,c,x,6);break;case 8:Ly(),Ht=6;break e;default:throw Error(r(462))}}v8();break}catch(Q){mE(l,Q)}while(!0);return Go=nl=null,B.H=m,B.A=y,ut=f,We!==null?0:(Et=null,nt=0,Nf(),Ht)}function v8(){for(;We!==null&&!Ai();)yE(We)}function yE(l){var c=Gk(l.alternate,l,Qo);l.memoizedProps=l.pendingProps,c===null?ah(l):We=c}function vE(l){var c=l,f=c.alternate;switch(c.tag){case 15:case 0:c=jk(f,c,c.pendingProps,c.type,void 0,nt);break;case 11:c=jk(f,c,c.pendingProps,c.type.render,c.ref,nt);break;case 5:Xb(c);default:Kk(f,c),c=We=wS(c,Qo),c=Gk(f,c,Qo)}l.memoizedProps=l.pendingProps,c===null?ah(l):We=c}function Da(l,c,f,m){Go=nl=null,Xb(c),Sa=null,cu=0;var y=c.return;try{if(a8(l,y,c,f,nt)){Ht=1,Qf(l,Tr(f,l.current)),We=null;return}}catch(x){if(y!==null)throw We=y,x;Ht=1,Qf(l,Tr(f,l.current)),We=null;return}c.flags&32768?(lt||m===1?l=!0:Ta||(nt&536870912)!==0?l=!1:($i=l=!0,(m===2||m===9||m===3||m===6)&&(m=Rr.current,m!==null&&m.tag===13&&(m.flags|=16384))),wE(c,l)):ah(c)}function ah(l){var c=l;do{if((c.flags&32768)!==0){wE(c,$i);return}l=c.return;var f=u8(c.alternate,c,Qo);if(f!==null){We=f;return}if(c=c.sibling,c!==null){We=c;return}We=c=l}while(c!==null);Ht===0&&(Ht=5)}function wE(l,c){do{var f=d8(l.alternate,l);if(f!==null){f.flags&=32767,We=f;return}if(f=l.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(l=l.sibling,l!==null)){We=l;return}We=l=f}while(l!==null);Ht=6,We=null}function xE(l,c,f,m,y,x,M,A,D){l.cancelPendingCommit=null;do ch();while(yn!==0);if((ut&6)!==0)throw Error(r(327));if(c!==null){if(c===l.current)throw Error(r(177));if(x=c.lanes|c.childLanes,x|=Mb,XB(l,f,x,M,A,D),l===Et&&(We=Et=null,nt=0),Na=c,qi=l,Oa=f,Ry=x,Dy=y,dE=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,S8(F,function(){return ME(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=B.T,B.T=null,y=Y.p,Y.p=2,M=ut,ut|=4;try{f8(l,c,f)}finally{ut=M,Y.p=y,B.T=m}}yn=1,CE(),SE(),kE()}}function CE(){if(yn===1){yn=0;var l=qi,c=Na,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=B.T,B.T=null;var m=Y.p;Y.p=2;var y=ut;ut|=4;try{oE(c,l);var x=Zy,M=uS(l.containerInfo),A=x.focusedElem,D=x.selectionRange;if(M!==A&&A&&A.ownerDocument&&cS(A.ownerDocument.documentElement,A)){if(D!==null&&xb(A)){var U=D.start,Q=D.end;if(Q===void 0&&(Q=U),"selectionStart"in A)A.selectionStart=U,A.selectionEnd=Math.min(Q,A.value.length);else{var re=A.ownerDocument||document,G=re&&re.defaultView||window;if(G.getSelection){var q=G.getSelection(),He=A.textContent.length,Le=Math.min(D.start,He),pt=D.end===void 0?Le:Math.min(D.end,He);!q.extend&&Le>pt&&(M=pt,pt=Le,Le=M);var j=aS(A,Le),I=aS(A,pt);if(j&&I&&(q.rangeCount!==1||q.anchorNode!==j.node||q.anchorOffset!==j.offset||q.focusNode!==I.node||q.focusOffset!==I.offset)){var z=re.createRange();z.setStart(j.node,j.offset),q.removeAllRanges(),Le>pt?(q.addRange(z),q.extend(I.node,I.offset)):(z.setEnd(I.node,I.offset),q.addRange(z))}}}}for(re=[],q=A;q=q.parentNode;)q.nodeType===1&&re.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<re.length;A++){var te=re[A];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}xh=!!Ky,Zy=Ky=null}finally{ut=y,Y.p=m,B.T=f}}l.current=c,yn=2}}function SE(){if(yn===2){yn=0;var l=qi,c=Na,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=B.T,B.T=null;var m=Y.p;Y.p=2;var y=ut;ut|=4;try{eE(l,c.alternate,c)}finally{ut=y,Y.p=m,B.T=f}}yn=3}}function kE(){if(yn===4||yn===3){yn=0,Fs();var l=qi,c=Na,f=Oa,m=dE;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?yn=5:(yn=0,Na=qi=null,EE(l,l.pendingLanes));var y=l.pendingLanes;if(y===0&&(Gi=null),eb(f),c=c.stateNode,Pe&&typeof Pe.onCommitFiberRoot=="function")try{Pe.onCommitFiberRoot(Me,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=B.T,y=Y.p,Y.p=2,B.T=null;try{for(var x=l.onRecoverableError,M=0;M<m.length;M++){var A=m[M];x(A.value,{componentStack:A.stack})}}finally{B.T=c,Y.p=y}}(Oa&3)!==0&&ch(),go(l),y=l.pendingLanes,(f&4194090)!==0&&(y&42)!==0?l===_y?yu++:(yu=0,_y=l):yu=0,vu(0)}}function EE(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,Jc(c)))}function ch(l){return CE(),SE(),kE(),ME()}function ME(){if(yn!==5)return!1;var l=qi,c=Ry;Ry=0;var f=eb(Oa),m=B.T,y=Y.p;try{Y.p=32>f?32:f,B.T=null,f=Dy,Dy=null;var x=qi,M=Oa;if(yn=0,Na=qi=null,Oa=0,(ut&6)!==0)throw Error(r(331));var A=ut;if(ut|=4,cE(x.current),sE(x,x.current,M,f),ut=A,vu(0,!1),Pe&&typeof Pe.onPostCommitFiberRoot=="function")try{Pe.onPostCommitFiberRoot(Me,x)}catch{}return!0}finally{Y.p=y,B.T=m,EE(l,c)}}function TE(l,c,f){c=Tr(f,c),c=dy(l.stateNode,c,2),l=Ii(l,c,2),l!==null&&(Ic(l,2),go(l))}function wt(l,c,f){if(l.tag===3)TE(l,l,f);else for(;c!==null;){if(c.tag===3){TE(c,l,f);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Gi===null||!Gi.has(m))){l=Tr(f,l),f=Rk(2),m=Ii(c,f,2),m!==null&&(Dk(f,m,c,l),Ic(m,2),go(m));break}}c=c.return}}function Hy(l,c,f){var m=l.pingCache;if(m===null){m=l.pingCache=new m8;var y=new Set;m.set(c,y)}else y=m.get(c),y===void 0&&(y=new Set,m.set(c,y));y.has(f)||(Ty=!0,y.add(f),l=w8.bind(null,l,c,f),c.then(l,l))}function w8(l,c,f){var m=l.pingCache;m!==null&&m.delete(c),l.pingedLanes|=l.suspendedLanes&f,l.warmLanes&=~f,Et===l&&(nt&f)===f&&(Ht===4||Ht===3&&(nt&62914560)===nt&&300>En()-Oy?(ut&2)===0&&Ra(l,0):Ay|=f,Aa===nt&&(Aa=0)),go(l)}function AE(l,c){c===0&&(c=kC()),l=ha(l,c),l!==null&&(Ic(l,c),go(l))}function x8(l){var c=l.memoizedState,f=0;c!==null&&(f=c.retryLane),AE(l,f)}function C8(l,c){var f=0;switch(l.tag){case 13:var m=l.stateNode,y=l.memoizedState;y!==null&&(f=y.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(c),AE(l,f)}function S8(l,c){return rn(l,c)}var uh=null,_a=null,Py=!1,dh=!1,jy=!1,cl=0;function go(l){l!==_a&&l.next===null&&(_a===null?uh=_a=l:_a=_a.next=l),dh=!0,Py||(Py=!0,E8())}function vu(l,c){if(!jy&&dh){jy=!0;do for(var f=!1,m=uh;m!==null;){if(l!==0){var y=m.pendingLanes;if(y===0)var x=0;else{var M=m.suspendedLanes,A=m.pingedLanes;x=(1<<31-kt(42|l)+1)-1,x&=y&~(M&~A),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(f=!0,DE(m,x))}else x=nt,x=Gs(m,m===Et?x:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(x&3)===0||qs(m,x)||(f=!0,DE(m,x));m=m.next}while(f);jy=!1}}function k8(){NE()}function NE(){dh=Py=!1;var l=0;cl!==0&&(_8()&&(l=cl),cl=0);for(var c=En(),f=null,m=uh;m!==null;){var y=m.next,x=OE(m,c);x===0?(m.next=null,f===null?uh=y:f.next=y,y===null&&(_a=f)):(f=m,(l!==0||(x&3)!==0)&&(dh=!0)),m=y}vu(l)}function OE(l,c){for(var f=l.suspendedLanes,m=l.pingedLanes,y=l.expirationTimes,x=l.pendingLanes&-62914561;0<x;){var M=31-kt(x),A=1<<M,D=y[M];D===-1?((A&f)===0||(A&m)!==0)&&(y[M]=bf(A,c)):D<=c&&(l.expiredLanes|=A),x&=~A}if(c=Et,f=nt,f=Gs(l,l===c?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,f===0||l===c&&(dt===2||dt===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&Fn(m),l.callbackNode=null,l.callbackPriority=0;if((f&3)===0||qs(l,f)){if(c=f&-f,c===l.callbackPriority)return c;switch(m!==null&&Fn(m),eb(f)){case 2:case 8:f=L;break;case 32:f=F;break;case 268435456:f=be;break;default:f=F}return m=RE.bind(null,l),f=rn(f,m),l.callbackPriority=c,l.callbackNode=f,c}return m!==null&&m!==null&&Fn(m),l.callbackPriority=2,l.callbackNode=null,2}function RE(l,c){if(yn!==0&&yn!==5)return l.callbackNode=null,l.callbackPriority=0,null;var f=l.callbackNode;if(ch()&&l.callbackNode!==f)return null;var m=nt;return m=Gs(l,l===Et?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(hE(l,m,c),OE(l,En()),l.callbackNode!=null&&l.callbackNode===f?RE.bind(null,l):null)}function DE(l,c){if(ch())return null;hE(l,c,!0)}function E8(){B8(function(){(ut&6)!==0?rn(Bc,k8):NE()})}function Vy(){return cl===0&&(cl=SC()),cl}function _E(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Cf(""+l)}function LE(l,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,l.id&&f.setAttribute("form",l.id),c.parentNode.insertBefore(f,c),l=new FormData(l),f.parentNode.removeChild(f),l}function M8(l,c,f,m,y){if(c==="submit"&&f&&f.stateNode===y){var x=_E((y[Gn]||null).action),M=m.submitter;M&&(c=(c=M[Gn]||null)?_E(c.formAction):M.getAttribute("formAction"),c!==null&&(x=c,M=null));var A=new Mf("action","action",null,m,y);l.push({event:A,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(cl!==0){var D=M?LE(y,M):new FormData(y);sy(f,{pending:!0,data:D,method:y.method,action:x},null,D)}}else typeof x=="function"&&(A.preventDefault(),D=M?LE(y,M):new FormData(y),sy(f,{pending:!0,data:D,method:y.method,action:x},x,D))},currentTarget:y}]})}}for(var zy=0;zy<Eb.length;zy++){var Uy=Eb[zy],T8=Uy.toLowerCase(),A8=Uy[0].toUpperCase()+Uy.slice(1);Kr(T8,"on"+A8)}Kr(hS,"onAnimationEnd"),Kr(pS,"onAnimationIteration"),Kr(mS,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(GI,"onTransitionRun"),Kr(qI,"onTransitionStart"),Kr(KI,"onTransitionCancel"),Kr(gS,"onTransitionEnd"),ra("onMouseEnter",["mouseout","mouseover"]),ra("onMouseLeave",["mouseout","mouseover"]),ra("onPointerEnter",["pointerout","pointerover"]),ra("onPointerLeave",["pointerout","pointerover"]),Ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),N8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wu));function BE(l,c){c=(c&4)!==0;for(var f=0;f<l.length;f++){var m=l[f],y=m.event;m=m.listeners;e:{var x=void 0;if(c)for(var M=m.length-1;0<=M;M--){var A=m[M],D=A.instance,U=A.currentTarget;if(A=A.listener,D!==x&&y.isPropagationStopped())break e;x=A,y.currentTarget=U;try{x(y)}catch(Q){Jf(Q)}y.currentTarget=null,x=D}else for(M=0;M<m.length;M++){if(A=m[M],D=A.instance,U=A.currentTarget,A=A.listener,D!==x&&y.isPropagationStopped())break e;x=A,y.currentTarget=U;try{x(y)}catch(Q){Jf(Q)}y.currentTarget=null,x=D}}}}function Xe(l,c){var f=c[tb];f===void 0&&(f=c[tb]=new Set);var m=l+"__bubble";f.has(m)||(IE(c,l,2,!1),f.add(m))}function $y(l,c,f){var m=0;c&&(m|=4),IE(f,l,m,c)}var fh="_reactListening"+Math.random().toString(36).slice(2);function Fy(l){if(!l[fh]){l[fh]=!0,NC.forEach(function(f){f!=="selectionchange"&&(N8.has(f)||$y(f,!1,l),$y(f,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[fh]||(c[fh]=!0,$y("selectionchange",!1,c))}}function IE(l,c,f,m){switch(s2(c)){case 2:var y=nH;break;case 8:y=rH;break;default:y=o0}f=y.bind(null,c,f,l),y=void 0,!fb||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(y=!0),m?y!==void 0?l.addEventListener(c,f,{capture:!0,passive:y}):l.addEventListener(c,f,!0):y!==void 0?l.addEventListener(c,f,{passive:y}):l.addEventListener(c,f,!1)}function Gy(l,c,f,m,y){var x=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var A=m.stateNode.containerInfo;if(A===y)break;if(M===4)for(M=m.return;M!==null;){var D=M.tag;if((D===3||D===4)&&M.stateNode.containerInfo===y)return;M=M.return}for(;A!==null;){if(M=ea(A),M===null)return;if(D=M.tag,D===5||D===6||D===26||D===27){m=x=M;continue e}A=A.parentNode}}m=m.return}$C(function(){var U=x,Q=ub(f),re=[];e:{var G=bS.get(l);if(G!==void 0){var q=Mf,He=l;switch(l){case"keypress":if(kf(f)===0)break e;case"keydown":case"keyup":q=SI;break;case"focusin":He="focus",q=gb;break;case"focusout":He="blur",q=gb;break;case"beforeblur":case"afterblur":q=gb;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=qC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=dI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=MI;break;case hS:case pS:case mS:q=pI;break;case gS:q=AI;break;case"scroll":case"scrollend":q=cI;break;case"wheel":q=OI;break;case"copy":case"cut":case"paste":q=gI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=ZC;break;case"toggle":case"beforetoggle":q=DI}var Le=(c&4)!==0,pt=!Le&&(l==="scroll"||l==="scrollend"),j=Le?G!==null?G+"Capture":null:G;Le=[];for(var I=U,z;I!==null;){var te=I;if(z=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||z===null||j===null||(te=jc(I,j),te!=null&&Le.push(xu(I,te,z))),pt)break;I=I.return}0<Le.length&&(G=new q(G,He,null,f,Q),re.push({event:G,listeners:Le}))}}if((c&7)===0){e:{if(G=l==="mouseover"||l==="pointerover",q=l==="mouseout"||l==="pointerout",G&&f!==cb&&(He=f.relatedTarget||f.fromElement)&&(ea(He)||He[Ql]))break e;if((q||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,q?(He=f.relatedTarget||f.toElement,q=U,He=He?ea(He):null,He!==null&&(pt=i(He),Le=He.tag,He!==pt||Le!==5&&Le!==27&&Le!==6)&&(He=null)):(q=null,He=U),q!==He)){if(Le=qC,te="onMouseLeave",j="onMouseEnter",I="mouse",(l==="pointerout"||l==="pointerover")&&(Le=ZC,te="onPointerLeave",j="onPointerEnter",I="pointer"),pt=q==null?G:Pc(q),z=He==null?G:Pc(He),G=new Le(te,I+"leave",q,f,Q),G.target=pt,G.relatedTarget=z,te=null,ea(Q)===U&&(Le=new Le(j,I+"enter",He,f,Q),Le.target=z,Le.relatedTarget=pt,te=Le),pt=te,q&&He)t:{for(Le=q,j=He,I=0,z=Le;z;z=La(z))I++;for(z=0,te=j;te;te=La(te))z++;for(;0<I-z;)Le=La(Le),I--;for(;0<z-I;)j=La(j),z--;for(;I--;){if(Le===j||j!==null&&Le===j.alternate)break t;Le=La(Le),j=La(j)}Le=null}else Le=null;q!==null&&HE(re,G,q,Le,!1),He!==null&&pt!==null&&HE(re,pt,He,Le,!0)}}e:{if(G=U?Pc(U):window,q=G.nodeName&&G.nodeName.toLowerCase(),q==="select"||q==="input"&&G.type==="file")var Ce=nS;else if(eS(G))if(rS)Ce=UI;else{Ce=VI;var Ze=jI}else q=G.nodeName,!q||q.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?U&&ab(U.elementType)&&(Ce=nS):Ce=zI;if(Ce&&(Ce=Ce(l,U))){tS(re,Ce,f,Q);break e}Ze&&Ze(l,G,U),l==="focusout"&&U&&G.type==="number"&&U.memoizedProps.value!=null&&lb(G,"number",G.value)}switch(Ze=U?Pc(U):window,l){case"focusin":(eS(Ze)||Ze.contentEditable==="true")&&(ua=Ze,Cb=U,Kc=null);break;case"focusout":Kc=Cb=ua=null;break;case"mousedown":Sb=!0;break;case"contextmenu":case"mouseup":case"dragend":Sb=!1,dS(re,f,Q);break;case"selectionchange":if(FI)break;case"keydown":case"keyup":dS(re,f,Q)}var Ae;if(yb)e:{switch(l){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ca?JC(l,f)&&(Be="onCompositionEnd"):l==="keydown"&&f.keyCode===229&&(Be="onCompositionStart");Be&&(YC&&f.locale!=="ko"&&(ca||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ca&&(Ae=FC()):(Di=Q,hb="value"in Di?Di.value:Di.textContent,ca=!0)),Ze=hh(U,Be),0<Ze.length&&(Be=new KC(Be,l,null,f,Q),re.push({event:Be,listeners:Ze}),Ae?Be.data=Ae:(Ae=QC(f),Ae!==null&&(Be.data=Ae)))),(Ae=LI?BI(l,f):II(l,f))&&(Be=hh(U,"onBeforeInput"),0<Be.length&&(Ze=new KC("onBeforeInput","beforeinput",null,f,Q),re.push({event:Ze,listeners:Be}),Ze.data=Ae)),M8(re,l,U,f,Q)}BE(re,c)})}function xu(l,c,f){return{instance:l,listener:c,currentTarget:f}}function hh(l,c){for(var f=c+"Capture",m=[];l!==null;){var y=l,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=jc(l,f),y!=null&&m.unshift(xu(l,y,x)),y=jc(l,c),y!=null&&m.push(xu(l,y,x))),l.tag===3)return m;l=l.return}return[]}function La(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function HE(l,c,f,m,y){for(var x=c._reactName,M=[];f!==null&&f!==m;){var A=f,D=A.alternate,U=A.stateNode;if(A=A.tag,D!==null&&D===m)break;A!==5&&A!==26&&A!==27||U===null||(D=U,y?(U=jc(f,x),U!=null&&M.unshift(xu(f,U,D))):y||(U=jc(f,x),U!=null&&M.push(xu(f,U,D)))),f=f.return}M.length!==0&&l.push({event:c,listeners:M})}var O8=/\r\n?/g,R8=/\u0000|\uFFFD/g;function PE(l){return(typeof l=="string"?l:""+l).replace(O8,`
`).replace(R8,"")}function jE(l,c){return c=PE(c),PE(l)===c}function ph(){}function ht(l,c,f,m,y,x){switch(f){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||sa(l,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&sa(l,""+m);break;case"className":vf(l,"class",m);break;case"tabIndex":vf(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":vf(l,f,m);break;case"style":zC(l,m,x);break;case"data":if(c!=="object"){vf(l,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||f!=="href")){l.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(f);break}m=Cf(""+m),l.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(f==="formAction"?(c!=="input"&&ht(l,c,"name",y.name,y,null),ht(l,c,"formEncType",y.formEncType,y,null),ht(l,c,"formMethod",y.formMethod,y,null),ht(l,c,"formTarget",y.formTarget,y,null)):(ht(l,c,"encType",y.encType,y,null),ht(l,c,"method",y.method,y,null),ht(l,c,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(f);break}m=Cf(""+m),l.setAttribute(f,m);break;case"onClick":m!=null&&(l.onclick=ph);break;case"onScroll":m!=null&&Xe("scroll",l);break;case"onScrollEnd":m!=null&&Xe("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(y.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}f=Cf(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(f,""+m):l.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(f,""):l.removeAttribute(f);break;case"capture":case"download":m===!0?l.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(f,m):l.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(f,m):l.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(f):l.setAttribute(f,m);break;case"popover":Xe("beforetoggle",l),Xe("toggle",l),yf(l,"popover",m);break;case"xlinkActuate":Vo(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Vo(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Vo(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Vo(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Vo(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Vo(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Vo(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Vo(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Vo(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":yf(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=lI.get(f)||f,yf(l,f,m))}}function qy(l,c,f,m,y,x){switch(f){case"style":zC(l,m,x);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(y.children!=null)throw Error(r(60));l.innerHTML=f}}break;case"children":typeof m=="string"?sa(l,m):(typeof m=="number"||typeof m=="bigint")&&sa(l,""+m);break;case"onScroll":m!=null&&Xe("scroll",l);break;case"onScrollEnd":m!=null&&Xe("scrollend",l);break;case"onClick":m!=null&&(l.onclick=ph);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!OC.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),c=f.slice(2,y?f.length-7:void 0),x=l[Gn]||null,x=x!=null?x[f]:null,typeof x=="function"&&l.removeEventListener(c,x,y),typeof m=="function")){typeof x!="function"&&x!==null&&(f in l?l[f]=null:l.hasAttribute(f)&&l.removeAttribute(f)),l.addEventListener(c,m,y);break e}f in l?l[f]=m:m===!0?l.setAttribute(f,""):yf(l,f,m)}}}function vn(l,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",l),Xe("load",l);var m=!1,y=!1,x;for(x in f)if(f.hasOwnProperty(x)){var M=f[x];if(M!=null)switch(x){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ht(l,c,x,M,f,null)}}y&&ht(l,c,"srcSet",f.srcSet,f,null),m&&ht(l,c,"src",f.src,f,null);return;case"input":Xe("invalid",l);var A=x=M=y=null,D=null,U=null;for(m in f)if(f.hasOwnProperty(m)){var Q=f[m];if(Q!=null)switch(m){case"name":y=Q;break;case"type":M=Q;break;case"checked":D=Q;break;case"defaultChecked":U=Q;break;case"value":x=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,c));break;default:ht(l,c,m,Q,f,null)}}HC(l,x,A,D,U,M,y,!1),wf(l);return;case"select":Xe("invalid",l),m=M=x=null;for(y in f)if(f.hasOwnProperty(y)&&(A=f[y],A!=null))switch(y){case"value":x=A;break;case"defaultValue":M=A;break;case"multiple":m=A;default:ht(l,c,y,A,f,null)}c=x,f=M,l.multiple=!!m,c!=null?ia(l,!!m,c,!1):f!=null&&ia(l,!!m,f,!0);return;case"textarea":Xe("invalid",l),x=y=m=null;for(M in f)if(f.hasOwnProperty(M)&&(A=f[M],A!=null))switch(M){case"value":m=A;break;case"defaultValue":y=A;break;case"children":x=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ht(l,c,M,A,f,null)}jC(l,m,y,x),wf(l);return;case"option":for(D in f)if(f.hasOwnProperty(D)&&(m=f[D],m!=null))switch(D){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ht(l,c,D,m,f,null)}return;case"dialog":Xe("beforetoggle",l),Xe("toggle",l),Xe("cancel",l),Xe("close",l);break;case"iframe":case"object":Xe("load",l);break;case"video":case"audio":for(m=0;m<wu.length;m++)Xe(wu[m],l);break;case"image":Xe("error",l),Xe("load",l);break;case"details":Xe("toggle",l);break;case"embed":case"source":case"link":Xe("error",l),Xe("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in f)if(f.hasOwnProperty(U)&&(m=f[U],m!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ht(l,c,U,m,f,null)}return;default:if(ab(c)){for(Q in f)f.hasOwnProperty(Q)&&(m=f[Q],m!==void 0&&qy(l,c,Q,m,f,void 0));return}}for(A in f)f.hasOwnProperty(A)&&(m=f[A],m!=null&&ht(l,c,A,m,f,null))}function D8(l,c,f,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,M=null,A=null,D=null,U=null,Q=null;for(q in f){var re=f[q];if(f.hasOwnProperty(q)&&re!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":D=re;default:m.hasOwnProperty(q)||ht(l,c,q,null,m,re)}}for(var G in m){var q=m[G];if(re=f[G],m.hasOwnProperty(G)&&(q!=null||re!=null))switch(G){case"type":x=q;break;case"name":y=q;break;case"checked":U=q;break;case"defaultChecked":Q=q;break;case"value":M=q;break;case"defaultValue":A=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,c));break;default:q!==re&&ht(l,c,G,q,m,re)}}sb(l,M,A,D,U,Q,x,y);return;case"select":q=M=A=G=null;for(x in f)if(D=f[x],f.hasOwnProperty(x)&&D!=null)switch(x){case"value":break;case"multiple":q=D;default:m.hasOwnProperty(x)||ht(l,c,x,null,m,D)}for(y in m)if(x=m[y],D=f[y],m.hasOwnProperty(y)&&(x!=null||D!=null))switch(y){case"value":G=x;break;case"defaultValue":A=x;break;case"multiple":M=x;default:x!==D&&ht(l,c,y,x,m,D)}c=A,f=M,m=q,G!=null?ia(l,!!f,G,!1):!!m!=!!f&&(c!=null?ia(l,!!f,c,!0):ia(l,!!f,f?[]:"",!1));return;case"textarea":q=G=null;for(A in f)if(y=f[A],f.hasOwnProperty(A)&&y!=null&&!m.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ht(l,c,A,null,m,y)}for(M in m)if(y=m[M],x=f[M],m.hasOwnProperty(M)&&(y!=null||x!=null))switch(M){case"value":G=y;break;case"defaultValue":q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&ht(l,c,M,y,m,x)}PC(l,G,q);return;case"option":for(var He in f)if(G=f[He],f.hasOwnProperty(He)&&G!=null&&!m.hasOwnProperty(He))switch(He){case"selected":l.selected=!1;break;default:ht(l,c,He,null,m,G)}for(D in m)if(G=m[D],q=f[D],m.hasOwnProperty(D)&&G!==q&&(G!=null||q!=null))switch(D){case"selected":l.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ht(l,c,D,G,m,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in f)G=f[Le],f.hasOwnProperty(Le)&&G!=null&&!m.hasOwnProperty(Le)&&ht(l,c,Le,null,m,G);for(U in m)if(G=m[U],q=f[U],m.hasOwnProperty(U)&&G!==q&&(G!=null||q!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,c));break;default:ht(l,c,U,G,m,q)}return;default:if(ab(c)){for(var pt in f)G=f[pt],f.hasOwnProperty(pt)&&G!==void 0&&!m.hasOwnProperty(pt)&&qy(l,c,pt,void 0,m,G);for(Q in m)G=m[Q],q=f[Q],!m.hasOwnProperty(Q)||G===q||G===void 0&&q===void 0||qy(l,c,Q,G,m,q);return}}for(var j in f)G=f[j],f.hasOwnProperty(j)&&G!=null&&!m.hasOwnProperty(j)&&ht(l,c,j,null,m,G);for(re in m)G=m[re],q=f[re],!m.hasOwnProperty(re)||G===q||G==null&&q==null||ht(l,c,re,G,m,q)}var Ky=null,Zy=null;function mh(l){return l.nodeType===9?l:l.ownerDocument}function VE(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zE(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function Yy(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Wy=null;function _8(){var l=window.event;return l&&l.type==="popstate"?l===Wy?!1:(Wy=l,!0):(Wy=null,!1)}var UE=typeof setTimeout=="function"?setTimeout:void 0,L8=typeof clearTimeout=="function"?clearTimeout:void 0,$E=typeof Promise=="function"?Promise:void 0,B8=typeof queueMicrotask=="function"?queueMicrotask:typeof $E<"u"?function(l){return $E.resolve(null).then(l).catch(I8)}:UE;function I8(l){setTimeout(function(){throw l})}function Zi(l){return l==="head"}function FE(l,c){var f=c,m=0,y=0;do{var x=f.nextSibling;if(l.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"){if(0<m&&8>m){f=m;var M=l.ownerDocument;if(f&1&&Cu(M.documentElement),f&2&&Cu(M.body),f&4)for(f=M.head,Cu(f),M=f.firstChild;M;){var A=M.nextSibling,D=M.nodeName;M[Hc]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&M.rel.toLowerCase()==="stylesheet"||f.removeChild(M),M=A}}if(y===0){l.removeChild(x),Ou(c);return}y--}else f==="$"||f==="$?"||f==="$!"?y++:m=f.charCodeAt(0)-48;else m=0;f=x}while(f);Ou(c)}function Xy(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Xy(f),nb(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}l.removeChild(f)}}function H8(l,c,f,m){for(;l.nodeType===1;){var y=f;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[Hc])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(x=l.getAttribute("rel"),x==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(x!==y.rel||l.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||l.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||l.getAttribute("title")!==(y.title==null?null:y.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(x=l.getAttribute("src"),(x!==(y.src==null?null:y.src)||l.getAttribute("type")!==(y.type==null?null:y.type)||l.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&l.getAttribute("name")===x)return l}else return l;if(l=Yr(l.nextSibling),l===null)break}return null}function P8(l,c,f){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!f||(l=Yr(l.nextSibling),l===null))return null;return l}function Jy(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function j8(l,c){var f=l.ownerDocument;if(l.data!=="$?"||f.readyState==="complete")c();else{var m=function(){c(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function Yr(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return l}var Qy=null;function GE(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var f=l.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return l;c--}else f==="/$"&&c++}l=l.previousSibling}return null}function qE(l,c,f){switch(c=mh(f),l){case"html":if(l=c.documentElement,!l)throw Error(r(452));return l;case"head":if(l=c.head,!l)throw Error(r(453));return l;case"body":if(l=c.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Cu(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);nb(l)}var _r=new Map,KE=new Set;function gh(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ei=Y.d;Y.d={f:V8,r:z8,D:U8,C:$8,L:F8,m:G8,X:K8,S:q8,M:Z8};function V8(){var l=ei.f(),c=lh();return l||c}function z8(l){var c=ta(l);c!==null&&c.tag===5&&c.type==="form"?hk(c):ei.r(l)}var Ba=typeof document>"u"?null:document;function ZE(l,c,f){var m=Ba;if(m&&typeof c=="string"&&c){var y=Mr(c);y='link[rel="'+l+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),KE.has(y)||(KE.add(y),l={rel:l,crossOrigin:f,href:c},m.querySelector(y)===null&&(c=m.createElement("link"),vn(c,"link",l),on(c),m.head.appendChild(c)))}}function U8(l){ei.D(l),ZE("dns-prefetch",l,null)}function $8(l,c){ei.C(l,c),ZE("preconnect",l,c)}function F8(l,c,f){ei.L(l,c,f);var m=Ba;if(m&&l&&c){var y='link[rel="preload"][as="'+Mr(c)+'"]';c==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+Mr(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+Mr(f.imageSizes)+'"]')):y+='[href="'+Mr(l)+'"]';var x=y;switch(c){case"style":x=Ia(l);break;case"script":x=Ha(l)}_r.has(x)||(l=h({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:l,as:c},f),_r.set(x,l),m.querySelector(y)!==null||c==="style"&&m.querySelector(Su(x))||c==="script"&&m.querySelector(ku(x))||(c=m.createElement("link"),vn(c,"link",l),on(c),m.head.appendChild(c)))}}function G8(l,c){ei.m(l,c);var f=Ba;if(f&&l){var m=c&&typeof c.as=="string"?c.as:"script",y='link[rel="modulepreload"][as="'+Mr(m)+'"][href="'+Mr(l)+'"]',x=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Ha(l)}if(!_r.has(x)&&(l=h({rel:"modulepreload",href:l},c),_r.set(x,l),f.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(ku(x)))return}m=f.createElement("link"),vn(m,"link",l),on(m),f.head.appendChild(m)}}}function q8(l,c,f){ei.S(l,c,f);var m=Ba;if(m&&l){var y=na(m).hoistableStyles,x=Ia(l);c=c||"default";var M=y.get(x);if(!M){var A={loading:0,preload:null};if(M=m.querySelector(Su(x)))A.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":c},f),(f=_r.get(x))&&e0(l,f);var D=M=m.createElement("link");on(D),vn(D,"link",l),D._p=new Promise(function(U,Q){D.onload=U,D.onerror=Q}),D.addEventListener("load",function(){A.loading|=1}),D.addEventListener("error",function(){A.loading|=2}),A.loading|=4,bh(M,c,m)}M={type:"stylesheet",instance:M,count:1,state:A},y.set(x,M)}}}function K8(l,c){ei.X(l,c);var f=Ba;if(f&&l){var m=na(f).hoistableScripts,y=Ha(l),x=m.get(y);x||(x=f.querySelector(ku(y)),x||(l=h({src:l,async:!0},c),(c=_r.get(y))&&t0(l,c),x=f.createElement("script"),on(x),vn(x,"link",l),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(y,x))}}function Z8(l,c){ei.M(l,c);var f=Ba;if(f&&l){var m=na(f).hoistableScripts,y=Ha(l),x=m.get(y);x||(x=f.querySelector(ku(y)),x||(l=h({src:l,async:!0,type:"module"},c),(c=_r.get(y))&&t0(l,c),x=f.createElement("script"),on(x),vn(x,"link",l),f.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(y,x))}}function YE(l,c,f,m){var y=(y=me.current)?gh(y):null;if(!y)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Ia(f.href),f=na(y).hoistableStyles,m=f.get(c),m||(m={type:"style",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){l=Ia(f.href);var x=na(y).hoistableStyles,M=x.get(l);if(M||(y=y.ownerDocument||y,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(l,M),(x=y.querySelector(Su(l)))&&!x._p&&(M.instance=x,M.state.loading=5),_r.has(l)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},_r.set(l,f),x||Y8(y,l,f,M.state))),c&&m===null)throw Error(r(528,""));return M}if(c&&m!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Ha(f),f=na(y).hoistableScripts,m=f.get(c),m||(m={type:"script",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Ia(l){return'href="'+Mr(l)+'"'}function Su(l){return'link[rel="stylesheet"]['+l+"]"}function WE(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function Y8(l,c,f,m){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=l.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),vn(c,"link",f),on(c),l.head.appendChild(c))}function Ha(l){return'[src="'+Mr(l)+'"]'}function ku(l){return"script[async]"+l}function XE(l,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var m=l.querySelector('style[data-href~="'+Mr(f.href)+'"]');if(m)return c.instance=m,on(m),m;var y=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),on(m),vn(m,"style",y),bh(m,f.precedence,l),c.instance=m;case"stylesheet":y=Ia(f.href);var x=l.querySelector(Su(y));if(x)return c.state.loading|=4,c.instance=x,on(x),x;m=WE(f),(y=_r.get(y))&&e0(m,y),x=(l.ownerDocument||l).createElement("link"),on(x);var M=x;return M._p=new Promise(function(A,D){M.onload=A,M.onerror=D}),vn(x,"link",m),c.state.loading|=4,bh(x,f.precedence,l),c.instance=x;case"script":return x=Ha(f.src),(y=l.querySelector(ku(x)))?(c.instance=y,on(y),y):(m=f,(y=_r.get(x))&&(m=h({},f),t0(m,y)),l=l.ownerDocument||l,y=l.createElement("script"),on(y),vn(y,"link",m),l.head.appendChild(y),c.instance=y);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,bh(m,f.precedence,l));return c.instance}function bh(l,c,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,x=y,M=0;M<m.length;M++){var A=m[M];if(A.dataset.precedence===c)x=A;else if(x!==y)break}x?x.parentNode.insertBefore(l,x.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(l,c.firstChild))}function e0(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function t0(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var yh=null;function JE(l,c,f){if(yh===null){var m=new Map,y=yh=new Map;y.set(f,m)}else y=yh,m=y.get(f),m||(m=new Map,y.set(f,m));if(m.has(l))return m;for(m.set(l,null),f=f.getElementsByTagName(l),y=0;y<f.length;y++){var x=f[y];if(!(x[Hc]||x[Mn]||l==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var M=x.getAttribute(c)||"";M=l+M;var A=m.get(M);A?A.push(x):m.set(M,[x])}}return m}function QE(l,c,f){l=l.ownerDocument||l,l.head.insertBefore(f,c==="title"?l.querySelector("head > title"):null)}function W8(l,c,f){if(f===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function e2(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Eu=null;function X8(){}function J8(l,c,f){if(Eu===null)throw Error(r(475));var m=Eu;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=Ia(f.href),x=l.querySelector(Su(y));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(m.count++,m=vh.bind(m),l.then(m,m)),c.state.loading|=4,c.instance=x,on(x);return}x=l.ownerDocument||l,f=WE(f),(y=_r.get(y))&&e0(f,y),x=x.createElement("link"),on(x);var M=x;M._p=new Promise(function(A,D){M.onload=A,M.onerror=D}),vn(x,"link",f),c.instance=x}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=vh.bind(m),l.addEventListener("load",c),l.addEventListener("error",c))}}function Q8(){if(Eu===null)throw Error(r(475));var l=Eu;return l.stylesheets&&l.count===0&&n0(l,l.stylesheets),0<l.count?function(c){var f=setTimeout(function(){if(l.stylesheets&&n0(l,l.stylesheets),l.unsuspend){var m=l.unsuspend;l.unsuspend=null,m()}},6e4);return l.unsuspend=c,function(){l.unsuspend=null,clearTimeout(f)}}:null}function vh(){if(this.count--,this.count===0){if(this.stylesheets)n0(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var wh=null;function n0(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,wh=new Map,c.forEach(eH,l),wh=null,vh.call(l))}function eH(l,c){if(!(c.state.loading&4)){var f=wh.get(l);if(f)var m=f.get(null);else{f=new Map,wh.set(l,f);for(var y=l.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var M=y[x];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(f.set(M.dataset.precedence,M),m=M)}m&&f.set(null,m)}y=c.instance,M=y.getAttribute("data-precedence"),x=f.get(M)||m,x===m&&f.set(null,y),f.set(M,y),this.count++,m=vh.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),x?x.parentNode.insertBefore(y,x.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(y,l.firstChild)),c.state.loading|=4}}var Mu={$$typeof:N,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function tH(l,c,f,m,y,x,M,A){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jg(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jg(0),this.hiddenUpdates=Jg(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function t2(l,c,f,m,y,x,M,A,D,U,Q,re){return l=new tH(l,c,f,M,A,D,U,re),c=1,x===!0&&(c|=24),x=ir(3,null,null,c),l.current=x,x.stateNode=l,c=Hb(),c.refCount++,l.pooledCache=c,c.refCount++,x.memoizedState={element:m,isDehydrated:f,cache:c},zb(x),l}function n2(l){return l?(l=pa,l):pa}function r2(l,c,f,m,y,x){y=n2(y),m.context===null?m.context=y:m.pendingContext=y,m=Bi(c),m.payload={element:f},x=x===void 0?null:x,x!==null&&(m.callback=x),f=Ii(l,m,c),f!==null&&(ur(f,l,c),nu(f,l,c))}function o2(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var f=l.retryLane;l.retryLane=f!==0&&f<c?f:c}}function r0(l,c){o2(l,c),(l=l.alternate)&&o2(l,c)}function i2(l){if(l.tag===13){var c=ha(l,67108864);c!==null&&ur(c,l,67108864),r0(l,67108864)}}var xh=!0;function nH(l,c,f,m){var y=B.T;B.T=null;var x=Y.p;try{Y.p=2,o0(l,c,f,m)}finally{Y.p=x,B.T=y}}function rH(l,c,f,m){var y=B.T;B.T=null;var x=Y.p;try{Y.p=8,o0(l,c,f,m)}finally{Y.p=x,B.T=y}}function o0(l,c,f,m){if(xh){var y=i0(m);if(y===null)Gy(l,c,m,Ch,f),l2(l,m);else if(iH(y,l,c,f,m))m.stopPropagation();else if(l2(l,m),c&4&&-1<oH.indexOf(l)){for(;y!==null;){var x=ta(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var M=jo(x.pendingLanes);if(M!==0){var A=x;for(A.pendingLanes|=2,A.entangledLanes|=2;M;){var D=1<<31-kt(M);A.entanglements[1]|=D,M&=~D}go(x),(ut&6)===0&&(ih=En()+500,vu(0))}}break;case 13:A=ha(x,2),A!==null&&ur(A,x,2),lh(),r0(x,2)}if(x=i0(m),x===null&&Gy(l,c,m,Ch,f),x===y)break;y=x}y!==null&&m.stopPropagation()}else Gy(l,c,m,null,f)}}function i0(l){return l=ub(l),s0(l)}var Ch=null;function s0(l){if(Ch=null,l=ea(l),l!==null){var c=i(l);if(c===null)l=null;else{var f=c.tag;if(f===13){if(l=s(c),l!==null)return l;l=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return Ch=l,null}function s2(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(CC()){case Bc:return 2;case L:return 8;case F:case ee:return 32;case be:return 268435456;default:return 32}default:return 32}}var l0=!1,Yi=null,Wi=null,Xi=null,Tu=new Map,Au=new Map,Ji=[],oH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l2(l,c){switch(l){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Tu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(c.pointerId)}}function Nu(l,c,f,m,y,x){return l===null||l.nativeEvent!==x?(l={blockedOn:c,domEventName:f,eventSystemFlags:m,nativeEvent:x,targetContainers:[y]},c!==null&&(c=ta(c),c!==null&&i2(c)),l):(l.eventSystemFlags|=m,c=l.targetContainers,y!==null&&c.indexOf(y)===-1&&c.push(y),l)}function iH(l,c,f,m,y){switch(c){case"focusin":return Yi=Nu(Yi,l,c,f,m,y),!0;case"dragenter":return Wi=Nu(Wi,l,c,f,m,y),!0;case"mouseover":return Xi=Nu(Xi,l,c,f,m,y),!0;case"pointerover":var x=y.pointerId;return Tu.set(x,Nu(Tu.get(x)||null,l,c,f,m,y)),!0;case"gotpointercapture":return x=y.pointerId,Au.set(x,Nu(Au.get(x)||null,l,c,f,m,y)),!0}return!1}function a2(l){var c=ea(l.target);if(c!==null){var f=i(c);if(f!==null){if(c=f.tag,c===13){if(c=s(f),c!==null){l.blockedOn=c,JB(l.priority,function(){if(f.tag===13){var m=cr();m=Qg(m);var y=ha(f,m);y!==null&&ur(y,f,m),r0(f,m)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){l.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Sh(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var f=i0(l.nativeEvent);if(f===null){f=l.nativeEvent;var m=new f.constructor(f.type,f);cb=m,f.target.dispatchEvent(m),cb=null}else return c=ta(f),c!==null&&i2(c),l.blockedOn=f,!1;c.shift()}return!0}function c2(l,c,f){Sh(l)&&f.delete(c)}function sH(){l0=!1,Yi!==null&&Sh(Yi)&&(Yi=null),Wi!==null&&Sh(Wi)&&(Wi=null),Xi!==null&&Sh(Xi)&&(Xi=null),Tu.forEach(c2),Au.forEach(c2)}function kh(l,c){l.blockedOn===c&&(l.blockedOn=null,l0||(l0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sH)))}var Eh=null;function u2(l){Eh!==l&&(Eh=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Eh===l&&(Eh=null);for(var c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],y=l[c+2];if(typeof m!="function"){if(s0(m||f)===null)continue;break}var x=ta(f);x!==null&&(l.splice(c,3),c-=3,sy(x,{pending:!0,data:y,method:f.method,action:m},m,y))}}))}function Ou(l){function c(D){return kh(D,l)}Yi!==null&&kh(Yi,l),Wi!==null&&kh(Wi,l),Xi!==null&&kh(Xi,l),Tu.forEach(c),Au.forEach(c);for(var f=0;f<Ji.length;f++){var m=Ji[f];m.blockedOn===l&&(m.blockedOn=null)}for(;0<Ji.length&&(f=Ji[0],f.blockedOn===null);)a2(f),f.blockedOn===null&&Ji.shift();if(f=(l.ownerDocument||l).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var y=f[m],x=f[m+1],M=y[Gn]||null;if(typeof x=="function")M||u2(f);else if(M){var A=null;if(x&&x.hasAttribute("formAction")){if(y=x,M=x[Gn]||null)A=M.formAction;else if(s0(y)!==null)continue}else A=M.action;typeof A=="function"?f[m+1]=A:(f.splice(m,3),m-=3),u2(f)}}}function a0(l){this._internalRoot=l}Mh.prototype.render=a0.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,m=cr();r2(f,m,l,c,null,null)},Mh.prototype.unmount=a0.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;r2(l.current,2,null,l,null,null),lh(),c[Ql]=null}};function Mh(l){this._internalRoot=l}Mh.prototype.unstable_scheduleHydration=function(l){if(l){var c=TC();l={blockedOn:null,target:l,priority:c};for(var f=0;f<Ji.length&&c!==0&&c<Ji[f].priority;f++);Ji.splice(f,0,l),f===0&&a2(l)}};var d2=e.version;if(d2!=="19.1.1")throw Error(r(527,d2,"19.1.1"));Y.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(c),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var lH={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{Me=Th.inject(lH),Pe=Th}catch{}}return Du.createRoot=function(l,c){if(!o(l))throw Error(r(299));var f=!1,m="",y=Tk,x=Ak,M=Nk,A=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(y=c.onUncaughtError),c.onCaughtError!==void 0&&(x=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(A=c.unstable_transitionCallbacks)),c=t2(l,1,!1,null,null,f,m,y,x,M,A,null),l[Ql]=c.current,Fy(l),new a0(c)},Du.hydrateRoot=function(l,c,f){if(!o(l))throw Error(r(299));var m=!1,y="",x=Tk,M=Ak,A=Nk,D=null,U=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(M=f.onCaughtError),f.onRecoverableError!==void 0&&(A=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(D=f.unstable_transitionCallbacks),f.formState!==void 0&&(U=f.formState)),c=t2(l,1,!0,c,f??null,m,y,x,M,A,D,U),c.context=n2(null),f=c.current,m=cr(),m=Qg(m),y=Bi(m),y.callback=null,Ii(f,y,m),f=m,c.current.lanes=f,Ic(c,f),go(c),l[Ql]=c.current,Fy(l),new Mh(c)},Du.version="19.1.1",Du}var x2;function bH(){if(x2)return d0.exports;x2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),d0.exports=gH(),d0.exports}var TN=bH();const yH=sw(TN),vH="modulepreload",wH=function(t){return"/moox/block-editor/assets/"+t},C2={},Wn=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let u=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");o=u(n.map(d=>{if(d=wH(d),d in C2)return;C2[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":vH,h||(g.as="script"),g.crossOrigin="",g.href=d,a&&g.setAttribute("nonce",a),document.head.appendChild(g),h)return new Promise((b,v)=>{g.addEventListener("load",b),g.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function zm(){return typeof window<"u"}function Cc(t){return AN(t)?(t.nodeName||"").toLowerCase():"#document"}function br(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Do(t){var e;return(e=(AN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function AN(t){return zm()?t instanceof Node||t instanceof br(t).Node:!1}function Vt(t){return zm()?t instanceof Element||t instanceof br(t).Element:!1}function ro(t){return zm()?t instanceof HTMLElement||t instanceof br(t).HTMLElement:!1}function Rv(t){return!zm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof br(t).ShadowRoot}const xH=new Set(["inline","contents"]);function Fd(t){const{overflow:e,overflowX:n,overflowY:r,display:o}=Fr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!xH.has(o)}const CH=new Set(["table","td","th"]);function SH(t){return CH.has(Cc(t))}const kH=[":popover-open",":modal"];function Um(t){return kH.some(e=>{try{return t.matches(e)}catch{return!1}})}const EH=["transform","translate","scale","rotate","perspective"],MH=["transform","translate","scale","rotate","perspective","filter"],TH=["paint","layout","strict","content"];function aw(t){const e=$m(),n=Vt(t)?Fr(t):t;return EH.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||MH.some(r=>(n.willChange||"").includes(r))||TH.some(r=>(n.contain||"").includes(r))}function AH(t){let e=bi(t);for(;ro(e)&&!Ss(e);){if(aw(e))return e;if(Um(e))return null;e=bi(e)}return null}function $m(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const NH=new Set(["html","body","#document"]);function Ss(t){return NH.has(Cc(t))}function Fr(t){return br(t).getComputedStyle(t)}function Fm(t){return Vt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bi(t){if(Cc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Rv(t)&&t.host||Do(t);return Rv(e)?e.host:e}function NN(t){const e=bi(t);return Ss(e)?t.ownerDocument?t.ownerDocument.body:t.body:ro(e)&&Fd(e)?e:NN(e)}function vs(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=NN(t),i=o===((r=t.ownerDocument)==null?void 0:r.body),s=br(o);if(i){const a=Dv(s);return e.concat(s,s.visualViewport||[],Fd(o)?o:[],a&&n?vs(a):[])}return e.concat(o,vs(o,[],n))}function Dv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function OH(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function _v(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&Rv(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function RH(){return/apple/i.test(navigator.vendor)}function DH(t){return"nativeEvent"in t}function _H(t){return t.matches("html,body")}function Lv(t){return t?.ownerDocument||document}function m0(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function _u(t){return"composedPath"in t?t.composedPath()[0]:t.target}const LH=["top","right","bottom","left"],ks=Math.min,pr=Math.max,Cp=Math.round,Ah=Math.floor,Eo=t=>({x:t,y:t}),BH={left:"right",right:"left",bottom:"top",top:"bottom"},IH={start:"end",end:"start"};function Bv(t,e,n){return pr(t,ks(e,n))}function yi(t,e){return typeof t=="function"?t(e):t}function vi(t){return t.split("-")[0]}function Sc(t){return t.split("-")[1]}function cw(t){return t==="x"?"y":"x"}function uw(t){return t==="y"?"height":"width"}const HH=new Set(["top","bottom"]);function Co(t){return HH.has(vi(t))?"y":"x"}function dw(t){return cw(Co(t))}function PH(t,e,n){n===void 0&&(n=!1);const r=Sc(t),o=dw(t),i=uw(o);let s=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(s=Sp(s)),[s,Sp(s)]}function jH(t){const e=Sp(t);return[Iv(t),e,Iv(e)]}function Iv(t){return t.replace(/start|end/g,e=>IH[e])}const S2=["left","right"],k2=["right","left"],VH=["top","bottom"],zH=["bottom","top"];function UH(t,e,n){switch(t){case"top":case"bottom":return n?e?k2:S2:e?S2:k2;case"left":case"right":return e?VH:zH;default:return[]}}function $H(t,e,n,r){const o=Sc(t);let i=UH(vi(t),n==="start",r);return o&&(i=i.map(s=>s+"-"+o),e&&(i=i.concat(i.map(Iv)))),i}function Sp(t){return t.replace(/left|right|bottom|top/g,e=>BH[e])}function FH(t){return{top:0,right:0,bottom:0,left:0,...t}}function ON(t){return typeof t!="number"?FH(t):{top:t,right:t,bottom:t,left:t}}function kp(t){const{x:e,y:n,width:r,height:o}=t;return{width:r,height:o,top:n,left:e,right:e+r,bottom:n+o,x:e,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var GH=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Hv=GH.join(","),RN=typeof Element>"u",hd=RN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ep=!RN&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t?.ownerDocument},Mp=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=o===""||o==="true",s=i||n&&e&&t(e.parentNode);return s},qH=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},KH=function(e,n,r){if(Mp(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(Hv));return n&&hd.call(e,Hv)&&o.unshift(e),o=o.filter(r),o},ZH=function t(e,n,r){for(var o=[],i=Array.from(e);i.length;){var s=i.shift();if(!Mp(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),u=a.length?a:s.children,d=t(u,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:s,candidates:d})}else{var h=hd.call(s,Hv);h&&r.filter(s)&&(n||!e.includes(s))&&o.push(s);var p=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),g=!Mp(p,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(p&&g){var b=t(p===!0?s.children:p.children,!0,r);r.flatten?o.push.apply(o,b):o.push({scopeParent:s,candidates:b})}else i.unshift.apply(i,s.children)}}return o},DN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},_N=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||qH(e))&&!DN(e)?0:e.tabIndex},YH=function(e,n){var r=_N(e);return r<0&&n&&!DN(e)?0:r},WH=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},LN=function(e){return e.tagName==="INPUT"},XH=function(e){return LN(e)&&e.type==="hidden"},JH=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},QH=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},eP=function(e){if(!e.name)return!0;var n=e.form||Ep(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=QH(o,e.form);return!i||i===e},tP=function(e){return LN(e)&&e.type==="radio"},nP=function(e){return tP(e)&&!eP(e)},rP=function(e){var n,r=e&&Ep(e),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var s,a,u;for(i=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!i&&o;){var d,h,p;r=Ep(o),o=(d=r)===null||d===void 0?void 0:d.host,i=!!((h=o)!==null&&h!==void 0&&(p=h.ownerDocument)!==null&&p!==void 0&&p.contains(o))}}return i},E2=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},oP=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var i=hd.call(e,"details>summary:first-of-type"),s=i?e.parentElement:e;if(hd.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var u=e.parentElement,d=Ep(e);if(u&&!u.shadowRoot&&o(u)===!0)return E2(e);e.assignedSlot?e=e.assignedSlot:!u&&d!==e.ownerDocument?e=d.host:e=u}e=a}if(rP(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return E2(e);return!1},iP=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return hd.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},sP=function(e,n){return!(n.disabled||Mp(n)||XH(n)||oP(n,e)||JH(n)||iP(n))},M2=function(e,n){return!(nP(n)||_N(n)<0||!sP(e,n))},lP=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},aP=function t(e){var n=[],r=[];return e.forEach(function(o,i){var s=!!o.scopeParent,a=s?o.scopeParent:o,u=YH(a,s),d=s?t(o.candidates):a;u===0?s?n.push.apply(n,d):n.push(a):r.push({documentOrder:i,tabIndex:u,item:o,isScope:s,content:d})}),r.sort(WH).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},BN=function(e,n){n=n||{};var r;return n.getShadowRoot?r=ZH([e],n.includeContainer,{filter:M2.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:lP}):r=KH(e,n.includeContainer,M2.bind(null,n)),aP(r)},vr=MN();const cP=sw(vr);function T2(t,e,n){let{reference:r,floating:o}=t;const i=Co(e),s=dw(e),a=uw(s),u=vi(e),d=i==="y",h=r.x+r.width/2-o.width/2,p=r.y+r.height/2-o.height/2,g=r[a]/2-o[a]/2;let b;switch(u){case"top":b={x:h,y:r.y-o.height};break;case"bottom":b={x:h,y:r.y+r.height};break;case"right":b={x:r.x+r.width,y:p};break;case"left":b={x:r.x-o.width,y:p};break;default:b={x:r.x,y:r.y}}switch(Sc(e)){case"start":b[s]-=g*(n&&d?-1:1);break;case"end":b[s]+=g*(n&&d?-1:1);break}return b}const uP=async(t,e,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:s}=n,a=i.filter(Boolean),u=await(s.isRTL==null?void 0:s.isRTL(e));let d=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:h,y:p}=T2(d,r,u),g=r,b={},v=0;for(let C=0;C<a.length;C++){const{name:k,fn:E}=a[C],{x:T,y:N,data:_,reset:O}=await E({x:h,y:p,initialPlacement:r,placement:g,strategy:o,middlewareData:b,rects:d,platform:s,elements:{reference:t,floating:e}});h=T??h,p=N??p,b={...b,[k]:{...b[k],..._}},O&&v<=50&&(v++,typeof O=="object"&&(O.placement&&(g=O.placement),O.rects&&(d=O.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):O.rects),{x:h,y:p}=T2(d,g,u)),C=-1)}return{x:h,y:p,placement:g,strategy:o,middlewareData:b}};async function pd(t,e){var n;e===void 0&&(e={});const{x:r,y:o,platform:i,rects:s,elements:a,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:g=!1,padding:b=0}=yi(e,t),v=ON(b),k=a[g?p==="floating"?"reference":"floating":p],E=kp(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(k)))==null||n?k:k.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:d,rootBoundary:h,strategy:u})),T=p==="floating"?{x:r,y:o,width:s.floating.width,height:s.floating.height}:s.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},O=kp(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:T,offsetParent:N,strategy:u}):T);return{top:(E.top-O.top+v.top)/_.y,bottom:(O.bottom-E.bottom+v.bottom)/_.y,left:(E.left-O.left+v.left)/_.x,right:(O.right-E.right+v.right)/_.x}}const dP=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:o,rects:i,platform:s,elements:a,middlewareData:u}=e,{element:d,padding:h=0}=yi(t,e)||{};if(d==null)return{};const p=ON(h),g={x:n,y:r},b=dw(o),v=uw(b),C=await s.getDimensions(d),k=b==="y",E=k?"top":"left",T=k?"bottom":"right",N=k?"clientHeight":"clientWidth",_=i.reference[v]+i.reference[b]-g[b]-i.floating[v],O=g[b]-i.reference[b],$=await(s.getOffsetParent==null?void 0:s.getOffsetParent(d));let H=$?$[N]:0;(!H||!await(s.isElement==null?void 0:s.isElement($)))&&(H=a.floating[N]||i.floating[v]);const P=_/2-O/2,W=H/2-C[v]/2-1,ie=ks(p[E],W),ge=ks(p[T],W),ne=ie,fe=H-C[v]-ge,he=H/2-C[v]/2+P,oe=Bv(ne,he,fe),B=!u.arrow&&Sc(o)!=null&&he!==oe&&i.reference[v]/2-(he<ne?ie:ge)-C[v]/2<0,Y=B?he<ne?he-ne:he-fe:0;return{[b]:g[b]+Y,data:{[b]:oe,centerOffset:he-oe-Y,...B&&{alignmentOffset:Y}},reset:B}}}),fP=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:o,middlewareData:i,rects:s,initialPlacement:a,platform:u,elements:d}=e,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:g,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:C=!0,...k}=yi(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=vi(o),T=Co(a),N=vi(a)===a,_=await(u.isRTL==null?void 0:u.isRTL(d.floating)),O=g||(N||!C?[Sp(a)]:jH(a)),$=v!=="none";!g&&$&&O.push(...$H(a,C,v,_));const H=[a,...O],P=await pd(e,k),W=[];let ie=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&W.push(P[E]),p){const he=PH(o,s,_);W.push(P[he[0]],P[he[1]])}if(ie=[...ie,{placement:o,overflows:W}],!W.every(he=>he<=0)){var ge,ne;const he=(((ge=i.flip)==null?void 0:ge.index)||0)+1,oe=H[he];if(oe&&(!(p==="alignment"?T!==Co(oe):!1)||ie.every(J=>Co(J.placement)===T?J.overflows[0]>0:!0)))return{data:{index:he,overflows:ie},reset:{placement:oe}};let B=(ne=ie.filter(Y=>Y.overflows[0]<=0).sort((Y,J)=>Y.overflows[1]-J.overflows[1])[0])==null?void 0:ne.placement;if(!B)switch(b){case"bestFit":{var fe;const Y=(fe=ie.filter(J=>{if($){const Z=Co(J.placement);return Z===T||Z==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(Z=>Z>0).reduce((Z,R)=>Z+R,0)]).sort((J,Z)=>J[1]-Z[1])[0])==null?void 0:fe[0];Y&&(B=Y);break}case"initialPlacement":B=a;break}if(o!==B)return{reset:{placement:B}}}return{}}}};function A2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function N2(t){return LH.some(e=>t[e]>=0)}const hP=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...o}=yi(t,e);switch(r){case"referenceHidden":{const i=await pd(e,{...o,elementContext:"reference"}),s=A2(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:N2(s)}}}case"escaped":{const i=await pd(e,{...o,altBoundary:!0}),s=A2(i,n.floating);return{data:{escapedOffsets:s,escaped:N2(s)}}}default:return{}}}}},IN=new Set(["left","top"]);async function pP(t,e){const{placement:n,platform:r,elements:o}=t,i=await(r.isRTL==null?void 0:r.isRTL(o.floating)),s=vi(n),a=Sc(n),u=Co(n)==="y",d=IN.has(s)?-1:1,h=i&&u?-1:1,p=yi(e,t);let{mainAxis:g,crossAxis:b,alignmentAxis:v}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return a&&typeof v=="number"&&(b=a==="end"?v*-1:v),u?{x:b*h,y:g*d}:{x:g*d,y:b*h}}const mP=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:o,y:i,placement:s,middlewareData:a}=e,u=await pP(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+u.x,y:i+u.y,data:{...u,placement:s}}}}},gP=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:o}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:k=>{let{x:E,y:T}=k;return{x:E,y:T}}},...u}=yi(t,e),d={x:n,y:r},h=await pd(e,u),p=Co(vi(o)),g=cw(p);let b=d[g],v=d[p];if(i){const k=g==="y"?"top":"left",E=g==="y"?"bottom":"right",T=b+h[k],N=b-h[E];b=Bv(T,b,N)}if(s){const k=p==="y"?"top":"left",E=p==="y"?"bottom":"right",T=v+h[k],N=v-h[E];v=Bv(T,v,N)}const C=a.fn({...e,[g]:b,[p]:v});return{...C,data:{x:C.x-n,y:C.y-r,enabled:{[g]:i,[p]:s}}}}}},bP=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:o,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:u=!0,crossAxis:d=!0}=yi(t,e),h={x:n,y:r},p=Co(o),g=cw(p);let b=h[g],v=h[p];const C=yi(a,e),k=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(u){const N=g==="y"?"height":"width",_=i.reference[g]-i.floating[N]+k.mainAxis,O=i.reference[g]+i.reference[N]-k.mainAxis;b<_?b=_:b>O&&(b=O)}if(d){var E,T;const N=g==="y"?"width":"height",_=IN.has(vi(o)),O=i.reference[p]-i.floating[N]+(_&&((E=s.offset)==null?void 0:E[p])||0)+(_?0:k.crossAxis),$=i.reference[p]+i.reference[N]+(_?0:((T=s.offset)==null?void 0:T[p])||0)-(_?k.crossAxis:0);v<O?v=O:v>$&&(v=$)}return{[g]:b,[p]:v}}}},yP=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:o,rects:i,platform:s,elements:a}=e,{apply:u=()=>{},...d}=yi(t,e),h=await pd(e,d),p=vi(o),g=Sc(o),b=Co(o)==="y",{width:v,height:C}=i.floating;let k,E;p==="top"||p==="bottom"?(k=p,E=g===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(E=p,k=g==="end"?"top":"bottom");const T=C-h.top-h.bottom,N=v-h.left-h.right,_=ks(C-h[k],T),O=ks(v-h[E],N),$=!e.middlewareData.shift;let H=_,P=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(H=T),$&&!g){const ie=pr(h.left,0),ge=pr(h.right,0),ne=pr(h.top,0),fe=pr(h.bottom,0);b?P=v-2*(ie!==0||ge!==0?ie+ge:pr(h.left,h.right)):H=C-2*(ne!==0||fe!==0?ne+fe:pr(h.top,h.bottom))}await u({...e,availableWidth:P,availableHeight:H});const W=await s.getDimensions(a.floating);return v!==W.width||C!==W.height?{reset:{rects:!0}}:{}}}};function HN(t){const e=Fr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const o=ro(t),i=o?t.offsetWidth:n,s=o?t.offsetHeight:r,a=Cp(n)!==i||Cp(r)!==s;return a&&(n=i,r=s),{width:n,height:r,$:a}}function fw(t){return Vt(t)?t:t.contextElement}function Ja(t){const e=fw(t);if(!ro(e))return Eo(1);const n=e.getBoundingClientRect(),{width:r,height:o,$:i}=HN(e);let s=(i?Cp(n.width):n.width)/r,a=(i?Cp(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const vP=Eo(0);function PN(t){const e=br(t);return!$m()||!e.visualViewport?vP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function wP(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==br(t)?!1:e}function Al(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),i=fw(t);let s=Eo(1);e&&(r?Vt(r)&&(s=Ja(r)):s=Ja(t));const a=wP(i,n,r)?PN(i):Eo(0);let u=(o.left+a.x)/s.x,d=(o.top+a.y)/s.y,h=o.width/s.x,p=o.height/s.y;if(i){const g=br(i),b=r&&Vt(r)?br(r):r;let v=g,C=Dv(v);for(;C&&r&&b!==v;){const k=Ja(C),E=C.getBoundingClientRect(),T=Fr(C),N=E.left+(C.clientLeft+parseFloat(T.paddingLeft))*k.x,_=E.top+(C.clientTop+parseFloat(T.paddingTop))*k.y;u*=k.x,d*=k.y,h*=k.x,p*=k.y,u+=N,d+=_,v=br(C),C=Dv(v)}}return kp({width:h,height:p,x:u,y:d})}function hw(t,e){const n=Fm(t).scrollLeft;return e?e.left+n:Al(Do(t)).left+n}function jN(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=r.left+e.scrollLeft-(n?0:hw(t,r)),i=r.top+e.scrollTop;return{x:o,y:i}}function xP(t){let{elements:e,rect:n,offsetParent:r,strategy:o}=t;const i=o==="fixed",s=Do(r),a=e?Um(e.floating):!1;if(r===s||a&&i)return n;let u={scrollLeft:0,scrollTop:0},d=Eo(1);const h=Eo(0),p=ro(r);if((p||!p&&!i)&&((Cc(r)!=="body"||Fd(s))&&(u=Fm(r)),ro(r))){const b=Al(r);d=Ja(r),h.x=b.x+r.clientLeft,h.y=b.y+r.clientTop}const g=s&&!p&&!i?jN(s,u,!0):Eo(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-u.scrollLeft*d.x+h.x+g.x,y:n.y*d.y-u.scrollTop*d.y+h.y+g.y}}function CP(t){return Array.from(t.getClientRects())}function SP(t){const e=Do(t),n=Fm(t),r=t.ownerDocument.body,o=pr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=pr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+hw(t);const a=-n.scrollTop;return Fr(r).direction==="rtl"&&(s+=pr(e.clientWidth,r.clientWidth)-o),{width:o,height:i,x:s,y:a}}function kP(t,e){const n=br(t),r=Do(t),o=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,a=0,u=0;if(o){i=o.width,s=o.height;const d=$m();(!d||d&&e==="fixed")&&(a=o.offsetLeft,u=o.offsetTop)}return{width:i,height:s,x:a,y:u}}const EP=new Set(["absolute","fixed"]);function MP(t,e){const n=Al(t,!0,e==="fixed"),r=n.top+t.clientTop,o=n.left+t.clientLeft,i=ro(t)?Ja(t):Eo(1),s=t.clientWidth*i.x,a=t.clientHeight*i.y,u=o*i.x,d=r*i.y;return{width:s,height:a,x:u,y:d}}function O2(t,e,n){let r;if(e==="viewport")r=kP(t,n);else if(e==="document")r=SP(Do(t));else if(Vt(e))r=MP(e,n);else{const o=PN(t);r={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return kp(r)}function VN(t,e){const n=bi(t);return n===e||!Vt(n)||Ss(n)?!1:Fr(n).position==="fixed"||VN(n,e)}function TP(t,e){const n=e.get(t);if(n)return n;let r=vs(t,[],!1).filter(a=>Vt(a)&&Cc(a)!=="body"),o=null;const i=Fr(t).position==="fixed";let s=i?bi(t):t;for(;Vt(s)&&!Ss(s);){const a=Fr(s),u=aw(s);!u&&a.position==="fixed"&&(o=null),(i?!u&&!o:!u&&a.position==="static"&&!!o&&EP.has(o.position)||Fd(s)&&!u&&VN(t,s))?r=r.filter(h=>h!==s):o=a,s=bi(s)}return e.set(t,r),r}function AP(t){let{element:e,boundary:n,rootBoundary:r,strategy:o}=t;const s=[...n==="clippingAncestors"?Um(e)?[]:TP(e,this._c):[].concat(n),r],a=s[0],u=s.reduce((d,h)=>{const p=O2(e,h,o);return d.top=pr(p.top,d.top),d.right=ks(p.right,d.right),d.bottom=ks(p.bottom,d.bottom),d.left=pr(p.left,d.left),d},O2(e,a,o));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function NP(t){const{width:e,height:n}=HN(t);return{width:e,height:n}}function OP(t,e,n){const r=ro(e),o=Do(e),i=n==="fixed",s=Al(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const u=Eo(0);function d(){u.x=hw(o)}if(r||!r&&!i)if((Cc(e)!=="body"||Fd(o))&&(a=Fm(e)),r){const b=Al(e,!0,i,e);u.x=b.x+e.clientLeft,u.y=b.y+e.clientTop}else o&&d();i&&!r&&o&&d();const h=o&&!r&&!i?jN(o,a):Eo(0),p=s.left+a.scrollLeft-u.x-h.x,g=s.top+a.scrollTop-u.y-h.y;return{x:p,y:g,width:s.width,height:s.height}}function g0(t){return Fr(t).position==="static"}function R2(t,e){if(!ro(t)||Fr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Do(t)===n&&(n=n.ownerDocument.body),n}function zN(t,e){const n=br(t);if(Um(t))return n;if(!ro(t)){let o=bi(t);for(;o&&!Ss(o);){if(Vt(o)&&!g0(o))return o;o=bi(o)}return n}let r=R2(t,e);for(;r&&SH(r)&&g0(r);)r=R2(r,e);return r&&Ss(r)&&g0(r)&&!aw(r)?n:r||AH(t)||n}const RP=async function(t){const e=this.getOffsetParent||zN,n=this.getDimensions,r=await n(t.floating);return{reference:OP(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function DP(t){return Fr(t).direction==="rtl"}const _P={convertOffsetParentRelativeRectToViewportRelativeRect:xP,getDocumentElement:Do,getClippingRect:AP,getOffsetParent:zN,getElementRects:RP,getClientRects:CP,getDimensions:NP,getScale:Ja,isElement:Vt,isRTL:DP};function UN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function LP(t,e){let n=null,r;const o=Do(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),i();const d=t.getBoundingClientRect(),{left:h,top:p,width:g,height:b}=d;if(a||e(),!g||!b)return;const v=Ah(p),C=Ah(o.clientWidth-(h+g)),k=Ah(o.clientHeight-(p+b)),E=Ah(h),N={rootMargin:-v+"px "+-C+"px "+-k+"px "+-E+"px",threshold:pr(0,ks(1,u))||1};let _=!0;function O($){const H=$[0].intersectionRatio;if(H!==u){if(!_)return s();H?s(!1,H):r=setTimeout(()=>{s(!1,1e-7)},1e3)}H===1&&!UN(d,t.getBoundingClientRect())&&s(),_=!1}try{n=new IntersectionObserver(O,{...N,root:o.ownerDocument})}catch{n=new IntersectionObserver(O,N)}n.observe(t)}return s(!0),i}function BP(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,d=fw(t),h=o||i?[...d?vs(d):[],...vs(e)]:[];h.forEach(E=>{o&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const p=d&&a?LP(d,n):null;let g=-1,b=null;s&&(b=new ResizeObserver(E=>{let[T]=E;T&&T.target===d&&b&&(b.unobserve(e),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var N;(N=b)==null||N.observe(e)})),n()}),d&&!u&&b.observe(d),b.observe(e));let v,C=u?Al(t):null;u&&k();function k(){const E=Al(t);C&&!UN(C,E)&&n(),C=E,v=requestAnimationFrame(k)}return n(),()=>{var E;h.forEach(T=>{o&&T.removeEventListener("scroll",n),i&&T.removeEventListener("resize",n)}),p?.(),(E=b)==null||E.disconnect(),b=null,u&&cancelAnimationFrame(v)}}const IP=mP,HP=gP,PP=fP,jP=yP,VP=hP,D2=dP,zP=bP,UP=(t,e,n)=>{const r=new Map,o={platform:_P,...n},i={...o.platform,_c:r};return uP(t,e,{...o,platform:i})};var $P=typeof document<"u",FP=function(){},rp=$P?S.useLayoutEffect:FP;function Tp(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Tp(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!Tp(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function $N(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _2(t,e){const n=$N(t);return Math.round(e*n)/n}function b0(t){const e=S.useRef(t);return rp(()=>{e.current=t}),e}function FN(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:u,open:d}=t,[h,p]=S.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[g,b]=S.useState(r);Tp(g,r)||b(r);const[v,C]=S.useState(null),[k,E]=S.useState(null),T=S.useCallback(J=>{J!==$.current&&($.current=J,C(J))},[]),N=S.useCallback(J=>{J!==H.current&&(H.current=J,E(J))},[]),_=i||v,O=s||k,$=S.useRef(null),H=S.useRef(null),P=S.useRef(h),W=u!=null,ie=b0(u),ge=b0(o),ne=b0(d),fe=S.useCallback(()=>{if(!$.current||!H.current)return;const J={placement:e,strategy:n,middleware:g};ge.current&&(J.platform=ge.current),UP($.current,H.current,J).then(Z=>{const R={...Z,isPositioned:ne.current!==!1};he.current&&!Tp(P.current,R)&&(P.current=R,vr.flushSync(()=>{p(R)}))})},[g,e,n,ge,ne]);rp(()=>{d===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,p(J=>({...J,isPositioned:!1})))},[d]);const he=S.useRef(!1);rp(()=>(he.current=!0,()=>{he.current=!1}),[]),rp(()=>{if(_&&($.current=_),O&&(H.current=O),_&&O){if(ie.current)return ie.current(_,O,fe);fe()}},[_,O,fe,ie,W]);const oe=S.useMemo(()=>({reference:$,floating:H,setReference:T,setFloating:N}),[T,N]),B=S.useMemo(()=>({reference:_,floating:O}),[_,O]),Y=S.useMemo(()=>{const J={position:n,left:0,top:0};if(!B.floating)return J;const Z=_2(B.floating,h.x),R=_2(B.floating,h.y);return a?{...J,transform:"translate("+Z+"px, "+R+"px)",...$N(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:R}},[n,a,B.floating,h.x,h.y]);return S.useMemo(()=>({...h,update:fe,refs:oe,elements:B,floatingStyles:Y}),[h,fe,oe,B,Y])}const GP=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?D2({element:r.current,padding:o}).fn(n):{}:r?D2({element:r,padding:o}).fn(n):{}}}},Si=(t,e)=>({...IP(t),options:[t,e]}),Gd=(t,e)=>({...HP(t),options:[t,e]}),qP=(t,e)=>({...zP(t),options:[t,e]}),Ls=(t,e)=>({...PP(t),options:[t,e]}),Gm=(t,e)=>({...jP(t),options:[t,e]}),KP=(t,e)=>({...VP(t),options:[t,e]}),ZP=(t,e)=>({...GP(t),options:[t,e]}),GN={...lw},YP=GN.useInsertionEffect,WP=YP||(t=>t());function Ga(t){const e=S.useRef(()=>{});return WP(()=>{e.current=t}),S.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var Mo=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Pv(){return Pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pv.apply(this,arguments)}let L2=!1,XP=0;const B2=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+XP++;function JP(){const[t,e]=S.useState(()=>L2?B2():void 0);return Mo(()=>{t==null&&e(B2())},[]),S.useEffect(()=>{L2=!0},[]),t}const QP=GN.useId,qN=QP||JP;function ej(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const tj=S.createContext(null),nj=S.createContext(null),rj=()=>{var t;return((t=S.useContext(tj))==null?void 0:t.id)||null},KN=()=>S.useContext(nj);function pw(t){return"data-floating-ui-"+t}function Nh(t){const e=S.useRef(t);return Mo(()=>{e.current=t}),e}function y0(t,e){let n=t.filter(o=>{var i;return o.parentId===e&&((i=o.context)==null?void 0:i.open)}),r=n;for(;r.length;)r=t.filter(o=>{var i;return(i=r)==null?void 0:i.some(s=>{var a;return o.parentId===s.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const ZN=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function YN(t,e){const n=BN(t,ZN());e==="prev"&&n.reverse();const r=n.indexOf(OH(Lv(t)));return n.slice(r+1)[0]}function oj(){return YN(document.body,"next")}function ij(){return YN(document.body,"prev")}function v0(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!_v(n,r)}function sj(t){BN(t,ZN()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function I2(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const WN={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let lj;function H2(t){t.key==="Tab"&&(t.target,clearTimeout(lj))}const P2=S.forwardRef(function(e,n){const[r,o]=S.useState();Mo(()=>(RH()&&o("button"),document.addEventListener("keydown",H2),()=>{document.removeEventListener("keydown",H2)}),[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[pw("focus-guard")]:"",style:WN};return S.createElement("span",Pv({},e,i))}),XN=S.createContext(null),j2=pw("portal");function aj(t){t===void 0&&(t={});const{id:e,root:n}=t,r=qN(),o=uj(),[i,s]=S.useState(null),a=S.useRef(null);return Mo(()=>()=>{i?.remove(),queueMicrotask(()=>{a.current=null})},[i]),Mo(()=>{if(!r||a.current)return;const u=e?document.getElementById(e):null;if(!u)return;const d=document.createElement("div");d.id=r,d.setAttribute(j2,""),u.appendChild(d),a.current=d,s(d)},[e,r]),Mo(()=>{if(n===null||!r||a.current)return;let u=n||o?.portalNode;u&&!Vt(u)&&(u=u.current),u=u||document.body;let d=null;e&&(d=document.createElement("div"),d.id=e,u.appendChild(d));const h=document.createElement("div");h.id=r,h.setAttribute(j2,""),u=d||u,u.appendChild(h),a.current=h,s(h)},[e,n,r,o]),i}function cj(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,i=aj({id:n,root:r}),[s,a]=S.useState(null),u=S.useRef(null),d=S.useRef(null),h=S.useRef(null),p=S.useRef(null),g=s?.modal,b=s?.open,v=!!s&&!s.modal&&s.open&&o&&!!(r||i);return S.useEffect(()=>{if(!i||!o||g)return;function C(k){i&&v0(k)&&(k.type==="focusin"?I2:sj)(i)}return i.addEventListener("focusin",C,!0),i.addEventListener("focusout",C,!0),()=>{i.removeEventListener("focusin",C,!0),i.removeEventListener("focusout",C,!0)}},[i,o,g]),S.useEffect(()=>{i&&(b||I2(i))},[b,i]),S.createElement(XN.Provider,{value:S.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:u,afterOutsideRef:d,beforeInsideRef:h,afterInsideRef:p,portalNode:i,setFocusManagerState:a}),[o,i])},v&&i&&S.createElement(P2,{"data-type":"outside",ref:u,onFocus:C=>{if(v0(C,i)){var k;(k=h.current)==null||k.focus()}else{const E=ij()||s?.refs.domReference.current;E?.focus()}}}),v&&i&&S.createElement("span",{"aria-owns":i.id,style:WN}),i&&vr.createPortal(e,i),v&&i&&S.createElement(P2,{"data-type":"outside",ref:d,onFocus:C=>{if(v0(C,i)){var k;(k=p.current)==null||k.focus()}else{const E=oj()||s?.refs.domReference.current;E?.focus(),s?.closeOnFocusOut&&s?.onOpenChange(!1,C.nativeEvent,"focus-out")}}}))}const uj=()=>S.useContext(XN),dj="data-floating-ui-focusable",fj={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},hj={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},V2=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t?.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t?.outsidePress)!=null?n:!0}};function pj(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=t,{enabled:s=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:d="pointerdown",referencePress:h=!1,referencePressEvent:p="pointerdown",ancestorScroll:g=!1,bubbles:b,capture:v}=e,C=KN(),k=Ga(typeof u=="function"?u:()=>!1),E=typeof u=="function"?k:u,T=S.useRef(!1),N=S.useRef(!1),{escapeKey:_,outsidePress:O}=V2(b),{escapeKey:$,outsidePress:H}=V2(v),P=S.useRef(!1),W=Ga(oe=>{var B;if(!n||!s||!a||oe.key!=="Escape"||P.current)return;const Y=(B=i.current.floatingContext)==null?void 0:B.nodeId,J=C?y0(C.nodesRef.current,Y):[];if(!_&&(oe.stopPropagation(),J.length>0)){let Z=!0;if(J.forEach(R=>{var K;if((K=R.context)!=null&&K.open&&!R.context.dataRef.current.__escapeKeyBubbles){Z=!1;return}}),!Z)return}r(!1,DH(oe)?oe.nativeEvent:oe,"escape-key")}),ie=Ga(oe=>{var B;const Y=()=>{var J;W(oe),(J=_u(oe))==null||J.removeEventListener("keydown",Y)};(B=_u(oe))==null||B.addEventListener("keydown",Y)}),ge=Ga(oe=>{var B;const Y=T.current;T.current=!1;const J=N.current;if(N.current=!1,d==="click"&&J||Y||typeof E=="function"&&!E(oe))return;const Z=_u(oe),R="["+pw("inert")+"]",K=Lv(o.floating).querySelectorAll(R);let ae=Vt(Z)?Z:null;for(;ae&&!Ss(ae);){const me=bi(ae);if(Ss(me)||!Vt(me))break;ae=me}if(K.length&&Vt(Z)&&!_H(Z)&&!_v(Z,o.floating)&&Array.from(K).every(me=>!_v(ae,me)))return;if(ro(Z)&&he){const me=Z.clientWidth>0&&Z.scrollWidth>Z.clientWidth,ue=Z.clientHeight>0&&Z.scrollHeight>Z.clientHeight;let Te=ue&&oe.offsetX>Z.clientWidth;if(ue&&Fr(Z).direction==="rtl"&&(Te=oe.offsetX<=Z.offsetWidth-Z.clientWidth),Te||me&&oe.offsetY>Z.clientHeight)return}const ce=(B=i.current.floatingContext)==null?void 0:B.nodeId,ve=C&&y0(C.nodesRef.current,ce).some(me=>{var ue;return m0(oe,(ue=me.context)==null?void 0:ue.elements.floating)});if(m0(oe,o.floating)||m0(oe,o.domReference)||ve)return;const Ie=C?y0(C.nodesRef.current,ce):[];if(Ie.length>0){let me=!0;if(Ie.forEach(ue=>{var Te;if((Te=ue.context)!=null&&Te.open&&!ue.context.dataRef.current.__outsidePressBubbles){me=!1;return}}),!me)return}r(!1,oe,"outside-press")}),ne=Ga(oe=>{var B;const Y=()=>{var J;ge(oe),(J=_u(oe))==null||J.removeEventListener(d,Y)};(B=_u(oe))==null||B.addEventListener(d,Y)});S.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=_,i.current.__outsidePressBubbles=O;let oe=-1;function B(K){r(!1,K,"ancestor-scroll")}function Y(){window.clearTimeout(oe),P.current=!0}function J(){oe=window.setTimeout(()=>{P.current=!1},$m()?5:0)}const Z=Lv(o.floating);a&&(Z.addEventListener("keydown",$?ie:W,$),Z.addEventListener("compositionstart",Y),Z.addEventListener("compositionend",J)),E&&Z.addEventListener(d,H?ne:ge,H);let R=[];return g&&(Vt(o.domReference)&&(R=vs(o.domReference)),Vt(o.floating)&&(R=R.concat(vs(o.floating))),!Vt(o.reference)&&o.reference&&o.reference.contextElement&&(R=R.concat(vs(o.reference.contextElement)))),R=R.filter(K=>{var ae;return K!==((ae=Z.defaultView)==null?void 0:ae.visualViewport)}),R.forEach(K=>{K.addEventListener("scroll",B,{passive:!0})}),()=>{a&&(Z.removeEventListener("keydown",$?ie:W,$),Z.removeEventListener("compositionstart",Y),Z.removeEventListener("compositionend",J)),E&&Z.removeEventListener(d,H?ne:ge,H),R.forEach(K=>{K.removeEventListener("scroll",B)}),window.clearTimeout(oe)}},[i,o,a,E,d,n,r,g,s,_,O,W,$,ie,ge,H,ne]),S.useEffect(()=>{T.current=!1},[E,d]);const fe=S.useMemo(()=>({onKeyDown:W,[fj[p]]:oe=>{h&&r(!1,oe.nativeEvent,"reference-press")}}),[W,r,h,p]),he=S.useMemo(()=>({onKeyDown:W,onMouseDown(){N.current=!0},onMouseUp(){N.current=!0},[hj[d]]:()=>{T.current=!0}}),[W,d]);return S.useMemo(()=>s?{reference:fe,floating:he}:{},[s,fe,he])}function mj(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=qN(),i=S.useRef({}),[s]=S.useState(()=>ej()),a=rj()!=null,[u,d]=S.useState(r.reference),h=Ga((b,v,C)=>{i.current.openEvent=b?v:void 0,s.emit("openchange",{open:b,event:v,reason:C,nested:a}),n?.(b,v,C)}),p=S.useMemo(()=>({setPositionReference:d}),[]),g=S.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return S.useMemo(()=>({dataRef:i,open:e,onOpenChange:h,elements:g,events:s,floatingId:o,refs:p}),[e,h,g,s,o,p])}function mw(t){t===void 0&&(t={});const{nodeId:e}=t,n=mj({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[i,s]=S.useState(null),[a,u]=S.useState(null),h=o?.domReference||i,p=S.useRef(null),g=KN();Mo(()=>{h&&(p.current=h)},[h]);const b=FN({...t,elements:{...o,...a&&{reference:a}}}),v=S.useCallback(N=>{const _=Vt(N)?{getBoundingClientRect:()=>N.getBoundingClientRect(),contextElement:N}:N;u(_),b.refs.setReference(_)},[b.refs]),C=S.useCallback(N=>{(Vt(N)||N===null)&&(p.current=N,s(N)),(Vt(b.refs.reference.current)||b.refs.reference.current===null||N!==null&&!Vt(N))&&b.refs.setReference(N)},[b.refs]),k=S.useMemo(()=>({...b.refs,setReference:C,setPositionReference:v,domReference:p}),[b.refs,C,v]),E=S.useMemo(()=>({...b.elements,domReference:h}),[b.elements,h]),T=S.useMemo(()=>({...b,...r,refs:k,elements:E,nodeId:e}),[b,k,E,e,r]);return Mo(()=>{r.dataRef.current.floatingContext=T;const N=g?.nodesRef.current.find(_=>_.id===e);N&&(N.context=T)}),S.useMemo(()=>({...b,context:T,refs:k,elements:E}),[b,k,E,T])}const z2="active",U2="selected";function w0(t,e,n){const r=new Map,o=n==="item";let i=t;if(o&&t){const{[z2]:s,[U2]:a,...u}=t;i=u}return{...n==="floating"&&{tabIndex:-1,[dj]:""},...i,...e.map(s=>{const a=s?s[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((s,a)=>(a&&Object.entries(a).forEach(u=>{let[d,h]=u;if(!(o&&[z2,U2].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof h=="function"){var p;(p=r.get(d))==null||p.push(h),s[d]=function(){for(var g,b=arguments.length,v=new Array(b),C=0;C<b;C++)v[C]=arguments[C];return(g=r.get(d))==null?void 0:g.map(k=>k(...v)).find(k=>k!==void 0)}}}else s[d]=h}),s),{})}}function gj(t){t===void 0&&(t=[]);const e=t.map(a=>a?.reference),n=t.map(a=>a?.floating),r=t.map(a=>a?.item),o=S.useCallback(a=>w0(a,t,"reference"),e),i=S.useCallback(a=>w0(a,t,"floating"),n),s=S.useCallback(a=>w0(a,t,"item"),r);return S.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const $2=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Pa(t,e){return typeof t=="function"?t(e):t}function bj(t,e){const[n,r]=S.useState(t);return t&&!n&&r(!0),S.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function yj(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,s=(typeof o=="number"?o:o.close)||0,[a,u]=S.useState("unmounted"),d=bj(n,s);return!d&&a==="close"&&u("unmounted"),Mo(()=>{if(r){if(n){u("initial");const h=requestAnimationFrame(()=>{u("open")});return()=>{cancelAnimationFrame(h)}}u("close")}},[n,r]),{isMounted:d,status:a}}function gw(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:i,duration:s=250}=e,a=t.placement,u=a.split("-")[0],d=S.useMemo(()=>({side:u,placement:a}),[u,a]),h=typeof s=="number",p=(h?s:s.open)||0,g=(h?s:s.close)||0,[b,v]=S.useState(()=>({...Pa(i,d),...Pa(n,d)})),{isMounted:C,status:k}=yj(t,{duration:s}),E=Nh(n),T=Nh(r),N=Nh(o),_=Nh(i);return Mo(()=>{const O=Pa(E.current,d),$=Pa(N.current,d),H=Pa(_.current,d),P=Pa(T.current,d)||Object.keys(O).reduce((W,ie)=>(W[ie]="",W),{});if(k==="initial"&&v(W=>({transitionProperty:W.transitionProperty,...H,...O})),k==="open"&&v({transitionProperty:Object.keys(P).map($2).join(","),transitionDuration:p+"ms",...H,...P}),k==="close"){const W=$||O;v({transitionProperty:Object.keys(W).map($2).join(","),transitionDuration:g+"ms",...H,...W})}},[g,N,E,T,_,p,k,d]),{isMounted:C,styles:b}}function xn(t){this.content=t}xn.prototype={constructor:xn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),i=r.content.slice();return o==-1?i.push(n||t,e):(i[o+1]=e,n&&(i[o]=n)),new xn(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new xn(n)},addToStart:function(t,e){return new xn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new xn(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),i=r.find(t);return o.splice(i==-1?o.length:i,0,e,n),new xn(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=xn.from(t),t.size?new xn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=xn.from(t),t.size?new xn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=xn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};xn.from=function(t){if(t instanceof xn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new xn(e)};function JN(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),i=e.child(r);if(o==i){n+=o.nodeSize;continue}if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){let s=JN(o.content,i.content,n+1);if(s!=null)return s}n+=o.nodeSize}}function QN(t,e,n,r){for(let o=t.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:n,b:r};let s=t.child(--o),a=e.child(--i),u=s.nodeSize;if(s==a){n-=u,r-=u;continue}if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let d=0,h=Math.min(s.text.length,a.text.length);for(;d<h&&s.text[s.text.length-d-1]==a.text[a.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let d=QN(s.content,a.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class X{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,i){for(let s=0,a=0;a<n;s++){let u=this.content[s],d=a+u.nodeSize;if(d>e&&r(u,o+a,i||null,s)!==!1&&u.content.size){let h=a+1;u.nodesBetween(Math.max(0,e-h),Math.min(u.content.size,n-h),r,o+h)}a=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let i="",s=!0;return this.nodesBetween(e,n,(a,u)=>{let d=a.isText?a.text.slice(Math.max(e,u)-u,n-u):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&d||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=d},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new X(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let i=0,s=0;s<n;i++){let a=this.content[i],u=s+a.nodeSize;u>e&&((s<e||u>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=u}return new X(r,o)}cutByIndex(e,n){return e==n?X.empty:e==0&&n==this.content.length?this:new X(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new X(o,i)}addToStart(e){return new X([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new X(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return JN(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return QN(this,e,n,r)}findIndex(e){if(e==0)return Oh(0,e);if(e==this.size)return Oh(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),i=r+o.nodeSize;if(i>=e)return i==e?Oh(n+1,i):Oh(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return X.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new X(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return X.empty;let n,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(n||(n=e.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new X(n||e,r)}static from(e){if(!e)return X.empty;if(e instanceof X)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new X([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}X.empty=new X([],0);const x0={index:0,offset:0};function Oh(t,e){return x0.index=t,x0.offset=e,x0}function Ap(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Ap(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Ap(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ct=class jv{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Ap(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return jv.none;if(e instanceof jv)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Ct.none=[];class Np extends Error{}class le{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=tO(this.content,e+this.openStart,n);return r&&new le(r,this.openStart,this.openEnd)}removeBetween(e,n){return new le(eO(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return le.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new le(X.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)o++;return new le(e,r,o)}}le.empty=new le(X.empty,0,0);function eO(t,e,n){let{index:r,offset:o}=t.findIndex(e),i=t.maybeChild(r),{index:s,offset:a}=t.findIndex(n);if(o==e||i.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(eO(i.content,e-o-1,n-o-1)))}function tO(t,e,n,r){let{index:o,offset:i}=t.findIndex(e),s=t.maybeChild(o);if(i==e||s.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=tO(s.content,e-i-1,n,s);return a&&t.replaceChild(o,s.copy(a))}function vj(t,e,n){if(n.openStart>t.depth)throw new Np("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Np("Inconsistent open depths");return nO(t,e,n,0)}function nO(t,e,n,r){let o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let s=nO(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let s=t.parent,a=s.content;return Cl(s,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=wj(n,t);return Cl(i,oO(t,s,a,e,r))}else return Cl(i,Op(t,e,r))}function rO(t,e){if(!e.type.compatibleContent(t.type))throw new Np("Cannot join "+e.type.name+" onto "+t.type.name)}function Vv(t,e,n){let r=t.node(n);return rO(r,e.node(n)),r}function xl(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Xu(t,e,n,r){let o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(xl(t.nodeAfter,r),i++));for(let a=i;a<s;a++)xl(o.child(a),r);e&&e.depth==n&&e.textOffset&&xl(e.nodeBefore,r)}function Cl(t,e){return t.type.checkContent(e),t.copy(e)}function oO(t,e,n,r,o){let i=t.depth>o&&Vv(t,e,o+1),s=r.depth>o&&Vv(n,r,o+1),a=[];return Xu(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(rO(i,s),xl(Cl(i,oO(t,e,n,r,o+1)),a)):(i&&xl(Cl(i,Op(t,e,o+1)),a),Xu(e,n,o,a),s&&xl(Cl(s,Op(n,r,o+1)),a)),Xu(r,null,o,a),new X(a)}function Op(t,e,n){let r=[];if(Xu(null,t,n,r),t.depth>n){let o=Vv(t,e,n+1);xl(Cl(o,Op(t,e,n+1)),r)}return Xu(e,null,n,r),new X(r)}function wj(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)o=e.node(i).copy(X.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class md{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ct.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Rp(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,i=n;for(let s=e;;){let{index:a,offset:u}=s.content.findIndex(i),d=i-u;if(r.push(s,a,o+u),!d||(s=s.child(a),s.isText))break;i=d-1,o+=u+1}return new md(n,r,i)}static resolveCached(e,n){let r=F2.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==n)return s}else F2.set(e,r=new xj);let o=r.elts[r.i]=md.resolve(e,n);return r.i=(r.i+1)%Cj,o}}class xj{constructor(){this.elts=[],this.i=0}}const Cj=12,F2=new WeakMap;class Rp{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Sj=Object.create(null);let fi=class zv{constructor(e,n,r,o=Ct.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||X.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Ap(this.attrs,n||e.defaultAttrs||Sj)&&Ct.sameSet(this.marks,r||Ct.none)}copy(e=null){return e==this.content?this:new zv(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new zv(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return le.empty;let o=this.resolve(e),i=this.resolve(n),s=r?0:o.sharedDepth(n),a=o.start(s),d=o.node(s).content.cut(o.pos-a,i.pos-a);return new le(d,o.depth-s,i.depth-s)}replace(e,n,r){return vj(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return md.resolveCached(this,e)}resolveNoCache(e){return md.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),iO(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=X.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let u=o;u<i;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ct.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ct.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=X.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};fi.prototype.text=void 0;class Dp extends fi{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):iO(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Dp(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Dp(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function iO(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Nl{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new kj(e,n);if(r.next==null)return Nl.empty;let o=sO(r);r.next&&r.err("Unexpected trailing text");let i=Rj(Oj(o));return Dj(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let i=n;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function i(s,a){let u=s.matchFragment(e,r);if(u&&(!n||u.validEnd))return X.from(a.map(d=>d.createAndFill()));for(let d=0;d<s.next.length;d++){let{type:h,next:p}=s.next[d];if(!(h.isText||h.hasRequiredAttrs())&&o.indexOf(p)==-1){o.push(p);let g=i(p,a.concat(h));if(g)return g}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:u}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!o.type||u.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}Nl.empty=new Nl(!0);class kj{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function sO(t){let e=[];do e.push(Ej(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Ej(t){let e=[];do e.push(Mj(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Mj(t){let e=Nj(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Tj(t,e);else break;return e}function G2(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Tj(t,e){let n=G2(t),r=n;return t.eat(",")&&(t.next!="}"?r=G2(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Aj(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let i in n){let s=n[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function Nj(t){if(t.eat("(")){let e=sO(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Aj(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Oj(t){let e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(s,a,u){let d={term:u,to:a};return e[s].push(d),d}function o(s,a){s.forEach(u=>u.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((u,d)=>u.concat(i(d,a)),[]);if(s.type=="seq")for(let u=0;;u++){let d=i(s.exprs[u],a);if(u==s.exprs.length-1)return d;o(d,a=n())}else if(s.type=="star"){let u=n();return r(a,u),o(i(s.expr,u),u),[r(u)]}else if(s.type=="plus"){let u=n();return o(i(s.expr,a),u),o(i(s.expr,u),u),[r(u)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let u=a;for(let d=0;d<s.min;d++){let h=n();o(i(s.expr,u),h),u=h}if(s.max==-1)o(i(s.expr,u),u);else for(let d=s.min;d<s.max;d++){let h=n();r(u,h),o(i(s.expr,u),h),u=h}return[r(u)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function lO(t,e){return e-t}function q2(t,e){let n=[];return r(e),n.sort(lO);function r(o){let i=t[o];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(o);for(let s=0;s<i.length;s++){let{term:a,to:u}=i[s];!a&&n.indexOf(u)==-1&&r(u)}}}function Rj(t){let e=Object.create(null);return n(q2(t,0));function n(r){let o=[];r.forEach(s=>{t[s].forEach(({term:a,to:u})=>{if(!a)return;let d;for(let h=0;h<o.length;h++)o[h][0]==a&&(d=o[h][1]);q2(t,u).forEach(h=>{d||o.push([a,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let i=e[r.join(",")]=new Nl(r.indexOf(t.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(lO);i.next.push({type:o[s][0],next:e[a.join(",")]||n(a)})}return i}}function Dj(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:u,next:d}=o.next[a];s.push(u.name),i&&!(u.isText||u.hasRequiredAttrs())&&(i=!1),r.indexOf(d)==-1&&r.push(d)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function aO(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function cO(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let i=t[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function uO(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let i=t[o];i.validate&&i.validate(e[o])}}function dO(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Lj(t,r,e[r]);return n}let K2=class fO{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=dO(e,r.attrs),this.defaultAttrs=aO(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Nl.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:cO(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new fi(this,this.computeAttrs(e),X.from(n),Ct.setFrom(r))}createChecked(e=null,n,r){return n=X.from(n),this.checkContent(n),new fi(this,this.computeAttrs(e),n,Ct.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=X.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let o=this.contentMatch.matchFragment(n),i=o&&o.fillBefore(X.empty,!0);return i?new fi(this,e,n.append(i),Ct.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){uO(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ct.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,s)=>r[i]=new fO(i,n,s));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function _j(t,e,n){let r=n.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class Lj{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?_j(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class qm{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=dO(e,o.attrs),this.excluded=null;let i=aO(this.attrs);this.instance=i?new Ct(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Ct(this,cO(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new qm(i,o++,n,s)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){uO(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class hO{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=xn.from(e.nodes),n.marks=xn.from(e.marks||{}),this.nodes=K2.compile(this.spec.nodes,this),this.marks=qm.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=Nl.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?Z2(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:Z2(this,s.split(" "))}this.nodeFromJSON=o=>fi.fromJSON(this,o),this.markFromJSON=o=>Ct.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof K2){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new Dp(r,r.defaultAttrs,e,Ct.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Z2(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(let a in t.marks){let u=t.marks[a];(o=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=u)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Bj(t){return t.tag!=null}function Ij(t){return t.style!=null}let To=class Uv{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(Bj(o))this.tags.push(o);else if(Ij(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new W2(this,n,!1);return r.addAll(e,Ct.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new W2(this,n,!0);return r.addAll(e,Ct.none,n.from,n.to),le.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(jj(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,n,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let u=s.getAttrs(n);if(u===!1)continue;s.attrs=u||void 0}return s}}}static schemaRules(e){let n=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<i)break}n.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=X2(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=X2(s)),s.node||s.ignore||s.mark||(s.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Uv(e,Uv.schemaRules(e)))}};const pO={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Hj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},mO={ol:!0,ul:!0},gd=1,$v=2,Ju=4;function Y2(t,e,n){return e!=null?(e?gd:0)|(e==="full"?$v:0):t&&t.whitespace=="pre"?gd|$v:n&~Ju}class Rh{constructor(e,n,r,o,i,s){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=Ct.none,this.match=i||(s&Ju?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(X.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&gd)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let n=X.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(X.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!pO.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class W2{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,i,s=Y2(null,n.preserveWhitespace,0)|(r?Ju:0);o?i=new Rh(o.type,o.attrs,Ct.none,!0,n.topMatch||o.type.contentMatch,s):r?i=new Rh(null,null,Ct.none,!0,null,s):i=new Rh(e.schema.topNodeType,null,Ct.none,!0,null,s),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,i=o.options&$v?"full":this.localPreserveWS||(o.options&gd)>0;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;mO.hasOwnProperty(s)&&this.parser.normalizeLists&&Pj(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(u?u.ignore:Hj.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let d,h=this.needsBlock;if(pO.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),d=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let p=u&&u.skip?n:this.readStyles(e,n);p&&this.addAll(e,p),d&&this.sync(i),this.needsBlock=h}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,u,d,u.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let u=this.parser.matchStyle(i,s,this,a);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)a=u;else break}}return n}addElementByRule(e,n,r,o){let i,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let u=this.enter(s,n.attrs||null,r,n.preserveWhitespace);u&&(i=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=e;typeof n.contentElement=="string"?u=e.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(e):n.contentElement&&(u=n.contentElement),this.findAround(e,u,!0),this.addAll(u,r),this.findAround(e,u,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,n);this.findAtPoint(e,i)}findPlace(e,n,r){let o,i;for(let s=this.open,a=0;s>=0;s--){let u=this.nodes[s],d=u.findWrapping(e);if(d&&(!o||o.length>d.length+a)&&(o=d,i=u,!d.length))break;if(u.solid){if(r)break;a+=2}}if(!o)return null;this.sync(i);for(let s=0;s<o.length;s++)n=this.enterInner(o[s],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=Ct.none;for(let a of o.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):J2(a.type,e.type))&&(s=a.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,o){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,o)),i}enterInner(e,n,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=Y2(e,i,s.options);s.options&Ju&&s.content.length==0&&(a|=Ju);let u=Ct.none;return r=r.filter(d=>(s.type?s.type.allowsMarkType(d.type):J2(d.type,e))?(u=d.addToSet(u),!1):!0),this.nodes.push(new Rh(e,n,u,o,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=gd)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,u)=>{for(;a>=0;a--){let d=n[a];if(d==""){if(a==n.length-1||a==0)continue;for(;u>=i;u--)if(s(a-1,u))return!0;return!1}else{let h=u>0||u==0&&o?this.nodes[u].type:r&&u>=i?r.node(u-i).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;u--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Pj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&mO.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function jj(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function X2(t){let e={};for(let n in t)e[n]=t[n];return e}function J2(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let i=[],s=a=>{i.push(a);for(let u=0;u<a.edgeCount;u++){let{type:d,next:h}=a.edge(u);if(d==e||i.indexOf(h)<0&&s(h))return!0}};if(s(o.contentMatch))return!0}}class ki{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=C0(n).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let a=0,u=0;for(;a<i.length&&u<s.marks.length;){let d=s.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(i[a][0])||d.type.spec.spanning===!1)break;a++,u++}for(;a<i.length;)o=i.pop()[1];for(;u<s.marks.length;){let d=s.marks[u++],h=this.serializeMark(d,s.isInline,n);h&&(i.push([d,o]),o.appendChild(h.dom),o=h.contentDOM||h.dom)}}o.appendChild(this.serializeNodeInner(s,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=op(C0(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&op(C0(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return op(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ki(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Q2(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Q2(e.marks)}}function Q2(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function C0(t){return t.document||window.document}const eM=new WeakMap;function Vj(t){let e=eM.get(t);return e===void 0&&eM.set(t,e=zj(t)),e}function zj(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function op(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=Vj(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(n=o.slice(0,s),o=o.slice(s+1));let a,u=n?t.createElementNS(n,o):t.createElement(o),d=e[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let p in d)if(d[p]!=null){let g=p.indexOf(" ");g>0?u.setAttributeNS(p.slice(0,g),p.slice(g+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=h;p<e.length;p++){let g=e[p];if(g===0){if(p<e.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:b,contentDOM:v}=op(t,g,n,r);if(u.appendChild(b),v){if(a)throw new RangeError("Multiple content holes");a=v}}}return{dom:u,contentDOM:a}}const gO=65535,bO=Math.pow(2,16);function Uj(t,e){return t+e*bO}function tM(t){return t&gO}function $j(t){return(t-(t&gO))/bO}const yO=1,vO=2,ip=4,wO=8;class Fv{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&wO)>0}get deletedBefore(){return(this.delInfo&(yO|ip))>0}get deletedAfter(){return(this.delInfo&(vO|ip))>0}get deletedAcross(){return(this.delInfo&ip)>0}}class mr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&mr.empty)return mr.empty}recover(e){let n=0,r=tM(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+$j(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let u=this.ranges[a]-(this.inverted?o:0);if(u>e)break;let d=this.ranges[a+i],h=this.ranges[a+s],p=u+d;if(e<=p){let g=d?e==u?-1:e==p?1:n:n,b=u+o+(g<0?0:h);if(r)return b;let v=e==(n<0?u:p)?null:Uj(a/3,e-u),C=e==u?vO:e==p?yO:ip;return(n<0?e!=u:e!=p)&&(C|=wO),new Fv(b,C,v)}o+=h-d}return r?e+o:new Fv(e+o,0,null)}touches(e,n){let r=0,o=tM(n),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let u=this.ranges[a]-(this.inverted?r:0);if(u>e)break;let d=this.ranges[a+i],h=u+d;if(e<=h&&a==o*3)return!0;r+=this.ranges[a+s]-d}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),u=s+(this.inverted?0:i),d=this.ranges[o+n],h=this.ranges[o+r];e(a,a+d,u,u+h),i+=h-d}}invert(){return new mr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?mr.empty:new mr(e<0?[0,-e,0]:[0,0,e])}}mr.empty=new mr([]);class cc{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new cc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new cc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],a=s.mapResult(e,n);if(a.recover!=null){let u=this.getMirror(i);if(u!=null&&u>i&&u<this.to){i=u,e=this._maps[u].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new Fv(e,o,null)}}const S0=Object.create(null);class Bn{getMap(){return mr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=S0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in S0)throw new RangeError("Duplicate use of step JSON ID "+e);return S0[e]=n,n.prototype.jsonID=e,n}}class Jt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Jt(e,null)}static fail(e){return new Jt(null,e)}static fromReplace(e,n,r,o){try{return Jt.ok(e.replace(n,r,o))}catch(i){if(i instanceof Np)return Jt.fail(i.message);throw i}}}function bw(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let i=t.child(o);i.content.size&&(i=i.copy(bw(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return X.fromArray(r)}class ms extends Bn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new le(bw(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),n.openStart,n.openEnd);return Jt.fromReplace(e,this.from,this.to,i)}invert(){return new So(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ms(n.pos,r.pos,this.mark)}merge(e){return e instanceof ms&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ms(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ms(n.from,n.to,e.markFromJSON(n.mark))}}Bn.jsonID("addMark",ms);class So extends Bn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new le(bw(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return Jt.fromReplace(e,this.from,this.to,r)}invert(){return new ms(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new So(n.pos,r.pos,this.mark)}merge(e){return e instanceof So&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new So(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new So(n.from,n.to,e.markFromJSON(n.mark))}}Bn.jsonID("removeMark",So);class gs extends Bn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Jt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Jt.fromReplace(e,this.pos,this.pos+1,new le(X.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new gs(this.pos,n.marks[o]);return new gs(this.pos,this.mark)}}return new Ol(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new gs(n.pos,e.markFromJSON(n.mark))}}Bn.jsonID("addNodeMark",gs);class Ol extends Bn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Jt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Jt.fromReplace(e,this.pos,this.pos+1,new le(X.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new gs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ol(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ol(n.pos,e.markFromJSON(n.mark))}}Bn.jsonID("removeNodeMark",Ol);class Xt extends Bn{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Gv(e,this.from,this.to)?Jt.fail("Structure replace would overwrite content"):Jt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new mr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Xt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Xt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Xt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?le.empty:new le(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Xt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?le.empty:new le(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Xt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Xt(n.from,n.to,le.fromJSON(e,n.slice),!!n.structure)}}Bn.jsonID("replace",Xt);class Ft extends Bn{constructor(e,n,r,o,i,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(Gv(e,this.from,this.gapFrom)||Gv(e,this.gapTo,this.to)))return Jt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Jt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Jt.fromReplace(e,this.from,this.to,r):Jt.fail("Content does not fit in gap")}getMap(){return new mr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ft(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||i>r.pos?null:new Ft(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ft(n.from,n.to,n.gapFrom,n.gapTo,le.fromJSON(e,n.slice),n.insert,!!n.structure)}}Bn.jsonID("replaceAround",Ft);function Gv(t,e,n){let r=t.resolve(e),o=n-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Fj(t,e,n,r){let o=[],i=[],s,a;t.doc.nodesBetween(e,n,(u,d,h)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let g=Math.max(d,e),b=Math.min(d+u.nodeSize,n),v=r.addToSet(p);for(let C=0;C<p.length;C++)p[C].isInSet(v)||(s&&s.to==g&&s.mark.eq(p[C])?s.to=b:o.push(s=new So(g,b,p[C])));a&&a.to==g?a.to=b:i.push(a=new ms(g,b,r))}}),o.forEach(u=>t.step(u)),i.forEach(u=>t.step(u))}function Gj(t,e,n,r){let o=[],i=0;t.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;i++;let u=null;if(r instanceof qm){let d=s.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(s.marks)&&(u=[r]):u=s.marks;if(u&&u.length){let d=Math.min(a+s.nodeSize,n);for(let h=0;h<u.length;h++){let p=u[h],g;for(let b=0;b<o.length;b++){let v=o[b];v.step==i-1&&p.eq(o[b].style)&&(g=v)}g?(g.to=d,g.step=i):o.push({style:p,from:Math.max(a,e),to:d,step:i})}}}),o.forEach(s=>t.step(new So(s.from,s.to,s.style)))}function yw(t,e,n,r=n.contentMatch,o=!0){let i=t.doc.nodeAt(e),s=[],a=e+1;for(let u=0;u<i.childCount;u++){let d=i.child(u),h=a+d.nodeSize,p=r.matchType(d.type);if(!p)s.push(new Xt(a,h,le.empty));else{r=p;for(let g=0;g<d.marks.length;g++)n.allowsMarkType(d.marks[g].type)||t.step(new So(a,h,d.marks[g]));if(o&&d.isText&&n.whitespace!="pre"){let g,b=/\r?\n|\r/g,v;for(;g=b.exec(d.text);)v||(v=new le(X.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),s.push(new Xt(a+g.index,a+g.index+g[0].length,v))}}a=h}if(!r.validEnd){let u=r.fillBefore(X.empty,!0);t.replace(a,a,new le(u,0,0))}for(let u=s.length-1;u>=0;u--)t.step(s[u])}function qj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function kc(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let o=t.$from.node(r),i=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,s,n))return r;if(r==0||o.type.spec.isolating||!qj(o,i,s))break}return null}function Kj(t,e,n){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),u=s,d=a,h=X.empty,p=0;for(let v=i,C=!1;v>n;v--)C||r.index(v)>0?(C=!0,h=X.from(r.node(v).copy(h)),p++):u--;let g=X.empty,b=0;for(let v=i,C=!1;v>n;v--)C||o.after(v+1)<o.end(v)?(C=!0,g=X.from(o.node(v).copy(g)),b++):d++;t.step(new Ft(u,d,s,a,new le(h.append(g),p,b),h.size-p,!0))}function xO(t,e,n=null,r=t){let o=Zj(t,e),i=o&&Yj(r,e);return i?o.map(nM).concat({type:e,attrs:n}).concat(i.map(nM)):null}function nM(t){return{type:t,attrs:null}}function Zj(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function Yj(t,e){let{parent:n,startIndex:r,endIndex:o}=t,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let u=(s.length?s[s.length-1]:e).contentMatch;for(let d=r;u&&d<o;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:s}function Wj(t,e,n){let r=X.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let a=n[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=X.from(n[s].type.create(n[s].attrs,r))}let o=e.start,i=e.end;t.step(new Ft(o,i,o,i,new le(r,0,0),n.length,!0))}function Xj(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(s,a)=>{let u=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,u)&&Jj(t.doc,t.mapping.slice(i).map(a),r)){let d=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!v?d=!1:!b&&v&&(d=!0)}d===!1&&SO(t,s,a,i),yw(t,t.mapping.slice(i).map(a,1),r,void 0,d===null);let h=t.mapping.slice(i),p=h.map(a,1),g=h.map(a+s.nodeSize,1);return t.step(new Ft(p,g,p+1,g-1,new le(X.from(r.create(u,null,s.marks)),0,0),1,!0)),d===!0&&CO(t,s,a,i),!1}})}function CO(t,e,n,r){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let u=t.mapping.slice(r).map(n+1+i+s.index);t.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function SO(t,e,n,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=t.mapping.slice(r).map(n+1+i);t.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function Jj(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function Qj(t,e,n,r,o){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ft(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new le(X.from(s),0,0),1,!0))}function hi(t,e,n=1,r){let o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let d=o.depth-1,h=n-2;d>i;d--,h--){let p=o.node(d),g=o.index(d);if(p.type.spec.isolating)return!1;let b=p.content.cutByIndex(g,p.childCount),v=r&&r[h+1];v&&(b=b.replaceChild(0,v.type.create(v.attrs)));let C=r&&r[h]||p;if(!p.canReplace(g+1,p.childCount)||!C.type.validContent(b))return!1}let a=o.indexAfter(i),u=r&&r[0];return o.node(i).canReplaceWith(a,a,u?u.type:o.node(i+1).type)}function e6(t,e,n=1,r){let o=t.doc.resolve(e),i=X.empty,s=X.empty;for(let a=o.depth,u=o.depth-n,d=n-1;a>u;a--,d--){i=X.from(o.node(a).copy(i));let h=r&&r[d];s=X.from(h?h.type.create(h.attrs,s):o.node(a).copy(s))}t.step(new Xt(e,e,new le(i.append(s),n,n),!0))}function Gl(t,e){let n=t.resolve(e),r=n.index();return kO(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function t6(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(s),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function kO(t,e){return!!(t&&e&&!t.isLeaf&&t6(t,e))}function Km(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&kO(i,s)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function n6(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,i=t.doc.resolve(e-n),s=i.node().type;if(o&&s.inlineContent){let h=s.whitespace=="pre",p=!!s.contentMatch.matchType(o);h&&!p?r=!1:!h&&p&&(r=!0)}let a=t.steps.length;if(r===!1){let h=t.doc.resolve(e+n);SO(t,h.node(),h.before(),a)}s.inlineContent&&yw(t,e+n-1,s,i.node().contentMatchAt(i.index()),r==null);let u=t.mapping.slice(a),d=u.map(e-n);if(t.step(new Xt(d,u.map(e+n,-1),le.empty,!0)),r===!0){let h=t.doc.resolve(d);CO(t,h.node(),h.before(),t.steps.length)}return t}function r6(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,n))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function EO(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,u=r.index(s)+(a>0?1:0),d=r.node(s),h=!1;if(i==1)h=d.canReplace(u,u,o);else{let p=d.contentMatchAt(u).findWrapping(o.firstChild.type);h=p&&d.canReplaceWith(u,u,p[0])}if(h)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function Zm(t,e,n=e,r=le.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),i=t.resolve(n);return MO(o,i,r)?new Xt(e,n,r):new o6(o,i,r).fit()}function MO(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class o6{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=X.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=X.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let u=new le(i,s,a);return e>-1?new Ft(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Xt(r.pos,o.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=k0(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:u,match:d}=this.frontier[a],h,p=null;if(n==1&&(s?d.matchType(s.type)||(p=d.fillBefore(X.from(s),!1)):i&&u.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:p};if(n==2&&s&&(h=d.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:h};if(i&&d.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=k0(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new le(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=k0(e,n);if(o.childCount<=1&&n>0){let i=e.size-n<=n+o.size;this.unplaced=new le(zu(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new le(zu(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let C=0;C<i.length;C++)this.openFrontierNode(i[C]);let s=this.unplaced,a=r?r.content:s.content,u=s.openStart-e,d=0,h=[],{match:p,type:g}=this.frontier[n];if(o){for(let C=0;C<o.childCount;C++)h.push(o.child(C));p=p.matchFragment(o)}let b=a.size+e-(s.content.size-s.openEnd);for(;d<a.childCount;){let C=a.child(d),k=p.matchType(C.type);if(!k)break;d++,(d>1||u==0||C.content.size)&&(p=k,h.push(TO(C.mark(g.allowedMarks(C.marks)),d==1?u:0,d==a.childCount?b:-1)))}let v=d==a.childCount;v||(b=-1),this.placed=Uu(this.placed,n,X.from(h)),this.frontier[n].match=p,v&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,k=a;C<b;C++){let E=k.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),k=E.content}this.unplaced=v?e==0?le.empty:new le(zu(s.content,e-1,1),e-1,b<0?s.openEnd:e-1):new le(zu(s.content,e,d),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!E0(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=E0(e,n,o,r,i);if(s){for(let a=n-1;a>=0;a--){let{match:u,type:d}=this.frontier[a],h=E0(e,a,d,u,!0);if(!h||h.childCount)continue e}return{depth:n,fit:s,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Uu(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Uu(this.placed,this.depth,X.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(X.empty,!0);n.childCount&&(this.placed=Uu(this.placed,this.frontier.length,n))}}function zu(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(zu(t.firstChild.content,e-1,n)))}function Uu(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Uu(t.lastChild.content,e-1,n)))}function k0(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function TO(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,TO(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(X.empty,!0)))),t.copy(r)}function E0(t,e,n,r,o){let i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!i6(n,i.content,s)?a:null}function i6(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function s6(t){return t.spec.defining||t.spec.definingForContent}function l6(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),i=t.doc.resolve(n);if(MO(o,i,r))return t.step(new Xt(e,n,r));let s=NO(o,t.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let g=o.depth,b=o.pos-1;g>0;g--,b--){let v=o.node(g).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;s.indexOf(g)>-1?a=g:o.before(g)==b&&s.splice(1,0,-g)}let u=s.indexOf(a),d=[],h=r.openStart;for(let g=r.content,b=0;;b++){let v=g.firstChild;if(d.push(v),b==r.openStart)break;g=v.content}for(let g=h-1;g>=0;g--){let b=d[g],v=s6(b.type);if(v&&!b.sameMarkup(o.node(Math.abs(a)-1)))h=g;else if(v||!b.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let b=(g+h+1)%(r.openStart+1),v=d[b];if(v)for(let C=0;C<s.length;C++){let k=s[(C+u)%s.length],E=!0;k<0&&(E=!1,k=-k);let T=o.node(k-1),N=o.index(k-1);if(T.canReplaceWith(N,N,v.type,v.marks))return t.replace(o.before(k),E?i.after(k):n,new le(AO(r.content,0,r.openStart,b),b,r.openEnd))}}let p=t.steps.length;for(let g=s.length-1;g>=0&&(t.replace(e,n,r),!(t.steps.length>p));g--){let b=s[g];b<0||(e=o.before(b),n=i.after(b))}}function AO(t,e,n,r,o){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(AO(i.content,e+1,n,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(t).append(t);t=s.append(i.matchFragment(s).fillBefore(X.empty,!0))}return t}function a6(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=r6(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new le(X.from(r),0,0))}function c6(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),i=NO(r,o);for(let s=0;s<i.length;s++){let a=i[s],u=s==i.length-1;if(u&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),o.end(a));if(a>0&&(u||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return t.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return t.delete(r.before(s),n);t.delete(e,n)}function NO(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&n.push(o)}return n}class Qa extends Bn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Jt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return Jt.fromReplace(e,this.pos,this.pos+1,new le(X.from(o),0,n.isLeaf?0:1))}getMap(){return mr.empty}invert(e){return new Qa(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Qa(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Qa(n.pos,n.attr,n.value)}}Bn.jsonID("attr",Qa);class bd extends Bn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Jt.ok(r)}getMap(){return mr.empty}invert(e){return new bd(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new bd(n.attr,n.value)}}Bn.jsonID("docAttr",bd);let uc=class extends Error{};uc=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};uc.prototype=Object.create(Error.prototype);uc.prototype.constructor=uc;uc.prototype.name="TransformError";class vw{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new cc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new uc(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=le.empty){let o=Zm(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new le(X.from(r),0,0))}delete(e,n){return this.replace(e,n,le.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return l6(this,e,n,r),this}replaceRangeWith(e,n,r){return a6(this,e,n,r),this}deleteRange(e,n){return c6(this,e,n),this}lift(e,n){return Kj(this,e,n),this}join(e,n=1){return n6(this,e,n),this}wrap(e,n){return Wj(this,e,n),this}setBlockType(e,n=e,r,o=null){return Xj(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return Qj(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Qa(e,n,r)),this}setDocAttribute(e,n){return this.step(new bd(e,n)),this}addNodeMark(e,n){return this.step(new gs(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ct)n.isInSet(r.marks)&&this.step(new Ol(e,n));else{let o=r.marks,i,s=[];for(;i=n.isInSet(o);)s.push(new Ol(e,i)),o=i.removeFromSet(o);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,n=1,r){return e6(this,e,n,r),this}addMark(e,n,r){return Fj(this,e,n,r),this}removeMark(e,n,r){return Gj(this,e,n,r),this}clearIncompatible(e,n,r){return yw(this,e,n,r),this}}const M0=Object.create(null);class Oe{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new OO(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=le.empty){let r=n.content.lastChild,o=null;for(let a=0;a<n.openEnd;a++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:u,$to:d}=s[a],h=e.mapping.slice(i);e.replaceRange(h.map(u.pos),h.map(d.pos),a?le.empty:n),a==0&&iM(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],u=e.mapping.slice(r),d=u.map(s.pos),h=u.map(a.pos);i?e.deleteRange(d,h):(e.replaceRangeWith(d,h,n),iM(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new xe(e):qa(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=n<0?qa(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):qa(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new tr(e.node(0))}static atStart(e){return qa(e,e,0,0,1)||new tr(e)}static atEnd(e){return qa(e,e,e.content.size,e.childCount,-1)||new tr(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=M0[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in M0)throw new RangeError("Duplicate use of selection JSON ID "+e);return M0[e]=n,n.prototype.jsonID=e,n}getBookmark(){return xe.between(this.$anchor,this.$head).getBookmark()}}Oe.prototype.visible=!0;class OO{constructor(e,n){this.$from=e,this.$to=n}}let rM=!1;function oM(t){!rM&&!t.parent.inlineContent&&(rM=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class xe extends Oe{constructor(e,n=e){oM(e),oM(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Oe.near(r);let o=e.resolve(n.map(this.anchor));return new xe(o.parent.inlineContent?o:r,r)}replace(e,n=le.empty){if(super.replace(e,n),n==le.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof xe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ym(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new xe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let i=Oe.findFrom(n,r,!0)||Oe.findFrom(n,-r,!0);if(i)n=i.$head;else return Oe.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Oe.findFrom(e,-r,!0)||Oe.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new xe(e,n)}}Oe.jsonID("text",xe);class Ym{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Ym(e.map(this.anchor),e.map(this.head))}resolve(e){return xe.between(e.resolve(this.anchor),e.resolve(this.head))}}class ke extends Oe{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),i=e.resolve(o);return r?Oe.near(i):new ke(i)}content(){return new le(X.from(this.node),0,0)}eq(e){return e instanceof ke&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ww(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ke(e.resolve(n.anchor))}static create(e,n){return new ke(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}ke.prototype.visible=!1;Oe.jsonID("node",ke);class ww{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Ym(r,r):new ww(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&ke.isSelectable(r)?new ke(n):Oe.near(n)}}class tr extends Oe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=le.empty){if(n==le.empty){e.delete(0,e.doc.content.size);let r=Oe.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new tr(e)}map(e){return new tr(e)}eq(e){return e instanceof tr}getBookmark(){return u6}}Oe.jsonID("all",tr);const u6={map(){return this},resolve(t){return new tr(t)}};function qa(t,e,n,r,o,i=!1){if(e.inlineContent)return xe.create(t,n);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let a=e.child(s);if(a.isAtom){if(!i&&ke.isSelectable(a))return ke.create(t,n-(o<0?a.nodeSize:0))}else{let u=qa(t,a,n+o,o<0?a.childCount:0,o,i);if(u)return u}n+=a.nodeSize*o}return null}function iM(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof Xt||o instanceof Ft))return;let i=t.mapping.maps[r],s;i.forEach((a,u,d,h)=>{s==null&&(s=h)}),t.setSelection(Oe.near(t.doc.resolve(s),n))}const sM=1,Dh=2,lM=4;let d6=class extends vw{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|sM)&~Dh,this.storedMarks=null,this}get selectionSet(){return(this.updated&sM)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Dh,this}ensureMarks(e){return Ct.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Dh)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Dh,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ct.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(n);i=r==n?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,i)),this.selection.empty||this.setSelection(Oe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=lM,this}get scrolledIntoView(){return(this.updated&lM)>0}};function aM(t,e){return!e||!t?t:t.bind(e)}class $u{constructor(e,n,r){this.name=e,this.init=aM(n.init,r),this.apply=aM(n.apply,r)}}const f6=[new $u("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new $u("selection",{init(t,e){return t.selection||Oe.atStart(e.doc)},apply(t){return t.selection}}),new $u("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new $u("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class T0{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=f6.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new $u(r.key,r.spec.state,r))})}}class ml{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let u=o?o[s].n:0,d=o?o[s].state:this,h=u<n.length&&a.spec.appendTransaction.call(a,u?n.slice(u):n,d,r);if(h&&r.filterTransaction(h,s)){if(h.setMeta("appendedTransaction",e),!o){o=[];for(let p=0;p<this.config.plugins.length;p++)o.push(p<s?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ml(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new d6(this)}static create(e){let n=new T0(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new ml(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new T0(this.schema,e.plugins),r=n.fields,o=new ml(n);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new T0(e.schema,e.plugins),i=new ml(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=fi.fromJSON(e.schema,n.doc);else if(s.name=="selection")i.selection=Oe.fromJSON(i.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let u=r[a],d=u.spec.state;if(u.key==s.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[s.name]=d.fromJSON.call(u,e,n[a],i);return}}i[s.name]=s.init(e,i)}}),i}}function RO(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=RO(o,e,{})),n[r]=o}return n}class Ge{constructor(e){this.spec=e,this.props={},e.props&&RO(e.props,this,this.props),this.key=e.key?e.key.key:DO("plugin")}getState(e){return e[this.key]}}const A0=Object.create(null);function DO(t){return t in A0?t+"$"+ ++A0[t]:(A0[t]=0,t+"$")}class ot{constructor(e="key"){this.key=DO(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Cn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},dc=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let qv=null;const ci=function(t,e,n){let r=qv||(qv=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},h6=function(){qv=null},Rl=function(t,e,n,r){return n&&(cM(t,e,n,r,-1)||cM(t,e,n,r,1))},p6=/^(img|br|input|textarea|hr)$/i;function cM(t,e,n,r,o){for(var i;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Hr(t))){let s=t.parentNode;if(!s||s.nodeType!=1||qd(t)||p6.test(t.nodeName)||t.contentEditable=="false")return!1;e=Cn(t)+(o<0?0:1),t=s}else if(t.nodeType==1){let s=t.childNodes[e+(o<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((i=s.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=o;else return!1;else t=s,e=o<0?Hr(t):0}else return!1}}function Hr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function m6(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Hr(t)}else if(t.parentNode&&!qd(t))e=Cn(t),t=t.parentNode;else return null}}function g6(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!qd(t))e=Cn(t)+1,t=t.parentNode;else return null}}function b6(t,e,n){for(let r=e==0,o=e==Hr(t);r||o;){if(t==n)return!0;let i=Cn(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,o=o&&i==Hr(t)}}function qd(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Wm=function(t){return t.focusNode&&Rl(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function dl(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function y6(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function v6(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Hr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Hr(r.startContainer),r.startOffset)}}}const No=typeof navigator<"u"?navigator:null,uM=typeof document<"u"?document:null,Bs=No&&No.userAgent||"",Kv=/Edge\/(\d+)/.exec(Bs),_O=/MSIE \d/.exec(Bs),Zv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Bs),nr=!!(_O||Zv||Kv),ws=_O?document.documentMode:Zv?+Zv[1]:Kv?+Kv[1]:0,oo=!nr&&/gecko\/(\d+)/i.test(Bs);oo&&+(/Firefox\/(\d+)/.exec(Bs)||[0,0])[1];const Yv=!nr&&/Chrome\/(\d+)/.exec(Bs),Rn=!!Yv,LO=Yv?+Yv[1]:0,Vn=!nr&&!!No&&/Apple Computer/.test(No.vendor),fc=Vn&&(/Mobile\/\w+/.test(Bs)||!!No&&No.maxTouchPoints>2),Ir=fc||(No?/Mac/.test(No.platform):!1),w6=No?/Win/.test(No.platform):!1,ui=/Android \d/.test(Bs),Kd=!!uM&&"webkitFontSmoothing"in uM.documentElement.style,x6=Kd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function C6(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ti(t,e){return typeof t=="number"?t:t[e]}function S6(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function dM(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let s=n||t.dom;s;){if(s.nodeType!=1){s=dc(s);continue}let a=s,u=a==i.body,d=u?C6(i):S6(a),h=0,p=0;if(e.top<d.top+ti(r,"top")?p=-(d.top-e.top+ti(o,"top")):e.bottom>d.bottom-ti(r,"bottom")&&(p=e.bottom-e.top>d.bottom-d.top?e.top+ti(o,"top")-d.top:e.bottom-d.bottom+ti(o,"bottom")),e.left<d.left+ti(r,"left")?h=-(d.left-e.left+ti(o,"left")):e.right>d.right-ti(r,"right")&&(h=e.right-d.right+ti(o,"right")),h||p)if(u)i.defaultView.scrollBy(h,p);else{let b=a.scrollLeft,v=a.scrollTop;p&&(a.scrollTop+=p),h&&(a.scrollLeft+=h);let C=a.scrollLeft-b,k=a.scrollTop-v;e={left:e.left-C,top:e.top-k,right:e.right-C,bottom:e.bottom-k}}let g=u?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(g))break;s=g=="absolute"?s.offsetParent:dc(s)}}function k6(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=t.root.elementFromPoint(i,s);if(!a||a==t.dom||!t.dom.contains(a))continue;let u=a.getBoundingClientRect();if(u.top>=n-20){r=a,o=u.top;break}}return{refDOM:r,refTop:o,stack:BO(t.dom)}}function BO(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=dc(r));return e}function E6({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;IO(n,r==0?0:r-e)}function IO(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:i}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let ja=null;function M6(t){if(t.setActive)return t.setActive();if(ja)return t.focus(ja);let e=BO(t);t.focus(ja==null?{get preventScroll(){return ja={preventScroll:!0},!0}}:void 0),ja||(ja=!1,IO(e,0))}function HO(t,e){let n,r=2e8,o,i=0,s=e.top,a=e.top,u,d;for(let h=t.firstChild,p=0;h;h=h.nextSibling,p++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=ci(h).getClientRects();else continue;for(let b=0;b<g.length;b++){let v=g[b];if(v.top<=s&&v.bottom>=a){s=Math.max(v.bottom,s),a=Math.min(v.top,a);let C=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(C<r){n=h,r=C,o=C&&n.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,h.nodeType==1&&C&&(i=p+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!u&&v.left<=e.left&&v.right>=e.left&&(u=h,d={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!n&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(i=p+1)}}return!n&&u&&(n=u,o=d,r=0),n&&n.nodeType==3?T6(n,o):!n||r&&n.nodeType==1?{node:t,offset:i}:HO(n,o)}function T6(t,e){let n=t.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);let i=is(r,1);if(i.top!=i.bottom&&xw(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function xw(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function A6(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function N6(t,e,n){let{node:r,offset:o}=HO(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return t.docView.posFromDOM(r,o,i)}function O6(t,e,n,r){let o=-1;for(let i=e,s=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),u;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((u=a.dom.getBoundingClientRect()).width||u.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!s&&u.left>r.left||u.top>r.top?o=a.posBefore:(!s&&u.right<r.left||u.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function PO(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let s=t.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let u=0;u<a.length;u++){let d=a[u];if(xw(e,d))return PO(s,e,d)}}if((i=(i+1)%r)==o)break}return t}function R6(t,e){let n=t.dom.ownerDocument,r,o=0,i=v6(n,e.left,e.top);i&&({node:r,offset:o}=i);let s=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!s||!t.dom.contains(s.nodeType!=1?s.parentNode:s)){let d=t.dom.getBoundingClientRect();if(!xw(e,d)||(s=PO(t.dom,e,d),!s))return null}if(Vn)for(let d=s;r&&d;d=dc(d))d.draggable&&(r=void 0);if(s=A6(s,e),r){if(oo&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let h=r.childNodes[o],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=e.left&&p.bottom>e.top&&o++}let d;Kd&&o&&r.nodeType==1&&(d=r.childNodes[o-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=O6(t,r,o,e))}a==null&&(a=N6(t,s,e));let u=t.docView.nearestDesc(s,!0);return{pos:a,inside:u?u.posAtStart-u.border:-1}}function fM(t){return t.top<t.bottom||t.left<t.right}function is(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(fM(r))return r}return Array.prototype.find.call(n,fM)||t.getBoundingClientRect()}const D6=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function jO(t,e,n){let{node:r,offset:o,atom:i}=t.docView.domFromPos(e,n<0?-1:1),s=Kd||oo;if(r.nodeType==3)if(s&&(D6.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let u=is(ci(r,o,o),n);if(oo&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let d=is(ci(r,o-1,o-1),-1);if(d.top==u.top){let h=is(ci(r,o,o+1),-1);if(h.top!=u.top)return Lu(h,h.left<d.left)}}return u}else{let u=o,d=o,h=n<0?1:-1;return n<0&&!o?(d++,h=-1):n>=0&&o==r.nodeValue.length?(u--,h=1):n<0?u--:d++,Lu(is(ci(r,u,d),h),h<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(n<0||o==Hr(r))){let u=r.childNodes[o-1];if(u.nodeType==1)return N0(u.getBoundingClientRect(),!1)}if(i==null&&o<Hr(r)){let u=r.childNodes[o];if(u.nodeType==1)return N0(u.getBoundingClientRect(),!0)}return N0(r.getBoundingClientRect(),n>=0)}if(i==null&&o&&(n<0||o==Hr(r))){let u=r.childNodes[o-1],d=u.nodeType==3?ci(u,Hr(u)-(s?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return Lu(is(d,1),!1)}if(i==null&&o<Hr(r)){let u=r.childNodes[o];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?ci(u,0,s?0:1):u.nodeType==1?u:null:null;if(d)return Lu(is(d,-1),!0)}return Lu(is(r.nodeType==3?ci(r):r,-n),n>=0)}function Lu(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function N0(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function VO(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function _6(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return VO(t,e,()=>{let{node:i}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=jO(t,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let u;if(a.nodeType==1)u=a.getClientRects();else if(a.nodeType==3)u=ci(a,0,a.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(n=="up"?s.top-h.top>(h.bottom-s.top)*2:h.bottom-s.bottom>(s.bottom-h.top)*2))return!1}}return!0})}const L6=/[\u0590-\u08ac]/;function B6(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=t.domSelection();return a?!L6.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:s:VO(t,e,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:p}=t.domSelectionRange(),g=a.caretBidiLevel;a.modify("move",n,"character");let b=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:v,focusOffset:C}=t.domSelectionRange(),k=v&&!b.contains(v.nodeType==1?v:v.parentNode)||u==v&&d==C;try{a.collapse(h,p),u&&(u!=h||d!=p)&&a.extend&&a.extend(u,d)}catch{}return g!=null&&(a.caretBidiLevel=g),k}):r.pos==r.start()||r.pos==r.end()}let hM=null,pM=null,mM=!1;function I6(t,e,n){return hM==e&&pM==n?mM:(hM=e,pM=n,mM=n=="up"||n=="down"?_6(t,e,n):B6(t,e,n))}const zr=0,gM=1,gl=2,Oo=3;class Zd{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=zr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Cn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!n||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let a=o.children[s];if(a.size){o=a;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>e||s instanceof UO){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof zO&&i.side>=0;r--);if(n<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&n&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?Cn(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?Cn(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let u=this.children[a],d=s+u.size;if(o==-1&&e<=d){let h=s+u.border;if(e>=h&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,h);e=s;for(let p=a;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){o=Cn(g.dom)+1;break}e-=g.size}o==-1&&(o=0)}if(o>-1&&(d>n||a==this.children.length-1)){n=d;for(let h=a+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){i=Cn(p.dom);break}n+=p.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=d}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let i=Math.min(e,n),s=Math.max(e,n);for(let b=0,v=0;b<this.children.length;b++){let C=this.children[b],k=v+C.size;if(i>v&&s<k)return C.setSelection(e-v-C.border,n-v-C.border,r,o);v=k}let a=this.domFromPos(e,e?-1:1),u=n==e?a:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((oo||Vn)&&e==n){let{node:b,offset:v}=a;if(b.nodeType==3){if(p=!!(v&&b.nodeValue[v-1]==`
`),p&&v==b.nodeValue.length)for(let C=b,k;C;C=C.parentNode){if(k=C.nextSibling){k.nodeName=="BR"&&(a=u={node:k.parentNode,offset:Cn(k)+1});break}let E=C.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let C=b.childNodes[v-1];p=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(oo&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let b=h.focusNode.childNodes[h.focusOffset];b&&b.contentEditable=="false"&&(o=!0)}if(!(o||p&&Vn)&&Rl(a.node,a.offset,h.anchorNode,h.anchorOffset)&&Rl(u.node,u.offset,h.focusNode,h.focusOffset))return;let g=!1;if((d.extend||e==n)&&!p){d.collapse(a.node,a.offset);try{e!=n&&d.extend(u.node,u.offset),g=!0}catch{}}if(!g){if(e>n){let v=a;a=u,u=v}let b=document.createRange();b.setEnd(u.node,u.offset),b.setStart(a.node,a.offset),d.removeAllRanges(),d.addRange(b)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&n>=r:e<s&&n>r){let a=r+i.border,u=s-i.border;if(e>=a&&n<=u){this.dirty=e==r||n==s?gl:gM,e==a&&n==u&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=Oo:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?gl:Oo}r=s}this.dirty=gl}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?gl:gM;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class zO extends Zd{constructor(e,n,r,o){let i,s=n.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==zr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class H6 extends Zd{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Dl extends Zd{constructor(e,n,r,o,i){super(e,[],r,o),this.mark=n,this.spec=i}static create(e,n,r,o){let i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return(!s||!s.dom)&&(s=ki.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Dl(e,n,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&Oo||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Oo&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=zr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=zr}}slice(e,n,r){let o=Dl.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=Xv(i,n,s,r)),e>0&&(i=Xv(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class xs extends Zd{constructor(e,n,r,o,i,s,a,u,d){super(e,[],i,s),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,n,r,o,i,s){let a=i.nodeViews[n.type.name],u,d=a&&a(n,i,()=>{if(!u)return s;if(u.parent)return u.parent.posBeforeChild(u)},r,o),h=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=ki.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let g=h;return h=GO(h,r,n),d?u=new P6(e,n,r,o,h,p||null,g,d,i,s+1):n.isText?new Xm(e,n,r,o,h,g,i):new xs(e,n,r,o,h,p||null,g,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>X.empty)}return e}matchesNode(e,n,r){return this.dirty==zr&&e.eq(this.node)&&_p(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,i=e.composing?this.localCompositionInfo(e,n):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,u=new V6(this,s&&s.node,e);$6(this.node,this.innerDeco,(d,h,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!p&&u.syncToMarks(h==this.node.childCount?Ct.none:this.node.child(h).marks,r,e),u.placeWidget(d,e,o)},(d,h,p,g)=>{u.syncToMarks(d.marks,r,e);let b;u.findNodeMatch(d,h,p,g)||a&&e.state.selection.from>o&&e.state.selection.to<o+d.nodeSize&&(b=u.findIndexWithChild(i.node))>-1&&u.updateNodeAt(d,h,p,b,e)||u.updateNextNode(d,h,p,e,g,o)||u.addNode(d,h,p,e,o),o+=d.nodeSize}),u.syncToMarks([],r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==gl)&&(s&&this.protectLocalComposition(e,s),$O(this.contentDOM,this.children,e),fc&&F6(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof xe)||r<n||o>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=G6(this.node.content,s,r-n,o-n);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new H6(this,i,n,o);e.input.compositionNodes.push(s),this.children=Xv(this.children,r,r+o.length,e,s)}update(e,n,r,o){return this.dirty==Oo||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=zr}updateOuterDeco(e){if(_p(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=FO(this.dom,this.nodeDOM,Wv(this.outerDeco,this.node,n),Wv(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function bM(t,e,n,r,o){GO(r,e,t);let i=new xs(void 0,t,e,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class Xm extends xs{constructor(e,n,r,o,i,s,a){super(e,n,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Oo||this.dirty!=zr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=zr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=zr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),i=document.createTextNode(o.text);return new Xm(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Oo)}get domAtom(){return!1}isText(e){return this.node.text==e}}class UO extends Zd{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==zr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class P6 extends xs{constructor(e,n,r,o,i,s,a,u,d,h){super(e,n,r,o,i,s,a,d,h),this.spec=u}update(e,n,r,o){if(this.dirty==Oo)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function $O(t,e,n){let r=t.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=yM(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof Dl){let u=r?r.previousSibling:t.lastChild;$O(s.contentDOM,s.children,n),r=u?u.nextSibling:t.firstChild}}for(;r;)r=yM(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const Qu=function(t){t&&(this.nodeName=t)};Qu.prototype=Object.create(null);const bl=[new Qu];function Wv(t,e,n){if(t.length==0)return bl;let r=n?bl[0]:new Qu,o=[r];for(let i=0;i<t.length;i++){let s=t[i].type.attrs;if(s){s.nodeName&&o.push(r=new Qu(s.nodeName));for(let a in s){let u=s[a];u!=null&&(n&&o.length==1&&o.push(r=new Qu(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+u:a=="style"?r.style=(r.style?r.style+";":"")+u:a!="nodeName"&&(r[a]=u))}}}return o}function FO(t,e,n,r){if(n==bl&&r==bl)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(i){let u;a&&a.nodeName==s.nodeName&&o!=t&&(u=o.parentNode)&&u.nodeName.toLowerCase()==s.nodeName||(u=document.createElement(s.nodeName),u.pmIsDeco=!0,u.appendChild(o),a=bl[0]),o=u}j6(o,a||bl[0],s)}return o}function j6(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&t.classList.add(o[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function GO(t,e,n){return FO(t,t,bl,Wv(e,n,t.nodeType!=1))}function _p(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function yM(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class V6{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=z6(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=zr,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(e[i])&&!this.isLocked(d.dom)){a=u;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let u=Dl.create(this.top,e[i],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,i++}}findNodeMatch(e,n,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,u=Math.min(this.top.children.length,a+5);a<u;a++){let d=this.top.children[a];if(d.matchesNode(e,n,r)&&!this.preMatch.matched.has(d)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,o,i){let s=this.top.children[o];return s.dirty==Oo&&s.dom==s.contentDOM&&(s.dirty=gl),s.update(e,n,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let u=this.top.children[a];if(u instanceof xs){let d=this.preMatch.matched.get(u);if(d!=null&&d!=i)return!1;let h=u.dom,p,g=this.isLocked(h)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=Oo&&_p(n,u.outerDeco));if(!g&&u.update(e,n,r,o))return this.destroyBetween(this.index,a),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(u,e,n,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=gl,p.updateChildren(o,s+1),p.dirty=zr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,i,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!_p(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=xs.create(this.top,n,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let u of a.children)u.parent=a}return e.destroy(),a}addNode(e,n,r,o,i){let s=xs.create(this.top,e,n,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new zO(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Dl;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Xm)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Vn||Rn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new UO(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function z6(t,e){let n=e,r=n.children.length,o=t.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let d=n.children[r-1];if(d instanceof Dl)n=d,r=d.children.length;else{a=d,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=a.node;if(u){if(u!=t.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function U6(t,e){return t.type.side-e.type.side}function $6(t,e,n,r){let o=e.locals(t),i=0;if(o.length==0){for(let d=0;d<t.childCount;d++){let h=t.child(d);r(h,o,e.forChild(i,h),d),i+=h.nodeSize}return}let s=0,a=[],u=null;for(let d=0;;){let h,p;for(;s<o.length&&o[s].to==i;){let k=o[s++];k.widget&&(h?(p||(p=[h])).push(k):h=k)}if(h)if(p){p.sort(U6);for(let k=0;k<p.length;k++)n(p[k],d,!!u)}else n(h,d,!!u);let g,b;if(u)b=-1,g=u,u=null;else if(d<t.childCount)b=d,g=t.child(d++);else break;for(let k=0;k<a.length;k++)a[k].to<=i&&a.splice(k--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let v=i+g.nodeSize;if(g.isText){let k=v;s<o.length&&o[s].from<k&&(k=o[s].from);for(let E=0;E<a.length;E++)a[E].to<k&&(k=a[E].to);k<v&&(u=g.cut(k-i),g=g.cut(0,k-i),v=k,b=-1)}else for(;s<o.length&&o[s].to<v;)s++;let C=g.isInline&&!g.isLeaf?a.filter(k=>!k.inline):a.slice();r(g,C,e.forChild(i,g),b),i=v}}function F6(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function G6(t,e,n,r){for(let o=0,i=0;o<t.childCount&&i<=r;){let s=t.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let u=s.text;for(;o<t.childCount;){let d=t.child(o++);if(i+=d.nodeSize,!d.isText)break;u+=d.text}if(i>=n){if(i>=r&&u.slice(r-e.length-a,r-a)==e)return r-e.length;let d=a<r?u.lastIndexOf(e,r-a-1):-1;if(d>=0&&d+e.length+a>=n)return a+d;if(n==r&&u.length>=r+e.length-a&&u.slice(r-a,r-a+e.length)==e)return r}}return-1}function Xv(t,e,n,r,o){let i=[];for(let s=0,a=0;s<t.length;s++){let u=t[s],d=a,h=a+=u.size;d>=n||h<=e?i.push(u):(d<e&&i.push(u.slice(0,e-d,r)),o&&(i.push(o),o=void 0),h>n&&i.push(u.slice(n-d,u.size,r)))}return i}function Cw(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),i=o&&o.size==0,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=r.resolve(s),u,d;if(Wm(n)){for(u=s;o&&!o.node;)o=o.parent;let p=o.node;if(o&&p.isAtom&&ke.isSelectable(p)&&o.parent&&!(p.isInline&&b6(n.focusNode,n.focusOffset,o.dom))){let g=o.posBefore;d=new ke(s==g?a:r.resolve(g))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=s,g=s;for(let b=0;b<n.rangeCount;b++){let v=n.getRangeAt(b);p=Math.min(p,t.docView.posFromDOM(v.startContainer,v.startOffset,1)),g=Math.max(g,t.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(p<0)return null;[u,s]=g==t.state.selection.anchor?[g,p]:[p,g],a=r.resolve(s)}else u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let h=r.resolve(u);if(!d){let p=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;d=Sw(t,h,a,p)}return d}function qO(t){return t.editable?t.hasFocus():ZO(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function pi(t,e=!1){let n=t.state.selection;if(KO(t,n),!!qO(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Rn){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&Rl(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)K6(t);else{let{anchor:r,head:o}=n,i,s;vM&&!(n instanceof xe)&&(n.$from.parent.inlineContent||(i=wM(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=wM(t,n.to))),t.docView.setSelection(r,o,t,e),vM&&(i&&xM(i),s&&xM(s)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&q6(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const vM=Vn||Rn&&LO<63;function wM(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Vn&&o&&o.contentEditable=="false")return O0(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return O0(o);if(i)return O0(i)}}function O0(t){return t.contentEditable="true",Vn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function xM(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function q6(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!qO(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function K6(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,o=r.nodeName=="IMG";o?n.setStart(r.parentNode,Cn(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&nr&&ws<=11&&(r.disabled=!0,r.disabled=!1)}function KO(t,e){if(e instanceof ke){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(CM(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else CM(t)}function CM(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Sw(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||xe.between(e,n,r)}function SM(t){return t.editable&&!t.hasFocus()?!1:ZO(t)}function ZO(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function Z6(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Rl(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Jv(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return i&&Oe.findFrom(i,e)}function ls(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function kM(t,e,n){let r=t.state.selection;if(r instanceof xe)if(n.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=t.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return ls(t,new xe(r.$anchor,s))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=Jv(t.state,e);return o&&o instanceof ke?ls(t,o):!1}else if(!(Ir&&n.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=t.docView.descAt(a))&&!s.contentDOM?ke.isSelectable(i)?ls(t,new ke(e<0?t.state.doc.resolve(o.pos-i.nodeSize):o)):Kd?ls(t,new xe(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ke&&r.node.isInline)return ls(t,new xe(e>0?r.$to:r.$from));{let o=Jv(t.state,e);return o?ls(t,o):!1}}}function Lp(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ed(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Va(t,e){return e<0?Y6(t):W6(t)}function Y6(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,i,s=!1;for(oo&&n.nodeType==1&&r<Lp(n)&&ed(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(ed(a,-1))o=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(YO(n))break;{let a=n.previousSibling;for(;a&&ed(a,-1);)o=n.parentNode,i=Cn(a),a=a.previousSibling;if(a)n=a,r=Lp(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}s?Qv(t,n,r):o&&Qv(t,o,i)}function W6(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Lp(n),i,s;for(;;)if(r<o){if(n.nodeType!=1)break;let a=n.childNodes[r];if(ed(a,1))i=n,s=++r;else break}else{if(YO(n))break;{let a=n.nextSibling;for(;a&&ed(a,1);)i=a.parentNode,s=Cn(a)+1,a=a.nextSibling;if(a)n=a,r=0,o=Lp(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}i&&Qv(t,i,s)}function YO(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function X6(t,e){for(;t&&e==t.childNodes.length&&!qd(t);)e=Cn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function J6(t,e){for(;t&&!e&&!qd(t);)e=Cn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Qv(t,e,n){if(e.nodeType!=3){let i,s;(s=X6(e,n))?(e=s,n=0):(i=J6(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Wm(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&pi(t)},50)}function EM(t,e){let n=t.state.doc.resolve(e);if(!(Rn||w6)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function MM(t,e,n){let r=t.state.selection;if(r instanceof xe&&!r.empty||n.indexOf("s")>-1||Ir&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let s=Jv(t.state,e);if(s&&s instanceof ke)return ls(t,s)}if(!o.parent.inlineContent){let s=e<0?o:i,a=r instanceof tr?Oe.near(s,e):Oe.findFrom(s,e);return a?ls(t,a):!1}return!1}function TM(t,e){if(!(t.state.selection instanceof xe))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let s=t.state.tr;return e<0?s.delete(n.pos-i.nodeSize,n.pos):s.delete(n.pos,n.pos+i.nodeSize),t.dispatch(s),!0}return!1}function AM(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Q6(t){if(!Vn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;AM(t,r,"true"),setTimeout(()=>AM(t,r,"false"),20)}return!1}function eV(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function tV(t,e){let n=e.keyCode,r=eV(e);if(n==8||Ir&&n==72&&r=="c")return TM(t,-1)||Va(t,-1);if(n==46&&!e.shiftKey||Ir&&n==68&&r=="c")return TM(t,1)||Va(t,1);if(n==13||n==27)return!0;if(n==37||Ir&&n==66&&r=="c"){let o=n==37?EM(t,t.state.selection.from)=="ltr"?-1:1:-1;return kM(t,o,r)||Va(t,o)}else if(n==39||Ir&&n==70&&r=="c"){let o=n==39?EM(t,t.state.selection.from)=="ltr"?1:-1:1;return kM(t,o,r)||Va(t,o)}else{if(n==38||Ir&&n==80&&r=="c")return MM(t,-1,r)||Va(t,-1);if(n==40||Ir&&n==78&&r=="c")return Q6(t)||MM(t,1,r)||Va(t,1);if(r==(Ir?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function kw(t,e){t.someProp("transformCopied",b=>{e=b(e,t)});let n=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let b=r.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let s=t.someProp("clipboardSerializer")||ki.fromSchema(t.state.schema),a=tR(),u=a.createElement("div");u.appendChild(s.serializeFragment(r,{document:a}));let d=u.firstChild,h,p=0;for(;d&&d.nodeType==1&&(h=eR[d.nodeName.toLowerCase()]);){for(let b=h.length-1;b>=0;b--){let v=a.createElement(h[b]);for(;u.firstChild;)v.appendChild(u.firstChild);u.appendChild(v),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${o} ${i}${p?` -${p}`:""} ${JSON.stringify(n)}`);let g=t.someProp("clipboardTextSerializer",b=>b(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:g,slice:e}}function WO(t,e,n,r,o){let i=o.parent.type.spec.code,s,a;if(!n&&!e)return null;let u=e&&(r||i||!n);if(u){if(t.someProp("transformPastedText",g=>{e=g(e,i||r,t)}),i)return e?new le(X.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):le.empty;let p=t.someProp("clipboardTextParser",g=>g(e,o,r,t));if(p)a=p;else{let g=o.marks(),{schema:b}=t.state,v=ki.fromSchema(b);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(C=>{let k=s.appendChild(document.createElement("p"));C&&k.appendChild(v.serializeNode(b.text(C,g)))})}}else t.someProp("transformPastedHTML",p=>{n=p(n,t)}),s=iV(n),Kd&&sV(s);let d=s&&s.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let g=s.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;s=g}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||To.fromSchema(t.state.schema)).parseSlice(s,{preserveWhitespace:!!(u||h),context:o,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!nV.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)a=lV(NM(a,+h[1],+h[2]),h[4]);else if(a=le.maxOpen(rV(a.content,o),!0),a.openStart||a.openEnd){let p=0,g=0;for(let b=a.content.firstChild;p<a.openStart&&!b.type.spec.isolating;p++,b=b.firstChild);for(let b=a.content.lastChild;g<a.openEnd&&!b.type.spec.isolating;g++,b=b.lastChild);a=NM(a,p,g)}return t.someProp("transformPasted",p=>{a=p(a,t)}),a}const nV=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function rV(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),i,s=[];if(t.forEach(a=>{if(!s)return;let u=o.findWrapping(a.type),d;if(!u)return s=null;if(d=s.length&&i.length&&JO(u,i,a,s[s.length-1],0))s[s.length-1]=d;else{s.length&&(s[s.length-1]=QO(s[s.length-1],i.length));let h=XO(a,u);s.push(h),o=o.matchType(h.type),i=u}}),s)return X.from(s)}return t}function XO(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,X.from(t));return t}function JO(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let i=JO(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(X.from(XO(n,t,o+1))))}}function QO(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,QO(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(X.empty,!0);return t.copy(n.append(r))}function e1(t,e,n,r,o,i){let s=e<0?t.firstChild:t.lastChild,a=s.content;return t.childCount>1&&(i=0),o<r-1&&(a=e1(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(X.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function NM(t,e,n){return e<t.openStart&&(t=new le(e1(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new le(e1(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const eR={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let OM=null;function tR(){return OM||(OM=document.implementation.createHTMLDocument("title"))}let R0=null;function oV(t){let e=window.trustedTypes;return e?(R0||(R0=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),R0.createHTML(t)):t}function iV(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=tR().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&eR[r[1].toLowerCase()])&&(t=o.map(i=>"<"+i+">").join("")+t+o.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=oV(t),o)for(let i=0;i<o.length;i++)n=n.querySelector(o[i])||n;return n}function sV(t){let e=t.querySelectorAll(Rn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function lV(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:i,openEnd:s}=t;for(let a=r.length-2;a>=0;a-=2){let u=n.nodes[r[a]];if(!u||u.hasRequiredAttrs())break;o=X.from(u.create(r[a+1],o)),i++,s++}return new le(o,i,s)}const zn={},Un={},aV={touchstart:!0,touchmove:!0};class cV{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function uV(t){for(let e in zn){let n=zn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{fV(t,r)&&!Ew(t,r)&&(t.editable||!(r.type in Un))&&n(t,r)},aV[e]?{passive:!0}:void 0)}Vn&&t.dom.addEventListener("input",()=>null),t1(t)}function bs(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function dV(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function t1(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Ew(t,r))})}function Ew(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function fV(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function hV(t,e){!Ew(t,e)&&zn[e.type]&&(t.editable||!(e.type in Un))&&zn[e.type](t,e)}Un.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!rR(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ui&&Rn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),fc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,dl(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||tV(t,n)?n.preventDefault():bs(t,"key")};Un.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Un.keypress=(t,e)=>{let n=e;if(rR(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ir&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof xe)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,o,i))&&t.dispatch(i()),n.preventDefault()}};function Jm(t){return{left:t.clientX,top:t.clientY}}function pV(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Mw(t,e,n,r,o){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(t.someProp(e,a=>s>i.depth?a(t,n,i.nodeAfter,i.before(s),o,!0):a(t,n,i.node(s),i.before(s),o,!1)))return!0;return!1}function ec(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function mV(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&ke.isSelectable(r)?(ec(t,new ke(n)),!0):!1}function gV(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof ke&&(r=n.node);let i=t.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(ke.isSelectable(a)){r&&n.$from.depth>0&&s>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?o=i.before(n.$from.depth):o=i.before(s);break}}return o!=null?(ec(t,ke.create(t.state.doc,o)),!0):!1}function bV(t,e,n,r,o){return Mw(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(o?gV(t,n):mV(t,n))}function yV(t,e,n,r){return Mw(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function vV(t,e,n,r){return Mw(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||wV(t,n,r)}function wV(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ec(t,xe.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)ec(t,xe.create(r,a+1,a+1+s.content.size));else if(ke.isSelectable(s))ec(t,ke.create(r,a));else continue;return!0}}function Tw(t){return Bp(t)}const nR=Ir?"metaKey":"ctrlKey";zn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Tw(t),o=Date.now(),i="singleClick";o-t.input.lastClick.time<500&&pV(n,t.input.lastClick)&&!n[nR]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i,button:n.button};let s=t.posAtCoords(Jm(n));s&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new xV(t,s,n,!!r)):(i=="doubleClick"?yV:vV)(t,s.pos,s.inside,n)?n.preventDefault():bs(t,"pointer"))};class xV{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[nR],this.allowDefault=r.shiftKey;let i,s;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),s=n.inside;else{let h=e.state.doc.resolve(n.pos);i=h.parent,s=h.depth?h.before():0}const a=o?null:r.target,u=a?e.docView.nearestDesc(a,!0):null;this.target=u&&u.dom.nodeType==1?u.dom:null;let{selection:d}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||d instanceof ke&&d.from<=s&&d.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&oo&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),bs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>pi(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Jm(e))),this.updateAllowDefault(e),this.allowDefault||!n?bs(this.view,"pointer"):bV(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Vn&&this.mightDrag&&!this.mightDrag.node.isAtom||Rn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ec(this.view,Oe.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):bs(this.view,"pointer")}move(e){this.updateAllowDefault(e),bs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}zn.touchstart=t=>{t.input.lastTouch=Date.now(),Tw(t),bs(t,"pointer")};zn.touchmove=t=>{t.input.lastTouch=Date.now(),bs(t,"pointer")};zn.contextmenu=t=>Tw(t);function rR(t,e){return t.composing?!0:Vn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const CV=ui?5e3:-1;Un.compositionstart=Un.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof xe&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Bp(t,!0),t.markCursor=null;else if(Bp(t,!e.selection.empty),oo&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=t.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}t.input.composing=!0}oR(t,CV)};Un.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,oR(t,20))};function oR(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Bp(t),e))}function iR(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=kV());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function SV(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=m6(e.focusNode,e.focusOffset),r=g6(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return r}}return n||r}function kV(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Bp(t,e=!1){if(!(ui&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),iR(t),e||t.docView&&t.docView.dirty){let n=Cw(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function EV(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const yd=nr&&ws<15||fc&&x6<604;zn.copy=Un.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let i=yd?null:n.clipboardData,s=r.content(),{dom:a,text:u}=kw(t,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",u)):EV(t,a),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function MV(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function TV(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?vd(t,r.value,null,o,e):vd(t,r.textContent,r.innerHTML,o,e)},50)}function vd(t,e,n,r,o){let i=WO(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",u=>u(t,o,i||le.empty)))return!0;if(!i)return!1;let s=MV(i),a=s?t.state.tr.replaceSelectionWith(s,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function sR(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Un.paste=(t,e)=>{let n=e;if(t.composing&&!ui)return;let r=yd?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&vd(t,sR(r),r.getData("text/html"),o,n)?n.preventDefault():TV(t,n)};class lR{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const AV=Ir?"altKey":"ctrlKey";function aR(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[AV]}zn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,i=o.empty?null:t.posAtCoords(Jm(n)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof ke?o.to-1:o.to))){if(r&&r.mightDrag)s=ke.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=t.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=t.docView&&(s=ke.create(t.state.doc,p.posBefore))}}let a=(s||t.state.selection).content(),{dom:u,text:d,slice:h}=kw(t,a);(!n.dataTransfer.files.length||!Rn||LO>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(yd?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",yd||n.dataTransfer.setData("text/plain",d),t.dragging=new lR(h,aR(t,n),s)};zn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Un.dragover=Un.dragenter=(t,e)=>e.preventDefault();Un.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let o=t.posAtCoords(Jm(n));if(!o)return;let i=t.state.doc.resolve(o.pos),s=r&&r.slice;s?t.someProp("transformPasted",v=>{s=v(s,t)}):s=WO(t,sR(n.dataTransfer),yd?null:n.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&aR(t,n));if(t.someProp("handleDrop",v=>v(t,n,s||le.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let u=s?EO(t.state.doc,i.pos,s):i.pos;u==null&&(u=i.pos);let d=t.state.tr;if(a){let{node:v}=r;v?v.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,g=d.doc;if(p?d.replaceRangeWith(h,h,s.content.firstChild):d.replaceRange(h,h,s),d.doc.eq(g))return;let b=d.doc.resolve(h);if(p&&ke.isSelectable(s.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(s.content.firstChild))d.setSelection(new ke(b));else{let v=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((C,k,E,T)=>v=T),d.setSelection(Sw(t,b,d.doc.resolve(v)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))};zn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&pi(t)},20))};zn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};zn.beforeinput=(t,e)=>{if(Rn&&ui&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,dl(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Un)zn[t]=Un[t];function wd(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ip{constructor(e,n){this.toDOM=e,this.spec=n||Sl,this.side=this.spec.side||0}map(e,n,r,o){let{pos:i,deleted:s}=e.mapResult(n.from+o,this.side<0?-1:1);return s?null:new mt(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ip&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&wd(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Cs{constructor(e,n){this.attrs=e,this.spec=n||Sl}map(e,n,r,o){let i=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new mt(i,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Cs&&wd(this.attrs,e.attrs)&&wd(this.spec,e.spec)}static is(e){return e.type instanceof Cs}destroy(){}}class Aw{constructor(e,n){this.attrs=e,this.spec=n||Sl}map(e,n,r,o){let i=e.mapResult(n.from+o,1);if(i.deleted)return null;let s=e.mapResult(n.to+o,-1);return s.deleted||s.pos<=i.pos?null:new mt(i.pos-r,s.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),i;return o==n.from&&!(i=e.child(r)).isText&&o+i.nodeSize==n.to}eq(e){return this==e||e instanceof Aw&&wd(this.attrs,e.attrs)&&wd(this.spec,e.spec)}destroy(){}}class mt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new mt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new mt(e,e,new Ip(n,r))}static inline(e,n,r,o){return new mt(e,n,new Cs(r,o))}static node(e,n,r,o){return new mt(e,n,new Aw(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof Cs}get widget(){return this.type instanceof Ip}}const Ka=[],Sl={};class et{constructor(e,n){this.local=e.length?e:Ka,this.children=n.length?n:Ka}static create(e,n){return n.length?Hp(n,e,0,Sl):On}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,r,o+a,i)}}map(e,n,r){return this==On||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Sl)}mapInner(e,n,r,o,i){let s;for(let a=0;a<this.local.length;a++){let u=this.local[a].map(e,r,o);u&&u.type.valid(n,u)?(s||(s=[])).push(u):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?NV(this.children,s||[],e,n,r,o,i):s?new et(s.sort(kl),Ka):On}add(e,n){return n.length?this==On?et.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,i=0;e.forEach((a,u)=>{let d=u+r,h;if(h=uR(n,a,d)){for(o||(o=this.children.slice());i<o.length&&o[i]<u;)i+=3;o[i]==u?o[i+2]=o[i+2].addInner(a,h,d+1):o.splice(i,0,u,u+a.nodeSize,Hp(h,a,d+1,Sl)),i+=3}});let s=cR(i?dR(n):n,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new et(s.length?this.local.concat(s).sort(kl):this.local,o||this.children)}remove(e){return e.length==0||this==On?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+n,u=r[i+1]+n;for(let h=0,p;h<e.length;h++)(p=e[h])&&p.from>a&&p.to<u&&(e[h]=null,(s||(s=[])).push(p));if(!s)continue;r==this.children&&(r=this.children.slice());let d=r[i+2].removeInner(s,a+1);d!=On?r[i+2]=d:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let a=0;a<o.length;a++)o[a].eq(s,n)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new et(o,r):On}forChild(e,n){if(this==On)return this;if(n.isLeaf)return et.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,s=i+n.content.size;for(let a=0;a<this.local.length;a++){let u=this.local[a];if(u.from<s&&u.to>i&&u.type instanceof Cs){let d=Math.max(i,u.from)-i,h=Math.min(s,u.to)-i;d<h&&(o||(o=[])).push(u.copy(d,h))}}if(o){let a=new et(o.sort(kl),Ka);return r?new us([a,r]):a}return r||On}eq(e){if(this==e)return!0;if(!(e instanceof et)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Nw(this.localsInner(e))}localsInner(e){if(this==On)return Ka;if(e.inlineContent||!this.local.some(Cs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Cs||n.push(this.local[r]);return n}forEachSet(e){e(this)}}et.empty=new et([],[]);et.removeOverlap=Nw;const On=et.empty;class us{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,Sl));return us.from(r)}forChild(e,n){if(n.isLeaf)return et.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,n);i!=On&&(i instanceof us?r=r.concat(i.members):r.push(i))}return us.from(r)}eq(e){if(!(e instanceof us)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let s=0;s<i.length;s++)n.push(i[s])}}return n?Nw(r?n:n.sort(kl)):Ka}static from(e){switch(e.length){case 0:return On;case 1:return e[0];default:return new us(e.every(n=>n instanceof et)?e:e.reduce((n,r)=>n.concat(r instanceof et?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function NV(t,e,n,r,o,i,s){let a=t.slice();for(let d=0,h=i;d<n.maps.length;d++){let p=0;n.maps[d].forEach((g,b,v,C)=>{let k=C-v-(b-g);for(let E=0;E<a.length;E+=3){let T=a[E+1];if(T<0||g>T+h-p)continue;let N=a[E]+h-p;b>=N?a[E+1]=g<=N?-2:-1:g>=h&&k&&(a[E]+=k,a[E+1]+=k)}p+=k}),h=n.maps[d].map(h,-1)}let u=!1;for(let d=0;d<a.length;d+=3)if(a[d+1]<0){if(a[d+1]==-2){u=!0,a[d+1]=-1;continue}let h=n.map(t[d]+i),p=h-o;if(p<0||p>=r.content.size){u=!0;continue}let g=n.map(t[d+1]+i,-1),b=g-o,{index:v,offset:C}=r.content.findIndex(p),k=r.maybeChild(v);if(k&&C==p&&C+k.nodeSize==b){let E=a[d+2].mapInner(n,k,h+1,t[d]+i+1,s);E!=On?(a[d]=p,a[d+1]=b,a[d+2]=E):(a[d+1]=-2,u=!0)}else u=!0}if(u){let d=OV(a,t,e,n,o,i,s),h=Hp(d,r,0,s);e=h.local;for(let p=0;p<a.length;p+=3)a[p+1]<0&&(a.splice(p,3),p-=3);for(let p=0,g=0;p<h.children.length;p+=3){let b=h.children[p];for(;g<a.length&&a[g]<b;)g+=3;a.splice(g,0,h.children[p],h.children[p+1],h.children[p+2])}}return new et(e.sort(kl),a)}function cR(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new mt(o.from+e,o.to+e,o.type))}return n}function OV(t,e,n,r,o,i,s){function a(u,d){for(let h=0;h<u.local.length;h++){let p=u.local[h].map(r,o,d);p?n.push(p):s.onRemove&&s.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)a(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<t.length;u+=3)t[u+1]==-1&&a(t[u+2],e[u]+i+1);return n}function uR(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let i=0,s;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function dR(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Hp(t,e,n,r){let o=[],i=!1;e.forEach((a,u)=>{let d=uR(t,a,u+n);if(d){i=!0;let h=Hp(d,a,n+u+1,r);h!=On&&o.push(u,u+a.nodeSize,h)}});let s=cR(i?dR(t):t,-n).sort(kl);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new et(s,o):On}function kl(t,e){return t.from-e.from||t.to-e.to}function Nw(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),RM(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),RM(e,o,r.copy(i.from,r.to)));break}}}return e}function RM(t,e,n){for(;e<t.length&&kl(n,t[e])>0;)e++;t.splice(e,0,n)}function D0(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=On&&e.push(r)}),t.cursorWrapper&&e.push(et.create(t.state.doc,[t.cursorWrapper.deco])),us.from(e)}const RV={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},DV=nr&&ws<=11;class _V{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class LV{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new _V,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);nr&&ws<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),DV&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,RV)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(SM(this.view)){if(this.suppressingSelectionUpdates)return pi(this.view);if(nr&&ws<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Rl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=dc(i))n.add(i);for(let i=e.anchorNode;i;i=dc(i))if(n.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&SM(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,u=[];if(e.editable)for(let h=0;h<n.length;h++){let p=this.registerMutation(n[h],u);p&&(i=i<0?p.from:Math.min(p.from,i),s=s<0?p.to:Math.max(p.to,s),p.typeOver&&(a=!0))}if(oo&&u.length){let h=u.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,g]=h;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of h){let b=g.parentNode;b&&b.nodeName=="LI"&&(!p||HV(e,p)!=b)&&g.remove()}}}let d=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Wm(r)&&(d=Cw(e))&&d.eq(Oe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,pi(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),BV(e)),this.handleDOMChange(i,s,a,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||pi(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let p=e.addedNodes[h];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(nr&&ws<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:p,nextSibling:g}=e.addedNodes[h];(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(o=p),(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g)}let s=o&&o.parentNode==e.target?Cn(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),u=i&&i.parentNode==e.target?Cn(i):e.target.childNodes.length,d=r.localPosFromDOM(e.target,u,1);return{from:a,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let DM=new WeakMap,_M=!1;function BV(t){if(!DM.has(t)&&(DM.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=oo,_M)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),_M=!0}}function LM(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Rl(s.node,s.offset,o,i)&&([n,r,o,i]=[o,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:i}}function IV(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return LM(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?LM(t,n):null}function HV(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function PV(t,e,n){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=t.docView.parseRange(e,n),u=t.domSelectionRange(),d,h=u.anchorNode;if(h&&t.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],Wm(u)||d.push({node:u.focusNode,offset:u.focusOffset})),Rn&&t.input.lastKeyCode===8)for(let k=i;k>o;k--){let E=r.childNodes[k-1],T=E.pmViewDesc;if(E.nodeName=="BR"&&!T){i=k;break}if(!T||T.size)break}let p=t.state.doc,g=t.someProp("domParser")||To.fromSchema(t.state.schema),b=p.resolve(s),v=null,C=g.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:o,to:i,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:jV,context:b});if(d&&d[0].pos!=null){let k=d[0].pos,E=d[1]&&d[1].pos;E==null&&(E=k),v={anchor:k+s,head:E+s}}return{doc:C,sel:v,from:s,to:a}}function jV(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Vn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Vn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const VV=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function zV(t,e,n,r,o){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let P=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,W=Cw(t,P);if(W&&!t.state.selection.eq(W)){if(Rn&&ui&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",ge=>ge(t,dl(13,"Enter"))))return;let ie=t.state.tr.setSelection(W);P=="pointer"?ie.setMeta("pointer",!0):P=="key"&&ie.scrollIntoView(),i&&ie.setMeta("composition",i),t.dispatch(ie)}return}let s=t.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=t.state.doc.resolve(n).after(a+1);let u=t.state.selection,d=PV(t,e,n),h=t.state.doc,p=h.slice(d.from,d.to),g,b;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(g=t.state.selection.to,b="end"):(g=t.state.selection.from,b="start"),t.input.lastKeyCode=null;let v=FV(p.content,d.doc.content,d.from,g,b);if(v&&t.input.domChangeCount++,(fc&&t.input.lastIOSEnter>Date.now()-225||ui)&&o.some(P=>P.nodeType==1&&!VV.test(P.nodeName))&&(!v||v.endA>=v.endB)&&t.someProp("handleKeyDown",P=>P(t,dl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!v)if(r&&u instanceof xe&&!u.empty&&u.$head.sameParent(u.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))v={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let P=BM(t,t.state.doc,d.sel);if(P&&!P.eq(t.state.selection)){let W=t.state.tr.setSelection(P);i&&W.setMeta("composition",i),t.dispatch(W)}}return}t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof xe&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),nr&&ws<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>d.from&&d.doc.textBetween(v.start-d.from-1,v.start-d.from+1)=="  "&&(v.start--,v.endA--,v.endB--);let C=d.doc.resolveNoCache(v.start-d.from),k=d.doc.resolveNoCache(v.endB-d.from),E=h.resolve(v.start),T=C.sameParent(k)&&C.parent.inlineContent&&E.end()>=v.endA,N;if((fc&&t.input.lastIOSEnter>Date.now()-225&&(!T||o.some(P=>P.nodeName=="DIV"||P.nodeName=="P"))||!T&&C.pos<d.doc.content.size&&(!C.sameParent(k)||!C.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(C.pos,k.pos,"",""))&&(N=Oe.findFrom(d.doc.resolve(C.pos+1),1,!0))&&N.head>C.pos)&&t.someProp("handleKeyDown",P=>P(t,dl(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>v.start&&$V(h,v.start,v.endA,C,k)&&t.someProp("handleKeyDown",P=>P(t,dl(8,"Backspace")))){ui&&Rn&&t.domObserver.suppressSelectionUpdates();return}Rn&&v.endB==v.start&&(t.input.lastChromeDelete=Date.now()),ui&&!T&&C.start()!=k.start()&&k.parentOffset==0&&C.depth==k.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==v.endA&&(v.endB-=2,k=d.doc.resolveNoCache(v.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(P){return P(t,dl(13,"Enter"))})},20));let _=v.start,O=v.endA,$=P=>{let W=P||t.state.tr.replace(_,O,d.doc.slice(v.start-d.from,v.endB-d.from));if(d.sel){let ie=BM(t,W.doc,d.sel);ie&&!(Rn&&t.composing&&ie.empty&&(v.start!=v.endB||t.input.lastChromeDelete<Date.now()-100)&&(ie.head==_||ie.head==W.mapping.map(O)-1)||nr&&ie.empty&&ie.head==_)&&W.setSelection(ie)}return i&&W.setMeta("composition",i),W.scrollIntoView()},H;if(T){if(C.pos==k.pos){nr&&ws<=11&&C.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>pi(t),20));let P=$(t.state.tr.delete(_,O)),W=h.resolve(v.start).marksAcross(h.resolve(v.endA));W&&P.ensureMarks(W),t.dispatch(P)}else if(v.endA==v.endB&&(H=UV(C.parent.content.cut(C.parentOffset,k.parentOffset),E.parent.content.cut(E.parentOffset,v.endA-E.start())))){let P=$(t.state.tr);H.type=="add"?P.addMark(_,O,H.mark):P.removeMark(_,O,H.mark),t.dispatch(P)}else if(C.parent.child(C.index()).isText&&C.index()==k.index()-(k.textOffset?0:1)){let P=C.parent.textBetween(C.parentOffset,k.parentOffset),W=()=>$(t.state.tr.insertText(P,_,O));t.someProp("handleTextInput",ie=>ie(t,_,O,P,W))||t.dispatch(W())}}else t.dispatch($())}function BM(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Sw(t,e.resolve(n.anchor),e.resolve(n.head))}function UV(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,i=r,s,a,u;for(let h=0;h<r.length;h++)o=r[h].removeFromSet(o);for(let h=0;h<n.length;h++)i=n[h].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",u=h=>h.mark(a.addToSet(h.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",u=h=>h.mark(a.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<e.childCount;h++)d.push(u(e.child(h)));if(X.from(d).eq(t))return{mark:a,type:s}}function $V(t,e,n,r,o){if(n-e<=o.pos-r.pos||_0(r,!0,!1)<o.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=t.resolve(_0(i,!0,!0));return!s.parent.isTextblock||s.pos>n||_0(s,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function _0(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function FV(t,e,n,r,o){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let u=Math.max(0,i-Math.min(s,a));r-=s+u-i}if(s<i&&t.size<e.size){let u=r<=i&&r>=s?i-r:0;i-=u,i&&i<e.size&&IM(e.textBetween(i-1,i+1))&&(i+=u?1:-1),a=i+(a-s),s=i}else if(a<i){let u=r<=i&&r>=a?i-r:0;i-=u,i&&i<t.size&&IM(t.textBetween(i-1,i+1))&&(i+=u?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function IM(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Ow{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new cV,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(zM),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=jM(this),PM(this),this.nodeViews=VM(this),this.docView=bM(this.state.doc,HM(this),D0(this),this.dom,this),this.domObserver=new LV(this,(r,o,i,s)=>zV(this,r,o,i,s)),this.domObserver.start(),uV(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&t1(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(zM),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(iR(this),s=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=VM(this);qV(b,this.nodeViews)&&(this.nodeViews=b,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&t1(this),this.editable=jM(this),PM(this);let u=D0(this),d=HM(this),h=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(e.doc,d,u);(p||!e.selection.eq(o.selection))&&(s=!0);let g=h=="preserve"&&s&&this.dom.style.overflowAnchor==null&&k6(this);if(s){this.domObserver.stop();let b=p&&(nr||Rn)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&GV(o.selection,e.selection);if(p){let v=Rn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=SV(this)),(i||!this.docView.update(e.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=bM(e.doc,d,u,this.dom,this)),v&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Z6(this))?pi(this,b):(KO(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&E6(g)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ke){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&dM(this,n.getBoundingClientRect(),e)}else dM(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new lR(e.slice,e.move,o<0?void 0:ke.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(o=n?n(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[e];if(a!=null&&(o=n?n(a):a))return o}}hasFocus(){if(nr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&M6(this.dom),pi(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return R6(this,e)}coordsAtPos(e,n=1){return jO(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return I6(this,n||this.state,e)}pasteHTML(e,n){return vd(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return vd(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return kw(this,e)}destroy(){this.docView&&(dV(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],D0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,h6())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return hV(this,e)}domSelectionRange(){let e=this.domSelection();return e?Vn&&this.root.nodeType===11&&y6(this.dom.ownerDocument)==this.dom&&IV(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Ow.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function HM(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[mt.node(0,t.state.doc.content.size,e)]}function PM(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:mt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function jM(t){return!t.someProp("editable",e=>e(t.state)===!1)}function GV(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function VM(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function qV(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function zM(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Es={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Pp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},KV=typeof navigator<"u"&&/Mac/.test(navigator.platform),ZV=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Sn=0;Sn<10;Sn++)Es[48+Sn]=Es[96+Sn]=String(Sn);for(var Sn=1;Sn<=24;Sn++)Es[Sn+111]="F"+Sn;for(var Sn=65;Sn<=90;Sn++)Es[Sn]=String.fromCharCode(Sn+32),Pp[Sn]=String.fromCharCode(Sn);for(var L0 in Es)Pp.hasOwnProperty(L0)||(Pp[L0]=Es[L0]);function YV(t){var e=KV&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ZV&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Pp:Es)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const WV=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),XV=typeof navigator<"u"&&/Win/.test(navigator.platform);function JV(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a++){let u=e[a];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))i=!0;else if(/^mod$/i.test(u))WV?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function QV(t){let e=Object.create(null);for(let n in t)e[JV(n)]=t[n];return e}function B0(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function e7(t){return new Ge({props:{handleKeyDown:Rw(t)}})}function Rw(t){let e=QV(t);return function(n,r){let o=YV(r),i,s=e[B0(o,r)];if(s&&s(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[B0(o,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(XV&&r.ctrlKey&&r.altKey)&&(i=Es[r.keyCode])&&i!=o){let a=e[B0(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const Dw=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function fR(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const hR=(t,e,n)=>{let r=fR(t,n);if(!r)return!1;let o=_w(r);if(!o){let s=r.blockRange(),a=s&&kc(s);return a==null?!1:(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(CR(t,o,e,-1))return!0;if(r.parent.content.size==0&&(hc(i,"end")||ke.isSelectable(i)))for(let s=r.depth;;s--){let a=Zm(t.doc,r.before(s),r.after(s),le.empty);if(a&&a.slice.size<a.to-a.from){if(e){let u=t.tr.step(a);u.setSelection(hc(i,"end")?Oe.findFrom(u.doc.resolve(u.mapping.map(o.pos,-1)),-1):ke.create(u.doc,o.pos-i.nodeSize)),e(u.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},t7=(t,e,n)=>{let r=fR(t,n);if(!r)return!1;let o=_w(r);return o?pR(t,o,e):!1},n7=(t,e,n)=>{let r=gR(t,n);if(!r)return!1;let o=Lw(r);return o?pR(t,o,e):!1};function pR(t,e,n){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let h=o.lastChild;if(!h)return!1;o=h}let s=e.nodeAfter,a=s,u=e.pos+1;for(;!a.isTextblock;u++){if(a.type.spec.isolating)return!1;let h=a.firstChild;if(!h)return!1;a=h}let d=Zm(t.doc,i,u,le.empty);if(!d||d.from!=i||d instanceof Xt&&d.slice.size>=u-i)return!1;if(n){let h=t.tr.step(d);h.setSelection(xe.create(h.doc,i)),n(h.scrollIntoView())}return!0}function hc(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const mR=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=_w(r)}let s=i&&i.nodeBefore;return!s||!ke.isSelectable(s)?!1:(e&&e(t.tr.setSelection(ke.create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function _w(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function gR(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const bR=(t,e,n)=>{let r=gR(t,n);if(!r)return!1;let o=Lw(r);if(!o)return!1;let i=o.nodeAfter;if(CR(t,o,e,1))return!0;if(r.parent.content.size==0&&(hc(i,"start")||ke.isSelectable(i))){let s=Zm(t.doc,r.before(),r.after(),le.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=t.tr.step(s);a.setSelection(hc(i,"start")?Oe.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):ke.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},yR=(t,e,n)=>{let{$head:r,empty:o}=t.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=Lw(r)}let s=i&&i.nodeAfter;return!s||!ke.isSelectable(s)?!1:(e&&e(t.tr.setSelection(ke.create(t.doc,i.pos)).scrollIntoView()),!0)};function Lw(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const r7=(t,e)=>{let n=t.selection,r=n instanceof ke,o;if(r){if(n.node.isTextblock||!Gl(t.doc,n.from))return!1;o=n.from}else if(o=Km(t.doc,n.from,-1),o==null)return!1;if(e){let i=t.tr.join(o);r&&i.setSelection(ke.create(i.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},o7=(t,e)=>{let n=t.selection,r;if(n instanceof ke){if(n.node.isTextblock||!Gl(t.doc,n.to))return!1;r=n.to}else if(r=Km(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},i7=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),i=o&&kc(o);return i==null?!1:(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)},vR=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Bw(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const s7=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=Bw(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let a=n.after(),u=t.tr.replaceWith(a,a,s.createAndFill());u.setSelection(Oe.near(u.doc.resolve(a),1)),e(u.scrollIntoView())}return!0},wR=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof tr||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=Bw(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=t.tr.insert(s,i.createAndFill());a.setSelection(xe.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},xR=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(hi(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),o=r&&kc(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function l7(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof ke&&e.selection.node.isBlock)return!r.parentOffset||!hi(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,a,u=!1,d=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){u=r.end(b)==r.pos+(r.depth-b),d=r.start(b)==r.pos-(r.depth-b),a=Bw(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),i.unshift(u&&a?{type:a}:null),s=b;break}else{if(b==1)return!1;i.unshift(null)}let h=e.tr;(e.selection instanceof xe||e.selection instanceof tr)&&h.deleteSelection();let p=h.mapping.map(r.pos),g=hi(h.doc,p,i.length,i);if(g||(i[0]=a?{type:a}:null,g=hi(h.doc,p,i.length,i)),!g)return!1;if(h.split(p,i.length,i),!u&&d&&r.node(s).type!=a){let b=h.mapping.map(r.before(s)),v=h.doc.resolve(b);a&&r.node(s-1).canReplaceWith(v.index(),v.index()+1,a)&&h.setNodeMarkup(h.mapping.map(r.before(s)),a)}return n&&n(h.scrollIntoView()),!0}}const a7=l7(),c7=(t,e)=>{let{$from:n,to:r}=t.selection,o,i=n.sharedDepth(r);return i==0?!1:(o=n.before(i),e&&e(t.tr.setSelection(ke.create(t.doc,o))),!0)};function u7(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||Gl(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function CR(t,e,n,r){let o=e.nodeBefore,i=e.nodeAfter,s,a,u=o.type.spec.isolating||i.type.spec.isolating;if(!u&&u7(t,e,n))return!0;let d=!u&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(n){let b=e.pos+i.nodeSize,v=X.empty;for(let E=s.length-1;E>=0;E--)v=X.from(s[E].create(null,v));v=X.from(o.copy(v));let C=t.tr.step(new Ft(e.pos-1,b,e.pos,b,new le(v,1,0),s.length,!0)),k=C.doc.resolve(b+2*s.length);k.nodeAfter&&k.nodeAfter.type==o.type&&Gl(C.doc,k.pos)&&C.join(k.pos),n(C.scrollIntoView())}return!0}let h=i.type.spec.isolating||r>0&&u?null:Oe.findFrom(e,1),p=h&&h.$from.blockRange(h.$to),g=p&&kc(p);if(g!=null&&g>=e.depth)return n&&n(t.tr.lift(p,g).scrollIntoView()),!0;if(d&&hc(i,"start",!0)&&hc(o,"end")){let b=o,v=[];for(;v.push(b),!b.isTextblock;)b=b.lastChild;let C=i,k=1;for(;!C.isTextblock;C=C.firstChild)k++;if(b.canReplace(b.childCount,b.childCount,C.content)){if(n){let E=X.empty;for(let N=v.length-1;N>=0;N--)E=X.from(v[N].copy(E));let T=t.tr.step(new Ft(e.pos-v.length,e.pos+i.nodeSize,e.pos+k,e.pos+i.nodeSize-k,new le(E,v.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function SR(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(n&&n(e.tr.setSelection(xe.create(e.doc,t<0?o.start(i):o.end(i)))),!0):!1}}const d7=SR(-1),f7=SR(1);function h7(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&xO(s,t,e);return a?(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function UM(t,e=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(s,a,(u,d)=>{if(o)return!1;if(!(!u.isTextblock||u.hasMarkup(t,e)))if(u.type==t)o=!0;else{let h=n.doc.resolve(d),p=h.index();o=h.parent.canReplaceWith(p,p+1,t)}})}if(!o)return!1;if(r){let i=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:u}}=n.selection.ranges[s];i.setBlockType(a,u,t,e)}r(i.scrollIntoView())}return!0}}function Iw(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}Iw(Dw,hR,mR);Iw(Dw,bR,yR);Iw(vR,wR,xR,a7);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function p7(t,e=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i);if(!s)return!1;let a=r?n.tr:null;return m7(a,s,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function m7(t,e,n,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let u=s.resolve(e.start-2);i=new Rp(u,u,e.depth),e.endIndex<e.parent.childCount&&(e=new Rp(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=xO(i,n,r,e);return a?(t&&g7(t,e,a,o,n),!0):!1}function g7(t,e,n,r,o){let i=X.empty;for(let h=n.length-1;h>=0;h--)i=X.from(n[h].type.create(n[h].attrs,i));t.step(new Ft(e.start-(r?2:0),e.end,e.start,e.end,new le(i,0,0),n.length,!0));let s=0;for(let h=0;h<n.length;h++)n[h].type==o&&(s=h+1);let a=n.length-s,u=e.start+n.length-(r?2:0),d=e.parent;for(let h=e.startIndex,p=e.endIndex,g=!0;h<p;h++,g=!1)!g&&hi(t.doc,u,a)&&(t.split(u,a),u+=2*a),u+=d.child(h).nodeSize;return t}function b7(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?y7(e,n,t,i):v7(e,n,i):!0:!1}}function y7(t,e,n,r){let o=t.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new Ft(i-1,s,i,s,new le(X.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Rp(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=kc(r);if(a==null)return!1;o.lift(r,a);let u=o.doc.resolve(o.mapping.map(i,-1)-1);return Gl(o.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&o.join(u.pos),e(o.scrollIntoView()),!0}function v7(t,e,n){let r=t.tr,o=n.parent;for(let b=n.end,v=n.endIndex-1,C=n.startIndex;v>C;v--)b-=o.child(v).nodeSize,r.delete(b-1,b+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,u=n.endIndex==o.childCount,d=i.node(-1),h=i.index(-1);if(!d.canReplace(h+(a?0:1),h+1,s.content.append(u?X.empty:X.from(o))))return!1;let p=i.pos,g=p+s.nodeSize;return r.step(new Ft(p-(a?1:0),g+(u?1:0),p+1,g-1,new le((a?X.empty:X.from(o.copy(X.empty))).append(u?X.empty:X.from(o.copy(X.empty))),a?0:1,u?0:1),a?0:1)),e(r.scrollIntoView()),!0}function w7(t){return function(e,n){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,d=>d.childCount>0&&d.firstChild.type==t);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,u=a.child(s-1);if(u.type!=t)return!1;if(n){let d=u.lastChild&&u.lastChild.type==a.type,h=X.from(d?t.create():null),p=new le(X.from(t.create(null,X.from(a.type.create(null,h)))),d?3:1,0),g=i.start,b=i.end;n(e.tr.step(new Ft(g-(d?3:1),b,g,b,p,1,!0)).scrollIntoView())}return!0}}function Qm(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}class eg{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:o}=n,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,u])=>[a,(...h)=>{const p=u(...h)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],u=!!e,d=e||i.tr,h=()=>(!u&&n&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(d),a.every(g=>g===!0)),p={...Object.fromEntries(Object.entries(r).map(([g,b])=>[g,(...C)=>{const k=this.buildProps(d,n),E=b(...C)(k);return a.push(E),p}])),run:h};return p}createCan(e){const{rawCommands:n,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(n).map(([u,d])=>[u,(...h)=>d(...h)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,n=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:e,editor:o,view:s,state:Qm({state:i,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([u,d])=>[u,(...h)=>d(...h)(a)]))}};return a}}class x7{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e]),this}once(e,n){const r=(...o)=>{this.off(e,r),n.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function Se(t,e,n){return t.config[e]===void 0&&t.parent?Se(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Se(t.parent,e,n):null}):t.config[e]}function tg(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function kR(t){const e=[],{nodeExtensions:n,markExtensions:r}=tg(t),o=[...n,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},u=Se(s,"addGlobalAttributes",a);if(!u)return;u().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([g,b])=>{e.push({type:p,name:g,attribute:{...i,...b}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},u=Se(s,"addAttributes",a);if(!u)return;const d=u();Object.entries(d).forEach(([h,p])=>{const g={...i,...p};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,e.push({type:s.name,name:h,attribute:g})})}),e}function hn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function wr(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const a=i?String(i).split(" "):[],u=r[o]?r[o].split(" "):[],d=a.filter(h=>!u.includes(h));r[o]=[...u,...d].join(" ")}else if(o==="style"){const a=i?i.split(";").map(h=>h.trim()).filter(Boolean):[],u=r[o]?r[o].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;u.forEach(h=>{const[p,g]=h.split(":").map(b=>b.trim());d.set(p,g)}),a.forEach(h=>{const[p,g]=h.split(":").map(b=>b.trim());d.set(p,g)}),r[o]=Array.from(d.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[o]=i}),r},{})}function jp(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>wr(n,r),{})}function ER(t){return typeof t=="function"}function Je(t,e=void 0,...n){return ER(t)?e?t.bind(e)(...n):t(...n):t}function C7(t={}){return Object.keys(t).length===0&&t.constructor===Object}function S7(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function $M(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(n):S7(n.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function FM(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&C7(n)?!1:n!=null))}function MR(t,e){var n;const r=kR(t),{nodeExtensions:o,markExtensions:i}=tg(t),s=(n=o.find(d=>Se(d,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(o.map(d=>{const h=r.filter(E=>E.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:e},g=t.reduce((E,T)=>{const N=Se(T,"extendNodeSchema",p);return{...E,...N?N(d):{}}},{}),b=FM({...g,content:Je(Se(d,"content",p)),marks:Je(Se(d,"marks",p)),group:Je(Se(d,"group",p)),inline:Je(Se(d,"inline",p)),atom:Je(Se(d,"atom",p)),selectable:Je(Se(d,"selectable",p)),draggable:Je(Se(d,"draggable",p)),code:Je(Se(d,"code",p)),whitespace:Je(Se(d,"whitespace",p)),linebreakReplacement:Je(Se(d,"linebreakReplacement",p)),defining:Je(Se(d,"defining",p)),isolating:Je(Se(d,"isolating",p)),attrs:Object.fromEntries(h.map(E=>{var T;return[E.name,{default:(T=E?.attribute)===null||T===void 0?void 0:T.default}]}))}),v=Je(Se(d,"parseHTML",p));v&&(b.parseDOM=v.map(E=>$M(E,h)));const C=Se(d,"renderHTML",p);C&&(b.toDOM=E=>C({node:E,HTMLAttributes:jp(E,h)}));const k=Se(d,"renderText",p);return k&&(b.toText=k),[d.name,b]})),u=Object.fromEntries(i.map(d=>{const h=r.filter(k=>k.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:e},g=t.reduce((k,E)=>{const T=Se(E,"extendMarkSchema",p);return{...k,...T?T(d):{}}},{}),b=FM({...g,inclusive:Je(Se(d,"inclusive",p)),excludes:Je(Se(d,"excludes",p)),group:Je(Se(d,"group",p)),spanning:Je(Se(d,"spanning",p)),code:Je(Se(d,"code",p)),attrs:Object.fromEntries(h.map(k=>{var E;return[k.name,{default:(E=k?.attribute)===null||E===void 0?void 0:E.default}]}))}),v=Je(Se(d,"parseHTML",p));v&&(b.parseDOM=v.map(k=>$M(k,h)));const C=Se(d,"renderHTML",p);return C&&(b.toDOM=k=>C({mark:k,HTMLAttributes:jp(k,h)})),[d.name,b]}));return new hO({topNode:s,nodes:a,marks:u})}function I0(t,e){return e.nodes[t]||e.marks[t]||null}function GM(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Hw(t,e){const n=ki.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}const k7=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,a)=>{var u,d;const h=((d=(u=o.type.spec).toText)===null||d===void 0?void 0:d.call(u,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?h:h.slice(0,Math.max(0,r-i))}),n};function Pw(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Ms{constructor(e){this.find=e.find,this.handler=e.handler}}const E7=(t,e)=>{if(Pw(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function _h(t){var e;const{editor:n,from:r,to:o,text:i,rules:s,plugin:a}=t,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||!((e=d.nodeBefore||d.nodeAfter)===null||e===void 0)&&e.marks.find(g=>g.type.spec.code))return!1;let h=!1;const p=k7(d)+i;return s.forEach(g=>{if(h)return;const b=E7(p,g.find);if(!b)return;const v=u.state.tr,C=Qm({state:u.state,transaction:v}),k={from:r-(b[0].length-i.length),to:o},{commands:E,chain:T,can:N}=new eg({editor:n,state:C});g.handler({state:C,range:k,match:b,commands:E,chain:T,can:N})===null||!v.steps.length||(v.setMeta(a,{transform:v,from:r,to:o,text:i}),u.dispatch(v),h=!0)}),h}function M7(t){const{editor:e,rules:n}=t,r=new Ge({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const u=o.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=Hw(X.from(h),s.schema);const{from:p}=u,g=p+h.length;_h({editor:e,from:p,to:g,text:h,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return _h({editor:e,from:i,to:s,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&_h({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?_h({editor:e,from:s.pos,to:s.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function T7(t){return Object.prototype.toString.call(t).slice(8,-1)}function Lh(t){return T7(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function ng(t,e){const n={...t};return Lh(t)&&Lh(e)&&Object.keys(e).forEach(r=>{Lh(e[r])&&Lh(t[r])?n[r]=ng(t[r],e[r]):n[r]=e[r]}),n}class kn{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Je(Se(this,"addOptions",{name:this.name}))),this.storage=Je(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new kn(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ng(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new kn(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Je(Se(n,"addOptions",{name:n.name})),n.storage=Je(Se(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(d=>d?.type.name===n.name))return!1;const u=s.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function A7(t){return typeof t=="number"}class N7{constructor(e){this.find=e.find,this.handler=e.handler}}const O7=(t,e,n)=>{if(Pw(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=t,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function R7(t){const{editor:e,state:n,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=t,{commands:u,chain:d,can:h}=new eg({editor:e,state:n}),p=[];return n.doc.nodesBetween(r,o,(b,v)=>{if(!b.isTextblock||b.type.spec.code)return;const C=Math.max(r,v),k=Math.min(o,v+b.content.size),E=b.textBetween(C-v,k-v,void 0,"￼");O7(E,i.find,s).forEach(N=>{if(N.index===void 0)return;const _=C+N.index+1,O=_+N[0].length,$={from:n.tr.mapping.map(_),to:n.tr.mapping.map(O)},H=i.handler({state:n,range:$,match:N,commands:u,chain:d,can:h,pasteEvent:s,dropEvent:a});p.push(H)})}),p.every(b=>b!==null)}let Bh=null;const D7=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function _7(t){const{editor:e,rules:n}=t;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const u=({state:h,from:p,to:g,rule:b,pasteEvt:v})=>{const C=h.tr,k=Qm({state:h,transaction:C});if(!(!R7({editor:e,state:k,from:Math.max(p-1,0),to:g.b-1,rule:b,pasteEvent:v,dropEvent:a})||!C.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,C}};return n.map(h=>new Ge({view(p){const g=v=>{var C;r=!((C=p.dom.parentElement)===null||C===void 0)&&C.contains(v.target)?p.dom.parentElement:null,r&&(Bh=e)},b=()=>{Bh&&(Bh=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(i=r===p.dom.parentElement,a=g,!i){const b=Bh;b?.isEditable&&setTimeout(()=>{const v=b.state.selection;v&&b.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(p,g)=>{var b;const v=(b=g.clipboardData)===null||b===void 0?void 0:b.getData("text/html");return s=g,o=!!v?.includes("data-pm-slice"),!1}}},appendTransaction:(p,g,b)=>{const v=p[0],C=v.getMeta("uiEvent")==="paste"&&!o,k=v.getMeta("uiEvent")==="drop"&&!i,E=v.getMeta("applyPasteRules"),T=!!E;if(!C&&!k&&!T)return;if(T){let{text:O}=E;typeof O=="string"?O=O:O=Hw(X.from(O),b.schema);const{from:$}=E,H=$+O.length,P=D7(O);return u({rule:h,state:b,from:$,to:{b:H},pasteEvt:P})}const N=g.doc.content.findDiffStart(b.doc.content),_=g.doc.content.findDiffEnd(b.doc.content);if(!(!A7(N)||!_||N===_.b))return u({rule:h,state:b,from:N,to:_,pasteEvt:s})}}))}function L7(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class yl{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=yl.resolve(e),this.schema=MR(this.extensions,n),this.setupExtensions()}static resolve(e){const n=yl.sort(yl.flatten(e)),r=L7(n.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},o=Se(n,"addExtensions",r);return o?[n,...this.flatten(o())]:n}).flat(10)}static sort(e){return e.sort((r,o)=>{const i=Se(r,"priority")||100,s=Se(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:I0(n.name,this.schema)},o=Se(n,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,n=yl.sort([...this.extensions].reverse()),r=[],o=[],i=n.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:I0(s.name,this.schema)},u=[],d=Se(s,"addKeyboardShortcuts",a);let h={};if(s.type==="mark"&&Se(s,"exitable",a)&&(h.ArrowRight=()=>kn.handleExit({editor:e,mark:s})),d){const C=Object.fromEntries(Object.entries(d()).map(([k,E])=>[k,()=>E({editor:e})]));h={...h,...C}}const p=e7(h);u.push(p);const g=Se(s,"addInputRules",a);GM(s,e.options.enableInputRules)&&g&&r.push(...g());const b=Se(s,"addPasteRules",a);GM(s,e.options.enablePasteRules)&&b&&o.push(...b());const v=Se(s,"addProseMirrorPlugins",a);if(v){const C=v();u.push(...C)}return u}).flat();return[M7({editor:e,rules:r}),..._7({editor:e,rules:o}),...i]}get attributes(){return kR(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=tg(this.extensions);return Object.fromEntries(n.filter(r=>!!Se(r,"addNodeView")).map(r=>{const o=this.attributes.filter(u=>u.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:hn(r.name,this.schema)},s=Se(r,"addNodeView",i);if(!s)return[];const a=(u,d,h,p,g)=>{const b=jp(u,o);return s()({node:u,view:d,getPos:h,decorations:p,innerDecorations:g,editor:e,extension:r,HTMLAttributes:b})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:I0(e.name,this.schema)};e.type==="mark"&&(!((n=Je(Se(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const o=Se(e,"onBeforeCreate",r),i=Se(e,"onCreate",r),s=Se(e,"onUpdate",r),a=Se(e,"onSelectionUpdate",r),u=Se(e,"onTransaction",r),d=Se(e,"onFocus",r),h=Se(e,"onBlur",r),p=Se(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}}class St{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Je(Se(this,"addOptions",{name:this.name}))),this.storage=Je(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new St(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ng(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new St({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Je(Se(n,"addOptions",{name:n.name})),n.storage=Je(Se(n,"addStorage",{name:n.name,options:n.options})),n}}function TR(t,e,n){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=n||{};let a="";return t.nodesBetween(r,o,(u,d,h,p)=>{var g;u.isBlock&&d>r&&(a+=i);const b=s?.[u.type.name];if(b)return h&&(a+=b({node:u,pos:d,parent:h,index:p,range:e})),!1;u.isText&&(a+=(g=u?.text)===null||g===void 0?void 0:g.slice(Math.max(r,d)-d,o-d))}),a}function AR(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const NR=St.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ge({key:new ot("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(h=>h.$from.pos)),a=Math.max(...i.map(h=>h.$to.pos)),u=AR(n);return TR(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),B7=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),I7=(t=!1)=>({commands:e})=>e.setContent("",t),H7=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:i,$to:s})=>{t.doc.nodesBetween(i.pos,s.pos,(a,u)=>{if(a.type.isText)return;const{doc:d,mapping:h}=e,p=d.resolve(h.map(u)),g=d.resolve(h.map(u+a.nodeSize)),b=p.blockRange(g);if(!b)return;const v=kc(b);if(a.type.isTextblock){const{defaultType:C}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(b.start,C)}(v||v===0)&&e.lift(b,v)})}),!0},P7=t=>e=>t(e),j7=()=>({state:t,dispatch:e})=>wR(t,e),V7=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,i=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new xe(r.doc.resolve(Math.max(s-1,0)))),!0},z7=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const a=o.before(i),u=o.after(i);t.delete(a,u).scrollIntoView()}return!0}return!1},U7=t=>({tr:e,state:n,dispatch:r})=>{const o=hn(t,n.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const u=i.before(s),d=i.after(s);e.delete(u,d).scrollIntoView()}return!0}return!1},$7=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},F7=()=>({state:t,dispatch:e})=>Dw(t,e),G7=()=>({commands:t})=>t.keyboardShortcut("Enter"),q7=()=>({state:t,dispatch:e})=>s7(t,e);function Vp(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:Pw(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function OR(t,e,n={}){return t.find(r=>r.type===e&&Vp(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function qM(t,e,n={}){return!!OR(t,e,n)}function xd(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(h=>h.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(h=>h.type===e)||(n=n||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!OR([...o.node.marks],e,n)))return;let s=o.index,a=t.start()+o.offset,u=s+1,d=a+o.node.nodeSize;for(;s>0&&qM([...t.parent.child(s-1).marks],e,n);)s-=1,a-=t.parent.child(s).nodeSize;for(;u<t.parent.childCount&&qM([...t.parent.child(u).marks],e,n);)d+=t.parent.child(u).nodeSize,u+=1;return{from:a,to:d}}function Is(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const K7=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const i=Is(t,r.schema),{doc:s,selection:a}=n,{$from:u,from:d,to:h}=a;if(o){const p=xd(u,i,e);if(p&&p.from<=d&&p.to>=h){const g=xe.create(s,p.from,p.to);n.setSelection(g)}}return!0},Z7=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function rg(t){return t instanceof xe}function di(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function RR(t,e=null){if(!e)return null;const n=Oe.atStart(t),r=Oe.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,i=r.to;return e==="all"?xe.create(t,di(0,o,i),di(t.content.size,o,i)):xe.create(t,di(e,o,i),di(e,o,i))}function DR(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function og(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Y7=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{(og()||DR())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(i&&t===null&&!rg(n.state.selection))return s(),!0;const a=RR(o.doc,t)||n.state.selection,u=n.state.selection.eq(a);return i&&(u||o.setSelection(a),u&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},W7=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),X7=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),_R=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&_R(r)}return t};function Ih(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return _R(n)}function Cd(t,e,n){if(t instanceof fi||t instanceof X)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return X.fromArray(t.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(t);return n.errorOnInvalidContent&&s.check(),s}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Cd("",e,n)}if(o){if(n.errorOnInvalidContent){let s=!1,a="";const u=new hO({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(s=!0,a=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?To.fromSchema(u).parseSlice(Ih(t),n.parseOptions):To.fromSchema(u).parse(Ih(t),n.parseOptions),n.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=To.fromSchema(e);return n.slice?i.parseSlice(Ih(t),n.parseOptions).content:i.parse(Ih(t),n.parseOptions)}return Cd("",e,n)}function LR(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof Xt||o instanceof Ft))return;const i=t.mapping.maps[r];let s=0;i.forEach((a,u,d,h)=>{s===0&&(s=h)}),t.setSelection(Oe.near(t.doc.resolve(s),n))}const J7=t=>!("type"in t),Q7=(t,e,n)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const u=k=>{i.emit("contentError",{editor:i,error:k,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Cd(e,i.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(k){u(k)}try{a=Cd(e,i.schema,{parseOptions:d,errorOnInvalidContent:(s=n.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(k){return u(k),!1}let{from:h,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},g=!0,b=!0;if((J7(a)?a:[a]).forEach(k=>{k.check(),g=g?k.isText&&k.marks.length===0:!1,b=b?k.isBlock:!1}),h===p&&b){const{parent:k}=r.doc.resolve(h);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(h-=1,p+=1)}let C;if(g){if(Array.isArray(e))C=e.map(k=>k.text||"").join("");else if(e instanceof X){let k="";e.forEach(E=>{E.text&&(k+=E.text)}),C=k}else typeof e=="object"&&e&&e.text?C=e.text:C=e;r.insertText(C,h,p)}else C=a,r.replaceWith(h,p,C);n.updateSelection&&LR(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:C}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:C})}return!0},e9=()=>({state:t,dispatch:e})=>r7(t,e),t9=()=>({state:t,dispatch:e})=>o7(t,e),n9=()=>({state:t,dispatch:e})=>hR(t,e),r9=()=>({state:t,dispatch:e})=>bR(t,e),o9=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Km(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},i9=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Km(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},s9=()=>({state:t,dispatch:e})=>t7(t,e),l9=()=>({state:t,dispatch:e})=>n7(t,e);function BR(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function a9(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,i,s;for(let a=0;a<e.length-1;a+=1){const u=e[a];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))i=!0;else if(/^mod$/i.test(u))og()||BR()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),s&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}const c9=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const i=a9(t).split(/-(?!$)/),s=i.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),u=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,a))});return u?.steps.forEach(d=>{const h=d.map(r.mapping);h&&o&&r.maybeStep(h)}),!0};function Sd(t,e,n={}){const{from:r,to:o,empty:i}=t.selection,s=e?hn(e,t.schema):null,a=[];t.doc.nodesBetween(r,o,(p,g)=>{if(p.isText)return;const b=Math.max(r,g),v=Math.min(o,g+p.nodeSize);a.push({node:p,from:b,to:v})});const u=o-r,d=a.filter(p=>s?s.name===p.node.type.name:!0).filter(p=>Vp(p.node.attrs,n,{strict:!1}));return i?!!d.length:d.reduce((p,g)=>p+g.to-g.from,0)>=u}const u9=(t,e={})=>({state:n,dispatch:r})=>{const o=hn(t,n.schema);return Sd(n,o,e)?i7(n,r):!1},d9=()=>({state:t,dispatch:e})=>xR(t,e),f9=t=>({state:e,dispatch:n})=>{const r=hn(t,e.schema);return b7(r)(e,n)},h9=()=>({state:t,dispatch:e})=>vR(t,e);function ig(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function KM(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}const p9=(t,e)=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=ig(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=hn(t,r.schema)),a==="mark"&&(s=Is(t,r.schema)),o&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{i&&i===d.type&&n.setNodeMarkup(h,void 0,KM(d.attrs,e)),s&&d.marks.length&&d.marks.forEach(p=>{s===p.type&&n.addMark(h,h+d.nodeSize,s.create(KM(p.attrs,e)))})})}),!0):!1},m9=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),g9=()=>({tr:t,dispatch:e})=>{if(e){const n=new tr(t.doc);t.setSelection(n)}return!0},b9=()=>({state:t,dispatch:e})=>mR(t,e),y9=()=>({state:t,dispatch:e})=>yR(t,e),v9=()=>({state:t,dispatch:e})=>c7(t,e),w9=()=>({state:t,dispatch:e})=>f7(t,e),x9=()=>({state:t,dispatch:e})=>d7(t,e);function zp(t,e,n={},r={}){return Cd(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const C9=(t,e=!1,n={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var u,d;const{doc:h}=i;if(n.preserveWhitespace!=="full"){const p=zp(t,o.schema,n,{errorOnInvalidContent:(u=r.errorOnInvalidContent)!==null&&u!==void 0?u:o.options.enableContentCheck});return s&&i.replaceWith(0,h.content.size,p).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:h.content.size},t,{parseOptions:n,errorOnInvalidContent:(d=r.errorOnInvalidContent)!==null&&d!==void 0?d:o.options.enableContentCheck})};function IR(t,e){const n=Is(e,t.schema),{from:r,to:o,empty:i}=t.selection,s=[];i?(t.storedMarks&&s.push(...t.storedMarks),s.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,u=>{s.push(...u.marks)});const a=s.find(u=>u.type.name===n.name);return a?{...a.attrs}:{}}function jw(t,e){const n=new vw(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function S9(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function ZM(t,e){const n=[];return t.descendants((r,o)=>{e(r)&&n.push({node:r,pos:o})}),n}function HR(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,i)=>{n(o)&&r.push({node:o,pos:i})}),r}function k9(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function sg(t){return e=>k9(e.$from,t)}function E9(t,e){const n=yl.resolve(t);return MR(n,e)}function M9(t,e){const n={from:0,to:t.content.size};return TR(t,n,e)}function T9(t,e){const n=hn(e,t.schema),{from:r,to:o}=t.selection,i=[];t.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===n.name);return s?{...s.attrs}:{}}function PR(t,e){const n=ig(typeof e=="string"?e:e.name,t.schema);return n==="node"?T9(t,e):n==="mark"?IR(t,e):{}}function A9(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function N9(t){const e=A9(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,s)=>s!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function jR(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,i)=>{const s=[];if(o.ranges.length)o.forEach((a,u)=>{s.push({from:a,to:u})});else{const{from:a,to:u}=n[i];if(a===void 0||u===void 0)return;s.push({from:a,to:u})}s.forEach(({from:a,to:u})=>{const d=e.slice(i).map(a,-1),h=e.slice(i).map(u),p=e.invert().map(d,-1),g=e.invert().map(h);r.push({oldRange:{from:p,to:g},newRange:{from:d,to:h}})})}),N9(r)}function Vw(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const i=n.resolve(t),s=xd(i,o.type);s&&r.push({mark:o,...s})}):n.nodesBetween(t,e,(o,i)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function sp(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function n1(t,e,n={}){const{empty:r,ranges:o}=t.selection,i=e?Is(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>i?i.name===p.type.name:!0).find(p=>Vp(p.attrs,n,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:p,$to:g})=>{const b=p.pos,v=g.pos;t.doc.nodesBetween(b,v,(C,k)=>{if(!C.isText&&!C.marks.length)return;const E=Math.max(b,k),T=Math.min(v,k+C.nodeSize),N=T-E;s+=N,a.push(...C.marks.map(_=>({mark:_,from:E,to:T})))})}),s===0)return!1;const u=a.filter(p=>i?i.name===p.mark.type.name:!0).filter(p=>Vp(p.mark.attrs,n,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),d=a.filter(p=>i?p.mark.type!==i&&p.mark.type.excludes(i):!0).reduce((p,g)=>p+g.to-g.from,0);return(u>0?u+d:u)>=s}function O9(t,e,n={}){if(!e)return Sd(t,null,n)||n1(t,null,n);const r=ig(e,t.schema);return r==="node"?Sd(t,e,n):r==="mark"?n1(t,e,n):!1}function YM(t,e){const{nodeExtensions:n}=tg(e),r=n.find(s=>s.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=Je(Se(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function zw(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(i=>{o!==!1&&(zw(i,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function r1(t){return t instanceof ke}function Up(t,e,n){const o=t.state.doc.content.size,i=di(e,0,o),s=di(n,0,o),a=t.coordsAtPos(i),u=t.coordsAtPos(s,-1),d=Math.min(a.top,u.top),h=Math.max(a.bottom,u.bottom),p=Math.min(a.left,u.left),g=Math.max(a.right,u.right),b=g-p,v=h-d,E={top:d,bottom:h,left:p,right:g,width:b,height:v,x:p,y:d};return{...E,toJSON:()=>E}}function R9(t,e,n){var r;const{selection:o}=e;let i=null;if(rg(o)&&(i=o.$cursor),i){const a=(r=t.storedMarks)!==null&&r!==void 0?r:i.marks();return!!n.isInSet(a)||!a.some(u=>u.type.excludes(n))}const{ranges:s}=o;return s.some(({$from:a,$to:u})=>{let d=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,u.pos,(h,p,g)=>{if(d)return!1;if(h.isInline){const b=!g||g.type.allowsMarkType(n),v=!!n.isInSet(h.marks)||!h.marks.some(C=>C.type.excludes(n));d=b&&v}return!d}),d})}const D9=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:i}=n,{empty:s,ranges:a}=i,u=Is(t,r.schema);if(o)if(s){const d=IR(r,u);n.addStoredMark(u.create({...d,...e}))}else a.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(h,p,(g,b)=>{const v=Math.max(b,h),C=Math.min(b+g.nodeSize,p);g.marks.find(E=>E.type===u)?g.marks.forEach(E=>{u===E.type&&n.addMark(v,C,u.create({...E.attrs,...e}))}):n.addMark(v,C,u.create(e))})});return R9(r,n,u)},_9=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),L9=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const i=hn(t,n.schema);let s;return n.selection.$anchor.sameParent(n.selection.$head)&&(s=n.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>UM(i,{...s,...e})(n)?!0:a.clearNodes()).command(({state:a})=>UM(i,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},B9=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=di(t,0,r.content.size),i=ke.create(r,o);e.setSelection(i)}return!0},I9=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:i}=typeof t=="number"?{from:t,to:t}:t,s=xe.atStart(r).from,a=xe.atEnd(r).to,u=di(o,s,a),d=di(i,s,a),h=xe.create(r,u,d);e.setSelection(h)}return!0},H9=t=>({state:e,dispatch:n})=>{const r=hn(t,e.schema);return w7(r)(e,n)};function WM(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e?.includes(o.type.name));t.tr.ensureMarks(r)}}const P9=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:a,$to:u}=i,d=o.extensionManager.attributes,h=sp(d,a.node().type.name,a.node().attrs);if(i instanceof ke&&i.node.isBlock)return!a.parentOffset||!hi(s,a.pos)?!1:(r&&(t&&WM(n,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,g=a.depth===0?void 0:S9(a.node(-1).contentMatchAt(a.indexAfter(-1)));let b=p&&g?[{type:g,attrs:h}]:void 0,v=hi(e.doc,e.mapping.map(a.pos),1,b);if(!b&&!v&&hi(e.doc,e.mapping.map(a.pos),1,g?[{type:g}]:void 0)&&(v=!0,b=g?[{type:g,attrs:h}]:void 0),r){if(v&&(i instanceof xe&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,b),g&&!p&&!a.parentOffset&&a.parent.type!==g)){const C=e.mapping.map(a.before()),k=e.doc.resolve(C);a.node(-1).canReplaceWith(k.index(),k.index()+1,g)&&e.setNodeMarkup(e.mapping.map(a.before()),g)}t&&WM(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return v},j9=(t,e={})=>({tr:n,state:r,dispatch:o,editor:i})=>{var s;const a=hn(t,r.schema),{$from:u,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==a)return!1;const g=i.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==a||u.index(-2)!==u.node(-2).childCount-1)return!1;if(o){let E=X.empty;const T=u.index(-1)?1:u.index(-2)?2:3;for(let P=u.depth-T;P>=u.depth-3;P-=1)E=X.from(u.node(P).copy(E));const N=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,_={...sp(g,u.node().type.name,u.node().attrs),...e},O=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(_))||void 0;E=E.append(X.from(a.createAndFill(null,O)||void 0));const $=u.before(u.depth-(T-1));n.replace($,u.after(-N),new le(E,4-T,0));let H=-1;n.doc.nodesBetween($,n.doc.content.size,(P,W)=>{if(H>-1)return!1;P.isTextblock&&P.content.size===0&&(H=W+1)}),H>-1&&n.setSelection(xe.near(n.doc.resolve(H))),n.scrollIntoView()}return!0}const b=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,v={...sp(g,p.type.name,p.attrs),...e},C={...sp(g,u.node().type.name,u.node().attrs),...e};n.delete(u.pos,d.pos);const k=b?[{type:a,attrs:v},{type:b,attrs:C}]:[{type:a,attrs:v}];if(!hi(n.doc,u.pos,2))return!1;if(o){const{selection:E,storedMarks:T}=r,{splittableMarks:N}=i.extensionManager,_=T||E.$to.parentOffset&&E.$from.marks();if(n.split(u.pos,2,k).scrollIntoView(),!_||!o)return!0;const O=_.filter($=>N.includes($.type.name));n.ensureMarks(O)}return!0},H0=(t,e)=>{const n=sg(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&Gl(t.doc,n.pos)&&t.join(n.pos),!0},P0=(t,e)=>{const n=sg(s=>s.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&Gl(t.doc,r)&&t.join(r),!0},V9=(t,e,n,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:u,commands:d,can:h})=>{const{extensions:p,splittableMarks:g}=o.extensionManager,b=hn(t,s.schema),v=hn(e,s.schema),{selection:C,storedMarks:k}=s,{$from:E,$to:T}=C,N=E.blockRange(T),_=k||C.$to.parentOffset&&C.$from.marks();if(!N)return!1;const O=sg($=>YM($.type.name,p))(C);if(N.depth>=1&&O&&N.depth-O.depth<=1){if(O.node.type===b)return d.liftListItem(v);if(YM(O.node.type.name,p)&&b.validContent(O.node.content)&&a)return u().command(()=>(i.setNodeMarkup(O.pos,b),!0)).command(()=>H0(i,b)).command(()=>P0(i,b)).run()}return!n||!_||!a?u().command(()=>h().wrapInList(b,r)?!0:d.clearNodes()).wrapInList(b,r).command(()=>H0(i,b)).command(()=>P0(i,b)).run():u().command(()=>{const $=h().wrapInList(b,r),H=_.filter(P=>g.includes(P.type.name));return i.ensureMarks(H),$?!0:d.clearNodes()}).wrapInList(b,r).command(()=>H0(i,b)).command(()=>P0(i,b)).run()},z9=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=n,s=Is(t,r.schema);return n1(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},U9=(t,e,n={})=>({state:r,commands:o})=>{const i=hn(t,r.schema),s=hn(e,r.schema),a=Sd(r,i,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),a?o.setNode(s,u):o.setNode(i,{...u,...n})},$9=(t,e={})=>({state:n,commands:r})=>{const o=hn(t,n.schema);return Sd(n,o,e)?r.lift(o):r.wrapIn(o,e)},F9=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let i;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){const s=t.tr,a=i.transform;for(let u=a.steps.length-1;u>=0;u-=1)s.step(a.steps[u].invert(a.docs[u]));if(i.text){const u=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,t.schema.text(i.text,u))}else s.delete(i.from,i.to)}return!0}}return!1},G9=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},q9=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=n,u=Is(t,r.schema),{$from:d,empty:h,ranges:p}=a;if(!o)return!0;if(h&&s){let{from:g,to:b}=a;const v=(i=d.marks().find(k=>k.type===u))===null||i===void 0?void 0:i.attrs,C=xd(d,u,v);C&&(g=C.from,b=C.to),n.removeMark(g,b,u)}else p.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,u)});return n.removeStoredMark(u),!0},K9=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let i=null,s=null;const a=ig(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(i=hn(t,r.schema)),a==="mark"&&(s=Is(t,r.schema)),o&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let p,g,b,v;n.selection.empty?r.doc.nodesBetween(d,h,(C,k)=>{i&&i===C.type&&(b=Math.max(k,d),v=Math.min(k+C.nodeSize,h),p=k,g=C)}):r.doc.nodesBetween(d,h,(C,k)=>{k<d&&i&&i===C.type&&(b=Math.max(k,d),v=Math.min(k+C.nodeSize,h),p=k,g=C),k>=d&&k<=h&&(i&&i===C.type&&n.setNodeMarkup(k,void 0,{...C.attrs,...e}),s&&C.marks.length&&C.marks.forEach(E=>{if(s===E.type){const T=Math.max(k,d),N=Math.min(k+C.nodeSize,h);n.addMark(T,N,s.create({...E.attrs,...e}))}}))}),g&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...g.attrs,...e}),s&&g.marks.length&&g.marks.forEach(C=>{s===C.type&&n.addMark(b,v,s.create({...C.attrs,...e}))}))}),!0):!1},Z9=(t,e={})=>({state:n,dispatch:r})=>{const o=hn(t,n.schema);return h7(o,e)(n,r)},Y9=(t,e={})=>({state:n,dispatch:r})=>{const o=hn(t,n.schema);return p7(o,e)(n,r)};var W9=Object.freeze({__proto__:null,blur:B7,clearContent:I7,clearNodes:H7,command:P7,createParagraphNear:j7,cut:V7,deleteCurrentNode:z7,deleteNode:U7,deleteRange:$7,deleteSelection:F7,enter:G7,exitCode:q7,extendMarkRange:K7,first:Z7,focus:Y7,forEach:W7,insertContent:X7,insertContentAt:Q7,joinBackward:n9,joinDown:t9,joinForward:r9,joinItemBackward:o9,joinItemForward:i9,joinTextblockBackward:s9,joinTextblockForward:l9,joinUp:e9,keyboardShortcut:c9,lift:u9,liftEmptyBlock:d9,liftListItem:f9,newlineInCode:h9,resetAttributes:p9,scrollIntoView:m9,selectAll:g9,selectNodeBackward:b9,selectNodeForward:y9,selectParentNode:v9,selectTextblockEnd:w9,selectTextblockStart:x9,setContent:C9,setMark:D9,setMeta:_9,setNode:L9,setNodeSelection:B9,setTextSelection:I9,sinkListItem:H9,splitBlock:P9,splitListItem:j9,toggleList:V9,toggleMark:z9,toggleNode:U9,toggleWrap:$9,undoInputRule:F9,unsetAllMarks:G9,unsetMark:q9,updateAttributes:K9,wrapIn:Z9,wrapInList:Y9});const VR=St.create({name:"commands",addCommands(){return{...W9}}}),zR=St.create({name:"drop",addProseMirrorPlugins(){return[new Ge({key:new ot("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),UR=St.create({name:"editable",addProseMirrorPlugins(){return[new Ge({key:new ot("editable"),props:{editable:()=>this.editor.options.editable}})]}}),$R=new ot("focusEvents"),FR=St.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ge({key:$R,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),GR=St.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:u,doc:d}=a,{empty:h,$anchor:p}=u,{pos:g,parent:b}=p,v=p.parent.isTextblock&&g>0?a.doc.resolve(g-1):p,C=v.parent.type.spec.isolating,k=p.pos-p.parentOffset,E=C&&v.parent.childCount===1?k===p.pos:Oe.atStart(d).from===g;return!h||!b.type.isTextblock||b.textContent.length||!E||E&&p.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return og()||BR()?i:o},addProseMirrorPlugins(){return[new Ge({key:new ot("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(C=>C.getMeta("composition")))return;const r=t.some(C=>C.docChanged)&&!e.doc.eq(n.doc),o=t.some(C=>C.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=e.selection,u=Oe.atStart(e.doc).from,d=Oe.atEnd(e.doc).to;if(i||!(s===u&&a===d)||!zw(n.doc))return;const g=n.tr,b=Qm({state:n,transaction:g}),{commands:v}=new eg({editor:this.editor,state:b});if(v.clearNodes(),!!g.steps.length)return g}})]}}),qR=St.create({name:"paste",addProseMirrorPlugins(){return[new Ge({key:new ot("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),KR=St.create({name:"tabindex",addProseMirrorPlugins(){return[new Ge({key:new ot("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});var Bu=Object.freeze({__proto__:null,ClipboardTextSerializer:NR,Commands:VR,Drop:zR,Editable:UR,FocusEvents:FR,Keymap:GR,Paste:qR,Tabindex:KR,focusEventsPluginKey:$R});class fl{get name(){return this.node.type.name}constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new fl(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new fl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new fl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,s=this.pos+r+(i?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(s);if(!o&&a.depth<=this.depth)return;const u=new fl(a,this.editor,o,o?n:null);o&&(u.actualDepth=this.depth+1),e.push(new fl(a,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const i=o.node.attrs,s=Object.keys(n);for(let a=0;a<s.length;a+=1){const u=s[a];if(i[u]!==n[u])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(n);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(u=>n[u]===s.node.attrs[u])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const X9=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function J9(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}class Q9 extends x7{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:o})=>this.options.onDrop(n,r,o)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=J9(X9,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=ER(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(a=>!a.key.startsWith(s))}),n.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,n;const o=[...this.options.enableCoreExtensions?[UR,NR.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),VR,FR,GR,KR,zR,qR].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new yl(o,this)}createCommandManager(){this.commandManager=new eg({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=zp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=zp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=RR(n,this.options.autofocus);this.view=new Ow(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:ml.create({doc:n,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return PR(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,o=typeof e=="string"?n:e;return O9(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Hw(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return M9(this.state.doc,{blockSeparator:n,textSerializers:{...AR(this.schema),...r}})}get isEmpty(){return zw(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new fl(n,this)}get $doc(){return this.$pos(0)}}function pc(t){return new Ms({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Je(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],a=r[0];if(s){const u=a.search(/\S/),d=n.from+a.indexOf(s),h=d+s.length;if(Vw(n.from,n.to,e.doc).filter(b=>b.mark.type.excluded.find(C=>C===t.type&&C!==b.mark.type)).filter(b=>b.to>d).length)return null;h<n.to&&i.delete(h,n.to),d>n.from&&i.delete(n.from+u,d);const g=n.from+u+s.length;i.addMark(n.from+u,g,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}let _o=class o1{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Je(Se(this,"addOptions",{name:this.name}))),this.storage=Je(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new o1(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>ng(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new o1(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Je(Se(n,"addOptions",{name:n.name})),n.storage=Je(Se(n,"addStorage",{name:n.name,options:n.options})),n}};class ez{constructor(e,n,r){this.isDragging=!1,this.component=e,this.editor=n.editor,this.options={stopEvent:null,ignoreMutation:null,...r},this.extension=n.extension,this.node=n.node,this.decorations=n.decorations,this.innerDecorations=n.innerDecorations,this.view=n.view,this.HTMLAttributes=n.HTMLAttributes,this.getPos=n.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var n,r,o,i,s,a,u;const{view:d}=this.editor,h=e.target,p=h.nodeType===3?(n=h.parentElement)===null||n===void 0?void 0:n.closest("[data-drag-handle]"):h.closest("[data-drag-handle]");if(!this.dom||!((r=this.contentDOM)===null||r===void 0)&&r.contains(h)||!p)return;let g=0,b=0;if(this.dom!==p){const T=this.dom.getBoundingClientRect(),N=p.getBoundingClientRect(),_=(o=e.offsetX)!==null&&o!==void 0?o:(i=e.nativeEvent)===null||i===void 0?void 0:i.offsetX,O=(s=e.offsetY)!==null&&s!==void 0?s:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetY;g=N.x-T.x+_,b=N.y-T.y+O}const v=this.dom.cloneNode(!0);(u=e.dataTransfer)===null||u===void 0||u.setDragImage(v,g,b);const C=this.getPos();if(typeof C!="number")return;const k=ke.create(d.state.doc,C),E=d.state.tr.setSelection(k);d.dispatch(E)}stopEvent(e){var n;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const r=e.target;if(!(this.dom.contains(r)&&!(!((n=this.contentDOM)===null||n===void 0)&&n.contains(r))))return!1;const i=e.type.startsWith("drag"),s=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(r.tagName)||r.isContentEditable)&&!s&&!i)return!0;const{isEditable:u}=this.editor,{isDragging:d}=this,h=!!this.node.type.spec.draggable,p=ke.isSelectable(this.node),g=e.type==="copy",b=e.type==="paste",v=e.type==="cut",C=e.type==="mousedown";if(!h&&p&&i&&e.target===this.dom&&e.preventDefault(),h&&i&&!d&&e.target===this.dom)return e.preventDefault(),!1;if(h&&u&&!d&&C){const k=r.closest("[data-drag-handle]");k&&(this.dom===k||this.dom.contains(k))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(d||s||g||b||v||C&&p)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(og()||DR())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(r=>r.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:n})=>{const r=this.getPos();return typeof r!="number"?!1:(n.setNodeMarkup(r,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const n=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:n})}}function _l(t){return new N7({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const i=Je(t.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],u=r[0];let d=n.to;if(a){const h=u.search(/\S/),p=n.from+u.indexOf(a),g=p+a.length;if(Vw(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(k=>k===t.type&&k!==v.mark.type)).filter(v=>v.to>p).length)return null;g<n.to&&s.delete(g,n.to),p>n.from&&s.delete(n.from+h,p),d=n.from+h+a.length,s.addMark(n.from+h,d,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}var Hh,tz=new Uint8Array(16);function nz(){if(!Hh&&(Hh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Hh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hh(tz)}const rz=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function oz(t){return typeof t=="string"&&rz.test(t)}var wn=[];for(var j0=0;j0<256;++j0)wn.push((j0+256).toString(16).substr(1));function iz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(wn[t[e+0]]+wn[t[e+1]]+wn[t[e+2]]+wn[t[e+3]]+"-"+wn[t[e+4]]+wn[t[e+5]]+"-"+wn[t[e+6]]+wn[t[e+7]]+"-"+wn[t[e+8]]+wn[t[e+9]]+"-"+wn[t[e+10]]+wn[t[e+11]]+wn[t[e+12]]+wn[t[e+13]]+wn[t[e+14]]+wn[t[e+15]]).toLowerCase();if(!oz(n))throw TypeError("Stringified UUID is invalid");return n}function ZR(t,e,n){t=t||{};var r=t.random||(t.rng||nz)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,iz(r)}var sz=class YR{constructor(e){this.cache=new Map(e)}get(e){return this.cache.get(e)}set(e,n,r){e<0||this.cache.set(e,[n,r])}replace(e,n,r,o){this.remove(e),this.set(n,r,o)}remove(e){this.cache.delete(e)}invalidate(e){const n=new YR(this.cache),r=e.mapping;return this.cache.forEach(([o,i],s)=>{if(s<0)return;const a=r.mapResult(s),u=e.doc.nodeAt(a.pos);if(a.deleted||!u?.eq(o))n.remove(s);else if(s!==a.pos){const d=i.map(h=>h.map(r,0,0)).filter(h=>h!=null);n.replace(s,a.pos,u,d)}}),n}};function lz({parser:t,nodeTypes:e=["code_block","codeBlock"],languageExtractor:n=r=>r.attrs.language}){const r=new ot("prosemirror-highlight");return new Ge({key:r,state:{init(o,i){const s=new sz,[a,u]=XM(i.doc,t,e,n,s);return{cache:s,decorations:a,promises:u}},apply:(o,i)=>{const s=i.cache.invalidate(o),a=!!o.getMeta("prosemirror-highlight-refresh");if(!o.docChanged&&!a){const h=i.decorations.map(o.mapping,o.doc),p=i.promises;return{cache:s,decorations:h,promises:p}}const[u,d]=XM(o.doc,t,e,n,s);return{cache:s,decorations:u,promises:d}}},view:o=>{const i=new Set,s=()=>{if(i.size>0)return;const u=o.state.tr.setMeta("prosemirror-highlight-refresh",!0);o.dispatch(u)},a=()=>{var u;const d=r.getState(o.state);for(const h of(u=d?.promises)!=null?u:[])i.add(h),h.then(()=>{i.delete(h),s()}).catch(()=>{i.delete(h)})};return a(),{update:()=>{a()}}},props:{decorations(o){var i;return(i=this.getState(o))==null?void 0:i.decorations}}})}function XM(t,e,n,r,o){const i=[],s=[];return t.descendants((a,u)=>{if(!a.type.isTextblock)return!0;if(n.includes(a.type.name)){const d=r(a),h=o.get(u);if(h){const[p,g]=h;i.push(...g)}else{const p=e({content:a.textContent,language:d||void 0,pos:u,size:a.nodeSize});p&&Array.isArray(p)?(o.set(u,a,p),i.push(...p)):p instanceof Promise&&(o.remove(u),s.push(p))}}return!1}),[et.create(t,i),s]}function az(t,e){return function({content:r,language:o,pos:i,size:s}){var a;const u=[],{tokens:d,fg:h,bg:p,rootStyle:g}=t.codeToTokens(r,{lang:o,theme:t.getLoadedThemes()[0]}),b=g||(h&&p?`--prosemirror-highlight:${h};--prosemirror-highlight-bg:${p}`:"");if(b){const C=mt.node(i,i+s,{style:b});u.push(C)}let v=i+1;for(const C of d){for(const k of C){const E=v+k.content.length,T=mt.inline(v,E,{style:cz((a=k.htmlStyle)!=null?a:`color: ${k.color}`),class:"shiki"});u.push(T),v=E}v+=1}return u}}function cz(t){return typeof t=="string"?t:Object.entries(t).map(([e,n])=>`${e}:${n}`).join(";")}const uz=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,dz=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,fz=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,hz=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,pz=kn.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[pc({find:uz,type:this.type}),pc({find:fz,type:this.type})]},addPasteRules(){return[_l({find:dz,type:this.type}),_l({find:hz,type:this.type})]}}),mz=/(^|[^`])`([^`]+)`(?!`)/,gz=/(^|[^`])`([^`]+)`(?!`)/g,bz=kn.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[pc({find:mz,type:this.type})]},addPasteRules(){return[_l({find:gz,type:this.type})]}}),yz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,vz=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,wz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,xz=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Cz=kn.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[pc({find:yz,type:this.type}),pc({find:wz,type:this.type})]},addPasteRules(){return[_l({find:vz,type:this.type}),_l({find:xz,type:this.type})]}}),Sz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,kz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ez=kn.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[pc({find:Sz,type:this.type})]},addPasteRules(){return[_l({find:kz,type:this.type})]}}),Mz=kn.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",wr(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Tz=_o.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:t}){return["td",wr(this.options.HTMLAttributes,t),0]}}),Az=_o.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:t=>{const e=t.getAttribute("colwidth");return e?e.split(",").map(r=>parseInt(r,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:t}){return["th",wr(this.options.HTMLAttributes,t),0]}});var i1,s1;if(typeof WeakMap<"u"){let t=new WeakMap;i1=e=>t.get(e),s1=(e,n)=>(t.set(e,n),n)}else{const t=[];let n=0;i1=r=>{for(let o=0;o<t.length;o+=2)if(t[o]==r)return t[o+1]},s1=(r,o)=>(n==10&&(n=0),t[n++]=r,t[n++]=o)}var Dt=class{constructor(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const r=e%this.width,o=e/this.width|0;let i=r+1,s=o+1;for(let a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(let a=1;s<this.height&&this.map[e+this.width*a]==n;a++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(t);return e=="horiz"?(n<0?r==0:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?i==0:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(t,e){const{left:n,right:r,top:o,bottom:i}=this.findCell(t),{left:s,right:a,top:u,bottom:d}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(o,u),right:Math.max(r,a),bottom:Math.max(i,d)}}cellsInRect(t){const e=[],n={};for(let r=t.top;r<t.bottom;r++)for(let o=t.left;o<t.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,!(o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s)&&e.push(s))}return e}positionAt(t,e,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==t){let s=e+t*this.width;const a=(t+1)*this.width;for(;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}}static get(t){return i1(t)||s1(t,Nz(t))}};function Nz(t){if(t.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+t.type.name);const e=Oz(t),n=t.childCount,r=[];let o=0,i=null;const s=[];for(let d=0,h=e*n;d<h;d++)r[d]=0;for(let d=0,h=0;d<n;d++){const p=t.child(d);h++;for(let v=0;;v++){for(;o<r.length&&r[o]!=0;)o++;if(v==p.childCount)break;const C=p.child(v),{colspan:k,rowspan:E,colwidth:T}=C.attrs;for(let N=0;N<E;N++){if(N+d>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:h,n:E-N});break}const _=o+N*e;for(let O=0;O<k;O++){r[_+O]==0?r[_+O]=h:(i||(i=[])).push({type:"collision",row:d,pos:h,n:k-O});const $=T&&T[O];if($){const H=(_+O)%e*2,P=s[H];P==null||P!=$&&s[H+1]==1?(s[H]=$,s[H+1]=1):P==$&&s[H+1]++}}}o+=k,h+=C.nodeSize}const g=(d+1)*e;let b=0;for(;o<g;)r[o++]==0&&b++;b&&(i||(i=[])).push({type:"missing",row:d,n:b}),h++}(e===0||n===0)&&(i||(i=[])).push({type:"zero_sized"});const a=new Dt(e,n,r,i);let u=!1;for(let d=0;!u&&d<s.length;d+=2)s[d]!=null&&s[d+1]<n&&(u=!0);return u&&Rz(a,s,t),a}function Oz(t){let e=-1,n=!1;for(let r=0;r<t.childCount;r++){const o=t.child(r);let i=0;if(n)for(let s=0;s<r;s++){const a=t.child(s);for(let u=0;u<a.childCount;u++){const d=a.child(u);s+d.attrs.rowspan>r&&(i+=d.attrs.colspan)}}for(let s=0;s<o.childCount;s++){const a=o.child(s);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}e==-1?e=i:e!=i&&(e=Math.max(e,i))}return e}function Rz(t,e,n){t.problems||(t.problems=[]);const r={};for(let o=0;o<t.map.length;o++){const i=t.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const u=s.attrs;for(let d=0;d<u.colspan;d++){const h=(o+d)%t.width,p=e[h*2];p!=null&&(!u.colwidth||u.colwidth[d]!=p)&&((a||(a=Dz(u)))[d]=p)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function Dz(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function Ln(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}}return e}var ds=new ot("selectingCells");function Ec(t){for(let e=t.depth-1;e>0;e--)if(t.node(e).type.spec.tableRole=="row")return t.node(0).resolve(t.before(e+1));return null}function _z(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if(n==="cell"||n==="header_cell")return t.node(e)}return null}function Lo(t){const e=t.selection.$head;for(let n=e.depth;n>0;n--)if(e.node(n).type.spec.tableRole=="row")return!0;return!1}function Uw(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&e.node.type.spec.tableRole=="cell")return e.$anchor;const n=Ec(e.$head)||Lz(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function Lz(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const r=e.type.spec.tableRole;if(r=="cell"||r=="header_cell")return t.doc.resolve(n-e.nodeSize)}}function l1(t){return t.parent.type.spec.tableRole=="row"&&!!t.nodeAfter}function Bz(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function $w(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function WR(t,e,n){const r=t.node(-1),o=Dt.get(r),i=t.start(-1),s=o.nextCell(t.pos-i,e,n);return s==null?null:t.node(0).resolve(i+s)}function Ll(t,e,n=1){const r={...t,colspan:t.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some(o=>o>0)||(r.colwidth=null)),r}function XR(t,e,n=1){const r={...t,colspan:t.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function Iz(t,e,n){const r=Ln(e.type.schema).header_cell;for(let o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var gt=class li extends Oe{constructor(e,n=e){const r=e.node(-1),o=Dt.get(r),i=e.start(-1),s=o.rectBetween(e.pos-i,n.pos-i),a=e.node(0),u=o.cellsInRect(s).filter(h=>h!=n.pos-i);u.unshift(n.pos-i);const d=u.map(h=>{const p=r.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const g=i+h+1;return new OO(a.resolve(g),a.resolve(g+p.content.size))});super(d[0].$from,d[0].$to,d),this.$anchorCell=e,this.$headCell=n}map(e,n){const r=e.resolve(n.map(this.$anchorCell.pos)),o=e.resolve(n.map(this.$headCell.pos));if(l1(r)&&l1(o)&&$w(r,o)){const i=this.$anchorCell.node(-1)!=r.node(-1);return i&&this.isRowSelection()?li.rowSelection(r,o):i&&this.isColSelection()?li.colSelection(r,o):new li(r,o)}return xe.between(r,o)}content(){const e=this.$anchorCell.node(-1),n=Dt.get(e),r=this.$anchorCell.start(-1),o=n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),i={},s=[];for(let u=o.top;u<o.bottom;u++){const d=[];for(let h=u*n.width+o.left,p=o.left;p<o.right;p++,h++){const g=n.map[h];if(i[g])continue;i[g]=!0;const b=n.findCell(g);let v=e.nodeAt(g);if(!v)throw RangeError(`No cell with offset ${g} found`);const C=o.left-b.left,k=b.right-o.right;if(C>0||k>0){let E=v.attrs;if(C>0&&(E=Ll(E,0,C)),k>0&&(E=Ll(E,E.colspan-k,k)),b.left<o.left){if(v=v.type.createAndFill(E),!v)throw RangeError(`Could not create cell with attrs ${JSON.stringify(E)}`)}else v=v.type.create(E,v.content)}if(b.top<o.top||b.bottom>o.bottom){const E={...v.attrs,rowspan:Math.min(b.bottom,o.bottom)-Math.max(b.top,o.top)};b.top<o.top?v=v.type.createAndFill(E):v=v.type.create(E,v.content)}d.push(v)}s.push(e.child(u).copy(X.from(d)))}const a=this.isColSelection()&&this.isRowSelection()?e:s;return new le(X.from(a),1,1)}replace(e,n=le.empty){const r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){const{$from:a,$to:u}=o[s],d=e.mapping.slice(r);e.replace(d.map(a.pos),d.map(u.pos),s?le.empty:n)}const i=Oe.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);i&&e.setSelection(i)}replaceWith(e,n){this.replace(e,new le(X.from(n),0,0))}forEachCell(e){const n=this.$anchorCell.node(-1),r=Dt.get(n),o=this.$anchorCell.start(-1),i=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o));for(let s=0;s<i.length;s++)e(n.nodeAt(i[s]),o+i[s])}isColSelection(){const e=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(e,n)>0)return!1;const r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const r=e.node(-1),o=Dt.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),u=e.node(0);return s.top<=a.top?(s.top>0&&(e=u.resolve(i+o.map[s.left])),a.bottom<o.height&&(n=u.resolve(i+o.map[o.width*(o.height-1)+a.right-1]))):(a.top>0&&(n=u.resolve(i+o.map[a.left])),s.bottom<o.height&&(e=u.resolve(i+o.map[o.width*(o.height-1)+s.right-1]))),new li(e,n)}isRowSelection(){const e=this.$anchorCell.node(-1),n=Dt.get(e),r=this.$anchorCell.start(-1),o=n.colCount(this.$anchorCell.pos-r),i=n.colCount(this.$headCell.pos-r);if(Math.min(o,i)>0)return!1;const s=o+this.$anchorCell.nodeAfter.attrs.colspan,a=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(s,a)==n.width}eq(e){return e instanceof li&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const r=e.node(-1),o=Dt.get(r),i=e.start(-1),s=o.findCell(e.pos-i),a=o.findCell(n.pos-i),u=e.node(0);return s.left<=a.left?(s.left>0&&(e=u.resolve(i+o.map[s.top*o.width])),a.right<o.width&&(n=u.resolve(i+o.map[o.width*(a.top+1)-1]))):(a.left>0&&(n=u.resolve(i+o.map[a.top*o.width])),s.right<o.width&&(e=u.resolve(i+o.map[o.width*(s.top+1)-1]))),new li(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new li(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){return new li(e.resolve(n),e.resolve(r))}getBookmark(){return new Hz(this.$anchorCell.pos,this.$headCell.pos)}};gt.prototype.visible=!1;Oe.jsonID("cell",gt);var Hz=class JR{constructor(e,n){this.anchor=e,this.head=n}map(e){return new JR(e.map(this.anchor),e.map(this.head))}resolve(e){const n=e.resolve(this.anchor),r=e.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&r.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&r.index()<r.parent.childCount&&$w(n,r)?new gt(n,r):Oe.near(r,1)}};function Pz(t){if(!(t.selection instanceof gt))return null;const e=[];return t.selection.forEachCell((n,r)=>{e.push(mt.node(r,r+n.nodeSize,{class:"selectedCell"}))}),et.create(t.doc,e)}function jz({$from:t,$to:e}){if(t.pos==e.pos||t.pos<e.pos-6)return!1;let n=t.pos,r=e.pos,o=t.depth;for(;o>=0&&!(t.after(o+1)<t.end(o));o--,n++);for(let i=e.depth;i>=0&&!(e.before(i+1)>e.start(i));i--,r--);return n==r&&/row|table/.test(t.node(o).type.spec.tableRole)}function Vz({$from:t,$to:e}){let n,r;for(let o=t.depth;o>0;o--){const i=t.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let o=e.depth;o>0;o--){const i=e.node(o);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){r=i;break}}return n!==r&&e.parentOffset===0}function zz(t,e,n){const r=(e||t).selection,o=(e||t).doc;let i,s;if(r instanceof ke&&(s=r.node.type.spec.tableRole)){if(s=="cell"||s=="header_cell")i=gt.create(o,r.from);else if(s=="row"){const a=o.resolve(r.from+1);i=gt.rowSelection(a,a)}else if(!n){const a=Dt.get(r.node),u=r.from+1,d=u+a.map[a.width*a.height-1];i=gt.create(o,u+1,d)}}else r instanceof xe&&jz(r)?i=xe.create(o,r.from):r instanceof xe&&Vz(r)&&(i=xe.create(o,r.$from.start(),r.$from.end()));return i&&(e||(e=t.tr)).setSelection(i),e}var Uz=new ot("fix-tables");function QR(t,e,n,r){const o=t.childCount,i=e.childCount;e:for(let s=0,a=0;s<i;s++){const u=e.child(s);for(let d=a,h=Math.min(o,s+3);d<h;d++)if(t.child(d)==u){a=d+1,n+=u.nodeSize;continue e}r(u,n),a<o&&t.child(a).sameMarkup(u)?QR(t.child(a),u,n+1,r):u.nodesBetween(0,u.content.size,r,n+1),n+=u.nodeSize}}function $z(t,e){let n;const r=(o,i)=>{o.type.spec.tableRole=="table"&&(n=Fz(t,o,i,n))};return e?e.doc!=t.doc&&QR(e.doc,t.doc,0,r):t.doc.descendants(r),n}function Fz(t,e,n,r){const o=Dt.get(e);if(!o.problems)return r;r||(r=t.tr);const i=[];for(let u=0;u<o.height;u++)i.push(0);for(let u=0;u<o.problems.length;u++){const d=o.problems[u];if(d.type=="collision"){const h=e.nodeAt(d.pos);if(!h)continue;const p=h.attrs;for(let g=0;g<p.rowspan;g++)i[d.row+g]+=d.n;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,Ll(p,p.colspan-d.n,d.n))}else if(d.type=="missing")i[d.row]+=d.n;else if(d.type=="overlong_rowspan"){const h=e.nodeAt(d.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,{...h.attrs,rowspan:h.attrs.rowspan-d.n})}else if(d.type=="colwidth mismatch"){const h=e.nodeAt(d.pos);if(!h)continue;r.setNodeMarkup(r.mapping.map(n+1+d.pos),null,{...h.attrs,colwidth:d.colwidth})}else if(d.type=="zero_sized"){const h=r.mapping.map(n);r.delete(h,h+e.nodeSize)}}let s,a;for(let u=0;u<i.length;u++)i[u]&&(s==null&&(s=u),a=u);for(let u=0,d=n+1;u<o.height;u++){const h=e.child(u),p=d+h.nodeSize,g=i[u];if(g>0){let b="cell";h.firstChild&&(b=h.firstChild.type.spec.tableRole);const v=[];for(let k=0;k<g;k++){const E=Ln(t.schema)[b].createAndFill();E&&v.push(E)}const C=(u==0||s==u-1)&&a==u?d+1:p-1;r.insert(r.mapping.map(C),v)}d=p}return r.setMeta(Uz,{fixTables:!0})}function Bo(t){const e=t.selection,n=Uw(t),r=n.node(-1),o=n.start(-1),i=Dt.get(r);return{...e instanceof gt?i.rectBetween(e.$anchorCell.pos-o,e.$headCell.pos-o):i.findCell(n.pos-o),tableStart:o,map:i,table:r}}function eD(t,{map:e,tableStart:n,table:r},o){let i=o>0?-1:0;Iz(e,r,o+i)&&(i=o==0||o==e.width?null:0);for(let s=0;s<e.height;s++){const a=s*e.width+o;if(o>0&&o<e.width&&e.map[a-1]==e.map[a]){const u=e.map[a],d=r.nodeAt(u);t.setNodeMarkup(t.mapping.map(n+u),null,XR(d.attrs,o-e.colCount(u))),s+=d.attrs.rowspan-1}else{const u=i==null?Ln(r.type.schema).cell:r.nodeAt(e.map[a+i]).type,d=e.positionAt(s,o,r);t.insert(t.mapping.map(n+d),u.createAndFill())}}return t}function Gz(t,e){if(!Lo(t))return!1;if(e){const n=Bo(t);e(eD(t.tr,n,n.left))}return!0}function qz(t,e){if(!Lo(t))return!1;if(e){const n=Bo(t);e(eD(t.tr,n,n.right))}return!0}function Kz(t,{map:e,table:n,tableStart:r},o){const i=t.mapping.maps.length;for(let s=0;s<e.height;){const a=s*e.width+o,u=e.map[a],d=n.nodeAt(u),h=d.attrs;if(o>0&&e.map[a-1]==u||o<e.width-1&&e.map[a+1]==u)t.setNodeMarkup(t.mapping.slice(i).map(r+u),null,Ll(h,o-e.colCount(u)));else{const p=t.mapping.slice(i).map(r+u);t.delete(p,p+d.nodeSize)}s+=h.rowspan}}function Zz(t,e){if(!Lo(t))return!1;if(e){const n=Bo(t),r=t.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let o=n.right-1;Kz(r,n,o),o!=n.left;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Dt.get(i)}e(r)}return!0}function Yz(t,e,n){var r;const o=Ln(e.type.schema).header_cell;for(let i=0;i<t.width;i++)if(((r=e.nodeAt(t.map[i+n*t.width]))==null?void 0:r.type)!=o)return!1;return!0}function tD(t,{map:e,tableStart:n,table:r},o){var i;let s=n;for(let d=0;d<o;d++)s+=r.child(d).nodeSize;const a=[];let u=o>0?-1:0;Yz(e,r,o+u)&&(u=o==0||o==e.height?null:0);for(let d=0,h=e.width*o;d<e.width;d++,h++)if(o>0&&o<e.height&&e.map[h]==e.map[h-e.width]){const p=e.map[h],g=r.nodeAt(p).attrs;t.setNodeMarkup(n+p,null,{...g,rowspan:g.rowspan+1}),d+=g.colspan-1}else{const p=u==null?Ln(r.type.schema).cell:(i=r.nodeAt(e.map[h+u*e.width]))==null?void 0:i.type,g=p?.createAndFill();g&&a.push(g)}return t.insert(s,Ln(r.type.schema).row.create(null,a)),t}function Wz(t,e){if(!Lo(t))return!1;if(e){const n=Bo(t);e(tD(t.tr,n,n.top))}return!0}function Xz(t,e){if(!Lo(t))return!1;if(e){const n=Bo(t);e(tD(t.tr,n,n.bottom))}return!0}function Jz(t,{map:e,table:n,tableStart:r},o){let i=0;for(let d=0;d<o;d++)i+=n.child(d).nodeSize;const s=i+n.child(o).nodeSize,a=t.mapping.maps.length;t.delete(i+r,s+r);const u=new Set;for(let d=0,h=o*e.width;d<e.width;d++,h++){const p=e.map[h];if(!u.has(p)){if(u.add(p),o>0&&p==e.map[h-e.width]){const g=n.nodeAt(p).attrs;t.setNodeMarkup(t.mapping.slice(a).map(p+r),null,{...g,rowspan:g.rowspan-1}),d+=g.colspan-1}else if(o<e.height&&p==e.map[h+e.width]){const g=n.nodeAt(p),b=g.attrs,v=g.type.create({...b,rowspan:g.attrs.rowspan-1},g.content),C=e.positionAt(o+1,d,n);t.insert(t.mapping.slice(a).map(r+C),v),d+=b.colspan-1}}}}function Qz(t,e){if(!Lo(t))return!1;if(e){const n=Bo(t),r=t.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let o=n.bottom-1;Jz(r,n,o),o!=n.top;o--){const i=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=Dt.get(n.table)}e(r)}return!0}function JM(t){const e=t.content;return e.childCount==1&&e.child(0).isTextblock&&e.child(0).childCount==0}function eU({width:t,height:e,map:n},r){let o=r.top*t+r.left,i=o,s=(r.bottom-1)*t+r.left,a=o+(r.right-r.left-1);for(let u=r.top;u<r.bottom;u++){if(r.left>0&&n[i]==n[i-1]||r.right<t&&n[a]==n[a+1])return!0;i+=t,a+=t}for(let u=r.left;u<r.right;u++){if(r.top>0&&n[o]==n[o-t]||r.bottom<e&&n[s]==n[s+t])return!0;o++,s++}return!1}function tU(t,e){const n=t.selection;if(!(n instanceof gt)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Bo(t),{map:o}=r;if(eU(o,r))return!1;if(e){const i=t.tr,s={};let a=X.empty,u,d;for(let h=r.top;h<r.bottom;h++)for(let p=r.left;p<r.right;p++){const g=o.map[h*o.width+p],b=r.table.nodeAt(g);if(!(s[g]||!b))if(s[g]=!0,u==null)u=g,d=b;else{JM(b)||(a=a.append(b.content));const v=i.mapping.map(g+r.tableStart);i.delete(v,v+b.nodeSize)}}if(u==null||d==null)return!0;if(i.setNodeMarkup(u+r.tableStart,null,{...XR(d.attrs,d.attrs.colspan,r.right-r.left-d.attrs.colspan),rowspan:r.bottom-r.top}),a.size){const h=u+1+d.content.size,p=JM(d)?u+1:h;i.replaceWith(p+r.tableStart,h+r.tableStart,a)}i.setSelection(new gt(i.doc.resolve(u+r.tableStart))),e(i)}return!0}function nU(t,e){const n=Ln(t.schema);return rU(({node:r})=>n[r.type.spec.tableRole])(t,e)}function rU(t){return(e,n)=>{var r;const o=e.selection;let i,s;if(o instanceof gt){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(i=_z(o.$from),!i)return!1;s=(r=Ec(o.$from))==null?void 0:r.pos}if(i==null||s==null||i.attrs.colspan==1&&i.attrs.rowspan==1)return!1;if(n){let a=i.attrs;const u=[],d=a.colwidth;a.rowspan>1&&(a={...a,rowspan:1}),a.colspan>1&&(a={...a,colspan:1});const h=Bo(e),p=e.tr;for(let b=0;b<h.right-h.left;b++)u.push(d?{...a,colwidth:d&&d[b]?[d[b]]:null}:a);let g;for(let b=h.top;b<h.bottom;b++){let v=h.map.positionAt(b,h.left,h.table);b==h.top&&(v+=i.nodeSize);for(let C=h.left,k=0;C<h.right;C++,k++)C==h.left&&b==h.top||p.insert(g=p.mapping.map(v+h.tableStart,1),t({node:i,row:b,col:C}).createAndFill(u[k]))}p.setNodeMarkup(s,t({node:i,row:h.top,col:h.left}),u[0]),o instanceof gt&&p.setSelection(new gt(p.doc.resolve(o.$anchorCell.pos),g?p.doc.resolve(g):void 0)),n(p)}return!0}}function oU(t){return function(e,n){if(!Lo(e))return!1;if(n){const r=Ln(e.schema),o=Bo(e),i=e.tr,s=o.map.cellsInRect(t=="column"?{left:o.left,top:0,right:o.right,bottom:o.map.height}:t=="row"?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map(u=>o.table.nodeAt(u));for(let u=0;u<s.length;u++)a[u].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[u],r.cell,a[u].attrs);if(i.steps.length==0)for(let u=0;u<s.length;u++)i.setNodeMarkup(o.tableStart+s[u],r.header_cell,a[u].attrs);n(i)}return!0}}function QM(t,e,n){const r=e.map.cellsInRect({left:0,top:0,right:t=="row"?e.map.width:1,bottom:t=="column"?e.map.height:1});for(let o=0;o<r.length;o++){const i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function Fw(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?oU(t):function(n,r){if(!Lo(n))return!1;if(r){const o=Ln(n.schema),i=Bo(n),s=n.tr,a=QM("row",i,o),u=QM("column",i,o),h=(t==="column"?a:t==="row"?u:!1)?1:0,p=t=="column"?{left:0,top:h,right:1,bottom:i.map.height}:t=="row"?{left:h,top:0,right:i.map.width,bottom:1}:i,g=t=="column"?u?o.cell:o.header_cell:t=="row"?a?o.cell:o.header_cell:o.cell;i.map.cellsInRect(p).forEach(b=>{const v=b+i.tableStart,C=s.doc.nodeAt(v);C&&s.setNodeMarkup(v,g,C.attrs)}),r(s)}return!0}}Fw("row",{useDeprecatedLogic:!0});Fw("column",{useDeprecatedLogic:!0});Fw("cell",{useDeprecatedLogic:!0});function iU(t,e){if(e<0){const n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(let r=t.index(-1)-1,o=t.before();r>=0;r--){const i=t.node(-1).child(r),s=i.lastChild;if(s)return o-1-s.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const n=t.node(-1);for(let r=t.indexAfter(-1),o=t.after();r<n.childCount;r++){const i=n.child(r);if(i.childCount)return o+1;o+=i.nodeSize}}return null}function eT(t){return function(e,n){if(!Lo(e))return!1;const r=iU(Uw(e),t);if(r==null)return!1;if(n){const o=e.doc.resolve(r);n(e.tr.setSelection(xe.between(o,Bz(o))).scrollIntoView())}return!0}}function Ph(t,e){const n=t.selection;if(!(n instanceof gt))return!1;if(e){const r=t.tr,o=Ln(t.schema).cell.createAndFill().content;n.forEachCell((i,s)=>{i.content.eq(o)||r.replace(r.mapping.map(s+1),r.mapping.map(s+i.nodeSize-1),new le(o,0,0))}),r.docChanged&&e(r)}return!0}function sU(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:r}=t;for(;e.childCount==1&&(n>0&&r>0||e.child(0).type.spec.tableRole=="table");)n--,r--,e=e.child(0).content;const o=e.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if(i=="row")for(let u=0;u<e.childCount;u++){let d=e.child(u).content;const h=u?0:Math.max(0,n-1),p=u<e.childCount-1?0:Math.max(0,r-1);(h||p)&&(d=a1(Ln(s).row,new le(d,h,p)).content),a.push(d)}else if(i=="cell"||i=="header_cell")a.push(n||r?a1(Ln(s).row,new le(e,n,r)).content:e);else return null;return lU(s,a)}function lU(t,e){const n=[];for(let o=0;o<e.length;o++){const i=e[o];for(let s=i.childCount-1;s>=0;s--){const{rowspan:a,colspan:u}=i.child(s).attrs;for(let d=o;d<o+a;d++)n[d]=(n[d]||0)+u}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=e.length&&e.push(X.empty),n[o]<r){const i=Ln(t).cell.createAndFill(),s=[];for(let a=n[o];a<r;a++)s.push(i);e[o]=e[o].append(X.from(s))}return{height:e.length,width:r,rows:e}}function a1(t,e){const n=t.createAndFill();return new vw(n).replace(0,n.content.size,e).doc}function aU({width:t,height:e,rows:n},r,o){if(t!=r){const i=[],s=[];for(let a=0;a<n.length;a++){const u=n[a],d=[];for(let h=i[a]||0,p=0;h<r;p++){let g=u.child(p%u.childCount);h+g.attrs.colspan>r&&(g=g.type.createChecked(Ll(g.attrs,g.attrs.colspan,h+g.attrs.colspan-r),g.content)),d.push(g),h+=g.attrs.colspan;for(let b=1;b<g.attrs.rowspan;b++)i[a+b]=(i[a+b]||0)+g.attrs.colspan}s.push(X.from(d))}n=s,t=r}if(e!=o){const i=[];for(let s=0,a=0;s<o;s++,a++){const u=[],d=n[a%e];for(let h=0;h<d.childCount;h++){let p=d.child(h);s+p.attrs.rowspan>o&&(p=p.type.create({...p.attrs,rowspan:Math.max(1,o-p.attrs.rowspan)},p.content)),u.push(p)}i.push(X.from(u))}n=i,e=o}return{width:t,height:e,rows:n}}function cU(t,e,n,r,o,i,s){const a=t.doc.type.schema,u=Ln(a);let d,h;if(o>e.width)for(let p=0,g=0;p<e.height;p++){const b=n.child(p);g+=b.nodeSize;const v=[];let C;b.lastChild==null||b.lastChild.type==u.cell?C=d||(d=u.cell.createAndFill()):C=h||(h=u.header_cell.createAndFill());for(let k=e.width;k<o;k++)v.push(C);t.insert(t.mapping.slice(s).map(g-1+r),v)}if(i>e.height){const p=[];for(let v=0,C=(e.height-1)*e.width;v<Math.max(e.width,o);v++){const k=v>=e.width?!1:n.nodeAt(e.map[C+v]).type==u.header_cell;p.push(k?h||(h=u.header_cell.createAndFill()):d||(d=u.cell.createAndFill()))}const g=u.row.create(null,X.from(p)),b=[];for(let v=e.height;v<i;v++)b.push(g);t.insert(t.mapping.slice(s).map(r+n.nodeSize-2),b)}return!!(d||h)}function tT(t,e,n,r,o,i,s,a){if(s==0||s==e.height)return!1;let u=!1;for(let d=o;d<i;d++){const h=s*e.width+d,p=e.map[h];if(e.map[h-e.width]==p){u=!0;const g=n.nodeAt(p),{top:b,left:v}=e.findCell(p);t.setNodeMarkup(t.mapping.slice(a).map(p+r),null,{...g.attrs,rowspan:s-b}),t.insert(t.mapping.slice(a).map(e.positionAt(s,v,n)),g.type.createAndFill({...g.attrs,rowspan:b+g.attrs.rowspan-s})),d+=g.attrs.colspan-1}}return u}function nT(t,e,n,r,o,i,s,a){if(s==0||s==e.width)return!1;let u=!1;for(let d=o;d<i;d++){const h=d*e.width+s,p=e.map[h];if(e.map[h-1]==p){u=!0;const g=n.nodeAt(p),b=e.colCount(p),v=t.mapping.slice(a).map(p+r);t.setNodeMarkup(v,null,Ll(g.attrs,s-b,g.attrs.colspan-(s-b))),t.insert(v+g.nodeSize,g.type.createAndFill(Ll(g.attrs,0,s-b))),d+=g.attrs.rowspan-1}}return u}function rT(t,e,n,r,o){let i=n?t.doc.nodeAt(n-1):t.doc;if(!i)throw new Error("No table found");let s=Dt.get(i);const{top:a,left:u}=r,d=u+o.width,h=a+o.height,p=t.tr;let g=0;function b(){if(i=n?p.doc.nodeAt(n-1):p.doc,!i)throw new Error("No table found");s=Dt.get(i),g=p.mapping.maps.length}cU(p,s,i,n,d,h,g)&&b(),tT(p,s,i,n,u,d,a,g)&&b(),tT(p,s,i,n,u,d,h,g)&&b(),nT(p,s,i,n,a,h,u,g)&&b(),nT(p,s,i,n,a,h,d,g)&&b();for(let v=a;v<h;v++){const C=s.positionAt(v,u,i),k=s.positionAt(v,d,i);p.replace(p.mapping.slice(g).map(C+n),p.mapping.slice(g).map(k+n),new le(o.rows[v-a],0,0))}b(),p.setSelection(new gt(p.doc.resolve(n+s.positionAt(a,u,i)),p.doc.resolve(n+s.positionAt(h-1,d-1,i)))),e(p)}var uU=Rw({ArrowLeft:jh("horiz",-1),ArrowRight:jh("horiz",1),ArrowUp:jh("vert",-1),ArrowDown:jh("vert",1),"Shift-ArrowLeft":Vh("horiz",-1),"Shift-ArrowRight":Vh("horiz",1),"Shift-ArrowUp":Vh("vert",-1),"Shift-ArrowDown":Vh("vert",1),Backspace:Ph,"Mod-Backspace":Ph,Delete:Ph,"Mod-Delete":Ph});function lp(t,e,n){return n.eq(t.selection)?!1:(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function jh(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof gt)return lp(n,r,Oe.near(i.$headCell,e));if(t!="horiz"&&!i.empty)return!1;const s=nD(o,t,e);if(s==null)return!1;if(t=="horiz")return lp(n,r,Oe.near(n.doc.resolve(i.head+e),e));{const a=n.doc.resolve(s),u=WR(a,t,e);let d;return u?d=Oe.near(u,1):e<0?d=Oe.near(n.doc.resolve(a.before(-1)),-1):d=Oe.near(n.doc.resolve(a.after(-1)),1),lp(n,r,d)}}}function Vh(t,e){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof gt)s=i;else{const u=nD(o,t,e);if(u==null)return!1;s=new gt(n.doc.resolve(u))}const a=WR(s.$headCell,t,e);return a?lp(n,r,new gt(s.$anchorCell,a)):!1}}function dU(t,e){const n=t.state.doc,r=Ec(n.resolve(e));return r?(t.dispatch(t.state.tr.setSelection(new gt(r))),!0):!1}function fU(t,e,n){if(!Lo(t.state))return!1;let r=sU(n);const o=t.state.selection;if(o instanceof gt){r||(r={width:1,height:1,rows:[X.from(a1(Ln(t.state.schema).cell,n))]});const i=o.$anchorCell.node(-1),s=o.$anchorCell.start(-1),a=Dt.get(i).rectBetween(o.$anchorCell.pos-s,o.$headCell.pos-s);return r=aU(r,a.right-a.left,a.bottom-a.top),rT(t.state,t.dispatch,s,a,r),!0}else if(r){const i=Uw(t.state),s=i.start(-1);return rT(t.state,t.dispatch,s,Dt.get(i.node(-1)).findCell(i.pos-s),r),!0}else return!1}function hU(t,e){var n;if(e.ctrlKey||e.metaKey)return;const r=oT(t,e.target);let o;if(e.shiftKey&&t.state.selection instanceof gt)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&(o=Ec(t.state.selection.$anchor))!=null&&((n=V0(t,e))==null?void 0:n.pos)!=o.pos)i(o,e),e.preventDefault();else if(!r)return;function i(u,d){let h=V0(t,d);const p=ds.getState(t.state)==null;if(!h||!$w(u,h))if(p)h=u;else return;const g=new gt(u,h);if(p||!t.state.selection.eq(g)){const b=t.state.tr.setSelection(g);p&&b.setMeta(ds,u.pos),t.dispatch(b)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",a),ds.getState(t.state)!=null&&t.dispatch(t.state.tr.setMeta(ds,-1))}function a(u){const d=u,h=ds.getState(t.state);let p;if(h!=null)p=t.state.doc.resolve(h);else if(oT(t,d.target)!=r&&(p=V0(t,e),!p))return s();p&&i(p,d)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",a)}function nD(t,e,n){if(!(t.state.selection instanceof xe))return null;const{$head:r}=t.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const a=r.before(o),u=e=="vert"?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(u)?a:null}}return null}function oT(t,e){for(;e&&e!=t.dom;e=e.parentNode)if(e.nodeName=="TD"||e.nodeName=="TH")return e;return null}function V0(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?Ec(t.state.doc.resolve(n.pos)):null}var rD=class{constructor(t,e){this.node=t,this.defaultCellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${e}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),c1(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,c1(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function c1(t,e,n,r,o,i){var s;let a=0,u=!0,d=e.firstChild;const h=t.firstChild;if(h){for(let p=0,g=0;p<h.childCount;p++){const{colspan:b,colwidth:v}=h.child(p).attrs;for(let C=0;C<b;C++,g++){const k=o==g?i:v&&v[C],E=k?k+"px":"";if(a+=k||r,k||(u=!1),d)d.style.width!=E&&(d.style.width=E),d=d.nextSibling;else{const T=document.createElement("col");T.style.width=E,e.appendChild(T)}}}for(;d;){const p=d.nextSibling;(s=d.parentNode)==null||s.removeChild(d),d=p}u?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var gr=new ot("tableColumnResizing");function pU({handleWidth:t=5,cellMinWidth:e=25,defaultCellMinWidth:n=100,View:r=rD,lastColumnResizable:o=!0}={}){const i=new Ge({key:gr,state:{init(s,a){var u,d;const h=(d=(u=i.spec)==null?void 0:u.props)==null?void 0:d.nodeViews,p=Ln(a.schema).table.name;return r&&h&&(h[p]=(g,b)=>new r(g,n,b)),new mU(-1,!1)},apply(s,a){return a.apply(s)}},props:{attributes:s=>{const a=gr.getState(s);return a&&a.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(s,a)=>{gU(s,a,t,o)},mouseleave:s=>{bU(s)},mousedown:(s,a)=>{yU(s,a,e,n)}},decorations:s=>{const a=gr.getState(s);if(a&&a.activeHandle>-1)return SU(s,a.activeHandle)},nodeViews:{}}});return i}var mU=class ap{constructor(e,n){this.activeHandle=e,this.dragging=n}apply(e){const n=this,r=e.getMeta(gr);if(r&&r.setHandle!=null)return new ap(r.setHandle,!1);if(r&&r.setDragging!==void 0)return new ap(n.activeHandle,r.setDragging);if(n.activeHandle>-1&&e.docChanged){let o=e.mapping.map(n.activeHandle,-1);return l1(e.doc.resolve(o))||(o=-1),new ap(o,n.dragging)}return n}};function gU(t,e,n,r){if(!t.editable)return;const o=gr.getState(t.state);if(o&&!o.dragging){const i=wU(e.target);let s=-1;if(i){const{left:a,right:u}=i.getBoundingClientRect();e.clientX-a<=n?s=iT(t,e,"left",n):u-e.clientX<=n&&(s=iT(t,e,"right",n))}if(s!=o.activeHandle){if(!r&&s!==-1){const a=t.state.doc.resolve(s),u=a.node(-1),d=Dt.get(u),h=a.start(-1);if(d.colCount(a.pos-h)+a.nodeAfter.attrs.colspan-1==d.width-1)return}oD(t,s)}}}function bU(t){if(!t.editable)return;const e=gr.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&oD(t,-1)}function yU(t,e,n,r){var o;if(!t.editable)return!1;const i=(o=t.dom.ownerDocument.defaultView)!=null?o:window,s=gr.getState(t.state);if(!s||s.activeHandle==-1||s.dragging)return!1;const a=t.state.doc.nodeAt(s.activeHandle),u=vU(t,s.activeHandle,a.attrs);t.dispatch(t.state.tr.setMeta(gr,{setDragging:{startX:e.clientX,startWidth:u}}));function d(p){i.removeEventListener("mouseup",d),i.removeEventListener("mousemove",h);const g=gr.getState(t.state);g?.dragging&&(xU(t,g.activeHandle,sT(g.dragging,p,n)),t.dispatch(t.state.tr.setMeta(gr,{setDragging:null})))}function h(p){if(!p.which)return d(p);const g=gr.getState(t.state);if(g&&g.dragging){const b=sT(g.dragging,p,n);lT(t,g.activeHandle,b,r)}}return lT(t,s.activeHandle,u,r),i.addEventListener("mouseup",d),i.addEventListener("mousemove",h),e.preventDefault(),!0}function vU(t,e,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=t.domAtPos(e);let a=i.node.childNodes[i.offset].offsetWidth,u=n;if(r)for(let d=0;d<n;d++)r[d]&&(a-=r[d],u--);return a/u}function wU(t){for(;t&&t.nodeName!="TD"&&t.nodeName!="TH";)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}function iT(t,e,n,r){const o=n=="right"?-r:r,i=t.posAtCoords({left:e.clientX+o,top:e.clientY});if(!i)return-1;const{pos:s}=i,a=Ec(t.state.doc.resolve(s));if(!a)return-1;if(n=="right")return a.pos;const u=Dt.get(a.node(-1)),d=a.start(-1),h=u.map.indexOf(a.pos-d);return h%u.width==0?-1:d+u.map[h-1]}function sT(t,e,n){const r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function oD(t,e){t.dispatch(t.state.tr.setMeta(gr,{setHandle:e}))}function xU(t,e,n){const r=t.state.doc.resolve(e),o=r.node(-1),i=Dt.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,u=t.state.tr;for(let d=0;d<i.height;d++){const h=d*i.width+a;if(d&&i.map[h]==i.map[h-i.width])continue;const p=i.map[h],g=o.nodeAt(p).attrs,b=g.colspan==1?0:a-i.colCount(p);if(g.colwidth&&g.colwidth[b]==n)continue;const v=g.colwidth?g.colwidth.slice():CU(g.colspan);v[b]=n,u.setNodeMarkup(s+p,null,{...g,colwidth:v})}u.docChanged&&t.dispatch(u)}function lT(t,e,n,r){const o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=Dt.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let u=t.domAtPos(o.start(-1)).node;for(;u&&u.nodeName!="TABLE";)u=u.parentNode;u&&c1(i,u.firstChild,u,r,a,n)}function CU(t){return Array(t).fill(0)}function SU(t,e){var n;const r=[],o=t.doc.resolve(e),i=o.node(-1);if(!i)return et.empty;const s=Dt.get(i),a=o.start(-1),u=s.colCount(o.pos-a)+o.nodeAfter.attrs.colspan-1;for(let d=0;d<s.height;d++){const h=u+d*s.width;if((u==s.width-1||s.map[h]!=s.map[h+1])&&(d==0||s.map[h]!=s.map[h-s.width])){const p=s.map[h],g=a+p+i.nodeAt(p).nodeSize-1,b=document.createElement("div");b.className="column-resize-handle",(n=gr.getState(t))!=null&&n.dragging&&r.push(mt.node(a+p,a+p+i.nodeAt(p).nodeSize,{class:"column-resize-dragging"})),r.push(mt.widget(g,b))}}return et.create(t.doc,r)}function kU({allowTableNodeSelection:t=!1}={}){return new Ge({key:ds,state:{init(){return null},apply(e,n){const r=e.getMeta(ds);if(r!=null)return r==-1?null:r;if(n==null||!e.docChanged)return n;const{deleted:o,pos:i}=e.mapping.mapResult(n);return o?null:i}},props:{decorations:Pz,handleDOMEvents:{mousedown:hU},createSelectionBetween(e){return ds.getState(e.state)!=null?e.state.selection:null},handleTripleClick:dU,handleKeyDown:uU,handlePaste:fU},appendTransaction(e,n,r){return zz(r,$z(r,n),t)}})}class jt extends Oe{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return jt.valid(r)?new jt(r):Oe.near(r)}content(){return le.empty}eq(e){return e instanceof jt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new jt(e.resolve(n.pos))}getBookmark(){return new Gw(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!EU(e)||!MU(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&jt.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let a=e.node(s);if(n>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(n>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=n;let u=e.doc.resolve(o);if(jt.valid(u))return u}for(;;){let s=n>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!ke.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*n),r=!1;continue e}break}i=s,o+=n;let a=e.doc.resolve(o);if(jt.valid(a))return a}return null}}}jt.prototype.visible=!1;jt.findFrom=jt.findGapCursorFrom;Oe.jsonID("gapcursor",jt);class Gw{constructor(e){this.pos=e}map(e){return new Gw(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return jt.valid(n)?new jt(n):Oe.near(n)}}function EU(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function MU(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function TU(){return new Ge({props:{decorations:RU,createSelectionBetween(t,e,n){return e.pos==n.pos&&jt.valid(n)?new jt(n):null},handleClick:NU,handleKeyDown:AU,handleDOMEvents:{beforeinput:OU}}})}const AU=Rw({ArrowLeft:zh("horiz",-1),ArrowRight:zh("horiz",1),ArrowUp:zh("vert",-1),ArrowDown:zh("vert",1)});function zh(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,a=e>0?s.$to:s.$from,u=s.empty;if(s instanceof xe){if(!i.endOfTextblock(n)||a.depth==0)return!1;u=!1,a=r.doc.resolve(e>0?a.after():a.before())}let d=jt.findGapCursorFrom(a,e,u);return d?(o&&o(r.tr.setSelection(new jt(d))),!0):!1}}function NU(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!jt.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&ke.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new jt(r))),!0)}function OU(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof jt))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=X.empty;for(let s=r.length-1;s>=0;s--)o=X.from(r[s].createAndFill(null,o));let i=t.state.tr.replace(n.pos,n.pos,new le(o,0,0));return i.setSelection(xe.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function RU(t){if(!(t.selection instanceof jt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",et.create(t.doc,[mt.widget(t.selection.head,e,{key:"gapcursor"})])}const DU=St.create({name:"gapCursor",addProseMirrorPlugins(){return[TU()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Je(Se(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}});var $p=200,dn=function(){};dn.prototype.append=function(e){return e.length?(e=dn.from(e),!this.length&&e||e.length<$p&&this.leafAppend(e)||this.length<$p&&e.leafPrepend(this)||this.appendInner(e)):this};dn.prototype.prepend=function(e){return e.length?dn.from(e).append(this):this};dn.prototype.appendInner=function(e){return new _U(this,e)};dn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?dn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};dn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};dn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};dn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},n,r),o};dn.from=function(e){return e instanceof dn?e:e&&e.length?new iD(e):dn.empty};var iD=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,a){for(var u=i;u<s;u++)if(o(this.values[u],a+u)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,a){for(var u=i-1;u>=s;u--)if(o(this.values[u],a+u)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=$p)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=$p)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(dn);dn.empty=new iD([]);var _U=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(dn);const LU=500;class Jr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;n&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,a,u,d=[],h=[];return this.items.forEach((p,g)=>{if(!p.step){o||(o=this.remapping(r,g+1),i=o.maps.length),i--,h.push(p);return}if(o){h.push(new es(p.map));let b=p.step.map(o.slice(i)),v;b&&s.maybeStep(b).doc&&(v=s.mapping.maps[s.mapping.maps.length-1],d.push(new es(v,void 0,void 0,d.length+h.length))),i--,v&&o.appendMap(v,i)}else s.maybeStep(p.step);if(p.selection)return a=o?p.selection.map(o.slice(i)):p.selection,u=new Jr(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:s,selection:a}}addTransform(e,n,r,o){let i=[],s=this.eventCount,a=this.items,u=!o&&a.length?a.get(a.length-1):null;for(let h=0;h<e.steps.length;h++){let p=e.steps[h].invert(e.docs[h]),g=new es(e.mapping.maps[h],p,n),b;(b=u&&u.merge(g))&&(g=b,h?i.pop():a=a.slice(0,a.length-1)),i.push(g),n&&(s++,n=void 0),o||(u=g)}let d=s-r.depth;return d>IU&&(a=BU(a,d),s-=d),new Jr(a.append(i),s)}remapping(e,n){let r=new cc;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,n),r}addMaps(e){return this.eventCount==0?this:new Jr(this.items.append(e.map(n=>new es(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(g=>{g.selection&&a--},o);let u=n;this.items.forEach(g=>{let b=i.getMirror(--u);if(b==null)return;s=Math.min(s,b);let v=i.maps[b];if(g.step){let C=e.steps[b].invert(e.docs[b]),k=g.selection&&g.selection.map(i.slice(u+1,b));k&&a++,r.push(new es(v,C,k))}else r.push(new es(v))},o);let d=[];for(let g=n;g<s;g++)d.push(new es(i.maps[g]));let h=this.items.slice(0,o).append(d).append(r),p=new Jr(h,a);return p.emptyItemCount()>LU&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)o.push(s),s.selection&&i++;else if(s.step){let u=s.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let h=s.selection&&s.selection.map(n.slice(r));h&&i++;let p=new es(d.invert(),u,h),g,b=o.length-1;(g=o.length&&o[b].merge(p))?o[b]=g:o.push(p)}}else s.map&&r--},this.items.length,0),new Jr(dn.from(o.reverse()),i)}}Jr.empty=new Jr(dn.empty,0);function BU(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}let es=class sD{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new sD(n.getMap().invert(),n,this.selection)}}};class as{constructor(e,n,r,o,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const IU=20;function HU(t,e,n,r){let o=n.getMeta(El),i;if(o)return o.historyState;n.getMeta(VU)&&(t=new as(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(s&&s.getMeta(El))return s.getMeta(El).redo?new as(t.done.addTransform(n,void 0,r,cp(e)),t.undone,aT(n.mapping.maps),t.prevTime,t.prevComposition):new as(t.done,t.undone.addTransform(n,void 0,r,cp(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),u=t.prevTime==0||!s&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!PU(n,t.prevRanges)),d=s?z0(t.prevRanges,n.mapping):aT(n.mapping.maps);return new as(t.done.addTransform(n,u?e.selection.getBookmark():void 0,r,cp(e)),Jr.empty,d,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new as(t.done.rebased(n,i),t.undone.rebased(n,i),z0(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new as(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),z0(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function PU(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(n=!0)}),n}function aT(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,i,s)=>e.push(i,s));return e}function z0(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function jU(t,e,n){let r=cp(e),o=El.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),u=new as(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(El,{redo:n,historyState:u})}let U0=!1,cT=null;function cp(t){let e=t.plugins;if(cT!=e){U0=!1,cT=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){U0=!0;break}}return U0}const El=new ot("history"),VU=new ot("closeHistory");function zU(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ge({key:El,state:{init(){return new as(Jr.empty,Jr.empty,null,0,-1)},apply(e,n,r){return HU(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?qw:r=="historyRedo"?Kw:null;return o?(n.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function lD(t,e){return(n,r)=>{let o=El.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let i=jU(o,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const qw=lD(!1,!0),Kw=lD(!0,!0),UU=St.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>qw(t,e),redo:()=>({state:t,dispatch:e})=>Kw(t,e)}},addProseMirrorPlugins(){return[zU(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),$U="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",FU="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",u1="numeric",d1="ascii",f1="alpha",td="asciinumeric",Fu="alphanumeric",h1="domain",aD="emoji",GU="scheme",qU="slashscheme",$0="whitespace";function KU(t,e){return t in e||(e[t]=[]),e[t]}function vl(t,e,n){e[u1]&&(e[td]=!0,e[Fu]=!0),e[d1]&&(e[td]=!0,e[f1]=!0),e[td]&&(e[Fu]=!0),e[f1]&&(e[Fu]=!0),e[Fu]&&(e[h1]=!0),e[aD]&&(e[h1]=!0);for(const r in e){const o=KU(r,n);o.indexOf(t)<0&&o.push(t)}}function ZU(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Qn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Qn.groups={};Qn.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],i=e.jr[r][1];if(i&&o.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||Qn.groups;let o;return e&&e.j?o=e:(o=new Qn(e),n&&r&&vl(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const i=t.length;if(!i)return o;for(let s=0;s<i-1;s++)o=o.tt(t[s]);return o.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||Qn.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const i=e;let s,a=o.go(t);if(a?(s=new Qn,Object.assign(s.j,a.j),s.jr.push.apply(s.jr,a.jr),s.jd=a.jd,s.t=a.t):s=new Qn,i){if(r)if(s.t&&typeof s.t=="string"){const u=Object.assign(ZU(s.t,r),n);vl(i,u,r)}else n&&vl(i,n,r);s.t=i}return o.j[t]=s,s}};const Fe=(t,e,n,r,o)=>t.ta(e,n,r,o),Pt=(t,e,n,r,o)=>t.tr(e,n,r,o),uT=(t,e,n,r,o)=>t.ts(e,n,r,o),se=(t,e,n,r,o)=>t.tt(e,n,r,o),ai="WORD",p1="UWORD",cD="ASCIINUMERICAL",uD="ALPHANUMERICAL",kd="LOCALHOST",m1="TLD",g1="UTLD",up="SCHEME",Za="SLASH_SCHEME",Zw="NUM",b1="WS",Yw="NL",nd="OPENBRACE",rd="CLOSEBRACE",Fp="OPENBRACKET",Gp="CLOSEBRACKET",qp="OPENPAREN",Kp="CLOSEPAREN",Zp="OPENANGLEBRACKET",Yp="CLOSEANGLEBRACKET",Wp="FULLWIDTHLEFTPAREN",Xp="FULLWIDTHRIGHTPAREN",Jp="LEFTCORNERBRACKET",Qp="RIGHTCORNERBRACKET",em="LEFTWHITECORNERBRACKET",tm="RIGHTWHITECORNERBRACKET",nm="FULLWIDTHLESSTHAN",rm="FULLWIDTHGREATERTHAN",om="AMPERSAND",im="APOSTROPHE",sm="ASTERISK",cs="AT",lm="BACKSLASH",am="BACKTICK",cm="CARET",fs="COLON",Ww="COMMA",um="DOLLAR",yo="DOT",dm="EQUALS",Xw="EXCLAMATION",Br="HYPHEN",od="PERCENT",fm="PIPE",hm="PLUS",pm="POUND",id="QUERY",Jw="QUOTE",dD="FULLWIDTHMIDDLEDOT",Qw="SEMI",vo="SLASH",sd="TILDE",mm="UNDERSCORE",fD="EMOJI",gm="SYM";var hD=Object.freeze({__proto__:null,ALPHANUMERICAL:uD,AMPERSAND:om,APOSTROPHE:im,ASCIINUMERICAL:cD,ASTERISK:sm,AT:cs,BACKSLASH:lm,BACKTICK:am,CARET:cm,CLOSEANGLEBRACKET:Yp,CLOSEBRACE:rd,CLOSEBRACKET:Gp,CLOSEPAREN:Kp,COLON:fs,COMMA:Ww,DOLLAR:um,DOT:yo,EMOJI:fD,EQUALS:dm,EXCLAMATION:Xw,FULLWIDTHGREATERTHAN:rm,FULLWIDTHLEFTPAREN:Wp,FULLWIDTHLESSTHAN:nm,FULLWIDTHMIDDLEDOT:dD,FULLWIDTHRIGHTPAREN:Xp,HYPHEN:Br,LEFTCORNERBRACKET:Jp,LEFTWHITECORNERBRACKET:em,LOCALHOST:kd,NL:Yw,NUM:Zw,OPENANGLEBRACKET:Zp,OPENBRACE:nd,OPENBRACKET:Fp,OPENPAREN:qp,PERCENT:od,PIPE:fm,PLUS:hm,POUND:pm,QUERY:id,QUOTE:Jw,RIGHTCORNERBRACKET:Qp,RIGHTWHITECORNERBRACKET:tm,SCHEME:up,SEMI:Qw,SLASH:vo,SLASH_SCHEME:Za,SYM:gm,TILDE:sd,TLD:m1,UNDERSCORE:mm,UTLD:g1,UWORD:p1,WORD:ai,WS:b1});const ni=/[a-z]/,Iu=new RegExp("\\p{L}","u"),F0=new RegExp("\\p{Emoji}","u"),ri=/\d/,G0=/\s/,dT="\r",q0=`
`,YU="️",WU="‍",K0="￼";let Uh=null,$h=null;function XU(t=[]){const e={};Qn.groups=e;const n=new Qn;Uh==null&&(Uh=fT($U)),$h==null&&($h=fT(FU)),se(n,"'",im),se(n,"{",nd),se(n,"}",rd),se(n,"[",Fp),se(n,"]",Gp),se(n,"(",qp),se(n,")",Kp),se(n,"<",Zp),se(n,">",Yp),se(n,"（",Wp),se(n,"）",Xp),se(n,"「",Jp),se(n,"」",Qp),se(n,"『",em),se(n,"』",tm),se(n,"＜",nm),se(n,"＞",rm),se(n,"&",om),se(n,"*",sm),se(n,"@",cs),se(n,"`",am),se(n,"^",cm),se(n,":",fs),se(n,",",Ww),se(n,"$",um),se(n,".",yo),se(n,"=",dm),se(n,"!",Xw),se(n,"-",Br),se(n,"%",od),se(n,"|",fm),se(n,"+",hm),se(n,"#",pm),se(n,"?",id),se(n,'"',Jw),se(n,"/",vo),se(n,";",Qw),se(n,"~",sd),se(n,"_",mm),se(n,"\\",lm),se(n,"・",dD);const r=Pt(n,ri,Zw,{[u1]:!0});Pt(r,ri,r);const o=Pt(r,ni,cD,{[td]:!0}),i=Pt(r,Iu,uD,{[Fu]:!0}),s=Pt(n,ni,ai,{[d1]:!0});Pt(s,ri,o),Pt(s,ni,s),Pt(o,ri,o),Pt(o,ni,o);const a=Pt(n,Iu,p1,{[f1]:!0});Pt(a,ni),Pt(a,ri,i),Pt(a,Iu,a),Pt(i,ri,i),Pt(i,ni),Pt(i,Iu,i);const u=se(n,q0,Yw,{[$0]:!0}),d=se(n,dT,b1,{[$0]:!0}),h=Pt(n,G0,b1,{[$0]:!0});se(n,K0,h),se(d,q0,u),se(d,K0,h),Pt(d,G0,h),se(h,dT),se(h,q0),Pt(h,G0,h),se(h,K0,h);const p=Pt(n,F0,fD,{[aD]:!0});se(p,"#"),Pt(p,F0,p),se(p,YU,p);const g=se(p,WU);se(g,"#"),Pt(g,F0,p);const b=[[ni,s],[ri,o]],v=[[ni,null],[Iu,a],[ri,i]];for(let C=0;C<Uh.length;C++)ts(n,Uh[C],m1,ai,b);for(let C=0;C<$h.length;C++)ts(n,$h[C],g1,p1,v);vl(m1,{tld:!0,ascii:!0},e),vl(g1,{utld:!0,alpha:!0},e),ts(n,"file",up,ai,b),ts(n,"mailto",up,ai,b),ts(n,"http",Za,ai,b),ts(n,"https",Za,ai,b),ts(n,"ftp",Za,ai,b),ts(n,"ftps",Za,ai,b),vl(up,{scheme:!0,ascii:!0},e),vl(Za,{slashscheme:!0,ascii:!0},e),t=t.sort((C,k)=>C[0]>k[0]?1:-1);for(let C=0;C<t.length;C++){const k=t[C][0],T=t[C][1]?{[GU]:!0}:{[qU]:!0};k.indexOf("-")>=0?T[h1]=!0:ni.test(k)?ri.test(k)?T[td]=!0:T[d1]=!0:T[u1]=!0,uT(n,k,k,T)}return uT(n,"localhost",kd,{ascii:!0}),n.jd=new Qn(gm),{start:n,tokens:Object.assign({groups:e},hD)}}function pD(t,e){const n=JU(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,o=[];let i=0,s=0;for(;s<r;){let a=t,u=null,d=0,h=null,p=-1,g=-1;for(;s<r&&(u=a.go(n[s]));)a=u,a.accepts()?(p=0,g=0,h=a):p>=0&&(p+=n[s].length,g++),d+=n[s].length,i+=n[s].length,s++;i-=p,s-=g,d-=p,o.push({t:h.t,v:e.slice(i-d,i),s:i-d,e:i})}return o}function JU(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),i,s=o<55296||o>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(s),r+=s.length}return e}function ts(t,e,n,r,o){let i;const s=e.length;for(let a=0;a<s-1;a++){const u=e[a];t.j[u]?i=t.j[u]:(i=new Qn(r),i.jr=o.slice(),t.j[u]=i),t=i}return i=new Qn(n),i.jr=o.slice(),t.j[e[s-1]]=i,i}function fT(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let i=0;for(;o.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let s=parseInt(t.substring(r,r+i),10);s>0;s--)n.pop();r+=i}else n.push(t[r]),r++}return e}const Ed={defaultProtocol:"http",events:null,format:hT,formatHref:hT,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function ex(t,e=null){let n=Object.assign({},Ed);t&&(n=Object.assign(n,t instanceof ex?t.o:t));const r=n.ignoreTags,o=[];for(let i=0;i<r.length;i++)o.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}ex.prototype={o:Ed,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:Ed[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function hT(t){return t}function mD(t,e){this.t="token",this.v=t,this.tk=e}mD.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Ed.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),i=this.toFormattedString(t),s={},a=t.get("className",n,e),u=t.get("target",n,e),d=t.get("rel",n,e),h=t.getObj("attributes",n,e),p=t.getObj("events",n,e);return s.href=r,a&&(s.class=a),u&&(s.target=u),d&&(s.rel=d),h&&Object.assign(s,h),{tagName:o,attributes:s,content:i,eventListeners:p}}};function lg(t,e){class n extends mD{constructor(o,i){super(o,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const pT=lg("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),mT=lg("text"),QU=lg("nl"),Fh=lg("url",{isLink:!0,toHref(t=Ed.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==kd&&t[1].t===fs}}),Lr=t=>new Qn(t);function e$({groups:t}){const e=t.domain.concat([om,sm,cs,lm,am,cm,um,dm,Br,Zw,od,fm,hm,pm,vo,gm,sd,mm]),n=[im,fs,Ww,yo,Xw,od,id,Jw,Qw,Zp,Yp,nd,rd,Gp,Fp,qp,Kp,Wp,Xp,Jp,Qp,em,tm,nm,rm],r=[om,im,sm,lm,am,cm,um,dm,Br,nd,rd,od,fm,hm,pm,id,vo,gm,sd,mm],o=Lr(),i=se(o,sd);Fe(i,r,i),Fe(i,t.domain,i);const s=Lr(),a=Lr(),u=Lr();Fe(o,t.domain,s),Fe(o,t.scheme,a),Fe(o,t.slashscheme,u),Fe(s,r,i),Fe(s,t.domain,s);const d=se(s,cs);se(i,cs,d),se(a,cs,d),se(u,cs,d);const h=se(i,yo);Fe(h,r,i),Fe(h,t.domain,i);const p=Lr();Fe(d,t.domain,p),Fe(p,t.domain,p);const g=se(p,yo);Fe(g,t.domain,p);const b=Lr(pT);Fe(g,t.tld,b),Fe(g,t.utld,b),se(d,kd,b);const v=se(p,Br);se(v,Br,v),Fe(v,t.domain,p),Fe(b,t.domain,p),se(b,yo,g),se(b,Br,v);const C=se(b,fs);Fe(C,t.numeric,pT);const k=se(s,Br),E=se(s,yo);se(k,Br,k),Fe(k,t.domain,s),Fe(E,r,i),Fe(E,t.domain,s);const T=Lr(Fh);Fe(E,t.tld,T),Fe(E,t.utld,T),Fe(T,t.domain,s),Fe(T,r,i),se(T,yo,E),se(T,Br,k),se(T,cs,d);const N=se(T,fs),_=Lr(Fh);Fe(N,t.numeric,_);const O=Lr(Fh),$=Lr();Fe(O,e,O),Fe(O,n,$),Fe($,e,O),Fe($,n,$),se(T,vo,O),se(_,vo,O);const H=se(a,fs),P=se(u,fs),W=se(P,vo),ie=se(W,vo);Fe(a,t.domain,s),se(a,yo,E),se(a,Br,k),Fe(u,t.domain,s),se(u,yo,E),se(u,Br,k),Fe(H,t.domain,O),se(H,vo,O),se(H,id,O),Fe(ie,t.domain,O),Fe(ie,e,O),se(ie,vo,O);const ge=[[nd,rd],[Fp,Gp],[qp,Kp],[Zp,Yp],[Wp,Xp],[Jp,Qp],[em,tm],[nm,rm]];for(let ne=0;ne<ge.length;ne++){const[fe,he]=ge[ne],oe=se(O,fe);se($,fe,oe),se(oe,he,O);const B=Lr(Fh);Fe(oe,e,B);const Y=Lr();Fe(oe,n),Fe(B,e,B),Fe(B,n,Y),Fe(Y,e,B),Fe(Y,n,Y),se(B,he,O),se(Y,he,O)}return se(o,kd,T),se(o,Yw,QU),{start:o,tokens:hD}}function t$(t,e,n){let r=n.length,o=0,i=[],s=[];for(;o<r;){let a=t,u=null,d=null,h=0,p=null,g=-1;for(;o<r&&!(u=a.go(n[o].t));)s.push(n[o++]);for(;o<r&&(d=u||a.go(n[o].t));)u=null,a=d,a.accepts()?(g=0,p=a):g>=0&&g++,o++,h++;if(g<0)o-=h,o<r&&(s.push(n[o]),o++);else{s.length>0&&(i.push(Z0(mT,e,s)),s=[]),o-=g,h-=g;const b=p.t,v=n.slice(o-h,o);i.push(Z0(b,e,v))}}return s.length>0&&i.push(Z0(mT,e,s)),i}function Z0(t,e,n){const r=n[0].s,o=n[n.length-1].e,i=e.slice(r,o);return new t(i,n)}const n$=typeof console<"u"&&console&&console.warn||(()=>{}),r$="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",At={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function o$(){return Qn.groups={},At.scanner=null,At.parser=null,At.tokenQueue=[],At.pluginQueue=[],At.customSchemes=[],At.initialized=!1,At}function gT(t,e=!1){if(At.initialized&&n$(`linkifyjs: already initialized - will not register custom scheme "${t}" ${r$}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);At.customSchemes.push([t,e])}function i$(){At.scanner=XU(At.customSchemes);for(let t=0;t<At.tokenQueue.length;t++)At.tokenQueue[t][1]({scanner:At.scanner});At.parser=e$(At.scanner.tokens);for(let t=0;t<At.pluginQueue.length;t++)At.pluginQueue[t][1]({scanner:At.scanner,parser:At.parser});return At.initialized=!0,At}function tx(t){return At.initialized||i$(),t$(At.parser.start,t,pD(At.scanner.start,t))}tx.scan=pD;function gD(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new ex(n),o=tx(t),i=[];for(let s=0;s<o.length;s++){const a=o[s];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}const nx="[\0-   ᠎ -\u2029 　]",s$=new RegExp(nx),l$=new RegExp(`${nx}$`),a$=new RegExp(nx,"g");function c$(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function u$(t){return new Ge({key:new ot("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(d=>d.docChanged)&&!n.doc.eq(r.doc),i=e.some(d=>d.getMeta("preventAutolink"));if(!o||i)return;const{tr:s}=r,a=jw(n.doc,[...e]);if(jR(a).forEach(({newRange:d})=>{const h=HR(r.doc,d,b=>b.isTextblock);let p,g;if(h.length>1)p=h[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const b=r.doc.textBetween(d.from,d.to," "," ");if(!l$.test(b))return;p=h[0],g=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&g){const b=g.split(s$).filter(Boolean);if(b.length<=0)return!1;const v=b[b.length-1],C=p.pos+g.lastIndexOf(v);if(!v)return!1;const k=tx(v).map(E=>E.toObject(t.defaultProtocol));if(!c$(k))return!1;k.filter(E=>E.isLink).map(E=>({...E,from:C+E.start+1,to:C+E.end+1})).filter(E=>r.schema.marks.code?!r.doc.rangeHasMark(E.from,E.to,r.schema.marks.code):!0).filter(E=>t.validate(E.value)).filter(E=>t.shouldAutoLink(E.value)).forEach(E=>{Vw(E.from,E.to,r.doc).some(T=>T.mark.type===t.type)||s.addMark(E.from,E.to,t.type.create({href:E.href}))})}}),!!s.steps.length)return s}})}function d$(t){return new Ge({key:new ot("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,i;if(r.button!==0||!e.editable)return!1;let s=r.target;const a=[];for(;s.nodeName!=="DIV";)a.push(s),s=s.parentNode;if(!a.find(g=>g.nodeName==="A"))return!1;const u=PR(e.state,t.type.name),d=r.target,h=(o=d?.href)!==null&&o!==void 0?o:u.href,p=(i=d?.target)!==null&&i!==void 0?i:u.target;return d&&h?(window.open(h,p),!0):!1}}})}function f$(t){return new Ge({key:new ot("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:o}=e,{selection:i}=o,{empty:s}=i;if(s)return!1;let a="";r.content.forEach(d=>{a+=d.textContent});const u=gD(a,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===a);return!a||!u?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function ul(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(a$,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const h$=kn.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){gT(t);return}gT(t.scheme,t.optionalSlashes)})},onDestroy(){o$()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!ul(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!ul(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!ul(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",wr(this.options.HTMLAttributes,t),0]:["a",wr(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ul(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ul(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[_l({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=gD(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:s=>!!ul(s,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(u$({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!ul(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(d$({type:this.type})),this.options.linkOnPaste&&t.push(f$({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),p$=_o.create({name:"text",group:"inline"}),Ur=()=>new Map,y1=t=>{const e=Ur();return t.forEach((n,r)=>{e.set(r,n)}),e},Io=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},m$=(t,e)=>{const n=[];for(const[r,o]of t)n.push(e(o,r));return n},g$=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Bl=()=>new Set,Y0=t=>t[t.length-1],b$=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Ts=Array.from,y$=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},v1=Array.isArray;class bD{constructor(){this._observers=Ur()}on(e,n){return Io(this._observers,e,Bl).add(n),n}once(e,n){const r=(...o)=>{this.off(e,r),n(...o)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Ts((this._observers.get(e)||Ur()).values()).forEach(r=>r(...n))}destroy(){this._observers=Ur()}}const wi=Math.floor,dp=Math.abs,mi=(t,e)=>t<e?t:e,io=(t,e)=>t>e?t:e,yD=t=>t!==0?t<0:1/t<0,bT=1,yT=2,W0=4,X0=8,Md=32,gi=64,jn=128,v$=1<<29,ag=31,w1=63,Ml=127,w$=2147483647,vD=Number.MAX_SAFE_INTEGER,x$=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&wi(t)===t),C$=String.fromCharCode,S$=t=>t.toLowerCase(),k$=/^\s*/g,E$=t=>t.replace(k$,""),M$=/([A-Z])/g,vT=(t,e)=>E$(t.replace(M$,n=>`${e}${S$(n)}`)),T$=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o++)r[o]=e.codePointAt(o);return r},Td=typeof TextEncoder<"u"?new TextEncoder:null,A$=t=>Td.encode(t),N$=Td?A$:T$;let ld=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});ld&&ld.decode(new Uint8Array).length===1&&(ld=null);class Yd{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Wd=()=>new Yd,O$=t=>{const e=Wd();return t(e),to(e)},R$=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},to=t=>{const e=new Uint8Array(R$(t));let n=0;for(let r=0;r<t.bufs.length;r++){const o=t.bufs[r];e.set(o,n),n+=o.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},D$=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(io(n,e)*2),t.cpos=0)},un=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},x1=un,Qe=(t,e)=>{for(;e>Ml;)un(t,jn|Ml&e),e=wi(e/128);un(t,Ml&e)},rx=(t,e)=>{const n=yD(e);for(n&&(e=-e),un(t,(e>w1?jn:0)|(n?gi:0)|w1&e),e=wi(e/64);e>0;)un(t,(e>Ml?jn:0)|Ml&e),e=wi(e/128)},C1=new Uint8Array(3e4),_$=C1.length/3,L$=(t,e)=>{if(e.length<_$){const n=Td.encodeInto(e,C1).written||0;Qe(t,n);for(let r=0;r<n;r++)un(t,C1[r])}else dr(t,N$(e))},B$=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Qe(t,r);for(let o=0;o<r;o++)un(t,n.codePointAt(o))},tc=Td&&Td.encodeInto?L$:B$,cg=(t,e)=>{const n=t.cbuf.length,r=t.cpos,o=mi(n-r,e.length),i=e.length-o;t.cbuf.set(e.subarray(0,o),r),t.cpos+=o,i>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(io(n*2,i)),t.cbuf.set(e.subarray(o)),t.cpos=i)},dr=(t,e)=>{Qe(t,e.byteLength),cg(t,e)},ox=(t,e)=>{D$(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},I$=(t,e)=>ox(t,4).setFloat32(0,e,!1),H$=(t,e)=>ox(t,8).setFloat64(0,e,!1),P$=(t,e)=>ox(t,8).setBigInt64(0,e,!1),wT=new DataView(new ArrayBuffer(4)),j$=t=>(wT.setFloat32(0,t),wT.getFloat32(0)===t),mc=(t,e)=>{switch(typeof e){case"string":un(t,119),tc(t,e);break;case"number":x$(e)&&dp(e)<=w$?(un(t,125),rx(t,e)):j$(e)?(un(t,124),I$(t,e)):(un(t,123),H$(t,e));break;case"bigint":un(t,122),P$(t,e);break;case"object":if(e===null)un(t,126);else if(v1(e)){un(t,117),Qe(t,e.length);for(let n=0;n<e.length;n++)mc(t,e[n])}else if(e instanceof Uint8Array)un(t,116),dr(t,e);else{un(t,118);const n=Object.keys(e);Qe(t,n.length);for(let r=0;r<n.length;r++){const o=n[r];tc(t,o),mc(t,e[o])}}break;case"boolean":un(t,e?120:121);break;default:un(t,127)}};class xT extends Yd{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Qe(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const CT=t=>{t.count>0&&(rx(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Qe(t.encoder,t.count-2))};class fp{constructor(){this.encoder=new Yd,this.s=0,this.count=0}write(e){this.s===e?this.count++:(CT(this),this.count=1,this.s=e)}toUint8Array(){return CT(this),to(this.encoder)}}const ST=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);rx(t.encoder,e),t.count>1&&Qe(t.encoder,t.count-2)}};class J0{constructor(){this.encoder=new Yd,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(ST(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return ST(this),to(this.encoder)}}class V${constructor(){this.sarr=[],this.s="",this.lensE=new fp}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Yd;return this.sarr.push(this.s),this.s="",tc(e,this.sarr.join("")),cg(e,this.lensE.toUint8Array()),to(e)}}const As=t=>new Error(t),no=()=>{throw As("Method unimplemented")},xr=()=>{throw As("Unexpected case")},wD=As("Unexpected end of array"),xD=As("Integer out of Range");class ug{constructor(e){this.arr=e,this.pos=0}}const Mc=t=>new ug(t),z$=t=>t.pos!==t.arr.length,U$=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},fr=t=>U$(t,Ye(t)),gc=t=>t.arr[t.pos++],Ye=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const o=t.arr[t.pos++];if(e=e+(o&Ml)*n,n*=128,o<jn)return e;if(e>vD)throw xD}throw wD},ix=t=>{let e=t.arr[t.pos++],n=e&w1,r=64;const o=(e&gi)>0?-1:1;if((e&jn)===0)return o*n;const i=t.arr.length;for(;t.pos<i;){if(e=t.arr[t.pos++],n=n+(e&Ml)*r,r*=128,e<jn)return o*n;if(n>vD)throw xD}throw wD},$$=t=>{let e=Ye(t);if(e===0)return"";{let n=String.fromCodePoint(gc(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(gc(t));else for(;e>0;){const r=e<1e4?e:1e4,o=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,o),e-=r}return decodeURIComponent(escape(n))}},F$=t=>ld.decode(fr(t)),nc=ld?F$:$$,sx=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},G$=t=>sx(t,4).getFloat32(0,!1),q$=t=>sx(t,8).getFloat64(0,!1),K$=t=>sx(t,8).getBigInt64(0,!1),Z$=[t=>{},t=>null,ix,G$,q$,K$,t=>!1,t=>!0,nc,t=>{const e=Ye(t),n={};for(let r=0;r<e;r++){const o=nc(t);n[o]=Ad(t)}return n},t=>{const e=Ye(t),n=[];for(let r=0;r<e;r++)n.push(Ad(t));return n},fr],Ad=t=>Z$[127-gc(t)](t);class kT extends ug{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),z$(this)?this.count=Ye(this)+1:this.count=-1),this.count--,this.s}}class hp extends ug{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=ix(this);const e=yD(this.s);this.count=1,e&&(this.s=-this.s,this.count=Ye(this)+2)}return this.count--,this.s}}class Q0 extends ug{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=ix(this),n=e&1;this.diff=wi(e/2),this.count=1,n&&(this.count=Ye(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Y${constructor(e){this.decoder=new hp(e),this.str=nc(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const W$=crypto.getRandomValues.bind(crypto),X$=Math.random,CD=()=>W$(new Uint32Array(1))[0],J$=t=>t[wi(X$()*t.length)],Q$="10000000-1000-4000-8000"+-1e11,eF=()=>Q$.replace(/[018]/g,t=>(t^CD()&15>>t/4).toString(16)),tF=Date.now,ET=t=>new Promise(t);Promise.all.bind(Promise);const MT=t=>t===void 0?null:t;class nF{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let SD=new nF,rF=!0;try{typeof localStorage<"u"&&localStorage&&(SD=localStorage,rF=!1)}catch{}const oF=SD,iF=Object.assign,kD=Object.keys,sF=(t,e)=>{for(const n in t)e(t[n],n)},TT=t=>kD(t).length,lF=t=>{for(const e in t)return!1;return!0},ED=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},aF=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),cF=(t,e)=>t===e||TT(t)===TT(e)&&ED(t,(n,r)=>(n!==void 0||aF(e,r))&&e[r]===n),uF=Object.freeze,MD=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&MD(t[e])}return uF(t)},lx=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&lx(t,e,n+1)}},dF=t=>t,fF=(t,e)=>e.includes(t);var TD={};const bc=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",AD=typeof window<"u"&&typeof document<"u"&&!bc;let bo;const hF=()=>{if(bo===void 0)if(bc){bo=Ur();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&bo.set(e,""),e=r):e!==null&&(bo.set(e,r),e=null)}e!==null&&bo.set(e,"")}else typeof location=="object"?(bo=Ur(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");bo.set(`--${vT(e,"-")}`,n),bo.set(`-${vT(e,"-")}`,n)}})):bo=Ur();return bo},S1=t=>hF().has(t),bm=t=>MT(bc?TD[t.toUpperCase().replaceAll("-","_")]:oF.getItem(t)),ND=t=>S1("--"+t)||bm(t)!==null;ND("production");const pF=bc&&fF(TD.FORCE_COLOR,["true","1","2"]),mF=pF||!S1("--no-colors")&&!ND("no-color")&&(!bc||process.stdout.isTTY)&&(!bc||S1("--color")||bm("COLORTERM")!==null||(bm("TERM")||"").includes("color")),gF=t=>new Uint8Array(t),bF=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=C$(t[n]);return btoa(e)},yF=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),vF=AD?bF:yF,wF=t=>{const e=gF(t.byteLength);return e.set(t),e},xF=t=>O$(e=>mc(e,t));class CF{constructor(e,n){this.left=e,this.right=n}}const oi=(t,e)=>new CF(t,e),SF=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const kF=t=>m$(t,(e,n)=>`${n}:${e};`).join(""),EF=t=>class{constructor(n){this._=n}destroy(){t(this._)}},MF=EF(clearTimeout),ax=(t,e)=>new MF(setTimeout(e,t)),Ei=Symbol,OD=Ei(),RD=Ei(),TF=Ei(),AF=Ei(),NF=Ei(),DD=Ei(),OF=Ei(),cx=Ei(),RF=Ei(),DF=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const o=t[r];if(o===void 0)break;if(o.constructor===String||o.constructor===Number)e.push(o);else if(o.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const o=t[r];o instanceof Symbol||n.push(o)}return n},_F={[OD]:oi("font-weight","bold"),[RD]:oi("font-weight","normal"),[TF]:oi("color","blue"),[NF]:oi("color","green"),[AF]:oi("color","grey"),[DD]:oi("color","red"),[OF]:oi("color","purple"),[cx]:oi("color","orange"),[RF]:oi("color","black")},LF=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=Ur();let o=[],i=0;for(;i<t.length;i++){const s=t[i],a=_F[s];if(a!==void 0)r.set(a.left,a.right);else{if(s===void 0)break;if(s.constructor===String||s.constructor===Number){const u=kF(r);i>0||u.length>0?(e.push("%c"+s),n.push(u)):e.push(s)}else break}}for(i>0&&(o=n,o.unshift(e.join("")));i<t.length;i++){const s=t[i];s instanceof Symbol||o.push(s)}return o},_D=mF?LF:DF,BF=(...t)=>{console.log(..._D(t)),BD.forEach(e=>e.print(t))},LD=(...t)=>{console.warn(..._D(t)),t.unshift(cx),BD.forEach(e=>e.print(t))},BD=Bl(),ID=t=>({[Symbol.iterator](){return this},next:t}),IF=(t,e)=>ID(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),ev=(t,e)=>ID(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class ux{constructor(e,n){this.clock=e,this.len=n}}class Tc{constructor(){this.clients=new Map}}const Ns=(t,e,n)=>e.clients.forEach((r,o)=>{const i=t.doc.store.clients.get(o);if(i!=null){const s=i[i.length-1],a=s.id.clock+s.length;for(let u=0,d=r[u];u<r.length&&d.clock<a;d=r[++u])WD(t,i,d.clock,d.len,n)}}),HF=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const o=wi((n+r)/2),i=t[o],s=i.clock;if(s<=e){if(e<s+i.len)return o;n=o+1}else r=o-1}return null},Ac=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&HF(n,e.clock)!==null},dx=t=>{t.clients.forEach(e=>{e.sort((o,i)=>o.clock-i.clock);let n,r;for(n=1,r=1;n<e.length;n++){const o=e[r-1],i=e[n];o.clock+o.len>=i.clock?o.len=io(o.len,i.clock+i.len-o.clock):(r<n&&(e[r]=i),r++)}e.length=r})},k1=t=>{const e=new Tc;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,o)=>{if(!e.clients.has(o)){const i=r.slice();for(let s=n+1;s<t.length;s++)b$(i,t[s].clients.get(o)||[]);e.clients.set(o,i)}});return dx(e),e},Nd=(t,e,n,r)=>{Io(t.clients,e,()=>[]).push(new ux(n,r))},HD=()=>new Tc,PD=t=>{const e=HD();return t.clients.forEach((n,r)=>{const o=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.deleted){const a=s.id.clock;let u=s.length;if(i+1<n.length)for(let d=n[i+1];i+1<n.length&&d.deleted;d=n[++i+1])u+=d.length;o.push(new ux(a,u))}}o.length>0&&e.clients.set(r,o)}),e},Nc=(t,e)=>{Qe(t.restEncoder,e.clients.size),Ts(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Qe(t.restEncoder,n);const o=r.length;Qe(t.restEncoder,o);for(let i=0;i<o;i++){const s=r[i];t.writeDsClock(s.clock),t.writeDsLen(s.len)}})},fx=t=>{const e=new Tc,n=Ye(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const o=Ye(t.restDecoder),i=Ye(t.restDecoder);if(i>0){const s=Io(e.clients,o,()=>[]);for(let a=0;a<i;a++)s.push(new ux(t.readDsClock(),t.readDsLen()))}}return e},AT=(t,e,n)=>{const r=new Tc,o=Ye(t.restDecoder);for(let i=0;i<o;i++){t.resetDsCurVal();const s=Ye(t.restDecoder),a=Ye(t.restDecoder),u=n.clients.get(s)||[],d=$t(n,s);for(let h=0;h<a;h++){const p=t.readDsClock(),g=p+t.readDsLen();if(p<d){d<g&&Nd(r,s,d,g-d);let b=Gr(u,p),v=u[b];for(!v.deleted&&v.id.clock<p&&(u.splice(b+1,0,km(e,v,p-v.id.clock)),b++);b<u.length&&(v=u[b++],v.id.clock<g);)v.deleted||(g<v.id.clock+v.length&&u.splice(b,0,km(e,v,g-v.id.clock)),v.delete(e))}else Nd(r,s,p,g-p)}}if(r.clients.size>0){const i=new Il;return Qe(i.restEncoder,0),Nc(i,r),i.toUint8Array()}return null},jD=CD;class Hs extends bD{constructor({guid:e=eF(),collectionid:n=null,gc:r=!0,gcFilter:o=()=>!0,meta:i=null,autoLoad:s=!1,shouldLoad:a=!0}={}){super(),this.gc=r,this.gcFilter=o,this.clientID=jD(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new ZD,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=a,this.autoLoad=s,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=ET(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const u=()=>ET(d=>{const h=p=>{(p===void 0||p===!0)&&(this.off("sync",h),d())};this.on("sync",h)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=u()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=u()}load(){const e=this._item;e!==null&&!this.shouldLoad&&xt(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ts(this.subdocs).map(e=>e.guid))}transact(e,n=null){return xt(this,e,n)}get(e,n=fn){const r=Io(this.share,e,()=>{const i=new n;return i._integrate(this,null),i}),o=r.constructor;if(n!==fn&&o!==n)if(o===fn){const i=new n;i._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=i}),i._start=r._start;for(let s=i._start;s!==null;s=s.right)s.parent=i;return i._length=r._length,this.share.set(e,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,ic)}getText(e=""){return this.get(e,Os)}getMap(e=""){return this.get(e,vc)}getXmlElement(e=""){return this.get(e,Pn)}getXmlFragment(e=""){return this.get(e,Hl)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Ts(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Hs({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,xt(e.parent.doc,r=>{const o=n.doc;e.deleted||r.subdocsAdded.add(o),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class VD{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Ye(this.restDecoder)}readDsLen(){return Ye(this.restDecoder)}}class zD extends VD{readLeftID(){return je(Ye(this.restDecoder),Ye(this.restDecoder))}readRightID(){return je(Ye(this.restDecoder),Ye(this.restDecoder))}readClient(){return Ye(this.restDecoder)}readInfo(){return gc(this.restDecoder)}readString(){return nc(this.restDecoder)}readParentInfo(){return Ye(this.restDecoder)===1}readTypeRef(){return Ye(this.restDecoder)}readLen(){return Ye(this.restDecoder)}readAny(){return Ad(this.restDecoder)}readBuf(){return wF(fr(this.restDecoder))}readJSON(){return JSON.parse(nc(this.restDecoder))}readKey(){return nc(this.restDecoder)}}class PF{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ye(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Ye(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class yc extends PF{constructor(e){super(e),this.keys=[],Ye(e),this.keyClockDecoder=new Q0(fr(e)),this.clientDecoder=new hp(fr(e)),this.leftClockDecoder=new Q0(fr(e)),this.rightClockDecoder=new Q0(fr(e)),this.infoDecoder=new kT(fr(e),gc),this.stringDecoder=new Y$(fr(e)),this.parentInfoDecoder=new kT(fr(e),gc),this.typeRefDecoder=new hp(fr(e)),this.lenDecoder=new hp(fr(e))}readLeftID(){return new rc(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new rc(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Ad(this.restDecoder)}readBuf(){return fr(this.restDecoder)}readJSON(){return Ad(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class UD{constructor(){this.restEncoder=Wd()}toUint8Array(){return to(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Qe(this.restEncoder,e)}writeDsLen(e){Qe(this.restEncoder,e)}}class Xd extends UD{writeLeftID(e){Qe(this.restEncoder,e.client),Qe(this.restEncoder,e.clock)}writeRightID(e){Qe(this.restEncoder,e.client),Qe(this.restEncoder,e.clock)}writeClient(e){Qe(this.restEncoder,e)}writeInfo(e){x1(this.restEncoder,e)}writeString(e){tc(this.restEncoder,e)}writeParentInfo(e){Qe(this.restEncoder,e?1:0)}writeTypeRef(e){Qe(this.restEncoder,e)}writeLen(e){Qe(this.restEncoder,e)}writeAny(e){mc(this.restEncoder,e)}writeBuf(e){dr(this.restEncoder,e)}writeJSON(e){tc(this.restEncoder,JSON.stringify(e))}writeKey(e){tc(this.restEncoder,e)}}class $D{constructor(){this.restEncoder=Wd(),this.dsCurrVal=0}toUint8Array(){return to(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Qe(this.restEncoder,n)}writeDsLen(e){e===0&&xr(),Qe(this.restEncoder,e-1),this.dsCurrVal+=e}}class Il extends $D{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new J0,this.clientEncoder=new fp,this.leftClockEncoder=new J0,this.rightClockEncoder=new J0,this.infoEncoder=new xT(x1),this.stringEncoder=new V$,this.parentInfoEncoder=new xT(x1),this.typeRefEncoder=new fp,this.lenEncoder=new fp}toUint8Array(){const e=Wd();return Qe(e,0),dr(e,this.keyClockEncoder.toUint8Array()),dr(e,this.clientEncoder.toUint8Array()),dr(e,this.leftClockEncoder.toUint8Array()),dr(e,this.rightClockEncoder.toUint8Array()),dr(e,to(this.infoEncoder)),dr(e,this.stringEncoder.toUint8Array()),dr(e,to(this.parentInfoEncoder)),dr(e,this.typeRefEncoder.toUint8Array()),dr(e,this.lenEncoder.toUint8Array()),cg(e,to(this.restEncoder)),to(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){mc(this.restEncoder,e)}writeBuf(e){dr(this.restEncoder,e)}writeJSON(e){mc(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const jF=(t,e,n,r)=>{r=io(r,e[0].id.clock);const o=Gr(e,r);Qe(t.restEncoder,e.length-o),t.writeClient(n),Qe(t.restEncoder,r);const i=e[o];i.write(t,r-i.id.clock);for(let s=o+1;s<e.length;s++)e[s].write(t,0)},hx=(t,e,n)=>{const r=new Map;n.forEach((o,i)=>{$t(e,i)>o&&r.set(i,o)}),Jd(e).forEach((o,i)=>{n.has(i)||r.set(i,0)}),Qe(t.restEncoder,r.size),Ts(r.entries()).sort((o,i)=>i[0]-o[0]).forEach(([o,i])=>{jF(t,e.clients.get(o),o,i)})},VF=(t,e)=>{const n=Ur(),r=Ye(t.restDecoder);for(let o=0;o<r;o++){const i=Ye(t.restDecoder),s=new Array(i),a=t.readClient();let u=Ye(t.restDecoder);n.set(a,{i:0,refs:s});for(let d=0;d<i;d++){const h=t.readInfo();switch(ag&h){case 0:{const p=t.readLen();s[d]=new Pr(je(a,u),p),u+=p;break}case 10:{const p=Ye(t.restDecoder);s[d]=new jr(je(a,u),p),u+=p;break}default:{const p=(h&(gi|jn))===0,g=new Mt(je(a,u),null,(h&jn)===jn?t.readLeftID():null,null,(h&gi)===gi?t.readRightID():null,p?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,p&&(h&Md)===Md?t.readString():null,y_(t,h));s[d]=g,u+=g.length}}}}return n},zF=(t,e,n)=>{const r=[];let o=Ts(n.keys()).sort((b,v)=>b-v);if(o.length===0)return null;const i=()=>{if(o.length===0)return null;let b=n.get(o[o.length-1]);for(;b.refs.length===b.i;)if(o.pop(),o.length>0)b=n.get(o[o.length-1]);else return null;return b};let s=i();if(s===null)return null;const a=new ZD,u=new Map,d=(b,v)=>{const C=u.get(b);(C==null||C>v)&&u.set(b,v)};let h=s.refs[s.i++];const p=new Map,g=()=>{for(const b of r){const v=b.id.client,C=n.get(v);C?(C.i--,a.clients.set(v,C.refs.slice(C.i)),n.delete(v),C.i=0,C.refs=[]):a.clients.set(v,[b]),o=o.filter(k=>k!==v)}r.length=0};for(;;){if(h.constructor!==jr){const v=Io(p,h.id.client,()=>$t(e,h.id.client))-h.id.clock;if(v<0)r.push(h),d(h.id.client,h.id.clock-1),g();else{const C=h.getMissing(t,e);if(C!==null){r.push(h);const k=n.get(C)||{refs:[],i:0};if(k.refs.length===k.i)d(C,$t(e,C)),g();else{h=k.refs[k.i++];continue}}else(v===0||v<h.length)&&(h.integrate(t,v),p.set(h.id.client,h.id.clock+h.length))}}if(r.length>0)h=r.pop();else if(s!==null&&s.i<s.refs.length)h=s.refs[s.i++];else{if(s=i(),s===null)break;h=s.refs[s.i++]}}if(a.clients.size>0){const b=new Il;return hx(b,a,new Map),Qe(b.restEncoder,0),{missing:u,update:b.toUint8Array()}}return null},UF=(t,e)=>hx(t,e.doc.store,e.beforeState),$F=(t,e,n,r=new yc(t))=>xt(e,o=>{o.local=!1;let i=!1;const s=o.doc,a=s.store,u=VF(r,s),d=zF(o,a,u),h=a.pendingStructs;if(h){for(const[g,b]of h.missing)if(b<$t(a,g)){i=!0;break}if(d){for(const[g,b]of d.missing){const v=h.missing.get(g);(v==null||v>b)&&h.missing.set(g,b)}h.update=vm([h.update,d.update])}}else a.pendingStructs=d;const p=AT(r,o,a);if(a.pendingDs){const g=new yc(Mc(a.pendingDs));Ye(g.restDecoder);const b=AT(g,o,a);p&&b?a.pendingDs=vm([p,b]):a.pendingDs=p||b}else a.pendingDs=p;if(i){const g=a.pendingStructs.update;a.pendingStructs=null,ym(o.doc,g)}},n,!1),ym=(t,e,n,r=yc)=>{const o=Mc(e);$F(o,t,n,new r(o))},NT=(t,e,n)=>ym(t,e,n,zD),FF=(t,e,n=new Map)=>{hx(t,e.store,n),Nc(t,PD(e.store))},GF=(t,e=new Uint8Array([0]),n=new Il)=>{const r=FD(e);FF(n,t,r);const o=[n.toUint8Array()];if(t.store.pendingDs&&o.push(t.store.pendingDs),t.store.pendingStructs&&o.push(uG(t.store.pendingStructs.update,e)),o.length>1){if(n.constructor===Xd)return aG(o.map((i,s)=>s===0?i:fG(i)));if(n.constructor===Il)return vm(o)}return o[0]},OT=(t,e)=>GF(t,e,new Xd),qF=t=>{const e=new Map,n=Ye(t.restDecoder);for(let r=0;r<n;r++){const o=Ye(t.restDecoder),i=Ye(t.restDecoder);e.set(o,i)}return e},FD=t=>qF(new VD(Mc(t))),GD=(t,e)=>(Qe(t.restEncoder,e.size),Ts(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{Qe(t.restEncoder,n),Qe(t.restEncoder,r)}),t),KF=(t,e)=>GD(t,Jd(e.store)),ZF=(t,e=new $D)=>(t instanceof Map?GD(e,t):KF(e,t),e.toUint8Array()),YF=t=>ZF(t,new UD);class WF{constructor(){this.l=[]}}const RT=()=>new WF,DT=(t,e)=>t.l.push(e),_T=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(o=>e!==o),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},qD=(t,e,n)=>lx(t.l,[e,n]);class rc{constructor(e,n){this.client=e,this.clock=n}}const Ya=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,je=(t,e)=>new rc(t,e),Od=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw xr()},Rd=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};class Dd{constructor(e,n,r,o=0){this.type=e,this.tname=n,this.item=r,this.assoc=o}}const ad=t=>new Dd(t.type==null?null:je(t.type.client,t.type.clock),t.tname??null,t.item==null?null:je(t.item.client,t.item.clock),t.assoc==null?0:t.assoc);class XF{constructor(e,n,r=0){this.type=e,this.index=n,this.assoc=r}}const JF=(t,e,n=0)=>new XF(t,e,n),Gh=(t,e,n)=>{let r=null,o=null;return t._item===null?o=Od(t):r=je(t._item.id.client,t._item.id.clock),new Dd(r,o,e,n)},tv=(t,e,n=0)=>{let r=t._start;if(n<0){if(e===0)return Gh(t,null,n);e--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>e)return Gh(t,je(r.id.client,r.id.clock+e),n);e-=r.length}if(r.right===null&&n<0)return Gh(t,r.lastId,n);r=r.right}return Gh(t,null,n)},QF=(t,e)=>{const n=oc(t,e),r=e.clock-n.id.clock;return{item:n,diff:r}},eG=(t,e,n=!0)=>{const r=e.store,o=t.item,i=t.type,s=t.tname,a=t.assoc;let u=null,d=0;if(o!==null){if($t(r,o.client)<=o.clock)return null;const h=n?A1(r,o):QF(r,o),p=h.item;if(!(p instanceof Mt))return null;if(u=p.parent,u._item===null||!u._item.deleted){d=p.deleted||!p.countable?0:h.diff+(a>=0?0:1);let g=p.left;for(;g!==null;)!g.deleted&&g.countable&&(d+=g.length),g=g.left}}else{if(s!==null)u=e.get(s);else if(i!==null){if($t(r,i.client)<=i.clock)return null;const{item:h}=n?A1(r,i):{item:oc(r,i)};if(h instanceof Mt&&h.content instanceof co)u=h.content.type;else return null}else throw xr();a>=0?d=u._length:d=0}return JF(u,d,t.assoc)},LT=(t,e)=>t===e||t!==null&&e!==null&&t.tname===e.tname&&Ya(t.item,e.item)&&Ya(t.type,e.type)&&t.assoc===e.assoc;class px{constructor(e,n){this.ds=e,this.sv=n}}const KD=(t,e)=>new px(t,e),nv=t=>KD(PD(t.store),Jd(t.store)),hl=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!Ac(e.ds,t.id),E1=(t,e)=>{const n=Io(t.meta,E1,Bl),r=t.doc.store;n.has(e)||(e.sv.forEach((o,i)=>{o<$t(r,i)&&er(t,je(i,o))}),Ns(t,e.ds,o=>{}),n.add(e))};class ZD{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Jd=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const o=n[n.length-1];e.set(r,o.id.clock+o.length)}),e},$t=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},YD=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw xr()}n.push(e)},Gr=(t,e)=>{let n=0,r=t.length-1,o=t[r],i=o.id.clock;if(i===e)return r;let s=wi(e/(i+o.length-1)*r);for(;n<=r;){if(o=t[s],i=o.id.clock,i<=e){if(e<i+o.length)return s;n=s+1}else r=s-1;s=wi((n+r)/2)}throw xr()},tG=(t,e)=>{const n=t.clients.get(e.client);return n[Gr(n,e.clock)]},oc=tG,M1=(t,e,n)=>{const r=Gr(e,n),o=e[r];return o.id.clock<n&&o instanceof Mt?(e.splice(r+1,0,km(t,o,n-o.id.clock)),r+1):r},er=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[M1(t,n,e.clock)]},BT=(t,e,n)=>{const r=e.clients.get(n.client),o=Gr(r,n.clock),i=r[o];return n.clock!==i.id.clock+i.length-1&&i.constructor!==Pr&&r.splice(o+1,0,km(t,i,n.clock-i.id.clock+1)),i},nG=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Gr(r,e.id.clock)]=n},WD=(t,e,n,r,o)=>{if(r===0)return;const i=n+r;let s=M1(t,e,n),a;do a=e[s++],i<a.id.clock+a.length&&M1(t,e,i),o(a);while(s<e.length&&e[s].id.clock<i)};class rG{constructor(e,n,r){this.doc=e,this.deleteSet=new Tc,this.beforeState=Jd(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const IT=(t,e)=>e.deleteSet.clients.size===0&&!g$(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(dx(e.deleteSet),UF(t,e),Nc(t,e.deleteSet),!0),HT=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Io(t.changed,e,Bl).add(n)},pp=(t,e)=>{let n=t[e],r=t[e-1],o=e;for(;o>0;n=r,r=t[--o-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Mt&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=e-o;return i&&t.splice(e+1-i,i),i},oG=(t,e,n)=>{for(const[r,o]of t.clients.entries()){const i=e.clients.get(r);for(let s=o.length-1;s>=0;s--){const a=o[s],u=a.clock+a.len;for(let d=Gr(i,a.clock),h=i[d];d<i.length&&h.id.clock<u;h=i[++d]){const p=i[d];if(a.clock+a.len<=p.id.clock)break;p instanceof Mt&&p.deleted&&!p.keep&&n(p)&&p.gc(e,!1)}}}},iG=(t,e)=>{t.clients.forEach((n,r)=>{const o=e.clients.get(r);for(let i=n.length-1;i>=0;i--){const s=n[i],a=mi(o.length-1,1+Gr(o,s.clock+s.len-1));for(let u=a,d=o[u];u>0&&d.id.clock>=s.clock;d=o[u])u-=1+pp(o,u)}})},XD=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,o=r.store,i=n.deleteSet,s=n._mergeStructs;try{dx(i),n.afterState=Jd(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const a=[];n.changed.forEach((u,d)=>a.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(n,u)})),a.push(()=>{n.changedParentTypes.forEach((u,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(u=u.filter(h=>h.target._item===null||!h.target._item.deleted),u.forEach(h=>{h.currentTarget=d,h._path=null}),u.sort((h,p)=>h.path.length-p.path.length),qD(d._dEH,u,n))})}),a.push(()=>r.emit("afterTransaction",[n,r])),lx(a,[]),n._needFormattingCleanup&&MG(n)}finally{r.gc&&oG(i,o,r.gcFilter),iG(i,o),n.afterState.forEach((h,p)=>{const g=n.beforeState.get(p)||0;if(g!==h){const b=o.clients.get(p),v=io(Gr(b,g),1);for(let C=b.length-1;C>=v;)C-=1+pp(b,C)}});for(let h=s.length-1;h>=0;h--){const{client:p,clock:g}=s[h].id,b=o.clients.get(p),v=Gr(b,g);v+1<b.length&&pp(b,v+1)>1||v>0&&pp(b,v)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(BF(cx,OD,"[yjs] ",RD,DD,"Changed the client-id because another client seems to be using it."),r.clientID=jD()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const h=new Xd;IT(h,n)&&r.emit("update",[h.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const h=new Il;IT(h,n)&&r.emit("updateV2",[h.toUint8Array(),n.origin,r,n])}const{subdocsAdded:a,subdocsLoaded:u,subdocsRemoved:d}=n;(a.size>0||d.size>0||u.size>0)&&(a.forEach(h=>{h.clientID=r.clientID,h.collectionid==null&&(h.collectionid=r.collectionid),r.subdocs.add(h)}),d.forEach(h=>r.subdocs.delete(h)),r.emit("subdocs",[{loaded:u,added:a,removed:d},r,n]),d.forEach(h=>h.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):XD(t,e+1)}}},xt=(t,e,n=null,r=!0)=>{const o=t._transactionCleanups;let i=!1,s=null;t._transaction===null&&(i=!0,t._transaction=new rG(t,n,r),o.push(t._transaction),o.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{s=e(t._transaction)}finally{if(i){const a=t._transaction===o[0];t._transaction=null,a&&XD(o,0)}}return s};class sG{constructor(e,n){this.insertions=n,this.deletions=e,this.meta=new Map}}const PT=(t,e,n)=>{Ns(t,n.deletions,r=>{r instanceof Mt&&e.scope.some(o=>o===t.doc||Rd(o,r))&&Cx(r,!1)})},jT=(t,e,n)=>{let r=null;const o=t.doc,i=t.scope;xt(o,a=>{for(;e.length>0&&t.currStackItem===null;){const u=o.store,d=e.pop(),h=new Set,p=[];let g=!1;Ns(a,d.insertions,b=>{if(b instanceof Mt){if(b.redone!==null){let{item:v,diff:C}=A1(u,b.id);C>0&&(v=er(a,je(v.id.client,v.id.clock+C))),b=v}!b.deleted&&i.some(v=>v===a.doc||Rd(v,b))&&p.push(b)}}),Ns(a,d.deletions,b=>{b instanceof Mt&&i.some(v=>v===a.doc||Rd(v,b))&&!Ac(d.insertions,b.id)&&h.add(b)}),h.forEach(b=>{g=b_(a,b,h,d.insertions,t.ignoreRemoteMapChanges,t)!==null||g});for(let b=p.length-1;b>=0;b--){const v=p[b];t.deleteFilter(v)&&(v.delete(a),g=!0)}t.currStackItem=g?d:null}a.changed.forEach((u,d)=>{u.has(null)&&d._searchMarker&&(d._searchMarker.length=0)}),r=a},t);const s=t.currStackItem;if(s!=null){const a=r.changedParentTypes;t.emit("stack-item-popped",[{stackItem:s,type:n,changedParentTypes:a,origin:t},t]),t.currStackItem=null}return s};class JD extends bD{constructor(e,{captureTimeout:n=500,captureTransaction:r=u=>!0,deleteFilter:o=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:s=!1,doc:a=v1(e)?e[0].doc:e instanceof Hs?e:e.doc}={}){super(),this.scope=[],this.doc=a,this.addToScope(e),this.deleteFilter=o,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=s,this.captureTimeout=n,this.afterTransactionHandler=u=>{if(!this.captureTransaction(u)||!this.scope.some(k=>u.changedParentTypes.has(k)||k===this.doc)||!this.trackedOrigins.has(u.origin)&&(!u.origin||!this.trackedOrigins.has(u.origin.constructor)))return;const d=this.undoing,h=this.redoing,p=d?this.redoStack:this.undoStack;d?this.stopCapturing():h||this.clear(!1,!0);const g=new Tc;u.afterState.forEach((k,E)=>{const T=u.beforeState.get(E)||0,N=k-T;N>0&&Nd(g,E,T,N)});const b=tF();let v=!1;if(this.lastChange>0&&b-this.lastChange<this.captureTimeout&&p.length>0&&!d&&!h){const k=p[p.length-1];k.deletions=k1([k.deletions,u.deleteSet]),k.insertions=k1([k.insertions,g])}else p.push(new sG(u.deleteSet,g)),v=!0;!d&&!h&&(this.lastChange=b),Ns(u,u.deleteSet,k=>{k instanceof Mt&&this.scope.some(E=>E===u.doc||Rd(E,k))&&Cx(k,!0)});const C=[{stackItem:p[p.length-1],origin:u.origin,type:d?"redo":"undo",changedParentTypes:u.changedParentTypes},this];v?this.emit("stack-item-added",C):this.emit("stack-item-updated",C)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){const n=new Set(this.scope);e=v1(e)?e:[e],e.forEach(r=>{n.has(r)||(n.add(r),(r instanceof fn?r.doc!==this.doc:r!==this.doc)&&LD("[yjs#509] Not same Y.Doc"),this.scope.push(r))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,n=!0){(e&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{e&&(this.undoStack.forEach(o=>PT(r,this,o)),this.undoStack=[]),n&&(this.redoStack.forEach(o=>PT(r,this,o)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=jT(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=jT(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*lG(t){const e=Ye(t.restDecoder);for(let n=0;n<e;n++){const r=Ye(t.restDecoder),o=t.readClient();let i=Ye(t.restDecoder);for(let s=0;s<r;s++){const a=t.readInfo();if(a===10){const u=Ye(t.restDecoder);yield new jr(je(o,i),u),i+=u}else if((ag&a)!==0){const u=(a&(gi|jn))===0,d=new Mt(je(o,i),null,(a&jn)===jn?t.readLeftID():null,null,(a&gi)===gi?t.readRightID():null,u?t.readParentInfo()?t.readString():t.readLeftID():null,u&&(a&Md)===Md?t.readString():null,y_(t,a));yield d,i+=d.length}else{const u=t.readLen();yield new Pr(je(o,i),u),i+=u}}}}class mx{constructor(e,n){this.gen=lG(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===jr);return this.curr}}class gx{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const aG=t=>vm(t,zD,Xd),cG=(t,e)=>{if(t.constructor===Pr){const{client:n,clock:r}=t.id;return new Pr(je(n,r+e),t.length-e)}else if(t.constructor===jr){const{client:n,clock:r}=t.id;return new jr(je(n,r+e),t.length-e)}else{const n=t,{client:r,clock:o}=n.id;return new Mt(je(r,o+e),null,je(r,o+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},vm=(t,e=yc,n=Il)=>{if(t.length===1)return t[0];const r=t.map(h=>new e(Mc(h)));let o=r.map(h=>new mx(h,!0)),i=null;const s=new n,a=new gx(s);for(;o=o.filter(g=>g.curr!==null),o.sort((g,b)=>{if(g.curr.id.client===b.curr.id.client){const v=g.curr.id.clock-b.curr.id.clock;return v===0?g.curr.constructor===b.curr.constructor?0:g.curr.constructor===jr?1:-1:v}else return b.curr.id.client-g.curr.id.client}),o.length!==0;){const h=o[0],p=h.curr.id.client;if(i!==null){let g=h.curr,b=!1;for(;g!==null&&g.id.clock+g.length<=i.struct.id.clock+i.struct.length&&g.id.client>=i.struct.id.client;)g=h.next(),b=!0;if(g===null||g.id.client!==p||b&&g.id.clock>i.struct.id.clock+i.struct.length)continue;if(p!==i.struct.id.client)hs(a,i.struct,i.offset),i={struct:g,offset:0},h.next();else if(i.struct.id.clock+i.struct.length<g.id.clock)if(i.struct.constructor===jr)i.struct.length=g.id.clock+g.length-i.struct.id.clock;else{hs(a,i.struct,i.offset);const v=g.id.clock-i.struct.id.clock-i.struct.length;i={struct:new jr(je(p,i.struct.id.clock+i.struct.length),v),offset:0}}else{const v=i.struct.id.clock+i.struct.length-g.id.clock;v>0&&(i.struct.constructor===jr?i.struct.length-=v:g=cG(g,v)),i.struct.mergeWith(g)||(hs(a,i.struct,i.offset),i={struct:g,offset:0},h.next())}}else i={struct:h.curr,offset:0},h.next();for(let g=h.curr;g!==null&&g.id.client===p&&g.id.clock===i.struct.id.clock+i.struct.length&&g.constructor!==jr;g=h.next())hs(a,i.struct,i.offset),i={struct:g,offset:0}}i!==null&&(hs(a,i.struct,i.offset),i=null),bx(a);const u=r.map(h=>fx(h)),d=k1(u);return Nc(s,d),s.toUint8Array()},uG=(t,e,n=yc,r=Il)=>{const o=FD(e),i=new r,s=new gx(i),a=new n(Mc(t)),u=new mx(a,!1);for(;u.curr;){const h=u.curr,p=h.id.client,g=o.get(p)||0;if(u.curr.constructor===jr){u.next();continue}if(h.id.clock+h.length>g)for(hs(s,h,io(g-h.id.clock,0)),u.next();u.curr&&u.curr.id.client===p;)hs(s,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===p&&u.curr.id.clock+u.curr.length<=g;)u.next()}bx(s);const d=fx(a);return Nc(i,d),i.toUint8Array()},QD=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:to(t.encoder.restEncoder)}),t.encoder.restEncoder=Wd(),t.written=0)},hs=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&QD(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Qe(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},bx=t=>{QD(t);const e=t.encoder.restEncoder;Qe(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Qe(e,r.written),cg(e,r.restEncoder)}},dG=(t,e,n,r)=>{const o=new n(Mc(t)),i=new mx(o,!1),s=new r,a=new gx(s);for(let d=i.curr;d!==null;d=i.next())hs(a,e(d),0);bx(a);const u=fx(o);return Nc(s,u),s.toUint8Array()},fG=t=>dG(t,dF,yc,Xd),VT="You must not compute changes after the event-handler fired.";class dg{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=hG(this.currentTarget,this.target))}deletes(e){return Ac(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw As(VT);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(o=>{if(o!==null){const i=n._map.get(o);let s,a;if(this.adds(i)){let u=i.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(i))if(u!==null&&this.deletes(u))s="delete",a=Y0(u.content.getContent());else return;else u!==null&&this.deletes(u)?(s="update",a=Y0(u.content.getContent())):(s="add",a=void 0)}else if(this.deletes(i))s="delete",a=Y0(i.content.getContent());else return;e.set(o,{action:s,oldValue:a})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw As(VT);const n=this.target,r=Bl(),o=Bl(),i=[];if(e={added:r,deleted:o,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let a=null;const u=()=>{a&&i.push(a)};for(let d=n._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((a===null||a.delete===void 0)&&(u(),a={delete:0}),a.delete+=d.length,o.add(d)):this.adds(d)?((a===null||a.insert===void 0)&&(u(),a={insert:[]}),a.insert=a.insert.concat(d.content.getContent()),r.add(d)):((a===null||a.retain===void 0)&&(u(),a={retain:0}),a.retain+=d.length);a!==null&&a.retain===void 0&&u()}this._changes=e}return e}}const hG=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,o=e._item.parent._start;for(;o!==e._item&&o!==null;)!o.deleted&&o.countable&&(r+=o.length),o=o.right;n.unshift(r)}e=e._item.parent}return n},_n=()=>{LD("Invalid access: Add Yjs type to a document before reading data.")},e_=80;let yx=0;class pG{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=yx++}}const mG=t=>{t.timestamp=yx++},t_=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=yx++},gG=(t,e,n)=>{if(t.length>=e_){const r=t.reduce((o,i)=>o.timestamp<i.timestamp?o:i);return t_(r,e,n),r}else{const r=new pG(e,n);return t.push(r),r}},fg=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((i,s)=>dp(e-i.index)<dp(e-s.index)?i:s);let r=t._start,o=0;for(n!==null&&(r=n.p,o=n.index,mG(n));r.right!==null&&o<e;){if(!r.deleted&&r.countable){if(e<o+r.length)break;o+=r.length}r=r.right}for(;r.left!==null&&o>e;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(o-=r.length);return n!==null&&dp(n.index-o)<r.parent.length/e_?(t_(n,r,o),n):gG(t._searchMarker,r,o)},_d=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const o=t[r];if(n>0){let i=o.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(o.index-=i.length);if(i===null||i.marker===!0){t.splice(r,1);continue}o.p=i,i.marker=!0}(e<o.index||n>0&&e===o.index)&&(o.index=io(e,o.index+n))}},hg=(t,e,n)=>{const r=t,o=e.changedParentTypes;for(;Io(o,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;qD(r._eH,n,e)};class fn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=RT(),this._dEH=RT(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw no()}clone(){throw no()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){DT(this._eH,e)}observeDeep(e){DT(this._dEH,e)}unobserve(e){_T(this._eH,e)}unobserveDeep(e){_T(this._dEH,e)}toJSON(){}}const n_=(t,e,n)=>{t.doc??_n(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const o=[];let i=t._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const s=i.content.getContent();if(s.length<=e)e-=s.length;else{for(let a=e;a<s.length&&r>0;a++)o.push(s[a]),r--;e=0}}i=i.right}return o},r_=t=>{t.doc??_n();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let o=0;o<r.length;o++)e.push(r[o])}n=n.right}return e},o_=(t,e)=>{const n=[];let r=t._start;for(;r!==null;){if(r.countable&&hl(r,e)){const o=r.content.getContent();for(let i=0;i<o.length;i++)n.push(o[i])}r=r.right}return n},Ld=(t,e)=>{let n=0,r=t._start;for(t.doc??_n();r!==null;){if(r.countable&&!r.deleted){const o=r.content.getContent();for(let i=0;i<o.length;i++)e(o[i],n++,t)}r=r.right}},i_=(t,e)=>{const n=[];return Ld(t,(r,o)=>{n.push(e(r,o,t))}),n},bG=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const o=n[r++];return n.length<=r&&(n=null),{done:!1,value:o}}}},s_=(t,e)=>{t.doc??_n();const n=fg(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},wm=(t,e,n,r)=>{let o=n;const i=t.doc,s=i.clientID,a=i.store,u=n===null?e._start:n.right;let d=[];const h=()=>{d.length>0&&(o=new Mt(je(s,$t(a,s)),o,o&&o.lastId,u,u&&u.id,e,null,new Pl(d)),o.integrate(t,0),d=[])};r.forEach(p=>{if(p===null)d.push(p);else switch(p.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(p);break;default:switch(h(),p.constructor){case Uint8Array:case ArrayBuffer:o=new Mt(je(s,$t(a,s)),o,o&&o.lastId,u,u&&u.id,e,null,new Qd(new Uint8Array(p))),o.integrate(t,0);break;case Hs:o=new Mt(je(s,$t(a,s)),o,o&&o.lastId,u,u&&u.id,e,null,new ef(p)),o.integrate(t,0);break;default:if(p instanceof fn)o=new Mt(je(s,$t(a,s)),o,o&&o.lastId,u,u&&u.id,e,null,new co(p)),o.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),h()},l_=()=>As("Length exceeded!"),a_=(t,e,n,r)=>{if(n>e._length)throw l_();if(n===0)return e._searchMarker&&_d(e._searchMarker,n,r.length),wm(t,e,null,r);const o=n,i=fg(e,n);let s=e._start;for(i!==null&&(s=i.p,n-=i.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&er(t,je(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&_d(e._searchMarker,o,r.length),wm(t,e,s,r)},yG=(t,e,n)=>{let o=(e._searchMarker||[]).reduce((i,s)=>s.index>i.index?s:i,{index:0,p:e._start}).p;if(o)for(;o.right;)o=o.right;return wm(t,e,o,n)},c_=(t,e,n,r)=>{if(r===0)return;const o=n,i=r,s=fg(e,n);let a=e._start;for(s!==null&&(a=s.p,n-=s.index);a!==null&&n>0;a=a.right)!a.deleted&&a.countable&&(n<a.length&&er(t,je(a.id.client,a.id.clock+n)),n-=a.length);for(;r>0&&a!==null;)a.deleted||(r<a.length&&er(t,je(a.id.client,a.id.clock+r)),a.delete(t),r-=a.length),a=a.right;if(r>0)throw l_();e._searchMarker&&_d(e._searchMarker,o,-i+r)},xm=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},vx=(t,e,n,r)=>{const o=e._map.get(n)||null,i=t.doc,s=i.clientID;let a;if(r==null)a=new Pl([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:a=new Pl([r]);break;case Uint8Array:a=new Qd(r);break;case Hs:a=new ef(r);break;default:if(r instanceof fn)a=new co(r);else throw new Error("Unexpected content type")}new Mt(je(s,$t(i.store,s)),o,o&&o.lastId,null,null,e,n,a).integrate(t,0)},wx=(t,e)=>{t.doc??_n();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},u_=t=>{const e={};return t.doc??_n(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},d_=(t,e)=>{t.doc??_n();const n=t._map.get(e);return n!==void 0&&!n.deleted},vG=(t,e)=>{const n={};return t._map.forEach((r,o)=>{let i=r;for(;i!==null&&(!e.sv.has(i.id.client)||i.id.clock>=(e.sv.get(i.id.client)||0));)i=i.left;i!==null&&hl(i,e)&&(n[o]=i.content.getContent()[i.length-1])}),n},qh=t=>(t.doc??_n(),IF(t._map.entries(),e=>!e[1].deleted));class wG extends dg{}class ic extends fn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new ic;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new ic}clone(){const e=new ic;return e.insert(0,this.toArray().map(n=>n instanceof fn?n.clone():n)),e}get length(){return this.doc??_n(),this._length}_callObserver(e,n){super._callObserver(e,n),hg(this,e,new wG(this,e))}insert(e,n){this.doc!==null?xt(this.doc,r=>{a_(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?xt(this.doc,n=>{yG(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?xt(this.doc,r=>{c_(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return s_(this,e)}toArray(){return r_(this)}slice(e=0,n=this.length){return n_(this,e,n)}toJSON(){return this.map(e=>e instanceof fn?e.toJSON():e)}map(e){return i_(this,e)}forEach(e){Ld(this,e)}[Symbol.iterator](){return bG(this)}_write(e){e.writeTypeRef(GG)}}const xG=t=>new ic;class CG extends dg{constructor(e,n,r){super(e,n),this.keysChanged=r}}class vc extends fn{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,o)=>{this.set(o,r)}),this._prelimContent=null}_copy(){return new vc}clone(){const e=new vc;return this.forEach((n,r)=>{e.set(r,n instanceof fn?n.clone():n)}),e}_callObserver(e,n){hg(this,e,new CG(this,e,n))}toJSON(){this.doc??_n();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const o=n.content.getContent()[n.length-1];e[r]=o instanceof fn?o.toJSON():o}}),e}get size(){return[...qh(this)].length}keys(){return ev(qh(this),e=>e[0])}values(){return ev(qh(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return ev(qh(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??_n(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?xt(this.doc,n=>{xm(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?xt(this.doc,r=>{vx(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return wx(this,e)}has(e){return d_(this,e)}clear(){this.doc!==null?xt(this.doc,e=>{this.forEach(function(n,r,o){xm(e,o,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(qG)}}const SG=t=>new vc,ys=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&cF(t,e);class T1{constructor(e,n,r,o){this.left=e,this.right=n,this.index=r,this.currentAttributes=o}forward(){switch(this.right===null&&xr(),this.right.content.constructor){case Qt:this.right.deleted||Oc(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const zT=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case Qt:e.right.deleted||Oc(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&er(t,je(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},Kh=(t,e,n,r)=>{const o=new Map,i=r?fg(e,n):null;if(i){const s=new T1(i.p.left,i.p,i.index,o);return zT(t,s,n-i.index)}else{const s=new T1(null,e._start,0,o);return zT(t,s,n)}},f_=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Qt&&ys(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const o=t.doc,i=o.clientID;r.forEach((s,a)=>{const u=n.left,d=n.right,h=new Mt(je(i,$t(o.store,i)),u,u&&u.lastId,d,d&&d.id,e,null,new Qt(a,s));h.integrate(t,0),n.right=h,n.forward()})},Oc=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},h_=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===Qt&&ys(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},p_=(t,e,n,r)=>{const o=t.doc,i=o.clientID,s=new Map;for(const a in r){const u=r[a],d=n.currentAttributes.get(a)??null;if(!ys(d,u)){s.set(a,d);const{left:h,right:p}=n;n.right=new Mt(je(i,$t(o.store,i)),h,h&&h.lastId,p,p&&p.id,e,null,new Qt(a,u)),n.right.integrate(t,0),n.forward()}}return s},rv=(t,e,n,r,o)=>{n.currentAttributes.forEach((g,b)=>{o[b]===void 0&&(o[b]=null)});const i=t.doc,s=i.clientID;h_(n,o);const a=p_(t,e,n,o),u=r.constructor===String?new so(r):r instanceof fn?new co(r):new ql(r);let{left:d,right:h,index:p}=n;e._searchMarker&&_d(e._searchMarker,n.index,u.getLength()),h=new Mt(je(s,$t(i.store,s)),d,d&&d.lastId,h,h&&h.id,e,null,u),h.integrate(t,0),n.right=h,n.index=p,n.forward(),f_(t,e,n,a)},UT=(t,e,n,r,o)=>{const i=t.doc,s=i.clientID;h_(n,o);const a=p_(t,e,n,o);e:for(;n.right!==null&&(r>0||a.size>0&&(n.right.deleted||n.right.content.constructor===Qt));){if(!n.right.deleted)switch(n.right.content.constructor){case Qt:{const{key:u,value:d}=n.right.content,h=o[u];if(h!==void 0){if(ys(h,d))a.delete(u);else{if(r===0)break e;a.set(u,d)}n.right.delete(t)}else n.currentAttributes.set(u,d);break}default:r<n.right.length&&er(t,je(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let u="";for(;r>0;r--)u+=`
`;n.right=new Mt(je(s,$t(i.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new so(u)),n.right.integrate(t,0),n.forward()}f_(t,e,n,a)},m_=(t,e,n,r,o)=>{let i=e;const s=Ur();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===Qt){const d=i.content;s.set(d.key,d)}i=i.right}let a=0,u=!1;for(;e!==i;){if(n===e&&(u=!0),!e.deleted){const d=e.content;switch(d.constructor){case Qt:{const{key:h,value:p}=d,g=r.get(h)??null;(s.get(h)!==d||g===p)&&(e.delete(t),a++,!u&&(o.get(h)??null)===p&&g!==p&&(g===null?o.delete(h):o.set(h,g))),!u&&!e.deleted&&Oc(o,d);break}}}e=e.right}return a},kG=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Qt){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},EG=t=>{let e=0;return xt(t.doc,n=>{let r=t._start,o=t._start,i=Ur();const s=y1(i);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case Qt:Oc(s,o.content);break;default:e+=m_(n,r,o,i,s),i=y1(s),r=o;break}o=o.right}}),e},MG=t=>{const e=new Set,n=t.doc;for(const[r,o]of t.afterState.entries()){const i=t.beforeState.get(r)||0;o!==i&&WD(t,n.store.clients.get(r),i,o,s=>{!s.deleted&&s.content.constructor===Qt&&s.constructor!==Pr&&e.add(s.parent)})}xt(n,r=>{Ns(t,t.deleteSet,o=>{if(o instanceof Pr||!o.parent._hasFormatting||e.has(o.parent))return;const i=o.parent;o.content.constructor===Qt?e.add(i):kG(r,o)});for(const o of e)EG(o)})},$T=(t,e,n)=>{const r=n,o=y1(e.currentAttributes),i=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case co:case ql:case so:n<e.right.length&&er(t,je(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}i&&m_(t,i,e.right,o,e.currentAttributes);const s=(e.left||e.right).parent;return s._searchMarker&&_d(s._searchMarker,e.index,-r+n),e};class TG extends dg{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];xt(e,r=>{const o=new Map,i=new Map;let s=this.target._start,a=null;const u={};let d="",h=0,p=0;const g=()=>{if(a!==null){let b=null;switch(a){case"delete":p>0&&(b={delete:p}),p=0;break;case"insert":(typeof d=="object"||d.length>0)&&(b={insert:d},o.size>0&&(b.attributes={},o.forEach((v,C)=>{v!==null&&(b.attributes[C]=v)}))),d="";break;case"retain":h>0&&(b={retain:h},lF(u)||(b.attributes=iF({},u))),h=0;break}b&&n.push(b),a=null}};for(;s!==null;){switch(s.content.constructor){case co:case ql:this.adds(s)?this.deletes(s)||(g(),a="insert",d=s.content.getContent()[0],g()):this.deletes(s)?(a!=="delete"&&(g(),a="delete"),p+=1):s.deleted||(a!=="retain"&&(g(),a="retain"),h+=1);break;case so:this.adds(s)?this.deletes(s)||(a!=="insert"&&(g(),a="insert"),d+=s.content.str):this.deletes(s)?(a!=="delete"&&(g(),a="delete"),p+=s.length):s.deleted||(a!=="retain"&&(g(),a="retain"),h+=s.length);break;case Qt:{const{key:b,value:v}=s.content;if(this.adds(s)){if(!this.deletes(s)){const C=o.get(b)??null;ys(C,v)?v!==null&&s.delete(r):(a==="retain"&&g(),ys(v,i.get(b)??null)?delete u[b]:u[b]=v)}}else if(this.deletes(s)){i.set(b,v);const C=o.get(b)??null;ys(C,v)||(a==="retain"&&g(),u[b]=C)}else if(!s.deleted){i.set(b,v);const C=u[b];C!==void 0&&(ys(C,v)?C!==null&&s.delete(r):(a==="retain"&&g(),v===null?delete u[b]:u[b]=v))}s.deleted||(a==="insert"&&g(),Oc(o,s.content));break}}s=s.right}for(g();n.length>0;){const b=n[n.length-1];if(b.retain!==void 0&&b.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Os extends fn{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??_n(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Os}clone(){const e=new Os;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new TG(this,e,n);hg(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??_n();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===so&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?xt(this.doc,r=>{const o=new T1(null,this._start,0,new Map);for(let i=0;i<e.length;i++){const s=e[i];if(s.insert!==void 0){const a=!n&&typeof s.insert=="string"&&i===e.length-1&&o.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof a!="string"||a.length>0)&&rv(r,this,o,a,s.attributes||{})}else s.retain!==void 0?UT(r,this,o,s.retain,s.attributes||{}):s.delete!==void 0&&$T(r,o,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??_n();const o=[],i=new Map,s=this.doc;let a="",u=this._start;function d(){if(a.length>0){const p={};let g=!1;i.forEach((v,C)=>{g=!0,p[C]=v});const b={insert:a};g&&(b.attributes=p),o.push(b),a=""}}const h=()=>{for(;u!==null;){if(hl(u,e)||n!==void 0&&hl(u,n))switch(u.content.constructor){case so:{const p=i.get("ychange");e!==void 0&&!hl(u,e)?(p===void 0||p.user!==u.id.client||p.type!=="removed")&&(d(),i.set("ychange",r?r("removed",u.id):{type:"removed"})):n!==void 0&&!hl(u,n)?(p===void 0||p.user!==u.id.client||p.type!=="added")&&(d(),i.set("ychange",r?r("added",u.id):{type:"added"})):p!==void 0&&(d(),i.delete("ychange")),a+=u.content.str;break}case co:case ql:{d();const p={insert:u.content.getContent()[0]};if(i.size>0){const g={};p.attributes=g,i.forEach((b,v)=>{g[v]=b})}o.push(p);break}case Qt:hl(u,e)&&(d(),Oc(i,u.content));break}u=u.right}d()};return e||n?xt(s,p=>{e&&E1(p,e),n&&E1(p,n),h()},"cleanup"):h(),o}insert(e,n,r){if(n.length<=0)return;const o=this.doc;o!==null?xt(o,i=>{const s=Kh(i,this,e,!r);r||(r={},s.currentAttributes.forEach((a,u)=>{r[u]=a})),rv(i,this,s,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const o=this.doc;o!==null?xt(o,i=>{const s=Kh(i,this,e,!r);rv(i,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?xt(r,o=>{$T(o,Kh(o,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const o=this.doc;o!==null?xt(o,i=>{const s=Kh(i,this,e,!1);s.right!==null&&UT(i,this,s,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?xt(this.doc,n=>{xm(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?xt(this.doc,r=>{vx(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return wx(this,e)}getAttributes(){return u_(this)}_write(e){e.writeTypeRef(KG)}}const AG=t=>new Os;class ov{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??_n()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Pn||n.constructor===Hl)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Hl extends fn{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Hl}clone(){const e=new Hl;return e.insert(0,this.toArray().map(n=>n instanceof fn?n.clone():n)),e}get length(){return this.doc??_n(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new ov(this,e)}querySelector(e){e=e.toUpperCase();const r=new ov(this,o=>o.nodeName&&o.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Ts(new ov(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){hg(this,e,new RG(this,n,e))}toString(){return i_(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const o=e.createDocumentFragment();return r!==void 0&&r._createAssociation(o,this),Ld(this,i=>{o.insertBefore(i.toDOM(e,n,r),null)}),o}insert(e,n){this.doc!==null?xt(this.doc,r=>{a_(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)xt(this.doc,r=>{const o=e&&e instanceof fn?e._item:e;wm(r,this,o,n)});else{const r=this._prelimContent,o=e===null?0:r.findIndex(i=>i===e)+1;if(o===0&&e!==null)throw As("Reference item not found");r.splice(o,0,...n)}}delete(e,n=1){this.doc!==null?xt(this.doc,r=>{c_(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return r_(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return s_(this,e)}slice(e=0,n=this.length){return n_(this,e,n)}forEach(e){Ld(this,e)}_write(e){e.writeTypeRef(YG)}}const NG=t=>new Hl;class Pn extends Hl{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,o)=>{this.setAttribute(o,r)}),this._prelimAttrs=null}_copy(){return new Pn(this.nodeName)}clone(){const e=new Pn(this.nodeName),n=this.getAttributes();return sF(n,(r,o)=>{typeof r=="string"&&e.setAttribute(o,r)}),e.insert(0,this.toArray().map(r=>r instanceof fn?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const a in e)r.push(a);r.sort();const o=r.length;for(let a=0;a<o;a++){const u=r[a];n.push(u+'="'+e[u]+'"')}const i=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${i}${s}>${super.toString()}</${i}>`}removeAttribute(e){this.doc!==null?xt(this.doc,n=>{xm(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?xt(this.doc,r=>{vx(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return wx(this,e)}hasAttribute(e){return d_(this,e)}getAttributes(e){return e?vG(this,e):u_(this)}toDOM(e=document,n={},r){const o=e.createElement(this.nodeName),i=this.getAttributes();for(const s in i){const a=i[s];typeof a=="string"&&o.setAttribute(s,a)}return Ld(this,s=>{o.appendChild(s.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(ZG),e.writeKey(this.nodeName)}}const OG=t=>new Pn(t.readKey());class RG extends dg{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class Cm extends vc{constructor(e){super(),this.hookName=e}_copy(){return new Cm(this.hookName)}clone(){const e=new Cm(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const o=n[this.hookName];let i;return o!==void 0?i=o.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(WG),e.writeKey(this.hookName)}}const DG=t=>new Cm(t.readKey());class yr extends Os{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new yr}clone(){const e=new yr;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const o=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(o,this),o}toString(){return this.toDelta().map(e=>{const n=[];for(const o in e.attributes){const i=[];for(const s in e.attributes[o])i.push({key:s,value:e.attributes[o][s]});i.sort((s,a)=>s.key<a.key?-1:1),n.push({nodeName:o,attrs:i})}n.sort((o,i)=>o.nodeName<i.nodeName?-1:1);let r="";for(let o=0;o<n.length;o++){const i=n[o];r+=`<${i.nodeName}`;for(let s=0;s<i.attrs.length;s++){const a=i.attrs[s];r+=` ${a.key}="${a.value}"`}r+=">"}r+=e.insert;for(let o=n.length-1;o>=0;o--)r+=`</${n[o].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(XG)}}const _G=t=>new yr;class xx{constructor(e,n){this.id=e,this.length=n}get deleted(){throw no()}mergeWith(e){return!1}write(e,n,r){throw no()}integrate(e,n){throw no()}}const LG=0;class Pr extends xx{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),YD(e.doc.store,this)}write(e,n){e.writeInfo(LG),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Qd{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Qd(this.content)}splice(e){throw no()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const BG=t=>new Qd(t.readBuf());class Bd{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Bd(this.len)}splice(e){const n=new Bd(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Nd(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const IG=t=>new Bd(t.readLen()),g_=(t,e)=>new Hs({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class ef{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new ef(g_(this.doc.guid,this.opts))}splice(e){throw no()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const HG=t=>new ef(g_(t.readString(),t.readAny()));class ql{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ql(this.embed)}splice(e){throw no()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const PG=t=>new ql(t.readJSON());class Qt{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Qt(this.key,this.value)}splice(e){throw no()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const jG=t=>new Qt(t.readKey(),t.readJSON());class Sm{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Sm(this.arr)}splice(e){const n=new Sm(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];e.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const VG=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const o=t.readString();o==="undefined"?n.push(void 0):n.push(JSON.parse(o))}return new Sm(n)},zG=bm("node_env")==="development";class Pl{constructor(e){this.arr=e,zG&&MD(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Pl(this.arr)}splice(e){const n=new Pl(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let o=n;o<r;o++){const i=this.arr[o];e.writeAny(i)}}getRef(){return 8}}const UG=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Pl(n)};class so{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new so(this.str)}splice(e){const n=new so(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",n.str="�"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const $G=t=>new so(t.readString()),FG=[xG,SG,AG,OG,NG,DG,_G],GG=0,qG=1,KG=2,ZG=3,YG=4,WG=5,XG=6;class co{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new co(this.type._copy())}splice(e){throw no()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const JG=t=>new co(FG[t.readTypeRef()](t)),A1=(t,e)=>{let n=e,r=0,o;do r>0&&(n=je(n.client,n.clock+r)),o=oc(t,n),r=n.clock-o.id.clock,n=o.redone;while(n!==null&&o instanceof Mt);return{item:o,diff:r}},Cx=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},km=(t,e,n)=>{const{client:r,clock:o}=e.id,i=new Mt(je(r,o+n),e,je(r,o+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&i.markDeleted(),e.keep&&(i.keep=!0),e.redone!==null&&(i.redone=je(e.redone.client,e.redone.clock+n)),e.right=i,i.right!==null&&(i.right.left=i),t._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),e.length=n,i},FT=(t,e)=>y$(t,n=>Ac(n.deletions,e)),b_=(t,e,n,r,o,i)=>{const s=t.doc,a=s.store,u=s.clientID,d=e.redone;if(d!==null)return er(t,d);let h=e.parent._item,p=null,g;if(h!==null&&h.deleted===!0){if(h.redone===null&&(!n.has(h)||b_(t,h,n,r,o,i)===null))return null;for(;h.redone!==null;)h=er(t,h.redone)}const b=h===null?e.parent:h.content.type;if(e.parentSub===null){for(p=e.left,g=e;p!==null;){let E=p;for(;E!==null&&E.parent._item!==h;)E=E.redone===null?null:er(t,E.redone);if(E!==null&&E.parent._item===h){p=E;break}p=p.left}for(;g!==null;){let E=g;for(;E!==null&&E.parent._item!==h;)E=E.redone===null?null:er(t,E.redone);if(E!==null&&E.parent._item===h){g=E;break}g=g.right}}else if(g=null,e.right&&!o){for(p=e;p!==null&&p.right!==null&&(p.right.redone||Ac(r,p.right.id)||FT(i.undoStack,p.right.id)||FT(i.redoStack,p.right.id));)for(p=p.right;p.redone;)p=er(t,p.redone);if(p&&p.right!==null)return null}else p=b._map.get(e.parentSub)||null;const v=$t(a,u),C=je(u,v),k=new Mt(C,p,p&&p.lastId,g,g&&g.id,b,e.parentSub,e.content.copy());return e.redone=C,Cx(k,!0),k.integrate(t,0),k};let Mt=class N1 extends xx{constructor(e,n,r,o,i,s,a,u){super(e,u.getLength()),this.origin=r,this.left=n,this.right=o,this.rightOrigin=i,this.parent=s,this.parentSub=a,this.redone=null,this.content=u,this.info=this.content.isCountable()?yT:0}set marker(e){(this.info&X0)>0!==e&&(this.info^=X0)}get marker(){return(this.info&X0)>0}get keep(){return(this.info&bT)>0}set keep(e){this.keep!==e&&(this.info^=bT)}get countable(){return(this.info&yT)>0}get deleted(){return(this.info&W0)>0}set deleted(e){this.deleted!==e&&(this.info^=W0)}markDeleted(){this.info|=W0}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=$t(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=$t(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===rc&&this.id.client!==this.parent.client&&this.parent.clock>=$t(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=BT(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=er(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Pr||this.right&&this.right.constructor===Pr)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===N1?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===N1&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===rc){const r=oc(n,this.parent);r.constructor===Pr?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=BT(e,e.doc.store,je(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,o;if(r!==null)o=r.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const i=new Set,s=new Set;for(;o!==null&&o!==this.right;){if(s.add(o),i.add(o),Ya(this.origin,o.origin)){if(o.id.client<this.id.client)r=o,i.clear();else if(Ya(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&s.has(oc(e.doc.store,o.origin)))i.has(oc(e.doc.store,o.origin))||(r=o,i.clear());else break;o=o.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),YD(e.doc.store,this),this.content.integrate(e,this),HT(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Pr(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:je(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Ya(e.origin,this.lastId)&&this.right===e&&Ya(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Nd(e.deleteSet,this.id.client,this.id.clock,this.length),HT(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw xr();this.content.gc(e),n?nG(e,this,new Pr(this.id,this.length)):this.content=new Bd(this.length)}write(e,n){const r=n>0?je(this.id.client,this.id.clock+n-1):this.origin,o=this.rightOrigin,i=this.parentSub,s=this.content.getRef()&ag|(r===null?0:jn)|(o===null?0:gi)|(i===null?0:Md);if(e.writeInfo(s),r!==null&&e.writeLeftID(r),o!==null&&e.writeRightID(o),r===null&&o===null){const a=this.parent;if(a._item!==void 0){const u=a._item;if(u===null){const d=Od(a);e.writeParentInfo(!0),e.writeString(d)}else e.writeParentInfo(!1),e.writeLeftID(u.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===rc?(e.writeParentInfo(!1),e.writeLeftID(a)):xr();i!==null&&e.writeString(i)}this.content.write(e,n)}};const y_=(t,e)=>QG[e&ag](t),QG=[()=>{xr()},IG,VG,BG,$G,PG,jG,JG,UG,HG,()=>{xr()}],eq=10;class jr extends xx{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){xr()}write(e,n){e.writeInfo(eq),Qe(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const v_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},w_="__ $YJS$ __";v_[w_]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");v_[w_]=!0;const tq=()=>{let t=!0;return(e,n)=>{if(t){t=!1;try{e()}finally{t=!0}}else n!==void 0&&n()}},nq=/[\uD800-\uDBFF]/,rq=/[\uDC00-\uDFFF]/,oq=(t,e)=>{let n=0,r=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;for(n>0&&nq.test(t[n-1])&&n--;r+n<t.length&&r+n<e.length&&t[t.length-r-1]===e[e.length-r-1];)r++;return r>0&&rq.test(t[t.length-r])&&r--,{index:n,remove:t.length-n-r,insert:e.slice(n,e.length-r)}},iq=oq,at=new ot("y-sync"),Vr=new ot("y-undo"),Gu=new ot("yjs-cursor"),Ao=(t,e)=>t>>>e|t<<32-e,sq=t=>Ao(t,2)^Ao(t,13)^Ao(t,22),lq=t=>Ao(t,6)^Ao(t,11)^Ao(t,25),aq=t=>Ao(t,7)^Ao(t,18)^t>>>3,cq=t=>Ao(t,17)^Ao(t,19)^t>>>10,uq=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),dq=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);class fq{constructor(){const e=new ArrayBuffer(320);this._H=new Uint32Array(e,0,8),this._H.set(dq),this._W=new Uint32Array(e,64,64)}_updateHash(){const e=this._H,n=this._W;for(let p=16;p<64;p++)n[p]=cq(n[p-2])+n[p-7]+aq(n[p-15])+n[p-16];let r=e[0],o=e[1],i=e[2],s=e[3],a=e[4],u=e[5],d=e[6],h=e[7];for(let p=0,g,b;p<64;p++)g=h+lq(a)+(a&u^~a&d)+uq[p]+n[p]>>>0,b=sq(r)+(r&o^r&i^o&i)>>>0,h=d,d=u,u=a,a=s+g>>>0,s=i,i=o,o=r,r=g+b>>>0;e[0]+=r,e[1]+=o,e[2]+=i,e[3]+=s,e[4]+=a,e[5]+=u,e[6]+=d,e[7]+=h}digest(e){let n=0;for(;n+56<=e.length;){let s=0;for(;s<16&&n+3<e.length;s++)this._W[s]=e[n++]<<24|e[n++]<<16|e[n++]<<8|e[n++];if(n%64!==0){for(this._W.fill(0,s,16);n<e.length;)this._W[s]|=e[n]<<(3-n%4)*8,n++;this._W[s]|=jn<<(3-n%4)*8}this._updateHash()}const r=n%64!==0;this._W.fill(0,0,16);let o=0;for(;n<e.length;o++)for(let s=3;s>=0&&n<e.length;s--)this._W[o]|=e[n++]<<s*8;r||(this._W[o-(n%4===0?0:1)]|=jn<<(3-n%4)*8),this._W[14]=e.byteLength/v$,this._W[15]=e.byteLength*8,this._updateHash();const i=new Uint8Array(32);for(let s=0;s<this._H.length;s++)for(let a=0;a<4;a++)i[s*4+a]=this._H[s]>>>(3-a)*8;return i}}const hq=t=>new fq().digest(t),pq=t=>{for(let n=6;n<t.length;n++)t[n%6]=t[n%6]^t[n];return t.slice(0,6)},mq=t=>vF(pq(hq(xF(t)))),Em=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&e.sv.get(t.id.client)>t.id.clock&&!Ac(e.ds,t.id),gq=[{light:"#ecd44433",dark:"#ecd444"}],bq=(t,e,n)=>{if(!t.has(n)){if(t.size<e.length){const r=Bl();t.forEach(o=>r.add(o)),e=e.filter(o=>!r.has(o))}t.set(n,J$(e))}return t.get(n)},yq=(t,{colors:e=gq,colorMapping:n=new Map,permanentUserData:r=null,onFirstRender:o=()=>{},mapping:i}={})=>{let s=!1;const a=new wq(t,i),u=new Ge({props:{editable:d=>{const h=at.getState(d);return h.snapshot==null&&h.prevSnapshot==null}},key:at,state:{init:(d,h)=>({type:t,doc:t.doc,binding:a,snapshot:null,prevSnapshot:null,isChangeOrigin:!1,isUndoRedoOperation:!1,addToHistory:!0,colors:e,colorMapping:n,permanentUserData:r}),apply:(d,h)=>{const p=d.getMeta(at);if(p!==void 0){h=Object.assign({},h);for(const g in p)h[g]=p[g]}return h.addToHistory=d.getMeta("addToHistory")!==!1,h.isChangeOrigin=p!==void 0&&!!p.isChangeOrigin,h.isUndoRedoOperation=p!==void 0&&!!p.isChangeOrigin&&!!p.isUndoRedoOperation,a.prosemirrorView!==null&&p!==void 0&&(p.snapshot!=null||p.prevSnapshot!=null)&&ax(0,()=>{a.prosemirrorView!=null&&(p.restore==null?a._renderSnapshot(p.snapshot,p.prevSnapshot,h):(a._renderSnapshot(p.snapshot,p.snapshot,h),delete h.restore,delete h.snapshot,delete h.prevSnapshot,a.mux(()=>{a._prosemirrorChanged(a.prosemirrorView.state.doc)})))}),h}},view:d=>(a.initView(d),i==null&&a._forceRerender(),o(),{update:()=>{const h=u.getState(d.state);if(h.snapshot==null&&h.prevSnapshot==null&&(s||d.state.doc.content.findDiffStart(d.state.doc.type.createAndFill().content)!==null)){if(s=!0,h.addToHistory===!1&&!h.isChangeOrigin){const p=Vr.getState(d.state),g=p&&p.undoManager;g&&g.stopCapturing()}a.mux(()=>{h.doc.transact(p=>{p.meta.set("addToHistory",h.addToHistory),a._prosemirrorChanged(d.state.doc)},at)})}},destroy:()=>{a.destroy()}})});return u},vq=(t,e,n)=>{if(e!==null&&e.anchor!==null&&e.head!==null)if(e.type==="all")t.setSelection(new tr(t.doc));else if(e.type==="node"){const r=Tl(n.doc,n.type,e.anchor,n.mapping);t.setSelection(ke.create(t.doc,r))}else{const r=Tl(n.doc,n.type,e.anchor,n.mapping),o=Tl(n.doc,n.type,e.head,n.mapping);if(r!==null&&o!==null){const i=xe.between(t.doc.resolve(r),t.doc.resolve(o));t.setSelection(i)}}},Mm=(t,e)=>({type:e.selection.jsonID,anchor:Hd(e.selection.anchor,t.type,t.mapping),head:Hd(e.selection.head,t.type,t.mapping)});class wq{constructor(e,n=new Map){this.type=e,this.prosemirrorView=null,this.mux=tq(),this.mapping=n,this.isOMark=new Map,this._observeFunction=this._typeChanged.bind(this),this.doc=e.doc,this.beforeTransactionSelection=null,this.beforeAllTransactions=()=>{this.beforeTransactionSelection===null&&this.prosemirrorView!=null&&(this.beforeTransactionSelection=Mm(this,this.prosemirrorView.state))},this.afterAllTransactions=()=>{this.beforeTransactionSelection=null},this._domSelectionInView=null}get _tr(){return this.prosemirrorView.state.tr.setMeta("addToHistory",!1)}_isLocalCursorInView(){return this.prosemirrorView.hasFocus()?(AD&&this._domSelectionInView===null&&(ax(0,()=>{this._domSelectionInView=null}),this._domSelectionInView=this._isDomSelectionInView()),this._domSelectionInView):!1}_isDomSelectionInView(){const e=this.prosemirrorView._root.getSelection();if(e==null||e.anchorNode==null)return!1;const n=this.prosemirrorView._root.createRange();n.setStart(e.anchorNode,e.anchorOffset),n.setEnd(e.focusNode,e.focusOffset),n.getClientRects().length===0&&n.startContainer&&n.collapsed&&n.selectNodeContents(n.startContainer);const o=n.getBoundingClientRect(),i=SF.documentElement;return o.bottom>=0&&o.right>=0&&o.left<=(window.innerWidth||i.clientWidth||0)&&o.top<=(window.innerHeight||i.clientHeight||0)}renderSnapshot(e,n){n||(n=KD(HD(),new Map)),this.prosemirrorView.dispatch(this._tr.setMeta(at,{snapshot:e,prevSnapshot:n}))}unrenderSnapshot(){this.mapping.clear(),this.mux(()=>{const e=this.type.toArray().map(r=>mp(r,this.prosemirrorView.state.schema,this)).filter(r=>r!==null),n=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(X.from(e),0,0));n.setMeta(at,{snapshot:null,prevSnapshot:null}),this.prosemirrorView.dispatch(n)})}_forceRerender(){this.mapping.clear(),this.mux(()=>{const e=this.beforeTransactionSelection!==null?null:this.prosemirrorView.state.selection,n=this.type.toArray().map(o=>mp(o,this.prosemirrorView.state.schema,this)).filter(o=>o!==null),r=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(X.from(n),0,0));if(e){const o=mi(io(e.anchor,0),r.doc.content.size),i=mi(io(e.head,0),r.doc.content.size);r.setSelection(xe.create(r.doc,o,i))}this.prosemirrorView.dispatch(r.setMeta(at,{isChangeOrigin:!0,binding:this}))})}_renderSnapshot(e,n,r){let o=this.doc,i=this.type;if(e||(e=nv(this.doc)),e instanceof Uint8Array||n instanceof Uint8Array)if((!(e instanceof Uint8Array)||!(n instanceof Uint8Array))&&xr(),o=new Hs({gc:!1}),ym(o,n),n=nv(o),ym(o,e),e=nv(o),i._item===null){const s=Array.from(this.doc.share.keys()).find(a=>this.doc.share.get(a)===this.type);i=o.getXmlFragment(s)}else{const s=o.store.clients.get(i._item.id.client)??[],a=Gr(s,i._item.id.clock);i=s[a].content.type}this.mapping.clear(),this.mux(()=>{o.transact(s=>{const a=r.permanentUserData;a&&a.dss.forEach(p=>{Ns(s,p,g=>{})});const u=(p,g)=>{const b=p==="added"?a.getUserByClientId(g.client):a.getUserByDeletedId(g);return{user:b,type:p,color:bq(r.colorMapping,r.colors,b)}},d=o_(i,new px(n.ds,e.sv)).map(p=>!p._item.deleted||Em(p._item,e)||Em(p._item,n)?mp(p,this.prosemirrorView.state.schema,{mapping:new Map,isOMark:new Map},e,n,u):null).filter(p=>p!==null),h=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(X.from(d),0,0));this.prosemirrorView.dispatch(h.setMeta(at,{isChangeOrigin:!0}))},at)})}_typeChanged(e,n){if(this.prosemirrorView==null)return;const r=at.getState(this.prosemirrorView.state);if(e.length===0||r.snapshot!=null||r.prevSnapshot!=null){this.renderSnapshot(r.snapshot,r.prevSnapshot);return}this.mux(()=>{const o=(a,u)=>this.mapping.delete(u);Ns(n,n.deleteSet,a=>{if(a.constructor===Mt){const u=a.content.type;u&&this.mapping.delete(u)}}),n.changed.forEach(o),n.changedParentTypes.forEach(o);const i=this.type.toArray().map(a=>x_(a,this.prosemirrorView.state.schema,this)).filter(a=>a!==null);let s=this._tr.replace(0,this.prosemirrorView.state.doc.content.size,new le(X.from(i),0,0));vq(s,this.beforeTransactionSelection,this),s=s.setMeta(at,{isChangeOrigin:!0,isUndoRedoOperation:n.origin instanceof JD}),this.beforeTransactionSelection!==null&&this._isLocalCursorInView()&&s.scrollIntoView(),this.prosemirrorView.dispatch(s)})}_prosemirrorChanged(e){this.doc.transact(()=>{R1(this.doc,this.type,e,this),this.beforeTransactionSelection=Mm(this,this.prosemirrorView.state)},at)}initView(e){this.prosemirrorView!=null&&this.destroy(),this.prosemirrorView=e,this.doc.on("beforeAllTransactions",this.beforeAllTransactions),this.doc.on("afterAllTransactions",this.afterAllTransactions),this.type.observeDeep(this._observeFunction)}destroy(){this.prosemirrorView!=null&&(this.prosemirrorView=null,this.type.unobserveDeep(this._observeFunction),this.doc.off("beforeAllTransactions",this.beforeAllTransactions),this.doc.off("afterAllTransactions",this.afterAllTransactions))}}const x_=(t,e,n,r,o,i)=>{const s=n.mapping.get(t);if(s===void 0){if(t instanceof Pn)return mp(t,e,n,r,o,i);throw no()}return s},mp=(t,e,n,r,o,i)=>{const s=[],a=u=>{if(u instanceof Pn){const d=x_(u,e,n,r,o,i);d!==null&&s.push(d)}else{const d=u._item.right?.content?.type;d instanceof Os&&!d._item.deleted&&d._item.id.client===d.doc.clientID&&(u.applyDelta([{retain:u.length},...d.toDelta()]),d.doc.transact(p=>{d._item.delete(p)}));const h=xq(u,e,n,r,o,i);h!==null&&h.forEach(p=>{p!==null&&s.push(p)})}};r===void 0||o===void 0?t.toArray().forEach(a):o_(t,new px(o.ds,r.sv)).forEach(a);try{const u=t.getAttributes(r);r!==void 0&&(Em(t._item,r)?Em(t._item,o)||(u.ychange=i?i("added",t._item.id):{type:"added"}):u.ychange=i?i("removed",t._item.id):{type:"removed"});const d=e.node(t.nodeName,u,s);return n.mapping.set(t,d),d}catch{return t.doc.transact(d=>{t._item.delete(d)},at),n.mapping.delete(t),null}},xq=(t,e,n,r,o,i)=>{const s=[],a=t.toDelta(r,o,i);try{for(let u=0;u<a.length;u++){const d=a[u];s.push(e.text(d.insert,Tq(d.attributes,e)))}}catch{return t.doc.transact(d=>{t._item.delete(d)},at),null}return s},Cq=(t,e)=>{const n=new yr,r=t.map(o=>({insert:o.text,attributes:k_(o.marks,e)}));return n.applyDelta(r),e.mapping.set(n,t),n},Sq=(t,e)=>{const n=new Pn(t.type.name);for(const r in t.attrs){const o=t.attrs[r];o!==null&&r!=="ychange"&&n.setAttribute(r,o)}return n.insert(0,pg(t).map(r=>O1(r,e))),e.mapping.set(n,t),n},O1=(t,e)=>t instanceof Array?Cq(t,e):Sq(t,e),GT=t=>typeof t=="object"&&t!==null,Sx=(t,e)=>{const n=Object.keys(t).filter(o=>t[o]!==null);let r=n.length===(e==null?0:Object.keys(e).filter(o=>e[o]!==null).length);for(let o=0;o<n.length&&r;o++){const i=n[o],s=t[i],a=e[i];r=i==="ychange"||s===a||GT(s)&&GT(a)&&Sx(s,a)}return r},pg=t=>{const e=t.content.content,n=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.isText){const i=[];for(let s=e[r];r<e.length&&s.isText;s=e[++r])i.push(s);r--,n.push(i)}else n.push(o)}return n},C_=(t,e)=>{const n=t.toDelta();return n.length===e.length&&n.every((r,o)=>r.insert===e[o].text&&kD(r.attributes||{}).length===e[o].marks.length&&ED(r.attributes,(i,s)=>{const a=S_(s),u=e[o].marks;return Sx(i,u.find(d=>d.type.name===a)?.attrs)}))},Id=(t,e)=>{if(t instanceof Pn&&!(e instanceof Array)&&D1(t,e)){const n=pg(e);return t._length===n.length&&Sx(t.getAttributes(),e.attrs)&&t.toArray().every((r,o)=>Id(r,n[o]))}return t instanceof yr&&e instanceof Array&&C_(t,e)},Tm=(t,e)=>t===e||t instanceof Array&&e instanceof Array&&t.length===e.length&&t.every((n,r)=>e[r]===n),qT=(t,e,n)=>{const r=t.toArray(),o=pg(e),i=o.length,s=r.length,a=mi(s,i);let u=0,d=0,h=!1;for(;u<a;u++){const p=r[u],g=o[u];if(Tm(n.mapping.get(p),g))h=!0;else if(!Id(p,g))break}for(;u+d<a;d++){const p=r[s-d-1],g=o[i-d-1];if(Tm(n.mapping.get(p),g))h=!0;else if(!Id(p,g))break}return{equalityFactor:u+d,foundMappedChild:h}},kq=t=>{let e="",n=t._start;const r={};for(;n!==null;)n.deleted||(n.countable&&n.content instanceof so?e+=n.content.str:n.content instanceof Qt&&(r[n.content.key]=null)),n=n.right;return{str:e,nAttrs:r}},Eq=(t,e,n)=>{n.mapping.set(t,e);const{nAttrs:r,str:o}=kq(t),i=e.map(d=>({insert:d.text,attributes:Object.assign({},r,k_(d.marks,n))})),{insert:s,remove:a,index:u}=iq(o,i.map(d=>d.insert).join(""));t.delete(u,a),t.insert(u,s),t.applyDelta(i.map(d=>({retain:d.insert.length,attributes:d.attributes})))},Mq=/(.*)(--[a-zA-Z0-9+/=]{8})$/,S_=t=>Mq.exec(t)?.[1]??t,Tq=(t,e)=>{const n=[];for(const r in t)n.push(e.mark(S_(r),t[r]));return n},k_=(t,e)=>{const n={};return t.forEach(r=>{if(r.type.name!=="ychange"){const o=Io(e.isOMark,r.type,()=>!r.type.excludes(r.type));n[o?`${r.type.name}--${mq(r.toJSON())}`:r.type.name]=r.attrs}}),n},R1=(t,e,n,r)=>{if(e instanceof Pn&&e.nodeName!==n.type.name)throw new Error("node name mismatch!");if(r.mapping.set(e,n),e instanceof Pn){const p=e.getAttributes(),g=n.attrs;for(const b in g)g[b]!==null?p[b]!==g[b]&&b!=="ychange"&&e.setAttribute(b,g[b]):e.removeAttribute(b);for(const b in p)g[b]===void 0&&e.removeAttribute(b)}const o=pg(n),i=o.length,s=e.toArray(),a=s.length,u=mi(i,a);let d=0,h=0;for(;d<u;d++){const p=s[d],g=o[d];if(!Tm(r.mapping.get(p),g))if(Id(p,g))r.mapping.set(p,g);else break}for(;h+d<u;h++){const p=s[a-h-1],g=o[i-h-1];if(!Tm(r.mapping.get(p),g))if(Id(p,g))r.mapping.set(p,g);else break}t.transact(()=>{for(;a-d-h>0&&i-d-h>0;){const g=s[d],b=o[d],v=s[a-h-1],C=o[i-h-1];if(g instanceof yr&&b instanceof Array)C_(g,b)||Eq(g,b,r),d+=1;else{let k=g instanceof Pn&&D1(g,b),E=v instanceof Pn&&D1(v,C);if(k&&E){const T=qT(g,b,r),N=qT(v,C,r);T.foundMappedChild&&!N.foundMappedChild?E=!1:!T.foundMappedChild&&N.foundMappedChild||T.equalityFactor<N.equalityFactor?k=!1:E=!1}k?(R1(t,g,b,r),d+=1):E?(R1(t,v,C,r),h+=1):(r.mapping.delete(e.get(d)),e.delete(d,1),e.insert(d,[O1(b,r)]),d+=1)}}const p=a-d-h;if(a===1&&i===0&&s[0]instanceof yr?(r.mapping.delete(s[0]),s[0].delete(0,s[0].length)):p>0&&(e.slice(d,d+p).forEach(g=>r.mapping.delete(g)),e.delete(d,p)),d+h<i){const g=[];for(let b=d;b<i-h;b++)g.push(O1(o[b],r));e.insert(d,g)}},at)},D1=(t,e)=>!(e instanceof Array)&&t.nodeName===e.type.name;let cd=null;const Aq=()=>{const t=cd;cd=null,t.forEach((e,n)=>{const r=n.state.tr,o=at.getState(n.state);o&&o.binding&&!o.binding.isDestroyed&&(e.forEach((i,s)=>{r.setMeta(s,i)}),n.dispatch(r))})},Nq=(t,e,n)=>{cd||(cd=new Map,ax(0,Aq)),Io(cd,t,Ur).set(e,n)},Hd=(t,e,n)=>{if(t===0)return tv(e,0,e.length===0?-1:0);let r=e._first===null?null:e._first.content.type;for(;r!==null&&e!==r;){if(r instanceof yr){if(r._length>=t)return tv(r,t,e.length===0?-1:0);if(t-=r._length,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{do r=r._item===null?null:r._item.parent,t--;while(r!==e&&r!==null&&r._item!==null&&r._item.next===null);r!==null&&r!==e&&(r=r._item===null?null:r._item.next.content.type)}}else{const o=(n.get(r)||{nodeSize:0}).nodeSize;if(r._first!==null&&t<o)r=r._first.content.type,t--;else{if(t===1&&r._length===0&&o>1)return new Dd(r._item===null?null:r._item.id,r._item===null?Od(r):null,null);if(t-=o,r._item!==null&&r._item.next!==null)r=r._item.next.content.type;else{if(t===0)return r=r._item===null?r:r._item.parent,new Dd(r._item===null?null:r._item.id,r._item===null?Od(r):null,null);do r=r._item.parent,t--;while(r!==e&&r._item.next===null);r!==e&&(r=r._item.next.content.type)}}}if(r===null)throw xr();if(t===0&&r.constructor!==yr&&r!==e)return Oq(r._item.parent,r._item)}return tv(e,e._length,e.length===0?-1:0)},Oq=(t,e)=>{let n=null,r=null;return t._item===null?r=Od(t):n=je(t._item.id.client,t._item.id.clock),new Dd(n,r,e.id)},Tl=(t,e,n,r)=>{const o=eG(n,t);if(o===null||o.type!==e&&!Rd(e,o.type._item))return null;let i=o.type,s=0;if(i.constructor===yr)s=o.index;else if(i._item===null||!i._item.deleted){let a=i._first,u=0;for(;u<i._length&&u<o.index&&a!==null;){if(!a.deleted){const d=a.content.type;u++,d instanceof yr?s+=d._length:s+=r.get(d).nodeSize}a=a.right}s+=1}for(;i!==e&&i._item!==null;){const a=i._item.parent;if(a._item===null||!a._item.deleted){s+=1;let u=a._first;for(;u!==null;){const d=u.content.type;if(d===i)break;u.deleted||(d instanceof yr?s+=d._length:s+=r.get(d).nodeSize),u=u.right}}i=a}return s-1},Rq=(t,e,n)=>t!==e,Dq=t=>{const e=document.createElement("span");e.classList.add("ProseMirror-yjs-cursor"),e.setAttribute("style",`border-color: ${t.color}`);const n=document.createElement("div");n.setAttribute("style",`background-color: ${t.color}`),n.insertBefore(document.createTextNode(t.name),null);const r=document.createTextNode("⁠"),o=document.createTextNode("⁠");return e.insertBefore(r,null),e.insertBefore(n,null),e.insertBefore(o,null),e},E_=t=>({style:`background-color: ${t.color}70`,class:"ProseMirror-yjs-selection"}),_q=/^#[0-9a-fA-F]{6}$/,KT=(t,e,n,r,o)=>{const i=at.getState(t),s=i.doc,a=[];return i.snapshot!=null||i.prevSnapshot!=null||i.binding.mapping.size===0?et.create(t.doc,[]):(e.getStates().forEach((u,d)=>{if(n(s.clientID,d,u)&&u.cursor!=null){const h=u.user||{};h.color==null?h.color="#ffa500":_q.test(h.color)||console.warn("A user uses an unsupported color format",h),h.name==null&&(h.name=`User: ${d}`);let p=Tl(s,i.type,ad(u.cursor.anchor),i.binding.mapping),g=Tl(s,i.type,ad(u.cursor.head),i.binding.mapping);if(p!==null&&g!==null){const b=io(t.doc.content.size-1,0);p=mi(p,b),g=mi(g,b),a.push(mt.widget(g,()=>r(h,d),{key:d+"",side:10}));const v=mi(p,g),C=io(p,g);a.push(mt.inline(v,C,o(h,d),{inclusiveEnd:!0,inclusiveStart:!1}))}}}),et.create(t.doc,a))},Lq=(t,{awarenessStateFilter:e=Rq,cursorBuilder:n=Dq,selectionBuilder:r=E_,getSelection:o=s=>s.selection}={},i="cursor")=>new Ge({key:Gu,state:{init(s,a){return KT(a,t,e,n,r)},apply(s,a,u,d){const h=at.getState(d),p=s.getMeta(Gu);return h&&h.isChangeOrigin||p&&p.awarenessUpdated?KT(d,t,e,n,r):a.map(s.mapping,s.doc)}},props:{decorations:s=>Gu.getState(s)},view:s=>{const a=()=>{s.docView&&Nq(s,Gu,{awarenessUpdated:!0})},u=()=>{const d=at.getState(s.state),h=t.getLocalState()||{};if(s.hasFocus()){const p=o(s.state),g=Hd(p.anchor,d.type,d.binding.mapping),b=Hd(p.head,d.type,d.binding.mapping);(h.cursor==null||!LT(ad(h.cursor.anchor),g)||!LT(ad(h.cursor.head),b))&&t.setLocalStateField(i,{anchor:g,head:b})}else h.cursor!=null&&Tl(d.doc,d.type,ad(h.cursor.anchor),d.binding.mapping)!==null&&t.setLocalStateField(i,null)};return t.on("change",a),s.dom.addEventListener("focusin",u),s.dom.addEventListener("focusout",u),{update:u,destroy:()=>{s.dom.removeEventListener("focusin",u),s.dom.removeEventListener("focusout",u),t.off("change",a),t.setLocalStateField(i,null)}}}}),Bq=t=>Vr.getState(t)?.undoManager?.undo()!=null,Iq=t=>Vr.getState(t)?.undoManager?.redo()!=null,Hq=(t,e)=>e==null?Vr.getState(t)?.undoManager?.canUndo():Bq(t),Pq=(t,e)=>e==null?Vr.getState(t)?.undoManager?.canRedo():Iq(t),jq=new Set(["paragraph"]),Vq=(t,e)=>!(t instanceof Mt)||!(t.content instanceof co)||!(t.content.type instanceof Os||t.content.type instanceof Pn&&e.has(t.content.type.nodeName))||t.content.type._length===0,zq=({protectedNodes:t=jq,trackedOrigins:e=[],undoManager:n=null}={})=>new Ge({key:Vr,state:{init:(r,o)=>{const i=at.getState(o),s=n||new JD(i.type,{trackedOrigins:new Set([at].concat(e)),deleteFilter:a=>Vq(a,t),captureTransaction:a=>a.meta.get("addToHistory")!==!1});return{undoManager:s,prevSel:null,hasUndoOps:s.undoStack.length>0,hasRedoOps:s.redoStack.length>0}},apply:(r,o,i,s)=>{const a=at.getState(s).binding,u=o.undoManager,d=u.undoStack.length>0,h=u.redoStack.length>0;return a?{undoManager:u,prevSel:Mm(a,i),hasUndoOps:d,hasRedoOps:h}:d!==o.hasUndoOps||h!==o.hasRedoOps?Object.assign({},o,{hasUndoOps:u.undoStack.length>0,hasRedoOps:u.redoStack.length>0}):o}},view:r=>{const o=at.getState(r.state),i=Vr.getState(r.state).undoManager;return i.on("stack-item-added",({stackItem:s})=>{const a=o.binding;a&&s.meta.set(a,Vr.getState(r.state).prevSel)}),i.on("stack-item-popped",({stackItem:s})=>{const a=o.binding;a&&(a.beforeTransactionSelection=s.meta.get(a)||a.beforeTransactionSelection)}),{destroy:()=>{i.destroy()}}}});function Uq(t={}){return new Ge({view(e){return new $q(e,t)}})}class $q{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,i=o.getBoundingClientRect(),s=i.width/o.offsetWidth,a=i.height/o.offsetHeight;if(n){let p=e.nodeBefore,g=e.nodeAfter;if(p||g){let b=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(b){let v=b.getBoundingClientRect(),C=p?v.bottom:v.top;p&&g&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*a;r={left:v.left,right:v.right,top:C-k,bottom:C+k}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*s;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,h=-pageYOffset;else{let p=u.getBoundingClientRect(),g=p.width/u.offsetWidth,b=p.height/u.offsetHeight;d=p.left-u.scrollLeft*g,h=p.top-u.scrollTop*b}this.element.style.left=(r.left-d)/s+"px",this.element.style.top=(r.top-h)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!i){let s=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=EO(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const Fq={slash_menu:{heading:{title:"Heading 1",subtext:"Top-level heading",aliases:["h","heading1","h1"],group:"Headings"},heading_2:{title:"Heading 2",subtext:"Key section heading",aliases:["h2","heading2","subheading"],group:"Headings"},heading_3:{title:"Heading 3",subtext:"Subsection and group heading",aliases:["h3","heading3","subheading"],group:"Headings"},heading_4:{title:"Heading 4",subtext:"Minor subsection heading",aliases:["h4","heading4","subheading4"],group:"Subheadings"},heading_5:{title:"Heading 5",subtext:"Small subsection heading",aliases:["h5","heading5","subheading5"],group:"Subheadings"},heading_6:{title:"Heading 6",subtext:"Lowest-level heading",aliases:["h6","heading6","subheading6"],group:"Subheadings"},toggle_heading:{title:"Toggle Heading 1",subtext:"Toggleable top-level heading",aliases:["h","heading1","h1","collapsable"],group:"Subheadings"},toggle_heading_2:{title:"Toggle Heading 2",subtext:"Toggleable key section heading",aliases:["h2","heading2","subheading","collapsable"],group:"Subheadings"},toggle_heading_3:{title:"Toggle Heading 3",subtext:"Toggleable subsection and group heading",aliases:["h3","heading3","subheading","collapsable"],group:"Subheadings"},quote:{title:"Quote",subtext:"Quote or excerpt",aliases:["quotation","blockquote","bq"],group:"Basic blocks"},toggle_list:{title:"Toggle List",subtext:"List with hideable sub-items",aliases:["li","list","toggleList","toggle list","collapsable list"],group:"Basic blocks"},numbered_list:{title:"Numbered List",subtext:"List with ordered items",aliases:["ol","li","list","numberedlist","numbered list"],group:"Basic blocks"},bullet_list:{title:"Bullet List",subtext:"List with unordered items",aliases:["ul","li","list","bulletlist","bullet list"],group:"Basic blocks"},check_list:{title:"Check List",subtext:"List with checkboxes",aliases:["ul","li","list","checklist","check list","checked list","checkbox"],group:"Basic blocks"},paragraph:{title:"Paragraph",subtext:"The body of your document",aliases:["p","paragraph"],group:"Basic blocks"},code_block:{title:"Code Block",subtext:"Code block with syntax highlighting",aliases:["code","pre"],group:"Basic blocks"},page_break:{title:"Page Break",subtext:"Page separator",aliases:["page","break","separator"],group:"Basic blocks"},table:{title:"Table",subtext:"Table with editable cells",aliases:["table"],group:"Advanced"},image:{title:"Image",subtext:"Resizable image with caption",aliases:["image","imageUpload","upload","img","picture","media","url"],group:"Media"},video:{title:"Video",subtext:"Resizable video with caption",aliases:["video","videoUpload","upload","mp4","film","media","url"],group:"Media"},audio:{title:"Audio",subtext:"Embedded audio with caption",aliases:["audio","audioUpload","upload","mp3","sound","media","url"],group:"Media"},file:{title:"File",subtext:"Embedded file",aliases:["file","upload","embed","media","url"],group:"Media"},emoji:{title:"Emoji",subtext:"Search for and insert an emoji",aliases:["emoji","emote","emotion","face"],group:"Others"}},placeholders:{default:"Enter text or type '/' for commands",heading:"Heading",toggleListItem:"Toggle",bulletListItem:"List",numberedListItem:"List",checkListItem:"List",emptyDocument:void 0,new_comment:"Write a comment...",edit_comment:"Edit comment...",comment_reply:"Add comment..."},file_blocks:{image:{add_button_text:"Add image"},video:{add_button_text:"Add video"},audio:{add_button_text:"Add audio"},file:{add_button_text:"Add file"}},side_menu:{add_block_label:"Add block",drag_handle_label:"Open block menu"},drag_handle:{delete_menuitem:"Delete",colors_menuitem:"Colors",header_row_menuitem:"Header row",header_column_menuitem:"Header column"},table_handle:{delete_column_menuitem:"Delete column",delete_row_menuitem:"Delete row",add_left_menuitem:"Add column left",add_right_menuitem:"Add column right",add_above_menuitem:"Add row above",add_below_menuitem:"Add row below",split_cell_menuitem:"Split cell",merge_cells_menuitem:"Merge cells",background_color_menuitem:"Background color"},suggestion_menu:{no_items_title:"No items found"},color_picker:{text_title:"Text",background_title:"Background",colors:{default:"Default",gray:"Gray",brown:"Brown",red:"Red",orange:"Orange",yellow:"Yellow",green:"Green",blue:"Blue",purple:"Purple",pink:"Pink"}},formatting_toolbar:{bold:{tooltip:"Bold",secondary_tooltip:"Mod+B"},italic:{tooltip:"Italic",secondary_tooltip:"Mod+I"},underline:{tooltip:"Underline",secondary_tooltip:"Mod+U"},strike:{tooltip:"Strike",secondary_tooltip:"Mod+Shift+S"},code:{tooltip:"Code",secondary_tooltip:""},colors:{tooltip:"Colors"},link:{tooltip:"Create link",secondary_tooltip:"Mod+K"},file_caption:{tooltip:"Edit caption",input_placeholder:"Edit caption"},file_replace:{tooltip:{image:"Replace image",video:"Replace video",audio:"Replace audio",file:"Replace file"}},file_rename:{tooltip:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"},input_placeholder:{image:"Rename image",video:"Rename video",audio:"Rename audio",file:"Rename file"}},file_download:{tooltip:{image:"Download image",video:"Download video",audio:"Download audio",file:"Download file"}},file_delete:{tooltip:{image:"Delete image",video:"Delete video",audio:"Delete audio",file:"Delete file"}},file_preview_toggle:{tooltip:"Toggle preview"},nest:{tooltip:"Nest block",secondary_tooltip:"Tab"},unnest:{tooltip:"Unnest block",secondary_tooltip:"Shift+Tab"},align_left:{tooltip:"Align text left"},align_center:{tooltip:"Align text center"},align_right:{tooltip:"Align text right"},align_justify:{tooltip:"Justify text"},table_cell_merge:{tooltip:"Merge cells"},comment:{tooltip:"Add comment"}},file_panel:{upload:{title:"Upload",file_placeholder:{image:"Upload image",video:"Upload video",audio:"Upload audio",file:"Upload file"},upload_error:"Error: Upload failed"},embed:{title:"Embed",embed_button:{image:"Embed image",video:"Embed video",audio:"Embed audio",file:"Embed file"},url_placeholder:"Enter URL"}},link_toolbar:{delete:{tooltip:"Remove link"},edit:{text:"Edit link",tooltip:"Edit"},open:{tooltip:"Open in new tab"},form:{title_placeholder:"Edit title",url_placeholder:"Edit URL"}},comments:{edited:"edited",save_button_text:"Save",cancel_button_text:"Cancel",actions:{add_reaction:"Add reaction",resolve:"Resolve",edit_comment:"Edit comment",delete_comment:"Delete comment",more_actions:"More actions"},reactions:{reacted_by:"Reacted by"},sidebar:{marked_as_resolved:"Marked as resolved",more_replies:t=>`${t} more replies`}},generic:{ctrl_shortcut:"Ctrl"}};var Gq=Object.defineProperty,qq=(t,e,n)=>e in t?Gq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e,n)=>qq(t,typeof e!="symbol"?e+"":e,n);function Kq(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function Zq(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Kq(e)}const mg=St.create({name:"uniqueID",priority:1e4,addOptions(){return{attributeName:"id",types:[],setIdAttribute:!1,generateID:()=>{if(typeof window<"u"&&window.__TEST_OPTIONS){const t=window.__TEST_OPTIONS;return t.mockID===void 0?t.mockID=0:t.mockID++,t.mockID.toString()}return ZR()},filterTransaction:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{[this.options.attributeName]:{default:null,parseHTML:t=>t.getAttribute(`data-${this.options.attributeName}`),renderHTML:t=>{const e={[`data-${this.options.attributeName}`]:t[this.options.attributeName]};return this.options.setIdAttribute?{...e,id:t[this.options.attributeName]}:e}}}}]},addProseMirrorPlugins(){let t=null,e=!1;return[new Ge({key:new ot("uniqueID"),appendTransaction:(n,r,o)=>{const i=n.some(b=>b.docChanged)&&!r.doc.eq(o.doc),s=this.options.filterTransaction&&n.some(b=>{let v,C;return!(!((C=(v=this.options).filterTransaction)===null||C===void 0)&&C.call(v,b))});if(!i||s)return;const{tr:a}=o,{types:u,attributeName:d,generateID:h}=this.options,p=jw(r.doc,n),{mapping:g}=p;if(jR(p).forEach(({newRange:b})=>{const v=HR(o.doc,b,E=>u.includes(E.type.name)),C=v.map(({node:E})=>E.attrs[d]).filter(E=>E!==null),k=Zq(C);v.forEach(({node:E,pos:T})=>{let N;const _=(N=a.doc.nodeAt(T))===null||N===void 0?void 0:N.attrs[d];if(_===null){const $=r.doc.type.createAndFill().content;if(r.doc.content.findDiffStart($)===null){const H=JSON.parse(JSON.stringify(o.doc.toJSON()));if(H.content[0].content[0].attrs.id="initialBlockId",JSON.stringify(H.content)===JSON.stringify($.toJSON())){a.setNodeMarkup(T,void 0,{...E.attrs,[d]:"initialBlockId"});return}}a.setNodeMarkup(T,void 0,{...E.attrs,[d]:h()});return}const{deleted:O}=g.invert().mapResult(T);O&&k.includes(_)&&a.setNodeMarkup(T,void 0,{...E.attrs,[d]:h()})})}),!!a.steps.length)return a},view(n){const r=o=>{let i;t=!((i=n.dom.parentElement)===null||i===void 0)&&i.contains(o.target)?n.dom.parentElement:null};return window.addEventListener("dragstart",r),{destroy(){window.removeEventListener("dragstart",r)}}},props:{handleDOMEvents:{drop:(n,r)=>{let o;return t!==n.dom.parentElement||((o=r.dataTransfer)===null||o===void 0?void 0:o.effectAllowed)==="copy"?e=!0:e=!1,t=null,!1},paste:()=>(e=!0,!1)},transformPasted:n=>{if(!e)return n;const{types:r,attributeName:o}=this.options,i=s=>{const a=[];return s.forEach(u=>{if(u.isText){a.push(u);return}if(!r.includes(u.type.name)){a.push(u.copy(i(u.content)));return}const d=u.type.create({...u.attrs,[o]:null},i(u.content),u.marks);a.push(d)}),X.from(a)};return e=!1,new le(i(n.content),n.openStart,n.openEnd)}}})]}});function ZT(t){return t.type==="link"}function M_(t){return typeof t!="string"&&t.type==="link"}function jl(t){return typeof t!="string"&&t.type==="text"}function Rs(t){var e,n,r,o,i;return Ds(t)?{...t}:Pd(t)?{type:"tableCell",content:[].concat(t.content),props:{backgroundColor:((e=t.props)==null?void 0:e.backgroundColor)??"default",textColor:((n=t.props)==null?void 0:n.textColor)??"default",textAlignment:((r=t.props)==null?void 0:r.textAlignment)??"left",colspan:((o=t.props)==null?void 0:o.colspan)??1,rowspan:((i=t.props)==null?void 0:i.rowspan)??1}}:{type:"tableCell",content:[].concat(t),props:{backgroundColor:"default",textColor:"default",textAlignment:"left",colspan:1,rowspan:1}}}function Pd(t){return t!=null&&typeof t!="string"&&!Array.isArray(t)&&t.type==="tableCell"}function Ds(t){return Pd(t)&&t.props!==void 0&&t.content!==void 0}function Vl(t){return Ds(t)?t.props.colspan??1:1}function jd(t){return Ds(t)?t.props.rowspan??1:1}class Ro extends Error{constructor(e){super(`Unreachable case: ${e}`)}}function $e(t,e=!0){const{"data-test":n,...r}=t;if(Object.keys(r).length>0&&e)throw new Error("Object must be empty "+JSON.stringify(t))}const Yq=()=>typeof navigator<"u"&&(/Mac/.test(navigator.platform)||/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent));function hr(t,e="Ctrl"){return Yq()?t.replace("Mod","⌘"):t.replace("Mod",e)}function _t(...t){return[...new Set(t.filter(e=>e).join(" ").split(" "))].join(" ")}function Cr(t,e,n,r){const o=document.createElement("div");o.className=_t("bn-block-content",n.class),o.setAttribute("data-content-type",t);for(const[s,a]of Object.entries(n))s!=="class"&&o.setAttribute(s,a);const i=document.createElement(e);i.className=_t("bn-inline-content",r.class);for(const[s,a]of Object.entries(r))s!=="class"&&i.setAttribute(s,a);return o.appendChild(i),{dom:o,contentDOM:i}}const YT=(t,e)=>{let n=Kl(t,e.pmSchema);n.type.name==="blockContainer"&&(n=n.firstChild);const r=e.pmSchema.nodes[n.type.name].spec.toDOM;if(r===void 0)throw new Error("This block has no default HTML serialization as its corresponding TipTap node doesn't implement `renderHTML`.");const o=r(n);if(typeof o!="object"||!("dom"in o))throw new Error("Cannot use this block's default HTML serialization as its corresponding TipTap node's `renderHTML` function does not return an object with the `dom` property.");return o};function Wq(t){const e=t.querySelectorAll("p");if(e.length>1){const n=e[0];for(let r=1;r<e.length;r++){const o=e[r];n.innerHTML+="<br>"+o.innerHTML,o.remove()}}}const Gt={backgroundColor:{default:"default"},textColor:{default:"default"},textAlignment:{default:"left",values:["left","center","right","justify"]}},kx=["backgroundColor","textColor"];function Am(t){return"data-"+t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function WT(t){const e=t.split("/");return!e.length||e[e.length-1]===""?t:e[e.length-1]}function tf(t){const e={};return Object.entries(t).filter(([n,r])=>!kx.includes(n)).forEach(([n,r])=>{e[n]={default:r.default,keepOnSplit:!0,parseHTML:o=>{const i=o.getAttribute(Am(n));if(i===null)return null;if(r.default===void 0&&r.type==="boolean"||r.default!==void 0&&typeof r.default=="boolean")return i==="true"?!0:i==="false"?!1:null;if(r.default===void 0&&r.type==="number"||r.default!==void 0&&typeof r.default=="number"){const s=parseFloat(i);return!Number.isNaN(s)&&Number.isFinite(s)?s:null}return i},renderHTML:o=>o[n]!==r.default?{[Am(n)]:o[n]}:{}}}),e}function gg(t,e,n,r){if(typeof t=="boolean")throw new Error("Cannot find node position as getPos is a boolean, not a function.");const o=t(),i=n.state.doc.resolve(o).node().attrs.id;if(!i)throw new Error("Block doesn't have id");const s=e.getBlock(i);if(s.type!==r)throw new Error("Block type does not match");return s}function qu(t,e,n,r,o=!1,i){const s=document.createElement("div");if(i!==void 0)for(const[a,u]of Object.entries(i))a!=="class"&&s.setAttribute(a,u);s.className=_t("bn-block-content",i?.class||""),s.setAttribute("data-content-type",e);for(const[a,u]of Object.entries(n)){const d=r[a].default;!kx.includes(a)&&u!==d&&s.setAttribute(Am(a),u)}return o&&s.setAttribute("data-file-block",""),s.appendChild(t.dom),t.contentDOM!==void 0&&(t.contentDOM.className=_t("bn-inline-content",t.contentDOM.className)),{...t,dom:s}}function kr(t){return _o.create(t)}function Ex(t,e){return{config:t,implementation:e}}function Ho(t,e,n){return Ex({type:t.name,content:t.config.content==="inline*"?"inline":t.config.content==="tableRow+"?"table":"none",propSchema:e},{node:t,requiredExtensions:n,toInternalHTML:YT,toExternalHTML:YT})}function T_(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function A_(t,e){t.stopEvent=n=>(n.type==="mousedown"&&setTimeout(()=>{e.view.dom.blur()},10),!0)}function N_(t,e){const n=[{tag:"[data-content-type="+t.type+"]",contentElement:".bn-inline-content"}];return e&&n.push({tag:"*",getAttrs(r){if(typeof r=="string")return!1;const o=e?.(r);return o===void 0?!1:o}}),n}function Rc(t,e){const n=kr({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return tf(t.propSchema)},parseHTML(){return N_(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return qu({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return({getPos:r})=>{var o;const i=this.options.editor,s=gg(r,i,this.editor,t.type),a=((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},u=e.render(s,i),d=qu(u,s.type,s.props,t.propSchema,t.isFileBlock,a);return t.isSelectable===!1&&A_(d,this.editor),d}}});if(n.name!==t.type)throw new Error("Node name does not match block type. This is a bug in BlockNote.");return Ex(t,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=e.render(r,o);return qu(a,r.type,r.props,t.propSchema,t.isFileBlock,s)},toExternalHTML:(r,o)=>{var i,s;const a=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{};let u=(s=e.toExternalHTML)==null?void 0:s.call(e,r,o);return u===void 0&&(u=e.render(r,o)),qu(u,r.type,r.props,t.propSchema,a)}})}function xi(t,e){const n=t.resolve(e);if(n.nodeAfter&&n.nodeAfter.type.isInGroup("bnBlock"))return{posBeforeNode:n.pos,node:n.nodeAfter};let r=n.depth,o=n.node(r);for(;r>0;){if(o.type.isInGroup("bnBlock"))return{posBeforeNode:n.before(r),node:o};r--,o=n.node(r)}const i=[];t.descendants((a,u)=>{a.type.isInGroup("bnBlock")&&i.push(u)}),console.warn(`Position ${e} is not within a blockContainer node.`);const s=t.resolve(i.find(a=>a>=e)||i[i.length-1]);return{posBeforeNode:s.pos,node:s.nodeAfter}}function Mx(t,e){if(!t.type.isInGroup("bnBlock"))throw new Error(`Attempted to get bnBlock node at position but found node of different type ${t.type.name}`);const n=t,r=e,o=r+n.nodeSize,i={node:n,beforePos:r,afterPos:o};if(n.type.name==="blockContainer"){let s,a;if(n.forEach((u,d)=>{if(u.type.spec.group==="blockContent"){const h=u,p=r+d+1,g=p+u.nodeSize;s={node:h,beforePos:p,afterPos:g}}else if(u.type.name==="blockGroup"){const h=u,p=r+d+1,g=p+u.nodeSize;a={node:h,beforePos:p,afterPos:g}}}),!s)throw new Error(`blockContainer node does not contain a blockContent node in its children: ${n}`);return{isBlockContainer:!0,bnBlock:i,blockContent:s,childContainer:a,blockNoteType:s.node.type.name}}else{if(!i.node.type.isInGroup("childContainer"))throw new Error(`bnBlock node is not in the childContainer group: ${i.node}`);return{isBlockContainer:!1,bnBlock:i,childContainer:i,blockNoteType:i.node.type.name}}}function _s(t){return Mx(t.node,t.posBeforeNode)}function nf(t){if(!t.nodeAfter)throw new Error(`Attempted to get blockContainer node at position ${t.pos} but a node at this position does not exist`);return Mx(t.nodeAfter,t.pos)}function Nt(t){const e=xi(t.doc,t.selection.anchor);return _s(e)}function bg(t){const e=xi(t.doc,t.selection.anchor);return _s(e)}function gn(t){return"doc"in t?t.doc.type.schema:t.type.schema}function O_(t){return t.cached.blockNoteEditor}function rf(t){return O_(t).schema}function Tx(t){return rf(t).blockSchema}function Ax(t){return rf(t).inlineContentSchema}function Dc(t){return rf(t).styleSchema}function Nx(t){return O_(t).blockCache}function R_(t,e,n){var r,o;const i={type:"tableContent",columnWidths:[],headerRows:void 0,headerCols:void 0,rows:[]},s=[];t.content.forEach((a,u,d)=>{const h={cells:[]};d===0&&a.content.forEach(p=>{let g=p.attrs.colwidth;g==null&&(g=new Array(p.attrs.colspan??1).fill(void 0)),i.columnWidths.push(...g)}),h.cells=a.content.content.map((p,g)=>(s[d]||(s[d]=[]),s[d][g]=p.type.name==="tableHeader",{type:"tableCell",content:p.content.content.map(b=>yg(b,e,n)).reduce((b,v)=>{if(!b.length)return v;const C=b[b.length-1],k=v[0];return k&&jl(C)&&jl(k)&&JSON.stringify(C.styles)===JSON.stringify(k.styles)?(C.text+=`
`+k.text,b.push(...v.slice(1)),b):(b.push(...v),b)},[]),props:{colspan:p.attrs.colspan,rowspan:p.attrs.rowspan,backgroundColor:p.attrs.backgroundColor,textColor:p.attrs.textColor,textAlignment:p.attrs.textAlignment}})),i.rows.push(h)});for(let a=0;a<s.length;a++)(r=s[a])!=null&&r.every(u=>u)&&(i.headerRows=(i.headerRows??0)+1);for(let a=0;a<((o=s[0])==null?void 0:o.length);a++)s!=null&&s.every(u=>u[a])&&(i.headerCols=(i.headerCols??0)+1);return i}function yg(t,e,n){const r=[];let o;return t.content.forEach(i=>{if(i.type.name==="hardBreak"){if(o)if(jl(o))o.text+=`
`;else if(ZT(o))o.content[o.content.length-1].text+=`
`;else throw new Error("unexpected");else o={type:"text",text:`
`,styles:{}};return}if(i.type.name!=="link"&&i.type.name!=="text"){if(!e[i.type.name]){console.warn("unrecognized inline content type",i.type.name);return}o&&(r.push(o),o=void 0),r.push(Xq(i,e,n));return}const s={};let a;for(const u of i.marks)if(u.type.name==="link")a=u;else{const d=n[u.type.name];if(!d){if(u.type.spec.blocknoteIgnore)continue;throw new Error(`style ${u.type.name} not found in styleSchema`)}if(d.propSchema==="boolean")s[d.type]=!0;else if(d.propSchema==="string")s[d.type]=u.attrs.stringValue;else throw new Ro(d.propSchema)}o?jl(o)?a?(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):JSON.stringify(o.styles)===JSON.stringify(s)?o.text+=i.textContent:(r.push(o),o={type:"text",text:i.textContent,styles:s}):ZT(o)&&(a?o.href===a.attrs.href?JSON.stringify(o.content[o.content.length-1].styles)===JSON.stringify(s)?o.content[o.content.length-1].text+=i.textContent:o.content.push({type:"text",text:i.textContent,styles:s}):(r.push(o),o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}):(r.push(o),o={type:"text",text:i.textContent,styles:s})):a?o={type:"link",href:a.attrs.href,content:[{type:"text",text:i.textContent,styles:s}]}:o={type:"text",text:i.textContent,styles:s}}),o&&r.push(o),r}function Xq(t,e,n){if(t.type.name==="text"||t.type.name==="link")throw new Error("unexpected");const r={},o=e[t.type.name];for(const[s,a]of Object.entries(t.attrs)){if(!o)throw Error("ic node is of an unrecognized type: "+t.type.name);const u=o.propSchema;s in u&&(r[s]=a)}let i;return o.content==="styled"?i=yg(t,e,n):i=void 0,{type:t.type.name,props:r,content:i}}function Bt(t,e,n=Tx(e),r=Ax(e),o=Dc(e),i=Nx(e)){var s;if(!t.type.isInGroup("bnBlock"))throw Error("Node should be a bnBlock, but is instead: "+t.type.name);const a=i?.get(t);if(a)return a;const u=Mx(t,0);let d=u.bnBlock.node.attrs.id;d===null&&(d=mg.options.generateID());const h=n[u.blockNoteType];if(!h)throw Error("Block is of an unrecognized type: "+u.blockNoteType);const p={};for(const[k,E]of Object.entries({...t.attrs,...u.isBlockContainer?u.blockContent.node.attrs:{}})){const T=h.propSchema;k in T&&!(T[k].default===void 0&&E===void 0)&&(p[k]=E)}const g=n[u.blockNoteType],b=[];(s=u.childContainer)==null||s.node.forEach(k=>{b.push(Bt(k,e,n,r,o,i))});let v;if(g.content==="inline"){if(!u.isBlockContainer)throw new Error("impossible");v=yg(u.blockContent.node,r,o)}else if(g.content==="table"){if(!u.isBlockContainer)throw new Error("impossible");v=R_(u.blockContent.node,r,o)}else if(g.content==="none")v=void 0;else throw new Ro(g.content);const C={id:d,type:g.type,props:p,content:v,children:b};return i?.set(t,C),C}function Jq(t,e,n=Tx(e),r=Ax(e),o=Dc(e),i=Nx(e)){const s=[];return t.firstChild.descendants(a=>(s.push(Bt(a,e,n,r,o,i)),!1)),s}function Qq(t,e,n=Tx(e),r=Ax(e),o=Dc(e),i=Nx(e)){function s(a,u,d){if(a.type.name!=="blockGroup")throw new Error("unexpected");const h=[];let p,g;return a.forEach((b,v,C)=>{if(b.type.name!=="blockContainer")throw new Error("unexpected");if(b.childCount===0)return;if(b.childCount===0||b.childCount>2)throw new Error("unexpected, blockContainer.childCount: "+b.childCount);const k=C===0,E=C===a.childCount-1;if(b.firstChild.type.name==="blockGroup"){if(!k)throw new Error("unexpected");const O=s(b.firstChild,Math.max(0,u-1),E?Math.max(0,d-1):0);p=O.blockCutAtStart,E&&(g=O.blockCutAtEnd),h.push(...O.blocks);return}const T=Bt(b,e,n,r,o,i),N=b.childCount>1?b.child(1):void 0;let _=[];if(N){const O=s(N,0,E?Math.max(0,d-1):0);_=O.blocks,E&&(g=O.blockCutAtEnd)}E&&!N&&d>1&&(g=T.id),k&&u>1&&(p=T.id),h.push({...T,children:_})}),{blocks:h,blockCutAtStart:p,blockCutAtEnd:g}}if(t.content.childCount===0)return{blocks:[],blockCutAtStart:void 0,blockCutAtEnd:void 0};if(t.content.childCount!==1)throw new Error("slice must be a single block, did you forget includeParents=true?");return s(t.content.firstChild,Math.max(t.openStart-1,0),Math.max(t.openEnd-1,0))}function D_(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function eK(t,e){return{config:t,implementation:e}}function pl(t,e){return eK({type:t.name,propSchema:e},{mark:t})}function __(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,n.config]))}function Ps(t){const{height:e,width:n}=Ox(t),r=new Array(e).fill(!1).map(()=>new Array(n).fill(null)),o=(i,s)=>{for(let a=i;a<e;a++)for(let u=s;u<n;u++)if(!r[a][u])return{row:a,col:u};throw new Error("Unable to create occupancy grid for table, no more available cells")};for(let i=0;i<t.content.rows.length;i++)for(let s=0;s<t.content.rows[i].cells.length;s++){const a=Rs(t.content.rows[i].cells[s]),u=jd(a),d=Vl(a),{row:h,col:p}=o(i,s);for(let g=h;g<h+u;g++)for(let b=p;b<p+d;b++){if(r[g][b])throw new Error(`Unable to create occupancy grid for table, cell at ${g},${b} is already occupied`);r[g][b]={row:i,col:s,rowspan:u,colspan:d,cell:a}}}return r}function Vd(t){const e=new Set;return t.map(n=>({cells:n.map(r=>e.has(r.row+":"+r.col)?!1:(e.add(r.row+":"+r.col),r.cell)).filter(r=>r!==!1)}))}function zl(t,e,n=Ps(e)){for(let r=0;r<n.length;r++)for(let o=0;o<n[r].length;o++){const i=n[r][o];if(i.row===t.row&&i.col===t.col)return{row:r,col:o,cell:i.cell}}throw new Error(`Unable to resolve relative table cell indices for table, cell at ${t.row},${t.col} is not occupied`)}function Ox(t){const e=t.content.rows.length;let n=0;return t.content.rows.forEach(r=>{let o=0;r.cells.forEach(i=>{o+=Vl(i)}),n=Math.max(n,o)}),{height:e,width:n}}function L_(t,e,n=Ps(e)){var r;const o=(r=n[t.row])==null?void 0:r[t.col];if(o)return{row:o.row,col:o.col,cell:o.cell}}function _1(t,e){var n;const r=Ps(t);if(e<0||e>=r.length)return[];let o=0;for(let s=0;s<e;s++){const a=(n=r[o])==null?void 0:n[0];if(!a)return[];o+=a.rowspan}const i=new Array(r[0].length).fill(!1).map((s,a)=>L_({row:o,col:a},t,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(u=>u.row===s.row&&u.col===s.col)===a)}function L1(t,e){var n;const r=Ps(t);if(e<0||e>=r[0].length)return[];let o=0;for(let s=0;s<e;s++){const a=(n=r[0])==null?void 0:n[o];if(!a)return[];o+=a.colspan}const i=new Array(r.length).fill(!1).map((s,a)=>L_({row:a,col:o},t,r)).filter(s=>s!==void 0);return i.filter((s,a)=>i.findIndex(u=>u.row===s.row&&u.col===s.col)===a)}function tK(t,e,n,r=Ps(t)){const{col:o}=zl({row:0,col:e},t,r),{col:i}=zl({row:0,col:n},t,r);return r.forEach(s=>{const[a]=s.splice(o,1);s.splice(i,0,a)}),Vd(r)}function nK(t,e,n,r=Ps(t)){const{row:o}=zl({row:e,col:0},t,r),{row:i}=zl({row:n,col:0},t,r),[s]=r.splice(o,1);return r.splice(i,0,s),Vd(r)}function B1(t){return t?Pd(t)?B1(t.content):typeof t=="string"?t.length===0:Array.isArray(t)?t.every(e=>typeof e=="string"?e.length===0:jl(e)?e.text.length===0:M_(e)?typeof e.content=="string"?e.content.length===0:e.content.every(n=>n.text.length===0):!1):!1:!0}function rK(t,e,n=Ps(t)){if(e==="columns"){let i=0;for(let s=n[0].length-1;s>=0&&n.every(a=>B1(a[s].cell)&&a[s].colspan===1);s--)i++;for(let s=n.length-1;s>=0;s--){const a=Math.max(n[s].length-i,1);n[s]=n[s].slice(0,a)}return Vd(n)}let r=0;for(let i=n.length-1;i>=0&&n[i].every(s=>B1(s.cell)&&s.rowspan===1);i--)r++;const o=Math.min(r,n.length-1);return n.splice(n.length-o,o),Vd(n)}function oK(t,e,n,r=Ps(t)){const{width:o,height:i}=Ox(t);if(e==="columns")r.forEach((s,a)=>{if(n>=0)for(let u=0;u<n;u++)s.push({row:a,col:Math.max(...s.map(d=>d.col))+1,rowspan:1,colspan:1,cell:Rs("")});else s.splice(o+n,-1*n)});else if(n>0)for(let s=0;s<n;s++){const a=new Array(o).fill(null).map((u,d)=>({row:i+s,col:d,rowspan:1,colspan:1,cell:Rs("")}));r.push(a)}else n<0&&r.splice(i+n,-1*n);return Vd(r)}function B_(t,e,n){const r=_1(t,n);if(!r.some(s=>jd(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=jd(s.cell);o=Math.max(o,s.row+a-1),i=Math.min(i,s.row)}),e<n?n===o:n===i}function I_(t,e,n){const r=L1(t,n);if(!r.some(s=>Vl(s.cell)>1))return!0;let o=n,i=n;return r.forEach(s=>{const a=Vl(s.cell);o=Math.max(o,s.col+a-1),i=Math.min(i,s.col)}),e<n?n===o:n===i}function iK(t,e,n){const r=zl(t,n),o=zl(e,n);return r.col===o.col}function XT(t,e,n,r){const o=[];for(const[i,s]of Object.entries(t.styles||{})){const a=n[i];if(!a)throw new Error(`style ${i} not found in styleSchema`);if(a.propSchema==="boolean")s&&o.push(e.mark(i));else if(a.propSchema==="string")s&&o.push(e.mark(i,{stringValue:s}));else throw new Ro(a.propSchema)}return!r||!e.nodes[r].spec.code?t.text.split(/(\n)/g).filter(i=>i.length>0).map(i=>i===`
`?e.nodes.hardBreak.createChecked():e.text(i,o)):t.text.length>0?[e.text(t.text,o)]:[]}function sK(t,e,n){const r=e.marks.link.create({href:t.href});return I1(t.content,e,n).map(o=>{if(o.type.name==="text")return o.mark([...o.marks,r]);if(o.type.name==="hardBreak")return o;throw new Error("unexpected node type")})}function I1(t,e,n,r){const o=[];if(typeof t=="string")return o.push(...XT({text:t,styles:{}},e,n,r)),o;for(const i of t)o.push(...XT(i,e,n,r));return o}function lo(t,e,n,r=Dc(e)){const o=[];for(const i of t)typeof i=="string"?o.push(...I1(i,e,r,n)):M_(i)?o.push(...sK(i,e,r)):jl(i)?o.push(...I1([i],e,r,n)):o.push(H_(i,e,r));return o}function vg(t,e,n=Dc(e)){const r=[],o=new Array(t.headerRows??0).fill(!0),i=new Array(t.headerCols??0).fill(!0),s=t.columnWidths??[];for(let a=0;a<t.rows.length;a++){const u=t.rows[a],d=[],h=o[a];for(let g=0;g<u.cells.length;g++){const b=u.cells[g],v=i[g],C=void 0;let k=null;const E=zl({row:a,col:g},{content:t});let T=s[E.col]?[s[E.col]]:null;if(b)if(typeof b=="string")k=e.text(b);else if(Pd(b)){b.content&&(k=lo(b.content,e,"tableParagraph",n));const _=Vl(b);_>1&&(T=new Array(_).fill(!1).map((O,$)=>s[E.col+$]??void 0))}else k=lo(b,e,"tableParagraph",n);const N=e.nodes[v||h?"tableHeader":"tableCell"].createChecked({...Pd(b)?b.props:{},colwidth:T},e.nodes.tableParagraph.createChecked(C,k));d.push(N)}const p=e.nodes.tableRow.createChecked({},d);r.push(p)}return r}function H_(t,e,n){let r,o=t.type;if(o===void 0&&(o="paragraph"),!e.nodes[o])throw new Error(`node type ${o} not found in schema`);if(!t.content)r=e.nodes[o].createChecked(t.props);else if(typeof t.content=="string"){const i=lo([t.content],e,o,n);r=e.nodes[o].createChecked(t.props,i)}else if(Array.isArray(t.content)){const i=lo(t.content,e,o,n);r=e.nodes[o].createChecked(t.props,i)}else if(t.content.type==="tableContent"){const i=vg(t.content,e,n);r=e.nodes[o].createChecked(t.props,i)}else throw new Ro(t.content.type);return r}function Kl(t,e,n=Dc(e)){let r=t.id;r===void 0&&(r=mg.options.generateID());const o=[];if(t.children)for(const i of t.children)o.push(Kl(i,e,n));if(!t.type||e.nodes[t.type].isInGroup("blockContent")){const i=H_(t,e,n),s=o.length>0?e.nodes.blockGroup.createChecked({},o):void 0;return e.nodes.blockContainer.createChecked({id:r,...t.props},s?[i,s]:i)}else{if(e.nodes[t.type].isInGroup("bnBlock"))return e.nodes[t.type].createChecked({id:r,...t.props},o);throw new Error(`block type ${t.type} doesn't match blockContent or bnBlock group`)}}function lK(t,e){if(e===0)return;const n=t.resolve(e);for(let r=n.depth;r>0;r--){const o=n.node(r);if(Rx(o))return o.attrs.id}}function Sr(t,e){let n,r;if(e.firstChild.descendants((o,i)=>n?!1:!Rx(o)||o.attrs.id!==t?!0:(n=o,r=i+1,!1)),!(n===void 0||r===void 0))return{node:n,posBeforeNode:r}}function Rx(t){return t.type.isInGroup("bnBlock")}function aK(t,e){return t.id!==e.id||t.type!==e.type||JSON.stringify(t.props)!==JSON.stringify(e.props)||JSON.stringify(t.content)!==JSON.stringify(e.content)}function cK(t){return t.getMeta("paste")?{type:"paste"}:t.getMeta("uiEvent")==="drop"?{type:"drop"}:t.getMeta("history$")?{type:t.getMeta("history$").redo?"redo":"undo"}:t.getMeta("y-sync$")?t.getMeta("y-sync$").isUndoRedoOperation?{type:"undo-redo"}:{type:"yjs-remote"}:{type:"local"}}function JT(t){const e={},n=gn(t);return t.descendants((r,o)=>{if(Rx(r)){const i=lK(t,o);e[r.attrs.id]={block:Bt(r,n),parentId:i}}return!0}),e}function P_(t,e=[]){const n=cK(t),r=jw(t.before,[t,...e]),o=JT(r.before),i=JT(r.doc),s=[];return Object.keys(i).filter(a=>!(a in o)).forEach(a=>{s.push({type:"insert",block:i[a].block,source:n,prevBlock:void 0})}),Object.keys(o).filter(a=>!(a in i)).forEach(a=>{s.push({type:"delete",block:o[a].block,source:n,prevBlock:void 0})}),Object.keys(i).filter(a=>a in o).forEach(a=>{var u,d;const h=o[a],p=i[a];h.parentId!==p.parentId?s.push({type:"move",block:p.block,prevBlock:h.block,source:n,prevParent:h.parentId?(u=o[h.parentId])==null?void 0:u.block:void 0,currentParent:p.parentId?(d=i[p.parentId])==null?void 0:d.block:void 0}):aK(h.block,p.block)&&s.push({type:"update",block:p.block,prevBlock:h.block,source:n})}),s}function uK(t,e,n,r="before"){const o=typeof n=="string"?n:n.id,i=gn(t),s=e.map(d=>Kl(d,i)),a=Sr(o,t.doc);if(!a)throw new Error(`Block with ID ${o} not found`);let u=a.posBeforeNode;return r==="after"&&(u+=a.node.nodeSize),t.step(new Xt(u,u,new le(X.from(s),0,0))),s.map(d=>Bt(d,i))}function QT(t,e,n){const r=gn(t),o=n.map(d=>Kl(d,r)),i=new Set(e.map(d=>typeof d=="string"?d:d.id)),s=[],a=typeof e[0]=="string"?e[0]:e[0].id;let u=0;if(t.doc.descendants((d,h)=>{if(i.size===0)return!1;if(!d.type.isInGroup("bnBlock")||!i.has(d.attrs.id))return!0;if(s.push(Bt(d,r)),i.delete(d.attrs.id),n.length>0&&d.attrs.id===a){const v=t.doc.nodeSize;t.insert(h,o);const C=t.doc.nodeSize;u+=v-C}const p=t.doc.nodeSize,g=t.doc.resolve(h-u);g.node().type.name==="blockGroup"&&g.node(g.depth-1).type.name!=="doc"&&g.node().childCount===1?t.delete(g.before(),g.after()):t.delete(h-u,h-u+d.nodeSize);const b=t.doc.nodeSize;return u+=p-b,!1}),i.size>0){const d=[...i].join(`
`);throw Error("Blocks with the following IDs could not be found in the editor: "+d)}return{insertedBlocks:o.map(d=>Bt(d,r)),removedBlocks:s}}const Dn=(t,e)=>({tr:n,dispatch:r})=>(r&&j_(n,t,e),!0);function j_(t,e,n,r,o){const i=nf(t.doc.resolve(e)),s=gn(t),a=s.nodes[i.blockNoteType],u=s.nodes[n.type||i.blockNoteType],d=u.isInGroup("bnBlock")?u:s.nodes.blockContainer;if(i.isBlockContainer&&u.isInGroup("blockContent"))eA(n,t,i),dK(n,t,a,u,i);else if(!i.isBlockContainer&&u.isInGroup("bnBlock"))eA(n,t,i);else{const h=Bt(i.bnBlock.node,s);t.replaceWith(i.bnBlock.beforePos,i.bnBlock.afterPos,Kl({children:h.children,...n},s));return}t.setNodeMarkup(i.bnBlock.beforePos,d,{...i.bnBlock.node.attrs,...n.props})}function dK(t,e,n,r,o,i,s){const a=gn(e);let u="keep";if(t.content)if(typeof t.content=="string")u=lo([t.content],a,r.name);else if(Array.isArray(t.content))u=lo(t.content,a,r.name);else if(t.content.type==="tableContent")u=vg(t.content,a);else throw new Ro(t.content.type);else n.spec.content===""||r.spec.content!==n.spec.content&&(u=[]);u==="keep"?e.setNodeMarkup(o.blockContent.beforePos,r,{...o.blockContent.node.attrs,...t.props}):e.replaceWith(o.blockContent.beforePos,o.blockContent.afterPos,r.createChecked({...o.blockContent.node.attrs,...t.props},u))}function eA(t,e,n){const r=gn(e);if(t.children!==void 0&&t.children.length>0){const o=t.children.map(i=>Kl(i,r));if(n.childContainer)e.step(new Xt(n.childContainer.beforePos+1,n.childContainer.afterPos-1,new le(X.from(o),0,0)));else{if(!n.isBlockContainer)throw new Error("impossible");e.insert(n.blockContent.afterPos,r.nodes.blockGroup.createChecked({},o))}}}function fK(t,e,n,r,o){const i=typeof e=="string"?e:e.id,s=Sr(i,t.doc);if(!s)throw new Error(`Block with ID ${i} not found`);j_(t,s.posBeforeNode,n);const a=t.doc.resolve(s.posBeforeNode+1).node(),u=gn(t);return Bt(a,u)}function V_(t){const e=Array.from(t.classList).filter(n=>!n.startsWith("bn-"))||[];e.length>0?t.className=e.join(" "):t.removeAttribute("class")}function z_(t,e,n,r){let o;if(e)if(typeof e=="string")o=lo([e],t.pmSchema);else if(Array.isArray(e))o=lo(e,t.pmSchema);else if(e.type==="tableContent")o=vg(e,t.pmSchema);else throw new Ro(e.type);else throw new Error("blockContent is required");const i=n.serializeFragment(X.from(o),r);return i.nodeType===1&&V_(i),i}function hK(t,e,n,r,o,i,s){var a,u,d,h,p,g,b,v;const C=s?.document??document,k=e.pmSchema.nodes.blockContainer;let E=n.props;if(!n.props){E={};for(const[H,P]of Object.entries(e.schema.blockSchema[n.type].propSchema))P.default!==void 0&&(E[H]=P.default)}const T=(u=(a=k.spec)==null?void 0:a.toDOM)==null?void 0:u.call(a,k.create({id:n.id,...E})),N=Array.from(T.dom.attributes),_=e.blockImplementations[n.type].implementation.toExternalHTML({...n,props:E},e),O=C.createDocumentFragment();if(_.dom.classList.contains("bn-block-content")){const H=[...N,...Array.from(_.dom.attributes)].filter(P=>P.name.startsWith("data")&&P.name!=="data-content-type"&&P.name!=="data-file-block"&&P.name!=="data-node-view-wrapper"&&P.name!=="data-node-type"&&P.name!=="data-id"&&P.name!=="data-index"&&P.name!=="data-editable");for(const P of H)_.dom.firstChild.setAttribute(P.name,P.value);V_(_.dom.firstChild),O.append(...Array.from(_.dom.childNodes))}else O.append(_.dom);if(_.contentDOM&&n.content){const H=z_(e,n.content,r,s);_.contentDOM.appendChild(H)}let $;if(o.has(n.type)?$="OL":i.has(n.type)&&($="UL"),$){if(((d=t.lastChild)==null?void 0:d.nodeName)!==$){const P=C.createElement($);$==="OL"&&E!=null&&E.start&&E?.start!==1&&P.setAttribute("start",E.start+""),t.append(P)}const H=C.createElement("li");H.append(O),t.lastChild.appendChild(H)}else t.append(O);if(n.children&&n.children.length>0){const H=C.createDocumentFragment();if(U_(H,e,n.children,r,o,i,s),((h=t.lastChild)==null?void 0:h.nodeName)==="UL"||((p=t.lastChild)==null?void 0:p.nodeName)==="OL")for(;((g=H.firstChild)==null?void 0:g.nodeName)==="UL"||((b=H.firstChild)==null?void 0:b.nodeName)==="OL";)t.lastChild.lastChild.appendChild(H.firstChild);e.pmSchema.nodes[n.type].isInGroup("blockContent")?t.append(H):(v=_.contentDOM)==null||v.append(H)}}const U_=(t,e,n,r,o,i,s)=>{for(const a of n)hK(t,e,a,r,o,i,s)},pK=(t,e,n,r,o,i)=>{const s=(i?.document??document).createDocumentFragment();return U_(s,t,e,n,r,o,i),s},wg=(t,e)=>{const n=ki.fromSchema(t);return{exportBlocks:(r,o)=>{const i=pK(e,r,n,new Set(["numberedListItem"]),new Set(["bulletListItem","checkListItem"]),o),s=document.createElement("div");return s.append(i),s.innerHTML},exportInlineContent:(r,o)=>{const i=z_(e,r,n,o),s=document.createElement("div");return s.append(i.cloneNode(!0)),s.innerHTML}}};function mK(t,e,n,r,o){let i;if(e)if(typeof e=="string")i=lo([e],t.pmSchema,r);else if(Array.isArray(e))i=lo(e,t.pmSchema,r);else if(e.type==="tableContent")i=vg(e,t.pmSchema);else throw new Ro(e.type);else throw new Error("blockContent is required");return n.serializeFragment(X.from(i),o)}function gK(t,e,n,r,o){var i,s,a,u,d;const h=t.pmSchema.nodes.blockContainer;let p=e.props;if(!e.props){p={};for(const[v,C]of Object.entries(t.schema.blockSchema[e.type].propSchema))C.default!==void 0&&(p[v]=C.default)}const g=t.blockImplementations[e.type].implementation.toInternalHTML({...e,props:p},t);if(e.type==="numberedListItem"&&g.dom.setAttribute("data-index",r.toString()),g.contentDOM&&e.content){const v=mK(t,e.content,n,e.type,o);g.contentDOM.appendChild(v)}if(t.pmSchema.nodes[e.type].isInGroup("bnBlock")){if(e.children&&e.children.length>0){const v=$_(t,e.children,n,o);(i=g.contentDOM)==null||i.append(v)}return g.dom}const b=(a=(s=h.spec)==null?void 0:s.toDOM)==null?void 0:a.call(s,h.create({id:e.id,...p}));return(u=b.contentDOM)==null||u.appendChild(g.dom),e.children&&e.children.length>0&&((d=b.contentDOM)==null||d.appendChild(F_(t,e.children,n,o))),b.dom}function $_(t,e,n,r){const o=(r?.document??document).createDocumentFragment();let i=0;for(const s of e){s.type==="numberedListItem"?i++:i=0;const a=gK(t,s,n,i,r);o.appendChild(a)}return o}const F_=(t,e,n,r)=>{var o;const i=t.pmSchema.nodes.blockGroup,s=i.spec.toDOM(i.create({})),a=$_(t,e,n,r);return(o=s.contentDOM)==null||o.appendChild(a),s.dom},bK=(t,e)=>{const n=ki.fromSchema(t);return{serializeBlocks:(r,o)=>F_(e,r,n,o).outerHTML}},xg=(t,e)=>{const n=t.querySelector(e);if(!n)return;const r=t.querySelector("figcaption"),o=r?.textContent??void 0;return{targetElement:n,caption:o}},yK=(t,e,n,r)=>{const o=document.createElement("div");o.className="bn-add-file-button";const i=document.createElement("div");i.className="bn-add-file-button-icon",r?i.appendChild(r):i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',o.appendChild(i);const s=document.createElement("p");s.className="bn-add-file-button-text",s.innerHTML=n||e.dictionary.file_blocks.file.add_button_text,o.appendChild(s);const a=d=>{d.preventDefault()},u=()=>{e.transact(d=>d.setMeta(e.filePanel.plugins[0],{block:t}))};return o.addEventListener("mousedown",a,!0),o.addEventListener("click",u,!0),{dom:o,destroy:()=>{o.removeEventListener("mousedown",a,!0),o.removeEventListener("click",u,!0)}}},vK='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"></path></svg>',wK=t=>{const e=document.createElement("div");e.className="bn-file-name-with-icon";const n=document.createElement("div");n.className="bn-file-icon",n.innerHTML=vK,e.appendChild(n);const r=document.createElement("p");return r.className="bn-file-name",r.textContent=t.props.name,e.appendChild(r),{dom:e}},Dx=(t,e,n,r,o)=>{const i=document.createElement("div");if(i.className="bn-file-block-content-wrapper",t.props.url===""){const a=yK(t,e,r,o);i.appendChild(a.dom);const u=e.onUploadStart(d=>{if(d===t.id){i.removeChild(a.dom);const h=document.createElement("div");h.className="bn-file-loading-preview",h.textContent="Loading...",i.appendChild(h)}});return{dom:i,destroy:()=>{u(),a.destroy()}}}const s={dom:i};if(t.props.showPreview===!1||!n){const a=wK(t);i.appendChild(a.dom),s.destroy=()=>{var u;(u=a.destroy)==null||u.call(a)}}else i.appendChild(n.dom);if(t.props.caption){const a=document.createElement("p");a.className="bn-file-caption",a.textContent=t.props.caption,i.appendChild(a)}return s},_x=(t,e)=>{const n=document.createElement("figure"),r=document.createElement("figcaption");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},Cg=(t,e)=>{const n=document.createElement("div"),r=document.createElement("p");return r.textContent=e,n.appendChild(t),n.appendChild(r),{dom:n}},tA=t=>({url:t.src||void 0}),xK='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"></path></svg>',CK={backgroundColor:Gt.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0}},G_={type:"audio",propSchema:CK,content:"none",isFileBlock:!0,fileBlockAccept:["audio/*"]},SK=(t,e)=>{const n=document.createElement("div");n.innerHTML=xK;const r=document.createElement("audio");return r.className="bn-audio",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(o=>{r.src=o}):r.src=t.props.url,r.controls=!0,r.contentEditable="false",r.draggable=!1,Dx(t,e,{dom:r},e.dictionary.file_blocks.audio.add_button_text,n.firstElementChild)},q_=t=>{if(t.tagName==="AUDIO")return t.closest("figure")?void 0:tA(t);if(t.tagName==="FIGURE"){const e=xg(t,"audio");if(!e)return;const{targetElement:n,caption:r}=e;return{...tA(n),caption:r}}},kK=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add audio",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("audio"),e.src=t.props.url):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?_x(e,t.props.caption):Cg(e,t.props.caption):{dom:e}},EK=Rc(G_,{render:SK,parse:q_,toExternalHTML:kK}),nA=Symbol.for("blocknote.shikiParser"),iv=Symbol.for("blocknote.shikiHighlighterPromise"),MK={language:{default:"text"}},TK=kr({name:"codeBlock",content:"inline*",group:"blockContent",marks:"insertion deletion modification",code:!0,defining:!0,addOptions(){return{defaultLanguage:"text",indentLineWithTab:!0,supportedLanguages:{}}},addAttributes(){const t=this.options;return{language:{default:t.editor.settings.codeBlock.defaultLanguage,parseHTML:e=>{let n=e,r=null;n?.tagName==="DIV"&&n?.dataset.contentType==="codeBlock"&&(n=n.children[0]),n?.tagName==="PRE"&&(n=n?.children[0]);const o=n?.getAttribute("data-language");if(o)r=o.toLowerCase();else{const i=[...n?.className.split(" ")||[]].filter(s=>s.startsWith("language-")).map(s=>s.replace("language-",""));i.length>0&&(r=i[0].toLowerCase())}return r?sv(t.editor.settings.codeBlock,r)??r:null},renderHTML:e=>e.language?{class:`language-${e.language}`,"data-language":e.language}:{}}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"pre",preserveWhitespace:"full"}]},renderHTML({HTMLAttributes:t}){var e,n;const r=document.createElement("pre"),{dom:o,contentDOM:i}=Cr(this.name,"code",((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},{...((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{},...t});return o.removeChild(i),o.appendChild(r),r.appendChild(i),{dom:o,contentDOM:i}},addNodeView(){const t=this.options;return({editor:e,node:n,getPos:r,HTMLAttributes:o})=>{var i,s;const a=document.createElement("pre"),u=document.createElement("select"),d=document.createElement("div"),{dom:h,contentDOM:p}=Cr(this.name,"code",{...((i=this.options.domAttributes)==null?void 0:i.blockContent)||{},...o},((s=this.options.domAttributes)==null?void 0:s.inlineContent)||{}),g=b=>{const v=b.target.value;e.commands.command(({tr:C})=>(C.setNodeAttribute(r(),"language",v),!0))};return Object.entries(t.editor.settings.codeBlock.supportedLanguages).forEach(([b,{name:v}])=>{const C=document.createElement("option");C.value=b,C.text=v,u.appendChild(C)}),d.contentEditable="false",u.value=n.attrs.language||t.editor.settings.codeBlock.defaultLanguage,h.removeChild(p),h.appendChild(d),h.appendChild(a),a.appendChild(p),d.appendChild(u),u.addEventListener("change",g),{dom:h,contentDOM:p,update:b=>b.type===this.type,destroy:()=>{u.removeEventListener("change",g)}}}},addProseMirrorPlugins(){const t=this.options,e=globalThis;let n,r;return[lz({parser:o=>{if(!t.editor.settings.codeBlock.createHighlighter)return[];if(!n)return e[iv]=e[iv]||t.editor.settings.codeBlock.createHighlighter(),e[iv].then(s=>{n=s});const i=sv(t.editor.settings.codeBlock,o.language);return!i||i==="text"||i==="none"||i==="plaintext"||i==="txt"?[]:n.getLoadedLanguages().includes(i)?(r||(r=e[nA]||az(n),e[nA]=r),r(o)):n.loadLanguage(i)},languageExtractor:o=>o.attrs.language,nodeTypes:[this.name]})]},addInputRules(){const t=this.options;return[new Ms({find:/^```(.*?)\s$/,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),i=r[1].trim(),s={language:sv(t.editor.settings.codeBlock,i)??i};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),this.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,this.type,s).setSelection(xe.create(e.tr.doc,n.from))}})]},addKeyboardShortcuts(){return{Delete:({editor:t})=>{const{selection:e}=t.state,{$from:n}=e;if(t.isActive(this.name)&&!n.parent.textContent&&rg(e)){const r=n.pos-n.parentOffset-2;return t.chain().setNodeSelection(r).deleteSelection().run(),!0}return!1},Tab:({editor:t})=>this.options.indentLineWithTab&&t.isActive(this.name)?(t.commands.insertContent("  "),!0):!1,Enter:({editor:t})=>{const{$from:e}=t.state.selection;if(!t.isActive(this.name))return!1;const n=e.parentOffset===e.parent.nodeSize-2,r=e.parent.textContent.endsWith(`

`);return!n||!r?(t.commands.insertContent(`
`),!0):t.chain().command(({tr:o})=>(o.delete(e.pos-2,e.pos),!0)).exitCode().run()},"Shift-Enter":({editor:t})=>{const{$from:e}=t.state.selection;return t.isActive(this.name)?(t.chain().insertContentAt(e.pos-e.parentOffset+e.parent.nodeSize,{type:"paragraph"}).run(),!0):!1}}}}),AK=Ho(TK,MK);function sv(t,e){var n;return(n=Object.entries(t.supportedLanguages).find(([r,{aliases:o}])=>o?.includes(e)||r===e))==null?void 0:n[0]}const NK=kn.create({name:"backgroundColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-background-color"),renderHTML:t=>({"data-background-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-background-color")?{stringValue:t.getAttribute("data-background-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),OK=pl(NK,"string"),RK=kn.create({name:"textColor",addAttributes(){return{stringValue:{default:void 0,parseHTML:t=>t.getAttribute("data-text-color"),renderHTML:t=>({"data-text-color":t.stringValue})}}},parseHTML(){return[{tag:"span",getAttrs:t=>typeof t=="string"?!1:t.hasAttribute("data-text-color")?{stringValue:t.getAttribute("data-text-color")}:!1}]},renderHTML({HTMLAttributes:t}){return["span",t,0]}}),DK=pl(RK,"string"),rA=t=>({url:t.src||void 0}),_K={backgroundColor:Gt.backgroundColor,name:{default:""},url:{default:""},caption:{default:""}},K_={type:"file",propSchema:_K,content:"none",isFileBlock:!0},LK=(t,e)=>Dx(t,e),Z_=t=>{if(t.tagName==="EMBED")return t.closest("figure")?void 0:rA(t);if(t.tagName==="FIGURE"){const e=xg(t,"embed");if(!e)return;const{targetElement:n,caption:r}=e;return{...rA(n),caption:r}}},BK=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add file",{dom:n}}const e=document.createElement("a");return e.href=t.props.url,e.textContent=t.props.name||t.props.url,t.props.caption?Cg(e,t.props.caption):{dom:e}},IK=Rc(K_,{render:LK,parse:Z_,toExternalHTML:BK}),HK={set:(t,e)=>window.localStorage.setItem(`toggle-${t.id}`,e?"true":"false"),get:t=>window.localStorage.getItem(`toggle-${t.id}`)==="true"},Y_=(t,e,n,r=HK)=>{if("isToggleable"in t.props&&!t.props.isToggleable)return{dom:n};const o=document.createElement("div"),i=document.createElement("div");i.className="bn-toggle-wrapper";const s=document.createElement("button");s.className="bn-toggle-button",s.type="button",s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="CURRENTCOLOR"><path d="M320-200v-560l440 280-440 280Z"/></svg>';const a=v=>v.preventDefault();s.addEventListener("mousedown",a);const u=()=>{var v;i.getAttribute("data-show-children")==="true"?(i.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1),o.contains(d)&&o.removeChild(d)):(i.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0),((v=e.getBlock(t))==null?void 0:v.children.length)===0&&!o.contains(d)&&o.appendChild(d))};s.addEventListener("click",u),i.appendChild(s),i.appendChild(n);const d=document.createElement("button");d.className="bn-toggle-add-block-button",d.type="button",d.textContent="Empty toggle. Click to add a block.";const h=v=>v.preventDefault();d.addEventListener("mousedown",h);const p=()=>{e.transact(()=>{const v=e.updateBlock(t,{children:[{}]});e.setTextCursorPosition(v.children[0].id,"end"),e.focus()})};d.addEventListener("click",p),o.appendChild(i);let g=t.children.length;const b=e.onChange(()=>{var v;const C=((v=e.getBlock(t))==null?void 0:v.children.length)??0;C>g?(i.getAttribute("data-show-children")==="false"&&(i.setAttribute("data-show-children","true"),r.set(e.getBlock(t),!0)),o.contains(d)&&o.removeChild(d)):C===0&&C<g&&(i.getAttribute("data-show-children")==="true"&&(i.setAttribute("data-show-children","false"),r.set(e.getBlock(t),!1)),o.contains(d)&&o.removeChild(d)),g=C});return r.get(t)?(i.setAttribute("data-show-children","true"),t.children.length===0&&o.appendChild(d)):i.setAttribute("data-show-children","false"),{dom:o,ignoreMutation:v=>v instanceof MutationRecord&&(v.type==="attributes"&&v.target===i&&v.attributeName==="data-show-children"||v.type==="childList"&&(v.addedNodes[0]===d||v.removedNodes[0]===d)),destroy:()=>{s.removeEventListener("mousedown",a),s.removeEventListener("click",u),d.removeEventListener("mousedown",h),d.removeEventListener("click",p),b?.()}}},PK=[1,2,3,4,5,6],W_={...Gt,level:{default:1,values:PK},isToggleable:{default:!1}},jK=kr({name:"heading",content:"inline*",group:"blockContent",addAttributes(){return tf(W_)},addInputRules(){return[...this.options.editor.settings.heading.levels.map(t=>new Ms({find:new RegExp(`^(#{${t}})\\s$`),handler:({state:e,chain:n,range:r})=>{const o=Nt(e);!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||n().command(Dn(o.bnBlock.beforePos,{type:"heading",props:{level:t}})).deleteRange({from:r.from,to:r.to}).run()}}))]},addKeyboardShortcuts(){const t=this.options.editor;return Object.fromEntries(t.settings.heading.levels.map(e=>[`Mod-Alt-${e}`,()=>{const n=Nt(this.editor.state);return!n.isBlockContainer||n.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Dn(n.bnBlock.beforePos,{type:"heading",props:{level:e}}))}]))},parseHTML(){const t=this.options.editor;return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},...t.settings.heading.levels.map(e=>({tag:`h${e}`,attrs:{level:e},node:"heading"}))]},renderHTML({node:t,HTMLAttributes:e}){var n,r;return Cr(this.name,`h${t.attrs.level}`,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n})=>{var r,o;const{dom:i,contentDOM:s}=Cr(this.name,`h${t.attrs.level}`,{...((r=this.options.domAttributes)==null?void 0:r.blockContent)||{},...e},((o=this.options.domAttributes)==null?void 0:o.inlineContent)||{});i.removeChild(s);const a=this.options.editor,u=gg(n,a,this.editor,this.name),d=Y_(u,a,s);return i.appendChild(d.dom),{dom:i,contentDOM:s,ignoreMutation:d.ignoreMutation,destroy:d.destroy}}}}),VK=Ho(jK,W_),X_=(t,e,n,r,o,i)=>{const{dom:s,destroy:a}=Dx(t,e,n,o,i),u=s;t.props.url&&t.props.showPreview&&(t.props.previewWidth?u.style.width=`${t.props.previewWidth}px`:u.style.width="fit-content");const d=document.createElement("div");d.className="bn-resize-handle",d.style.left="4px";const h=document.createElement("div");h.className="bn-resize-handle",h.style.right="4px";let p,g=t.props.previewWidth;const b=N=>{var _,O;if(!p){!e.isEditable&&r.contains(d)&&r.contains(h)&&(r.removeChild(d),r.removeChild(h));return}let $;t.props.textAlignment==="center"?p.handleUsed==="left"?$=p.initialWidth+(p.initialClientX-N.clientX)*2:$=p.initialWidth+(N.clientX-p.initialClientX)*2:p.handleUsed==="left"?$=p.initialWidth+p.initialClientX-N.clientX:$=p.initialWidth+N.clientX-p.initialClientX,g=Math.min(Math.max($,64),((O=(_=e.domElement)==null?void 0:_.firstElementChild)==null?void 0:O.clientWidth)||Number.MAX_VALUE),u.style.width=`${g}px`},v=N=>{(!N.target||!u.contains(N.target)||!e.isEditable)&&r.contains(d)&&r.contains(h)&&(r.removeChild(d),r.removeChild(h)),p&&(p=void 0,e.updateBlock(t,{props:{previewWidth:g}}))},C=()=>{e.isEditable&&(r.appendChild(d),r.appendChild(h))},k=N=>{N.relatedTarget===d||N.relatedTarget===h||p||e.isEditable&&r.contains(d)&&r.contains(h)&&(r.removeChild(d),r.removeChild(h))},E=N=>{N.preventDefault(),p={handleUsed:"left",initialWidth:u.clientWidth,initialClientX:N.clientX}},T=N=>{N.preventDefault(),p={handleUsed:"right",initialWidth:u.clientWidth,initialClientX:N.clientX}};return window.addEventListener("mousemove",b),window.addEventListener("mouseup",v),u.addEventListener("mouseenter",C),u.addEventListener("mouseleave",k),d.addEventListener("mousedown",E),h.addEventListener("mousedown",T),{dom:u,destroy:()=>{a?.(),window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",v),u.removeEventListener("mouseenter",C),u.removeEventListener("mouseleave",k),d.removeEventListener("mousedown",E),h.removeEventListener("mousedown",T)}}},oA=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},zK='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"></path></svg>',UK={textAlignment:Gt.textAlignment,backgroundColor:Gt.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},J_={type:"image",propSchema:UK,content:"none",isFileBlock:!0,fileBlockAccept:["image/*"]},$K=(t,e)=>{const n=document.createElement("div");n.innerHTML=zK;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("img");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(i=>{o.src=i}):o.src=t.props.url,o.alt=t.props.name||t.props.caption||"BlockNote image",o.contentEditable="false",o.draggable=!1,r.appendChild(o),X_(t,e,{dom:r},r,e.dictionary.file_blocks.image.add_button_text,n.firstElementChild)},Q_=t=>{if(t.tagName==="IMG")return t.closest("figure")?void 0:oA(t);if(t.tagName==="FIGURE"){const e=xg(t,"img");if(!e)return;const{targetElement:n,caption:r}=e;return{...oA(n),caption:r}}},FK=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add image",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("img"),e.src=t.props.url,e.alt=t.props.name||t.props.caption||"BlockNote image",t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?_x(e,t.props.caption):Cg(e,t.props.caption):{dom:e}},GK=Rc(J_,{render:$K,parse:Q_,toExternalHTML:FK}),e4=(t,e,n)=>({state:r,dispatch:o})=>{const i=xi(r.doc,t),s=_s(i);if(!s.isBlockContainer)throw new Error(`BlockContainer expected when calling splitBlock, position ${t}`);const a=[{type:s.bnBlock.node.type,attrs:n?{...s.bnBlock.node.attrs,id:void 0}:{}},{type:e?s.blockContent.node.type:r.schema.nodes.paragraph,attrs:n?{...s.blockContent.node.attrs}:{}}];return o&&r.tr.split(t,2,a),!0},Sg=t=>{const{blockInfo:e,selectionEmpty:n}=t.transact(i=>({blockInfo:bg(i),selectionEmpty:i.selection.anchor===i.selection.head}));if(!e.isBlockContainer)return!1;const{bnBlock:r,blockContent:o}=e;return!(o.node.type.name==="toggleListItem"||o.node.type.name==="bulletListItem"||o.node.type.name==="numberedListItem"||o.node.type.name==="checkListItem")||!n?!1:t._tiptapEditor.commands.first(({state:i,chain:s,commands:a})=>[()=>a.command(()=>o.node.childCount===0?a.command(Dn(r.beforePos,{type:"paragraph",props:{}})):!1),()=>a.command(()=>o.node.childCount>0?(s().deleteSelection().command(e4(i.selection.from,!0)).run(),!0):!1)])},qK={...Gt},KK=kr({name:"toggleListItem",content:"inline*",group:"blockContent",priority:90,addKeyboardShortcuts(){return{Enter:()=>Sg(this.options.editor),"Mod-Shift-6":()=>{const t=Nt(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Dn(t.bnBlock.beforePos,{type:"toggleListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"}]},renderHTML({HTMLAttributes:t}){var e,n;return Cr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({HTMLAttributes:t,getPos:e})=>{var n,r;const{dom:o,contentDOM:i}=Cr(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...t},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{}),s=this.options.editor,a=gg(e,s,this.editor,this.name),u=Y_(a,s,i);return o.appendChild(u.dom),{dom:o,contentDOM:i,ignoreMutation:u.ignoreMutation,destroy:u.destroy}}}}),ZK=Ho(KK,qK);function Lx(t,e,n){var r,o,i;const s=To.fromSchema(e),a=t,u=document.createElement("div");u.setAttribute("data-node-type","blockGroup");for(const b of Array.from(a.childNodes))u.appendChild(b.cloneNode(!0));let d=s.parse(u,{topNode:e.nodes.blockGroup.create()});((o=(r=d.firstChild)==null?void 0:r.firstChild)==null?void 0:o.type.name)==="checkListItem"&&(d=d.copy(d.content.cut(d.firstChild.firstChild.nodeSize+2)));const h=(i=d.firstChild)==null?void 0:i.firstChild;if(!(h!=null&&h.isTextblock))return X.from(d);const p=e.nodes[n].create({},h.content),g=d.content.cut(h.nodeSize+2);if(g.size>0){const b=d.copy(g);return p.content.addToEnd(b)}return p.content}const YK={...Gt},WK=kr({name:"bulletListItem",content:"inline*",group:"blockContent",priority:90,addInputRules(){return[new Ms({find:new RegExp("^[-+*]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Nt(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||r.blockNoteType==="heading"||e().command(Dn(r.bnBlock.beforePos,{type:"bulletListItem",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>Sg(this.options.editor),"Mod-Shift-8":()=>{const t=Nt(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Dn(t.bnBlock.beforePos,{type:"bulletListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;return n===null?!1:n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"?{}:!1},getContent:(t,e)=>Lx(t,e,this.name),node:"bulletListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Cr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),XK=Ho(WK,YK),t4={...Gt,checked:{default:!1}},JK=kr({name:"checkListItem",content:"inline*",group:"blockContent",addAttributes(){return tf(t4)},addInputRules(){return[new Ms({find:new RegExp("\\[\\s*\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Nt(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Dn(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!1}})).deleteRange({from:n.from,to:n.to})}}),new Ms({find:new RegExp("\\[[Xx]\\]\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Nt(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Dn(r.bnBlock.beforePos,{type:"checkListItem",props:{checked:!0}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>Sg(this.options.editor),"Mod-Shift-9":()=>{const t=Nt(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Dn(t.bnBlock.beforePos,{type:"checkListItem",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"input",getAttrs:t=>typeof t=="string"||t.closest("[data-content-type]")||t.closest("li")?!1:t.type==="checkbox"?{checked:t.checked}:!1,node:"checkListItem"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="UL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="UL"){const r=t.querySelector("input[type=checkbox]")||null;return r===null?!1:{checked:r.checked}}return!1},getContent:(t,e)=>Lx(t,e,this.name),node:"checkListItem"}]},renderHTML({node:t,HTMLAttributes:e}){var n,r;const o=document.createElement("input");o.type="checkbox",o.checked=t.attrs.checked,t.attrs.checked&&o.setAttribute("checked","");const{dom:i,contentDOM:s}=Cr(this.name,"p",{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e},((r=this.options.domAttributes)==null?void 0:r.inlineContent)||{});return i.insertBefore(o,s),{dom:i,contentDOM:s}},addNodeView(){return({node:t,getPos:e,editor:n,HTMLAttributes:r})=>{var o,i;const s=document.createElement("div"),a=document.createElement("div");a.contentEditable="false";const u=document.createElement("input");u.type="checkbox",u.checked=t.attrs.checked,t.attrs.checked&&u.setAttribute("checked","");const d=()=>{if(!n.isEditable){u.checked=!u.checked;return}if(typeof e!="boolean"){const g=xi(n.state.doc,e());if(g.node.type.name!=="blockContainer")throw new Error(`Expected blockContainer node, got ${g.node.type.name}`);this.editor.commands.command(Dn(g.posBeforeNode,{type:"checkListItem",props:{checked:u.checked}}))}};u.addEventListener("change",d);const{dom:h,contentDOM:p}=Cr(this.name,"p",{...((o=this.options.domAttributes)==null?void 0:o.blockContent)||{},...r},((i=this.options.domAttributes)==null?void 0:i.inlineContent)||{});if(typeof e!="boolean"){const g="label-"+this.editor.state.doc.resolve(e()).node().attrs.id;u.setAttribute("aria-labelledby",g),p.id=g}return h.removeChild(p),h.appendChild(s),s.appendChild(a),s.appendChild(p),a.appendChild(u),{dom:h,contentDOM:p,destroy:()=>{u.removeEventListener("change",d)}}}}}),QK=Ho(JK,t4),eZ=new ot("numbered-list-indexing"),tZ=()=>new Ge({key:eZ,appendTransaction:(t,e,n)=>{const r=n.tr;r.setMeta("numberedListIndexing",!0);let o=!1;return n.doc.descendants((i,s)=>{var a;if(i.type.name==="blockContainer"&&i.firstChild.type.name==="numberedListItem"){let u=`${i.firstChild.attrs.start||1}`;const d=_s({posBeforeNode:s,node:i});if(!d.isBlockContainer)throw new Error("impossible");const h=r.doc.resolve(d.bnBlock.beforePos).nodeBefore;if(h){const v=_s({posBeforeNode:d.bnBlock.beforePos-h.nodeSize,node:h});if(v.blockNoteType==="numberedListItem"){if(!v.isBlockContainer)throw new Error("impossible");const C=v.blockContent.node.attrs.index;u=(parseInt(C)+1).toString()}}const p=d.blockContent.node,g=p.attrs.index,b=((a=h?.firstChild)==null?void 0:a.type.name)!=="numberedListItem";if(g!==u||p.attrs.start&&!b){o=!0;const{start:v,...C}=p.attrs;r.setNodeMarkup(d.blockContent.beforePos,void 0,{...C,index:u,...typeof v=="number"&&b&&{start:v}})}}}),o?r:null}}),n4={...Gt,start:{default:void 0,type:"number"}},nZ=kr({name:"numberedListItem",content:"inline*",group:"blockContent",priority:90,addAttributes(){return{...tf(n4),index:{default:null,parseHTML:t=>t.getAttribute("data-index"),renderHTML:t=>({"data-index":t.index})}}},addInputRules(){return[new Ms({find:new RegExp("^(\\d+)\\.\\s$"),handler:({state:t,chain:e,range:n,match:r})=>{const o=Nt(t);if(!o.isBlockContainer||o.blockContent.node.type.spec.content!=="inline*"||o.blockNoteType==="numberedListItem"||o.blockNoteType==="heading")return;const i=parseInt(r[1]);e().command(Dn(o.bnBlock.beforePos,{type:"numberedListItem",props:i===1&&{}||{start:i}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{Enter:()=>Sg(this.options.editor),"Mod-Shift-7":()=>{const t=Nt(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Dn(t.bnBlock.beforePos,{type:"numberedListItem",props:{}}))}}},addProseMirrorPlugins(){return[tZ()]},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"li",getAttrs:t=>{var e;if(typeof t=="string")return!1;const n=t.parentElement;if(n===null)return!1;if(n.tagName==="OL"||n.tagName==="DIV"&&((e=n.parentElement)==null?void 0:e.tagName)==="OL"){const r=parseInt(n.getAttribute("start")||"1")||1;return t.previousSibling||r===1?{}:{start:r}}return!1},getContent:(t,e)=>Lx(t,e,this.name),priority:300,node:"numberedListItem"}]},renderHTML({HTMLAttributes:t}){var e,n;return Cr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),rZ=Ho(nZ,n4),oZ={...Gt},iZ=kr({name:"paragraph",content:"inline*",group:"blockContent",addKeyboardShortcuts(){return{"Mod-Alt-0":()=>{const t=Nt(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Dn(t.bnBlock.beforePos,{type:"paragraph",props:{}}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"p",getAttrs:t=>{var e;return typeof t=="string"||!((e=t.textContent)!=null&&e.trim())?!1:{}},node:"paragraph"}]},renderHTML({HTMLAttributes:t}){var e,n;return Cr(this.name,"p",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),sZ=Ho(iZ,oZ),lZ={...Gt},aZ=kr({name:"quote",content:"inline*",group:"blockContent",addInputRules(){return[new Ms({find:new RegExp("^>\\s$"),handler:({state:t,chain:e,range:n})=>{const r=Nt(t);!r.isBlockContainer||r.blockContent.node.type.spec.content!=="inline*"||e().command(Dn(r.bnBlock.beforePos,{type:"quote",props:{}})).deleteRange({from:n.from,to:n.to})}})]},addKeyboardShortcuts(){return{"Mod-Alt-q":()=>{const t=Nt(this.editor.state);return!t.isBlockContainer||t.blockContent.node.type.spec.content!=="inline*"?!0:this.editor.commands.command(Dn(t.bnBlock.beforePos,{type:"quote"}))}}},parseHTML(){return[{tag:"div[data-content-type="+this.name+"]",contentElement:".bn-inline-content"},{tag:"blockquote",node:"quote",getContent:(t,e)=>{const n=t.cloneNode(!0);return Wq(n),To.fromSchema(e).parse(n,{topNode:e.nodes.paragraph.create()}).content}}]},renderHTML({HTMLAttributes:t}){var e,n;return Cr(this.name,"blockquote",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})}}),cZ=Ho(aZ,lZ),uZ=35,Bx=120,dZ=31,fZ=St.create({name:"BlockNoteTableExtension",addProseMirrorPlugins:()=>[pU({cellMinWidth:uZ,defaultCellMinWidth:Bx,View:null}),kU()],addKeyboardShortcuts(){return{Enter:()=>this.editor.state.selection.empty&&this.editor.state.selection.$head.parent.type.name==="tableParagraph"?(this.editor.commands.insertContent({type:"hardBreak"}),!0):!1,Backspace:()=>{const t=this.editor.state.selection,e=t.empty,n=t.$head.parentOffset===0,r=t.$head.node().type.name==="tableParagraph";return e&&n&&r},Tab:()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>eT(1)(t,e,n)),"Shift-Tab":()=>this.editor.commands.command(({state:t,dispatch:e,view:n})=>eT(-1)(t,e,n))}},extendNodeSchema(t){const e={name:t.name,options:t.options,storage:t.storage};return{tableRole:Je(Se(t,"tableRole",e))}}}),hZ={textColor:Gt.textColor},pZ=kr({name:"table",content:"tableRow+",group:"blockContent",tableRole:"table",marks:"deletion insertion modification",isolating:!0,parseHTML(){return[{tag:"table"}]},renderHTML({HTMLAttributes:t}){var e,n;return Cr(this.name,"table",{...((e=this.options.domAttributes)==null?void 0:e.blockContent)||{},...t},((n=this.options.domAttributes)==null?void 0:n.inlineContent)||{})},addNodeView(){return({node:t,HTMLAttributes:e})=>{var n;class r extends rD{constructor(i,s,a){super(i,s),this.node=i,this.cellMinWidth=s,this.blockContentHTMLAttributes=a;const u=document.createElement("div");u.className=_t("bn-block-content",a.class),u.setAttribute("data-content-type","table");for(const[g,b]of Object.entries(a))g!=="class"&&u.setAttribute(g,b);const d=this.dom,h=document.createElement("div");h.className="tableWrapper-inner",h.appendChild(d.firstChild),d.appendChild(h),u.appendChild(d);const p=document.createElement("div");p.className="table-widgets-container",p.style.position="relative",d.appendChild(p),this.dom=u}ignoreMutation(i){return!i.target.closest(".tableWrapper-inner")||super.ignoreMutation(i)}}return new r(t,Bx,{...((n=this.options.domAttributes)==null?void 0:n.blockContent)||{},...e})}}}),mZ=kr({name:"tableParagraph",group:"tableContent",content:"inline*",parseHTML(){return[{tag:"p",getAttrs:t=>{if(typeof t=="string"||!t.textContent||!t.closest("[data-content-type]"))return!1;const e=t.parentElement;return e===null?!1:e.tagName==="TD"||e.tagName==="TH"?{}:!1},node:"tableParagraph"}]},renderHTML({HTMLAttributes:t}){return["p",t,0]}}),gZ=_o.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)+",tableRole:"row",marks:"deletion insertion modification",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:t}){return["tr",wr(this.options.HTMLAttributes,t),0]}});function iA(t,e){const n=To.fromSchema(e).parse(t,{topNode:e.nodes.blockGroup.create()}),r=[];return n.content.descendants(o=>{if(o.isInline)return r.push(o),!1}),X.fromArray(r)}const bZ=Ho(pZ,hZ,[fZ,mZ,Az.extend({content:"tableContent+",parseHTML(){return[{tag:"th",getContent:(t,e)=>iA(t,e)}]}}),Tz.extend({content:"tableContent+",parseHTML(){return[{tag:"td",getContent:(t,e)=>iA(t,e)}]}}),gZ]),sA=t=>{const e=t.src||void 0,n=t.width||void 0;return{url:e,previewWidth:n}},yZ='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"></path></svg>',vZ={textAlignment:Gt.textAlignment,backgroundColor:Gt.backgroundColor,name:{default:""},url:{default:""},caption:{default:""},showPreview:{default:!0},previewWidth:{default:void 0,type:"number"}},r4={type:"video",propSchema:vZ,content:"none",isFileBlock:!0,fileBlockAccept:["video/*"]},wZ=(t,e)=>{const n=document.createElement("div");n.innerHTML=yZ;const r=document.createElement("div");r.className="bn-visual-media-wrapper";const o=document.createElement("video");return o.className="bn-visual-media",e.resolveFileUrl?e.resolveFileUrl(t.props.url).then(i=>{o.src=i}):o.src=t.props.url,o.controls=!0,o.contentEditable="false",o.draggable=!1,o.width=t.props.previewWidth,r.appendChild(o),X_(t,e,{dom:r},r,e.dictionary.file_blocks.video.add_button_text,n.firstElementChild)},o4=t=>{if(t.tagName==="VIDEO")return t.closest("figure")?void 0:sA(t);if(t.tagName==="FIGURE"){const e=xg(t,"video");if(!e)return;const{targetElement:n,caption:r}=e;return{...sA(n),caption:r}}},xZ=t=>{if(!t.props.url){const n=document.createElement("p");return n.textContent="Add video",{dom:n}}let e;return t.props.showPreview?(e=document.createElement("video"),e.src=t.props.url,t.props.previewWidth&&(e.width=t.props.previewWidth)):(e=document.createElement("a"),e.href=t.props.url,e.textContent=t.props.name||t.props.url),t.props.caption?t.props.showPreview?_x(e,t.props.caption):Cg(e,t.props.caption):{dom:e}},CZ=Rc(r4,{render:wZ,parse:o4,toExternalHTML:xZ}),kg={paragraph:sZ,heading:VK,quote:cZ,codeBlock:AK,toggleListItem:ZK,bulletListItem:XK,numberedListItem:rZ,checkListItem:QK,table:bZ,file:IK,image:GK,video:CZ,audio:EK},SZ=T_(kg),Ix={bold:pl(pz,"boolean"),italic:pl(Cz,"boolean"),underline:pl(Mz,"boolean"),strike:pl(Ez,"boolean"),code:pl(bz,"boolean"),textColor:DK,backgroundColor:OK};__(Ix);const i4={text:{config:"text",implementation:{}},link:{config:"link",implementation:{}}},kZ=D_(i4);function Nn(t,e){return t in e.schema.blockSchema&&e.schema.blockSchema[t]===SZ[t]}function EZ(t,e){return t in e.schema.inlineContentSchema&&e.schema.inlineContentSchema[t]===kZ[t]}function MZ(t,e,n){return e.type===t&&e.type in n.schema.blockSchema&&Nn(e.type,n)}function of(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock||!1}function TZ(t,e){return t.type in e.schema.blockSchema&&e.schema.blockSchema[t.type].isFileBlock&&"showPreview"in e.schema.blockSchema[t.type].propSchema||!1}function sf(t,e){return e.schema.blockSchema[t.type].isFileBlock&&!t.props.url}function Wa(t,e,n){return e in n.schema.blockSchema&&t in n.schema.blockSchema[e].propSchema&&n.schema.blockSchema[e].propSchema[t]===Gt[t]}function H1(t,e,n){return Wa(t,e.type,n)}function P1(t){return t instanceof gt}function AZ(t){let e=t.getTextCursorPosition().block,n=t.schema.blockSchema[e.type].content;for(;n==="none";){if(e=t.getTextCursorPosition().nextBlock,e===void 0)return;n=t.schema.blockSchema[e.type].content,t.setTextCursorPosition(e,"end")}}function nn(t,e){const n=t.getTextCursorPosition().block;if(n.content===void 0)throw new Error("Slash Menu open in a block that doesn't contain content.");let r;return Array.isArray(n.content)&&(n.content.length===1&&jl(n.content[0])&&n.content[0].type==="text"&&n.content[0].text==="/"||n.content.length===0)?(r=t.updateBlock(n,e),t.setTextCursorPosition(r)):(r=t.insertBlocks([e],n,"after")[0],t.setTextCursorPosition(t.getTextCursorPosition().nextBlock)),AZ(t),r}function NZ(t){const e=[];return Nn("heading",t)&&e.push({onItemClick:()=>{nn(t,{type:"heading",props:{level:1}})},badge:hr("Mod-Alt-1"),key:"heading",...t.dictionary.slash_menu.heading},{onItemClick:()=>{nn(t,{type:"heading",props:{level:2}})},badge:hr("Mod-Alt-2"),key:"heading_2",...t.dictionary.slash_menu.heading_2},{onItemClick:()=>{nn(t,{type:"heading",props:{level:3}})},badge:hr("Mod-Alt-3"),key:"heading_3",...t.dictionary.slash_menu.heading_3}),Nn("quote",t)&&e.push({onItemClick:()=>{nn(t,{type:"quote"})},key:"quote",...t.dictionary.slash_menu.quote}),Nn("toggleListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"toggleListItem"})},badge:hr("Mod-Shift-6"),key:"toggle_list",...t.dictionary.slash_menu.toggle_list}),Nn("numberedListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"numberedListItem"})},badge:hr("Mod-Shift-7"),key:"numbered_list",...t.dictionary.slash_menu.numbered_list}),Nn("bulletListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"bulletListItem"})},badge:hr("Mod-Shift-8"),key:"bullet_list",...t.dictionary.slash_menu.bullet_list}),Nn("checkListItem",t)&&e.push({onItemClick:()=>{nn(t,{type:"checkListItem"})},badge:hr("Mod-Shift-9"),key:"check_list",...t.dictionary.slash_menu.check_list}),Nn("paragraph",t)&&e.push({onItemClick:()=>{nn(t,{type:"paragraph"})},badge:hr("Mod-Alt-0"),key:"paragraph",...t.dictionary.slash_menu.paragraph}),Nn("codeBlock",t)&&e.push({onItemClick:()=>{nn(t,{type:"codeBlock"})},badge:hr("Mod-Alt-c"),key:"code_block",...t.dictionary.slash_menu.code_block}),Nn("table",t)&&e.push({onItemClick:()=>{nn(t,{type:"table",content:{type:"tableContent",rows:[{cells:["","",""]},{cells:["","",""]}]}})},badge:void 0,key:"table",...t.dictionary.slash_menu.table}),Nn("image",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"image"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"image",...t.dictionary.slash_menu.image}),Nn("video",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"video"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"video",...t.dictionary.slash_menu.video}),Nn("audio",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"audio"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"audio",...t.dictionary.slash_menu.audio}),Nn("file",t)&&e.push({onItemClick:()=>{const n=nn(t,{type:"file"});t.transact(r=>r.setMeta(t.filePanel.plugins[0],{block:n}))},key:"file",...t.dictionary.slash_menu.file}),Nn("heading",t)&&(e.push({onItemClick:()=>{nn(t,{type:"heading",props:{level:1,isToggleable:!0}})},key:"toggle_heading",...t.dictionary.slash_menu.toggle_heading},{onItemClick:()=>{nn(t,{type:"heading",props:{level:2,isToggleable:!0}})},key:"toggle_heading_2",...t.dictionary.slash_menu.toggle_heading_2},{onItemClick:()=>{nn(t,{type:"heading",props:{level:3,isToggleable:!0}})},key:"toggle_heading_3",...t.dictionary.slash_menu.toggle_heading_3}),t.settings.heading.levels.filter(n=>n>3).forEach(n=>{e.push({onItemClick:()=>{nn(t,{type:"heading",props:{level:n}})},key:`heading_${n}`,...t.dictionary.slash_menu[`heading_${n}`]})})),e.push({onItemClick:()=>{t.openSuggestionMenu(":",{deleteTriggerCharacter:!0,ignoreQueryLength:!0})},key:"emoji",...t.dictionary.slash_menu.emoji}),e}function OZ(t,e){return t.filter(({title:n,aliases:r})=>n.toLowerCase().includes(e.toLowerCase())||r&&r.filter(o=>o.toLowerCase().includes(e.toLowerCase())).length!==0)}function lv(t){return t&&Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0))}let Eg=class s4{constructor(e){V(this,"blockSpecs"),V(this,"inlineContentSpecs"),V(this,"styleSpecs"),V(this,"blockSchema"),V(this,"inlineContentSchema"),V(this,"styleSchema"),V(this,"BlockNoteEditor","only for types"),V(this,"Block","only for types"),V(this,"PartialBlock","only for types"),this.blockSpecs=lv(e?.blockSpecs)||kg,this.inlineContentSpecs=lv(e?.inlineContentSpecs)||i4,this.styleSpecs=lv(e?.styleSpecs)||Ix,this.blockSchema=T_(this.blockSpecs),this.inlineContentSchema=D_(this.inlineContentSpecs),this.styleSchema=__(this.styleSpecs)}static create(e){return new s4(e)}};const RZ={type:"pageBreak",propSchema:{},content:"none",isFileBlock:!1,isSelectable:!1},DZ=()=>{const t=document.createElement("div");return t.className="bn-page-break",t.setAttribute("data-page-break",""),{dom:t}},_Z=t=>{if(t.tagName==="DIV"&&t.hasAttribute("data-page-break"))return{type:"pageBreak"}},LZ=()=>{const t=document.createElement("div");return t.setAttribute("data-page-break",""),{dom:t}},BZ=Rc(RZ,{render:DZ,parse:_Z,toExternalHTML:LZ});Eg.create({blockSpecs:{pageBreak:BZ}});function IZ(t){return t.transact(e=>{const n=xi(e.doc,e.selection.anchor);if(e.selection instanceof gt)return{type:"cell",anchorBlockId:n.node.attrs.id,anchorCellOffset:e.selection.$anchorCell.pos-n.posBeforeNode,headCellOffset:e.selection.$headCell.pos-n.posBeforeNode};if(e.selection instanceof ke)return{type:"node",anchorBlockId:n.node.attrs.id};{const r=xi(e.doc,e.selection.head);return{type:"text",anchorBlockId:n.node.attrs.id,headBlockId:r.node.attrs.id,anchorOffset:e.selection.anchor-n.posBeforeNode,headOffset:e.selection.head-r.posBeforeNode}}})}function HZ(t,e){var n,r;const o=(n=Sr(e.anchorBlockId,t.doc))==null?void 0:n.posBeforeNode;if(o===void 0)throw new Error(`Could not find block with ID ${e.anchorBlockId} to update selection`);let i;if(e.type==="cell")i=gt.create(t.doc,o+e.anchorCellOffset,o+e.headCellOffset);else if(e.type==="node")i=ke.create(t.doc,o+1);else{const s=(r=Sr(e.headBlockId,t.doc))==null?void 0:r.posBeforeNode;if(s===void 0)throw new Error(`Could not find block with ID ${e.headBlockId} to update selection`);i=xe.create(t.doc,o+e.anchorOffset,s+e.headOffset)}t.setSelection(i)}function j1(t){return t.map(e=>e.type==="columnList"?e.children.map(n=>j1(n.children)).flat():{...e,children:j1(e.children)}).flat()}function l4(t,e,n){t.transact(r=>{var o;const i=((o=t.getSelection())==null?void 0:o.blocks)||[t.getTextCursorPosition().block],s=IZ(t);t.removeBlocks(i),t.insertBlocks(j1(i),e,n),HZ(r,s)})}function a4(t){return!t||t.type!=="columnList"}function c4(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[e.children.length-1],o="after"):(r=e,o="before"):n&&(r=n,o="before"),!r||!o)return;const i=t.getParentBlock(r);return a4(i)?{referenceBlock:r,placement:o}:c4(t,o==="after"?r:t.getPrevBlock(r),i)}function u4(t,e,n){let r,o;if(e?e.children.length>0?(r=e.children[0],o="before"):(r=e,o="after"):n&&(r=n,o="after"),!r||!o)return;const i=t.getParentBlock(r);return a4(i)?{referenceBlock:r,placement:o}:u4(t,o==="before"?r:t.getNextBlock(r),i)}function PZ(t){t.transact(()=>{const e=t.getSelection(),n=e?.blocks[0]||t.getTextCursorPosition().block,r=c4(t,t.getPrevBlock(n),t.getParentBlock(n));r&&l4(t,r.referenceBlock,r.placement)})}function jZ(t){t.transact(()=>{const e=t.getSelection(),n=e?.blocks[e?.blocks.length-1]||t.getTextCursorPosition().block,r=u4(t,t.getNextBlock(n),t.getParentBlock(n));r&&l4(t,r.referenceBlock,r.placement)})}function VZ(t,e,n){const{$from:r,$to:o}=t.selection,i=r.blockRange(o,b=>b.childCount>0&&(b.type.name==="blockGroup"||b.type.name==="column"));if(!i)return!1;const s=i.startIndex;if(s===0)return!1;const a=i.parent.child(s-1);if(a.type!==e)return!1;const u=a.lastChild&&a.lastChild.type===n,d=X.from(u?e.create():null),h=new le(X.from(e.create(null,X.from(n.create(null,d)))),u?3:1,0),p=i.start,g=i.end;return t.step(new Ft(p-(u?3:1),g,p,g,h,1,!0)).scrollIntoView(),!0}function d4(t){return t.transact(e=>VZ(e,t.pmSchema.nodes.blockContainer,t.pmSchema.nodes.blockGroup))}function zZ(t){t._tiptapEditor.commands.liftListItem("blockContainer")}function UZ(t){return t.transact(e=>{const{bnBlock:n}=bg(e);return e.doc.resolve(n.beforePos).nodeBefore!==null})}function $Z(t){return t.transact(e=>{const{bnBlock:n}=bg(e);return e.doc.resolve(n.beforePos).depth>1})}function FZ(t,e){const n=typeof e=="string"?e:e.id,r=gn(t),o=Sr(n,t);if(o)return Bt(o.node,r)}function GZ(t,e){const n=typeof e=="string"?e:e.id,r=Sr(n,t),o=gn(t);if(!r)return;const i=t.resolve(r.posBeforeNode).nodeBefore;if(i)return Bt(i,o)}function qZ(t,e){const n=typeof e=="string"?e:e.id,r=Sr(n,t),o=gn(t);if(!r)return;const i=t.resolve(r.posBeforeNode+r.node.nodeSize).nodeAfter;if(i)return Bt(i,o)}function KZ(t,e){const n=typeof e=="string"?e:e.id,r=gn(t),o=Sr(n,t);if(!o)return;const i=t.resolve(o.posBeforeNode),s=i.node(),a=i.node(-1),u=a.type.name!=="doc"?s.type.name==="blockGroup"?a:s:void 0;if(u)return Bt(u,r)}function ZZ(t,e,n,r={updateSelection:!0}){let{from:o,to:i}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},s=!0,a=!0,u="";if(n.forEach(d=>{d.check(),s&&d.isText&&d.marks.length===0?u+=d.text:s=!1,a=a?d.isBlock:!1}),o===i&&a){const{parent:d}=t.doc.resolve(o);d.isTextblock&&!d.type.spec.code&&!d.childCount&&(o-=1,i+=1)}return s?t.insertText(u,o,i):t.replaceWith(o,i,n),r.updateSelection&&LR(t,t.steps.length-1,-1),!0}function YZ(t){const e=gn(t);if(t.selection.empty||"node"in t.selection)return;const n=t.doc.resolve(xi(t.doc,t.selection.from).posBeforeNode),r=t.doc.resolve(xi(t.doc,t.selection.to).posBeforeNode),o=(d,h)=>{const p=n.posAtIndex(d,h),g=t.doc.resolve(p).nodeAfter;if(!g)throw new Error(`Error getting selection - node not found at position ${p}`);return Bt(g,e)},i=[],s=n.sharedDepth(r.pos),a=n.index(s),u=r.index(s);if(n.depth>s){i.push(Bt(n.nodeAfter,e));for(let d=n.depth;d>s;d--)if(n.node(d).type.isInGroup("childContainer")){const h=n.index(d)+1,p=n.node(d).childCount;for(let g=h;g<p;g++)i.push(o(g,d))}}else i.push(o(a,s));for(let d=a+1;d<=u;d++)i.push(o(d,s));if(i.length===0)throw new Error(`Error getting selection - selection doesn't span any blocks (${t.selection})`);return{blocks:i}}function WZ(t,e,n){const r=typeof e=="string"?e:e.id,o=typeof n=="string"?n:n.id,i=gn(t),s=rf(i);if(r===o)throw new Error(`Attempting to set selection with the same anchor and head blocks (id ${r})`);const a=Sr(r,t.doc);if(!a)throw new Error(`Block with ID ${r} not found`);const u=Sr(o,t.doc);if(!u)throw new Error(`Block with ID ${o} not found`);const d=_s(a),h=_s(u),p=s.blockSchema[d.blockNoteType],g=s.blockSchema[h.blockNoteType];if(!d.isBlockContainer||p.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${r})`);if(!h.isBlockContainer||g.content==="none")throw new Error(`Attempting to set selection anchor in block without content (id ${o})`);let b,v;if(p.content==="table"){const C=Dt.get(d.blockContent.node);b=d.blockContent.beforePos+C.positionAt(0,0,d.blockContent.node)+1+2}else b=d.blockContent.beforePos+1;if(g.content==="table"){const C=Dt.get(h.blockContent.node),k=h.blockContent.beforePos+C.positionAt(C.height-1,C.width-1,h.blockContent.node)+1,E=t.doc.resolve(k).nodeAfter.nodeSize;v=k+E-2}else v=h.blockContent.afterPos-1;t.setSelection(xe.create(t.doc,b,v))}function XZ(t){const e=gn(t);let n=t.selection.$from,r=t.selection.$to;for(;r.parentOffset>=r.parent.nodeSize-2&&r.depth>0;)r=t.doc.resolve(r.pos+1);for(;r.parentOffset===0&&r.depth>0;)r=t.doc.resolve(r.pos-1);for(;n.parentOffset===0&&n.depth>0;)n=t.doc.resolve(n.pos-1);for(;n.parentOffset>=n.parent.nodeSize-2&&n.depth>0;)n=t.doc.resolve(n.pos+1);const o=Qq(t.doc.slice(n.pos,r.pos,!0),e);return{_meta:{startPos:n.pos,endPos:r.pos},...o}}function JZ(t){const{bnBlock:e}=bg(t),n=gn(t.doc),r=t.doc.resolve(e.beforePos),o=r.nodeBefore,i=t.doc.resolve(e.afterPos).nodeAfter;let s;return r.depth>1&&(s=r.node(),s.type.isInGroup("bnBlock")||(s=r.node(r.depth-1))),{block:Bt(e.node,n),prevBlock:o===null?void 0:Bt(o,n),nextBlock:i===null?void 0:Bt(i,n),parentBlock:s===void 0?void 0:Bt(s,n)}}function f4(t,e,n="start"){const r=typeof e=="string"?e:e.id,o=gn(t.doc),i=rf(o),s=Sr(r,t.doc);if(!s)throw new Error(`Block with ID ${r} not found`);const a=_s(s),u=i.blockSchema[a.blockNoteType].content;if(a.isBlockContainer){const d=a.blockContent;if(u==="none"){t.setSelection(ke.create(t.doc,d.beforePos));return}if(u==="inline")n==="start"?t.setSelection(xe.create(t.doc,d.beforePos+1)):t.setSelection(xe.create(t.doc,d.afterPos-1));else if(u==="table")n==="start"?t.setSelection(xe.create(t.doc,d.beforePos+4)):t.setSelection(xe.create(t.doc,d.afterPos-4));else throw new Ro(u)}else{const d=n==="start"?a.childContainer.node.firstChild:a.childContainer.node.lastChild;f4(t,d.attrs.id,n)}}let Xa;async function Hx(){if(Xa)return Xa;const t=await Promise.all([Wn(()=>import("./index2.js"),__vite__mapDeps([0,1,2,3,4,5])),Wn(()=>import("./index3.js"),__vite__mapDeps([6,4,7,8,9])),Wn(()=>import("./index4.js"),__vite__mapDeps([10,1,2])),Wn(()=>import("./index5.js"),__vite__mapDeps([11,5,4])),Wn(()=>import("./index6.js"),__vite__mapDeps([12,13,14,15,9,16,17,18])),Wn(()=>import("./index7.js"),__vite__mapDeps([19,20,21,22,8,3,15,23,17,18,16])),Wn(()=>import("./index8.js"),__vite__mapDeps([24,7,23,22,21,17,15,18,16,25])),Wn(()=>import("./index9.js"),__vite__mapDeps([26,25,20,21,22,2,18])),Wn(()=>import("./index10.js"),__vite__mapDeps([27,13,21,17,15])),Wn(()=>import("./index11.js"),__vite__mapDeps([28,14,15,9]))]);return Xa={rehypeParse:t[0],rehypeStringify:t[1],unified:t[2],hastUtilFromDom:t[3],rehypeRemark:t[4],remarkGfm:t[5],remarkStringify:t[6],remarkParse:t[7],remarkRehype:t[8],rehypeFormat:t[9]},Xa}function QZ(){const t=e=>{let n=e.children.length;for(let r=0;r<n;r++){const o=e.children[r];if(o.type==="element"&&(t(o),o.tagName==="u"))if(o.children.length>0){e.children.splice(r,1,...o.children);const i=o.children.length-1;n+=i,r+=i}else e.children.splice(r,1),n--,r--}};return t}function eY(){const t=Xa;if(!t)throw new Error("addSpacesToCheckboxes requires ESM dependencies to be initialized");const e=n=>{var r;if(n.children&&"length"in n.children&&n.children.length)for(let o=n.children.length-1;o>=0;o--){const i=n.children[o],s=o+1<n.children.length?n.children[o+1]:void 0;i.type==="element"&&i.tagName==="input"&&((r=i.properties)==null?void 0:r.type)==="checkbox"&&s?.type==="element"&&s.tagName==="p"?(s.tagName="span",s.children.splice(0,0,t.hastUtilFromDom.fromDom(document.createTextNode(" ")))):e(i)}};return e}function Px(t){const e=Xa;if(!e)throw new Error("cleanHTMLToMarkdown requires ESM dependencies to be initialized");return e.unified.unified().use(e.rehypeParse.default,{fragment:!0}).use(QZ).use(eY).use(e.rehypeRemark.default).use(e.remarkGfm.default).use(e.remarkStringify.default,{handlers:{text:n=>n.value}}).processSync(t).value}async function tY(t,e,n,r){await Hx();const o=wg(e,n).exportBlocks(t,r);return Px(o)}function nY(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function rY(t){return t.nodeType===3&&!/\S/.test(t.nodeValue||"")}function oY(t){t.querySelectorAll("li > ul, li > ol").forEach(e=>{const n=nY(e),r=e.parentElement,o=Array.from(r.childNodes).slice(n+1);e.remove(),o.forEach(i=>{i.remove()}),r.insertAdjacentElement("afterend",e),o.reverse().forEach(i=>{if(rY(i))return;const s=document.createElement("li");s.append(i),e.insertAdjacentElement("afterend",s)}),r.childNodes.length===0&&r.remove()})}function iY(t){t.querySelectorAll("li + ul, li + ol").forEach(e=>{var n,r;const o=e.previousElementSibling,i=document.createElement("div");o.insertAdjacentElement("afterend",i),i.append(o);const s=document.createElement("div");for(s.setAttribute("data-node-type","blockGroup"),i.append(s);((n=i.nextElementSibling)==null?void 0:n.nodeName)==="UL"||((r=i.nextElementSibling)==null?void 0:r.nodeName)==="OL";)s.append(i.nextElementSibling)})}let lA=null;function sY(){return lA||(lA=document.implementation.createHTMLDocument("title"))}function h4(t){if(typeof t=="string"){const e=sY().createElement("div");e.innerHTML=t,t=e}return oY(t),iY(t),t}async function p4(t,e){const n=h4(t),r=To.fromSchema(e).parse(n,{topNode:e.nodes.blockGroup.create()}),o=[];for(let i=0;i<r.childCount;i++)o.push(Bt(r.child(i),e));return o}function lY(t,e){const n=e.value?e.value:"",r={};e.lang&&(r["data-language"]=e.lang);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}async function m4(t){const e=await Hx();return e.unified.unified().use(e.remarkParse.default).use(e.remarkGfm.default).use(e.remarkRehype.default,{handlers:{...e.remarkRehype.defaultHandlers,code:lY}}).use(e.rehypeStringify.default).processSync(t).value}async function aY(t,e){const n=await m4(t);return p4(n,e)}const jx=["vscode-editor-data","blocknote/html","text/markdown","text/html","text/plain","Files"];function cY(t,e){if(!t.startsWith(".")||!e.startsWith("."))throw new Error("The strings provided are not valid file extensions.");return t===e}function uY(t,e){const n=t.split("/"),r=e.split("/");if(n.length!==2)throw new Error(`The string ${t} is not a valid MIME type.`);if(r.length!==2)throw new Error(`The string ${e} is not a valid MIME type.`);return n[1]==="*"||r[1]==="*"?n[0]===r[0]:(n[0]==="*"||r[0]==="*"||n[0]===r[0])&&n[1]===r[1]}function aA(t,e,n,r="after"){let o;return Array.isArray(e.content)&&e.content.length===0?o=t.updateBlock(e,n).id:o=t.insertBlocks([n],e,r)[0].id,o}async function g4(t,e){var n;if(!e.uploadFile){console.warn("Attempted ot insert file, but uploadFile is not set in the BlockNote editor options");return}const r="dataTransfer"in t?t.dataTransfer:t.clipboardData;if(r===null)return;let o=null;for(const a of jx)if(r.types.includes(a)){o=a;break}if(o!=="Files")return;const i=r.items;if(!i)return;t.preventDefault();const s=Object.values(e.schema.blockSchema).filter(a=>a.isFileBlock);for(let a=0;a<i.length;a++){let u="file";for(const h of s)for(const p of h.fileBlockAccept||[]){const g=p.startsWith("."),b=i[a].getAsFile();if(b&&(!g&&b.type&&uY(i[a].type,p)||g&&cY("."+b.name.split(".").pop(),p))){u=h.type;break}}const d=i[a].getAsFile();if(d){const h={type:u,props:{name:d.name}};let p;if(t.type==="paste"){const v=e.getTextCursorPosition().block;p=aA(e,v,h)}else if(t.type==="drop"){const v={left:t.clientX,top:t.clientY},C=(n=e.prosemirrorView)==null?void 0:n.posAtCoords(v);if(!C)return;p=e.transact(k=>{var E;const T=xi(k.doc,C.pos),N=(E=e.prosemirrorView)==null?void 0:E.dom.querySelector(`[data-id="${T.node.attrs.id}"]`),_=N?.getBoundingClientRect();return aA(e,e.getBlock(T.node.attrs.id),h,_&&(_.top+_.bottom)/2>v.top?"before":"after")})}else return;const g=await e.uploadFile(d,p),b=typeof g=="string"?{props:{url:g}}:{...g};e.updateBlock(p,b)}}}const dY=t=>St.create({name:"dropFile",addProseMirrorPlugins(){return[new Ge({props:{handleDOMEvents:{drop(e,n){if(!t.isEditable)return;let r=null;for(const o of jx)if(n.dataTransfer.types.includes(o)){r=o;break}return r===null?!0:r==="Files"?(g4(n,t),!0):!1}}}})]}}),fY=/(^|\n) {0,3}#{1,6} {1,8}[^\n]{1,64}\r?\n\r?\n\s{0,32}\S/,hY=/(_|__|\*|\*\*|~~|==|\+\+)(?!\s)(?:[^\s](?:.{0,62}[^\s])?|\S)(?=\1)/,pY=/\[[^\]]{1,128}\]\(https?:\/\/\S{1,999}\)/,mY=/(?:\s|^)`(?!\s)(?:[^\s`](?:[^`]{0,46}[^\s`])?|[^\s`])`([^\w]|$)/,gY=/(?:^|\n)\s{0,5}-\s{1}[^\n]+\n\s{0,15}-\s/,bY=/(?:^|\n)\s{0,5}\d+\.\s{1}[^\n]+\n\s{0,15}\d+\.\s/,yY=/\n{2} {0,3}-{2,48}\n{2}/,vY=/(?:\n|^)(```|~~~|\$\$)(?!`|~)[^\s]{0,64} {0,64}[^\n]{0,64}\n[\s\S]{0,9999}?\s*\1 {0,64}(?:\n+|$)/,wY=/(?:\n|^)(?!\s)\w[^\n]{0,64}\r?\n(-|=)\1{0,64}\n\n\s{0,64}(\w|$)/,xY=/(?:^|(\r?\n\r?\n))( {0,3}>[^\n]{1,333}\n){1,999}($|(\r?\n))/,CY=/^\s*\|(.+\|)+\s*$/m,SY=/^\s*\|(\s*[-:]+[-:]\s*\|)+\s*$/m,kY=/^\s*\|(.+\|)+\s*$/m,EY=t=>fY.test(t)||hY.test(t)||pY.test(t)||mY.test(t)||gY.test(t)||bY.test(t)||yY.test(t)||vY.test(t)||wY.test(t)||xY.test(t)||CY.test(t)||SY.test(t)||kY.test(t);async function MY(t,e){const{schema:n}=e.state;if(!t.clipboardData)return!1;const r=t.clipboardData.getData("text/plain");if(!r)return!1;if(!n.nodes.codeBlock)return e.pasteText(r),!0;const o=t.clipboardData.getData("vscode-editor-data"),i=o?JSON.parse(o):void 0,s=i?.mode;return s?(e.pasteHTML(`<pre><code class="language-${s}">${r.replace(/\r\n?/g,`
`)}</code></pre>`),!0):!1}function TY({event:t,editor:e,prioritizeMarkdownOverHTML:n,plainTextAsMarkdown:r}){var o;if(e.transact(a=>a.selection.$from.parent.type.spec.code&&a.selection.$to.parent.type.spec.code)){const a=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(a)return e.pasteText(a),!0}let i;for(const a of jx)if(t.clipboardData.types.includes(a)){i=a;break}if(!i)return!0;if(i==="vscode-editor-data")return MY(t,e.prosemirrorView),!0;if(i==="Files")return g4(t,e),!0;const s=t.clipboardData.getData(i);if(i==="blocknote/html")return e.pasteHTML(s,!0),!0;if(i==="text/markdown")return e.pasteMarkdown(s),!0;if(n){const a=t.clipboardData.getData("text/plain");if(EY(a))return e.pasteMarkdown(a),!0}return i==="text/html"?(e.pasteHTML(s),!0):r?(e.pasteMarkdown(s),!0):(e.pasteText(s),!0)}const AY=(t,e)=>St.create({name:"pasteFromClipboard",addProseMirrorPlugins(){return[new Ge({props:{handleDOMEvents:{paste(n,r){if(r.preventDefault(),!!t.isEditable)return e({event:r,editor:t,defaultPasteHandler:({prioritizeMarkdownOverHTML:o=!0,plainTextAsMarkdown:i=!0}={})=>TY({event:r,editor:t,prioritizeMarkdownOverHTML:o,plainTextAsMarkdown:i})})}}}})]}});function b4(t){const e=[];return t.descendants(n=>{var r,o;const i=gn(n);return n.type.name==="blockContainer"&&((r=n.firstChild)==null?void 0:r.type.name)==="blockGroup"?!0:n.type.name==="columnList"&&n.childCount===1?((o=n.firstChild)==null||o.forEach(s=>{e.push(Bt(s,i))}),!1):n.type.isInGroup("bnBlock")?(e.push(Bt(n,i)),!1):!0}),e}function NY(t,e,n){var r;let o=!1;const i=t.state.selection instanceof gt;if(!i){const u=t.state.doc.slice(t.state.selection.from,t.state.selection.to,!1).content,d=[];for(let h=0;h<u.childCount;h++)d.push(u.child(h));o=d.find(h=>h.type.isInGroup("bnBlock")||h.type.name==="blockGroup"||h.type.spec.group==="blockContent")===void 0,o&&(e=u)}let s;const a=wg(t.state.schema,n);if(i){((r=e.firstChild)==null?void 0:r.type.name)==="table"&&(e=e.firstChild.content);const u=R_(e,n.schema.inlineContentSchema,n.schema.styleSchema);s=`<table>${a.exportInlineContent(u,{})}</table>`}else if(o){const u=yg(e,n.schema.inlineContentSchema,n.schema.styleSchema);s=a.exportInlineContent(u,{})}else{const u=b4(e);s=a.exportBlocks(u,{})}return s}function y4(t,e){"node"in t.state.selection&&t.state.selection.node.type.spec.group==="blockContent"&&e.transact(s=>s.setSelection(new ke(s.doc.resolve(t.state.selection.from-1))));const n=t.serializeForClipboard(t.state.selection.content()).dom.innerHTML,r=t.state.selection.content().content,o=NY(t,r,e),i=Px(o);return{clipboardHTML:n,externalHTML:o,markdown:i}}const cA=()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!0;let e=t.focusNode;for(;e;){if(e instanceof HTMLElement&&e.getAttribute("contenteditable")==="false")return!0;e=e.parentElement}return!1},uA=(t,e,n)=>{n.preventDefault(),n.clipboardData.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=y4(e,t);n.clipboardData.setData("blocknote/html",r),n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",i)},OY=t=>St.create({name:"copyToClipboard",addProseMirrorPlugins(){return[new Ge({props:{handleDOMEvents:{copy(e,n){return cA()||uA(t,e,n),!0},cut(e,n){return cA()||(uA(t,e,n),e.editable&&e.dispatch(e.state.tr.deleteSelection())),!0},dragstart(e,n){if(!("node"in e.state.selection)||e.state.selection.node.type.spec.group!=="blockContent")return;t.transact(s=>s.setSelection(new ke(s.doc.resolve(e.state.selection.from-1)))),n.preventDefault(),n.dataTransfer.clearData();const{clipboardHTML:r,externalHTML:o,markdown:i}=y4(e,t);return n.dataTransfer.setData("blocknote/html",r),n.dataTransfer.setData("text/html",o),n.dataTransfer.setData("text/plain",i),!0}}}})]}}),RY=St.create({name:"blockBackgroundColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{backgroundColor:{default:Gt.backgroundColor.default,parseHTML:t=>t.hasAttribute("data-background-color")?t.getAttribute("data-background-color"):Gt.backgroundColor.default,renderHTML:t=>t.backgroundColor===Gt.backgroundColor.default?{}:{"data-background-color":t.backgroundColor}}}}]}});let Vx=class{constructor(){V(this,"callbacks",{})}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),()=>this.off(e,n)}emit(e,...n){const r=this.callbacks[e];r&&r.forEach(o=>o.apply(this,n))}off(e,n){const r=this.callbacks[e];r&&(n?this.callbacks[e]=r.filter(o=>o!==n):delete this.callbacks[e])}removeAllListeners(){this.callbacks={}}};class pn extends Vx{constructor(...e){super(),V(this,"plugins",[])}static key(){throw new Error("You must implement the key method in your extension")}addProsemirrorPlugin(e){this.plugins.push(e)}get priority(){}}class DY extends pn{constructor(){super(),V(this,"beforeChangeCallbacks",[]),this.addProsemirrorPlugin(new Ge({filterTransaction:e=>{let n;return this.beforeChangeCallbacks.reduce((r,o)=>r===!1?r:o({getChanges(){return n||(n=P_(e),n)},tr:e})!==!1,!0)}}))}static key(){return"blockChange"}subscribe(e){return this.beforeChangeCallbacks.push(e),()=>{this.beforeChangeCallbacks=this.beforeChangeCallbacks.filter(n=>n!==e)}}}const gp=class v4 extends pn{constructor(e){super(),V(this,"provider"),V(this,"recentlyUpdatedCursors"),V(this,"renderCursor",(n,r)=>{let o=this.recentlyUpdatedCursors.get(r);if(!o){const i=(this.collaboration.renderCursor??v4.defaultCursorRender)(n);this.collaboration.showCursorLabels!=="always"&&(i.addEventListener("mouseenter",()=>{const s=this.recentlyUpdatedCursors.get(r);s.element.setAttribute("data-active",""),s.hideTimeout&&(clearTimeout(s.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:void 0}))}),i.addEventListener("mouseleave",()=>{const s=this.recentlyUpdatedCursors.get(r);this.recentlyUpdatedCursors.set(r,{element:s.element,hideTimeout:setTimeout(()=>{s.element.removeAttribute("data-active")},2e3)})})),o={element:i,hideTimeout:void 0},this.recentlyUpdatedCursors.set(r,o)}return o.element}),V(this,"updateUser",n=>{this.provider.awareness.setLocalStateField("user",n)}),this.collaboration=e,this.provider=e.provider,this.recentlyUpdatedCursors=new Map,this.provider.awareness.setLocalStateField("user",e.user),e.showCursorLabels!=="always"&&this.provider.awareness.on("change",({updated:n})=>{for(const r of n){const o=this.recentlyUpdatedCursors.get(r);o&&(o.element.setAttribute("data-active",""),o.hideTimeout&&clearTimeout(o.hideTimeout),this.recentlyUpdatedCursors.set(r,{element:o.element,hideTimeout:setTimeout(()=>{o.element.removeAttribute("data-active")},2e3)}))}}),this.addProsemirrorPlugin(Lq(this.provider.awareness,{selectionBuilder:E_,cursorBuilder:this.renderCursor}))}static key(){return"yCursorPlugin"}get priority(){return 999}static isDarkColor(e){const n=e.charAt(0)==="#"?e.substring(1,7):e,r=parseInt(n.substring(0,2),16),o=parseInt(n.substring(2,4),16),i=parseInt(n.substring(4,6),16),s=[r/255,o/255,i/255].map(a=>a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4));return .2126*s[0]+.7152*s[1]+.0722*s[2]<=.179}};V(gp,"defaultCursorRender",t=>{const e=document.createElement("span");e.classList.add("bn-collaboration-cursor__base");const n=document.createElement("span");n.setAttribute("contentedEditable","false"),n.classList.add("bn-collaboration-cursor__caret"),n.setAttribute("style",`background-color: ${t.color}; color: ${gp.isDarkColor(t.color)?"white":"black"}`);const r=document.createElement("span");return r.classList.add("bn-collaboration-cursor__label"),r.setAttribute("style",`background-color: ${t.color}; color: ${gp.isDarkColor(t.color)?"white":"black"}`),r.insertBefore(document.createTextNode(t.name),null),n.insertBefore(r,null),e.insertBefore(document.createTextNode("⁠"),null),e.insertBefore(n,null),e.insertBefore(document.createTextNode("⁠"),null),e});let w4=gp;class V1 extends pn{static key(){return"ySyncPlugin"}constructor(e){super(),this.addProsemirrorPlugin(yq(e))}get priority(){return 1001}}let z1=class extends pn{static key(){return"yUndoPlugin"}constructor({editor:e}){super(),this.addProsemirrorPlugin(zq({trackedOrigins:[e]}))}get priority(){return 1e3}};const x4=kn.create({name:"comment",excludes:"",inclusive:!1,keepOnSplit:!0,addAttributes(){return{orphan:{parseHTML:t=>!!t.getAttribute("data-orphan"),renderHTML:t=>t.orphan?{"data-orphan":"true"}:{},default:!1},threadId:{parseHTML:t=>t.getAttribute("data-bn-thread-id"),renderHTML:t=>({"data-bn-thread-id":t.threadId}),default:""}}},renderHTML({HTMLAttributes:t}){return["span",wr(t,{class:"bn-thread-mark"})]},parseHTML(){return[{tag:"span.bn-thread-mark"}]},extendMarkSchema(t){return t.name==="comment"?{blocknoteIgnore:!0}:{}}});class _Y extends Vx{constructor(e){super(),V(this,"userCache",new Map),V(this,"loadingUsers",new Set),this.resolveUsers=e}async loadUsers(e){const n=e.filter(r=>!this.userCache.has(r)&&!this.loadingUsers.has(r));if(n.length!==0){for(const r of n)this.loadingUsers.add(r);try{const r=await this.resolveUsers(n);for(const o of r)this.userCache.set(o.id,o);this.emit("update",this.userCache)}finally{for(const r of n)this.loadingUsers.delete(r)}}}getUser(e){return this.userCache.get(e)}subscribe(e){return this.on("update",e)}}const Zh=new ot("blocknote-comments"),LY="SET_SELECTED_THREAD_ID";function BY(t,e){const n=new Map;return t.descendants((r,o)=>{r.marks.forEach(i=>{if(i.type.name===e){const s=i.attrs.threadId;if(!s)return;const a=o,u=a+r.nodeSize,d=n.get(s)??{from:1/0,to:0};n.set(s,{from:Math.min(a,d.from),to:Math.max(u,d.to)})}})}),n}class IY extends pn{constructor(e,n,r){if(super(),V(this,"userStore"),V(this,"pendingComment",!1),V(this,"selectedThreadId"),V(this,"threadPositions",new Map),V(this,"updateMarksFromThreads",i=>{this.editor.transact(s=>{s.doc.descendants((a,u)=>{a.marks.forEach(d=>{if(d.type.name===this.markType){const h=d.type,p=d.attrs.threadId,g=i.get(p),b=!!(!g||g.resolved||g.deletedAt);if(b!==d.attrs.orphan){const v=Math.max(u,0),C=Math.min(u+a.nodeSize,s.doc.content.size-1,s.doc.content.size-1);s.removeMark(v,C,d),s.addMark(v,C,h.create({...d.attrs,orphan:b})),b&&this.selectedThreadId===p&&(this.selectedThreadId=void 0,this.emitStateUpdate())}}})})})}),this.editor=e,this.threadStore=n,this.markType=r,!e.resolveUsers)throw new Error("resolveUsers is required for comments");this.userStore=new _Y(e.resolveUsers),this.threadStore.subscribe(this.updateMarksFromThreads),e.onCreate(()=>{this.updateMarksFromThreads(this.threadStore.getThreads()),e.onSelectionChange(()=>{this.pendingComment&&(this.pendingComment=!1,this.emitStateUpdate())})});const o=this;this.addProsemirrorPlugin(new Ge({key:Zh,state:{init(){return{decorations:et.empty}},apply(i,s){const a=i.getMeta(Zh);if(!i.docChanged&&!a)return s;const u=i.docChanged?BY(i.doc,o.markType):o.threadPositions;(u.size>0||o.threadPositions.size>0)&&(o.threadPositions=u,o.emitStateUpdate());const d=[];if(o.selectedThreadId){const h=u.get(o.selectedThreadId);h&&d.push(mt.inline(h.from,h.to,{class:"bn-thread-mark-selected"}))}return{decorations:et.create(i.doc,d)}}},props:{decorations(i){var s;return((s=Zh.getState(i))==null?void 0:s.decorations)??et.empty},handleClick:(i,s,a)=>{if(a.button!==0)return;const u=i.state.doc.nodeAt(s);if(!u){o.selectThread(void 0);return}const d=u.marks.find(p=>p.type.name===r&&p.attrs.orphan!==!0),h=d?.attrs.threadId;o.selectThread(h,!1)}}}))}static key(){return"comments"}emitStateUpdate(){this.emit("update",{selectedThreadId:this.selectedThreadId,pendingComment:this.pendingComment,threadPositions:this.threadPositions})}onUpdate(e){return this.on("update",e)}selectThread(e,n=!0){var r,o;if(this.selectedThreadId!==e&&(this.selectedThreadId=e,this.emitStateUpdate(),this.editor.transact(i=>i.setMeta(Zh,{name:LY})),e&&n)){const i=this.threadPositions.get(e);if(!i)return;(o=(r=this.editor.prosemirrorView)==null?void 0:r.domAtPos(i.from).node)==null||o.scrollIntoView({behavior:"smooth",block:"center"})}}startPendingComment(){this.pendingComment=!0,this.emitStateUpdate()}stopPendingComment(){this.pendingComment=!1,this.emitStateUpdate()}async createThread(e){const n=await this.threadStore.createThread(e);if(this.threadStore.addThreadToDocument){const r=this.editor.prosemirrorView,o=r.state.selection,i=at.getState(r.state),s={prosemirror:{head:o.head,anchor:o.anchor},yjs:i?Mm(i.binding,r.state):void 0};await this.threadStore.addThreadToDocument({threadId:n.id,selection:s})}else this.editor._tiptapEditor.commands.setMark(this.markType,{orphan:!1,threadId:n.id})}}class HY{constructor(e,n,r,o){V(this,"state"),V(this,"emitUpdate"),V(this,"mouseDownHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),V(this,"dragstartHandler",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),V(this,"scrollHandler",()=>{var i;if((i=this.state)!=null&&i.show){const s=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${this.state.block.id}"]`);if(!s)return;this.state.referencePos=s.getBoundingClientRect(),this.emitUpdate()}}),V(this,"closeMenu",()=>{var i;(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pluginKey=n,this.pmView=r,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized file panel");o(this.state)},r.dom.addEventListener("mousedown",this.mouseDownHandler),r.dom.addEventListener("dragstart",this.dragstartHandler),r.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o;const i=this.pluginKey.getState(e.state),s=this.pluginKey.getState(n);if(!((r=this.state)!=null&&r.show)&&i!=null&&i.block&&this.editor.isEditable){const d=this.pmView.root.querySelector(`[data-node-type="blockContainer"][data-id="${i.block.id}"]`);if(!d)return;this.state={show:!0,referencePos:d.getBoundingClientRect(),block:i.block},this.emitUpdate();return}const a=i?.block&&!(s!=null&&s.block),u=!(i!=null&&i.block)&&s?.block;a&&this.state&&!this.state.show&&(this.state.show=!0,this.emitUpdate()),u&&(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}destroy(){this.pmView.dom.removeEventListener("mousedown",this.mouseDownHandler),this.pmView.dom.removeEventListener("dragstart",this.dragstartHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}}const av=new ot("FilePanelPlugin");class PY extends pn{constructor(e){super(),V(this,"view"),V(this,"closeMenu",()=>{var n;return(n=this.view)==null?void 0:n.closeMenu()}),this.addProsemirrorPlugin(new Ge({key:av,view:n=>(this.view=new HY(e,av,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>{var o;return r.key==="Escape"&&this.shown?((o=this.view)==null||o.closeMenu(),!0):!1}},state:{init:()=>({block:void 0}),apply:(n,r)=>n.getMeta(av)||(!n.getMeta(at)&&(n.selectionSet||n.docChanged)?{block:void 0}:r)}}))}static key(){return"filePanel"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}class jY{constructor(e,n,r){V(this,"state"),V(this,"emitUpdate"),V(this,"preventHide",!1),V(this,"preventShow",!1),V(this,"shouldShow",({view:o,state:i,from:s,to:a})=>{const{doc:u,selection:d}=i,{empty:h}=d,p=!u.textBetween(s,a).length&&rg(i.selection);if(d.$from.parent.type.spec.code||r1(d)&&d.node.type.spec.code||h||p)return!1;const g=document.activeElement;return!(!this.isElementWithinEditorWrapper(g)&&o.editable)}),V(this,"blurHandler",o=>{var i;if(this.preventHide){this.preventHide=!1;return}const s=this.pmView.dom.parentElement;o&&o.relatedTarget&&(s===o.relatedTarget||s.contains(o.relatedTarget)||o.relatedTarget.matches(".bn-ui-container, .bn-ui-container *"))||(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),V(this,"isElementWithinEditorWrapper",o=>{if(!o)return!1;const i=this.pmView.dom.parentElement;return i?i.contains(o):!1}),V(this,"viewMousedownHandler",o=>{(!this.isElementWithinEditorWrapper(o.target)||o.button===0)&&(this.preventShow=!0)}),V(this,"mouseupHandler",()=>{this.preventShow&&(this.preventShow=!1,setTimeout(()=>this.update(this.pmView)))}),V(this,"dragHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),V(this,"scrollHandler",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.getSelectionBoundingBox(),this.emitUpdate())}),V(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized formatting toolbar");r(this.state)},n.dom.addEventListener("mousedown",this.viewMousedownHandler),n.root.addEventListener("mouseup",this.mouseupHandler),n.dom.addEventListener("dragstart",this.dragHandler),n.dom.addEventListener("dragover",this.dragHandler),n.dom.addEventListener("blur",this.blurHandler),n.root.addEventListener("scroll",this.scrollHandler,!0)}update(e,n){var r,o,i;const{state:s,composing:a}=e,{doc:u,selection:d}=s,h=n&&n.doc.eq(u)&&n.selection.eq(d);if(a||h)return;const{ranges:p}=d,g=Math.min(...p.map(k=>k.$from.pos)),b=Math.max(...p.map(k=>k.$to.pos)),v=this.shouldShow({view:e,state:s,from:g,to:b}),C=typeof Range.prototype.getClientRects>"u";if(!this.preventShow&&(v||this.preventHide)&&!C){const k={show:!0,referencePos:this.getSelectionBoundingBox()};(k.show!==((r=this.state)==null?void 0:r.show)||k.referencePos.toJSON()!==((o=this.state)==null?void 0:o.referencePos.toJSON()))&&(this.state=k,this.emitUpdate());return}if((i=this.state)!=null&&i.show&&!this.preventHide&&(!v||this.preventShow||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("mouseup",this.mouseupHandler),this.pmView.dom.removeEventListener("dragstart",this.dragHandler),this.pmView.dom.removeEventListener("dragover",this.dragHandler),this.pmView.dom.removeEventListener("blur",this.blurHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0)}getSelectionBoundingBox(){const{state:e}=this.pmView,{selection:n}=e,{ranges:r}=n,o=Math.min(...r.map(s=>s.$from.pos)),i=Math.max(...r.map(s=>s.$to.pos));if(r1(n)){const s=this.pmView.nodeDOM(o);if(s)return s.getBoundingClientRect()}return Up(this.pmView,o,i)}}const VY=new ot("FormattingToolbarPlugin");class zY extends pn{constructor(e){super(),V(this,"view"),V(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new Ge({key:VY,view:n=>(this.view=new jY(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"formattingToolbar"}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}onUpdate(e){return this.on("update",e)}}const UY=_o.create({name:"hardBreak",inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,priority:10,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",wr(this.options.HTMLAttributes,t)]},renderText(){return`
`}}),dA=(t,e)=>{const n=t.resolve(e);if(n.depth<=1)return;const r=n.posAtIndex(n.index(n.depth-1),n.depth-1);return nf(t.resolve(r))},bp=(t,e)=>{const n=t.resolve(e),r=n.index();if(r===0)return;const o=n.posAtIndex(r-1);return nf(t.resolve(o))},C4=(t,e)=>{for(;e.childContainer;){const n=e.childContainer.node,r=t.resolve(e.childContainer.beforePos+1).posAtIndex(n.childCount-1);e=nf(t.resolve(r))}return e},$Y=(t,e)=>t.isBlockContainer&&t.blockContent.node.type.spec.content==="inline*"&&t.blockContent.node.childCount>0&&e.isBlockContainer&&e.blockContent.node.type.spec.content==="inline*",FY=(t,e,n,r)=>{if(!r.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but next block is not a block container`);if(r.childContainer){const o=t.doc.resolve(r.childContainer.beforePos+1),i=t.doc.resolve(r.childContainer.afterPos-1),s=o.blockRange(i);if(e){const a=t.doc.resolve(r.bnBlock.beforePos);t.tr.lift(s,a.depth)}}if(e){if(!n.isBlockContainer)throw new Error(`Attempted to merge block at position ${r.bnBlock.beforePos} into previous block at position ${n.bnBlock.beforePos}, but previous block is not a block container`);e(t.tr.delete(n.blockContent.afterPos-1,r.blockContent.beforePos+1))}return!0},fA=t=>({state:e,dispatch:n})=>{const r=e.doc.resolve(t),o=nf(r),i=bp(e.doc,o.bnBlock.beforePos);if(!i)return!1;const s=C4(e.doc,i);return $Y(s,o)?FY(e,n,s,o):!1},GY=St.create({priority:50,addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({chain:r,commands:o})=>[()=>o.deleteSelection(),()=>o.undoInputRule(),()=>o.command(({state:i})=>{const s=Nt(i);if(!s.isBlockContainer)return!1;const a=i.selection.from===s.blockContent.beforePos+1,u=s.blockContent.node.type.name==="paragraph";return a&&!u?o.command(Dn(s.bnBlock.beforePos,{type:"paragraph",props:{}})):!1}),()=>o.command(({state:i})=>{const s=Nt(i);if(!s.isBlockContainer)return!1;const{blockContent:a}=s;return i.selection.from===a.beforePos+1?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:i})=>{const s=Nt(i);if(!s.isBlockContainer)return!1;const{bnBlock:a,blockContent:u}=s,d=i.selection.from===u.beforePos+1,h=i.selection.empty,p=a.beforePos;return d&&h?r().command(fA(p)).scrollIntoView().run():!1}),()=>o.command(({state:i,dispatch:s})=>{const a=Nt(i);if(!a.isBlockContainer||i.selection.from!==a.blockContent.beforePos+1||bp(i.doc,a.bnBlock.beforePos))return!1;const u=dA(i.doc,a.bnBlock.beforePos);if(u?.blockNoteType!=="column")return!1;const d=u,h=dA(i.doc,d.bnBlock.beforePos);if(h?.blockNoteType!=="columnList")throw new Error("parent of column is not a column list");const p=d.childContainer.node.childCount===1,g=p&&h.childContainer.node.childCount===2,b=h.childContainer.node.firstChild===d.bnBlock.node;if(s){const v=i.doc.slice(a.bnBlock.beforePos,a.bnBlock.afterPos,!1);if(g)if(b){i.tr.step(new Ft(h.bnBlock.beforePos,h.bnBlock.afterPos,d.bnBlock.afterPos+1,h.bnBlock.afterPos-2,v,v.size,!1));const C=i.tr.doc.resolve(d.bnBlock.beforePos);i.tr.setSelection(xe.between(C,C))}else{i.tr.step(new Ft(h.bnBlock.beforePos,h.bnBlock.afterPos,h.bnBlock.beforePos+2,d.bnBlock.beforePos-1,v,0,!1));const C=i.tr.doc.resolve(i.tr.mapping.map(d.bnBlock.beforePos-1));i.tr.setSelection(xe.between(C,C))}else if(p)if(b){i.tr.delete(d.bnBlock.beforePos,d.bnBlock.afterPos),i.tr.insert(h.bnBlock.beforePos,v.content);const C=i.tr.doc.resolve(h.bnBlock.beforePos);i.tr.setSelection(xe.between(C,C))}else i.tr.delete(d.bnBlock.beforePos-1,d.bnBlock.beforePos+1);else{i.tr.delete(a.bnBlock.beforePos,a.bnBlock.afterPos),b?i.tr.insert(h.bnBlock.beforePos-1,v.content):i.tr.insert(d.bnBlock.beforePos-1,v.content);const C=i.tr.doc.resolve(d.bnBlock.beforePos-1);i.tr.setSelection(xe.between(C,C))}}return!0}),()=>o.command(({state:i})=>{const s=Nt(i);if(!s.isBlockContainer)return!1;if(s.blockContent.node.childCount===0&&s.blockContent.node.type.spec.content==="inline*"){const a=bp(i.doc,s.bnBlock.beforePos);if(!a||!a.isBlockContainer)return!1;let u=r();if(a.blockContent.node.type.spec.content==="tableRow+"){const d=s.bnBlock.beforePos-1-1-1-1-1;u=u.setTextSelection(d)}else if(a.blockContent.node.type.spec.content===""){const d=a.blockContent.afterPos-a.blockContent.node.nodeSize;u=u.setNodeSelection(d)}else{const d=a.blockContent.afterPos-a.blockContent.node.nodeSize;u=u.setTextSelection(d)}return u.deleteRange({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos}).scrollIntoView().run()}return!1}),()=>o.command(({state:i})=>{const s=Nt(i);if(!s.isBlockContainer)throw new Error("todo");const a=i.selection.from===s.blockContent.beforePos+1,u=i.selection.empty,d=bp(i.doc,s.bnBlock.beforePos);if(d&&a&&u){const h=C4(i.doc,d);if(!h.isBlockContainer)throw new Error("todo");if(h.blockContent.node.type.spec.content===""||h.blockContent.node.type.spec.content==="inline*"&&h.blockContent.node.childCount===0)return r().cut({from:s.bnBlock.beforePos,to:s.bnBlock.afterPos},h.bnBlock.afterPos).deleteRange({from:h.bnBlock.beforePos,to:h.bnBlock.afterPos}).run()}return!1})]),e=()=>this.editor.commands.first(({commands:r})=>[()=>r.deleteSelection(),()=>r.command(({state:o})=>{const i=Nt(o);if(!i.isBlockContainer)return!1;const{bnBlock:s,blockContent:a,childContainer:u}=i,{depth:d}=o.doc.resolve(s.beforePos),h=s.afterPos===o.doc.nodeSize-3,p=o.selection.from===a.afterPos-1,g=o.selection.empty;if(!h&&p&&g&&u===void 0){let b=d,v=s.afterPos+1,C=o.doc.resolve(v).depth;for(;C<b;)b=C,v+=2,C=o.doc.resolve(v).depth;return r.command(fA(v-1))}return!1})]),n=(r=!1)=>this.editor.commands.first(({commands:o,tr:i})=>[()=>o.command(({state:s})=>{const a=Nt(s);if(!a.isBlockContainer)return!1;const{bnBlock:u,blockContent:d}=a,{depth:h}=s.doc.resolve(u.beforePos),p=s.selection.$anchor.parentOffset===0,g=s.selection.anchor===s.selection.head,b=d.node.childCount===0,v=h>1;return p&&g&&b&&v?o.liftListItem("blockContainer"):!1}),()=>o.command(({state:s})=>{const a=Nt(s),u=this.options.editor.schema.blockSchema[a.blockNoteType].hardBreakShortcut??"shift+enter";if(u==="none")return!1;if(u==="shift+enter"&&r||u==="enter"){const d=i.storedMarks||i.selection.$head.marks().filter(h=>this.editor.extensionManager.splittableMarks.includes(h.type.name));return i.insert(i.selection.head,i.doc.type.schema.nodes.hardBreak.create()).ensureMarks(d),!0}return!1}),()=>o.command(({state:s,dispatch:a})=>{const u=Nt(s);if(!u.isBlockContainer)return!1;const{bnBlock:d,blockContent:h}=u,p=s.selection.$anchor.parentOffset===0,g=s.selection.anchor===s.selection.head,b=h.node.childCount===0;if(p&&g&&b){const v=d.afterPos,C=v+2;if(a){const k=s.schema.nodes.blockContainer.createAndFill();s.tr.insert(v,k).scrollIntoView(),s.tr.setSelection(new xe(s.doc.resolve(C)))}return!0}return!1}),()=>o.command(({state:s,chain:a})=>{const u=Nt(s);if(!u.isBlockContainer)return!1;const{blockContent:d}=u,h=s.selection.$anchor.parentOffset===0;return d.node.childCount===0?!1:(a().deleteSelection().command(e4(s.selection.from,h,h)).run(),!0)})]);return{Backspace:t,Delete:e,Enter:()=>n(),"Shift-Enter":()=>n(!0),Tab:()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:d4(this.options.editor)},"Shift-Tab":()=>{var r,o,i;return this.options.tabBehavior!=="prefer-indent"&&((r=this.options.editor.formattingToolbar)!=null&&r.shown||(o=this.options.editor.linkToolbar)!=null&&o.shown||(i=this.options.editor.filePanel)!=null&&i.shown)?!1:(this.editor.commands.liftListItem("blockContainer"),!0)},"Shift-Mod-ArrowUp":()=>(this.options.editor.moveBlocksUp(),!0),"Shift-Mod-ArrowDown":()=>(this.options.editor.moveBlocksDown(),!0),"Mod-z":()=>this.options.editor.undo(),"Mod-y":()=>this.options.editor.redo(),"Shift-Mod-z":()=>this.options.editor.redo()}}});class qY{constructor(e,n,r){V(this,"state"),V(this,"emitUpdate"),V(this,"menuUpdateTimer"),V(this,"startMenuUpdateTimer"),V(this,"stopMenuUpdateTimer"),V(this,"mouseHoveredLinkMark"),V(this,"mouseHoveredLinkMarkRange"),V(this,"keyboardHoveredLinkMark"),V(this,"keyboardHoveredLinkMarkRange"),V(this,"linkMark"),V(this,"linkMarkRange"),V(this,"mouseOverHandler",o=>{if(this.mouseHoveredLinkMark=void 0,this.mouseHoveredLinkMarkRange=void 0,this.stopMenuUpdateTimer(),o.target instanceof HTMLAnchorElement&&o.target.nodeName==="A"){const i=o.target,s=this.pmView.posAtDOM(i,0)+1,a=this.pmView.state.doc.resolve(s),u=a.marks();for(const d of u)if(d.type.name===this.pmView.state.schema.mark("link").type.name){this.mouseHoveredLinkMark=d,this.mouseHoveredLinkMarkRange=xd(a,d.type,d.attrs)||void 0;break}}return this.startMenuUpdateTimer(),!1}),V(this,"clickHandler",o=>{var i;const s=this.pmView.dom.parentElement;this.linkMark&&o&&o.target&&!(s===o.target||s.contains(o.target))&&(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate())}),V(this,"scrollHandler",()=>{var o;this.linkMark!==void 0&&(o=this.state)!=null&&o.show&&(this.state.referencePos=Up(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),this.emitUpdate())}),V(this,"closeMenu",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.show=!1,this.emitUpdate())}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized link toolbar");r(this.state)},this.startMenuUpdateTimer=()=>{this.menuUpdateTimer=setTimeout(()=>{this.update(this.pmView,void 0,!0)},250)},this.stopMenuUpdateTimer=()=>(this.menuUpdateTimer&&(clearTimeout(this.menuUpdateTimer),this.menuUpdateTimer=void 0),!1),this.pmView.dom.addEventListener("mouseover",this.mouseOverHandler),this.pmView.root.addEventListener("click",this.clickHandler,!0),this.pmView.root.addEventListener("scroll",this.scrollHandler,!0)}editLink(e,n){var r;this.editor.transact(o=>{const i=gn(o);o.insertText(n,this.linkMarkRange.from,this.linkMarkRange.to),o.addMark(this.linkMarkRange.from,this.linkMarkRange.from+n.length,i.mark("link",{href:e}))}),this.pmView.focus(),(r=this.state)!=null&&r.show&&(this.state.show=!1,this.emitUpdate())}deleteLink(){var e;this.editor.transact(n=>n.removeMark(this.linkMarkRange.from,this.linkMarkRange.to,this.linkMark.type).setMeta("preventAutolink",!0)),this.pmView.focus(),(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate())}update(e,n,r=!1){var o;const{state:i}=e;if(n&&n.selection.from===i.selection.from&&n.selection.to===i.selection.to||!this.pmView.hasFocus())return;const s=this.linkMark;if(this.linkMark=void 0,this.linkMarkRange=void 0,this.keyboardHoveredLinkMark=void 0,this.keyboardHoveredLinkMarkRange=void 0,this.pmView.state.selection.empty){const a=this.pmView.state.selection.$from.marks();for(const u of a)if(u.type.name===this.pmView.state.schema.mark("link").type.name){this.keyboardHoveredLinkMark=u,this.keyboardHoveredLinkMarkRange=xd(this.pmView.state.selection.$from,u.type,u.attrs)||void 0;break}}if(this.mouseHoveredLinkMark&&r&&(this.linkMark=this.mouseHoveredLinkMark,this.linkMarkRange=this.mouseHoveredLinkMarkRange),this.keyboardHoveredLinkMark&&(this.linkMark=this.keyboardHoveredLinkMark,this.linkMarkRange=this.keyboardHoveredLinkMarkRange),this.linkMark&&this.editor.isEditable){this.state={show:!0,referencePos:Up(this.pmView,this.linkMarkRange.from,this.linkMarkRange.to),url:this.linkMark.attrs.href,text:this.pmView.state.doc.textBetween(this.linkMarkRange.from,this.linkMarkRange.to)},this.emitUpdate();return}if((o=this.state)!=null&&o.show&&s&&(!this.linkMark||!this.editor.isEditable)){this.state.show=!1,this.emitUpdate();return}}destroy(){this.pmView.dom.removeEventListener("mouseover",this.mouseOverHandler),this.pmView.root.removeEventListener("scroll",this.scrollHandler,!0),this.pmView.root.removeEventListener("click",this.clickHandler,!0)}}const KY=new ot("LinkToolbarPlugin");class ZY extends pn{constructor(e){super(),V(this,"view"),V(this,"editLink",(n,r)=>{this.view.editLink(n,r)}),V(this,"deleteLink",()=>{this.view.deleteLink()}),V(this,"startHideTimer",()=>{this.view.startMenuUpdateTimer()}),V(this,"stopHideTimer",()=>{this.view.stopMenuUpdateTimer()}),V(this,"closeMenu",()=>this.view.closeMenu()),this.addProsemirrorPlugin(new Ge({key:KY,view:n=>(this.view=new qY(e,n,r=>{this.emit("update",r)}),this.view),props:{handleKeyDown:(n,r)=>r.key==="Escape"&&this.shown?(this.view.closeMenu(),!0):!1}}))}static key(){return"linkToolbar"}onUpdate(e){return this.on("update",e)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const S4=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"],k4="https",YY=new ot("node-selection-keyboard");class WY extends pn{static key(){return"nodeSelectionKeyboard"}constructor(){super(),this.addProsemirrorPlugin(new Ge({key:YY,props:{handleKeyDown:(e,n)=>{if("node"in e.state.selection){if(n.ctrlKey||n.metaKey)return!1;if(n.key.length===1)return n.preventDefault(),!0;if(n.key==="Enter"&&!n.shiftKey&&!n.altKey&&!n.ctrlKey&&!n.metaKey){const r=e.state.tr;return e.dispatch(r.insert(e.state.tr.selection.$to.after(),e.state.schema.nodes.paragraph.createChecked()).setSelection(new xe(r.doc.resolve(e.state.tr.selection.$to.after()+1)))),!0}}return!1}}}))}}const XY=new ot("blocknote-placeholder");class JY extends pn{static key(){return"placeholder"}constructor(e,n){super(),this.addProsemirrorPlugin(new Ge({key:XY,view:r=>{var o,i;const s=`placeholder-selector-${ZR()}`;r.dom.classList.add(s);const a=document.createElement("style"),u=e._tiptapEditor.options.injectNonce;u&&a.setAttribute("nonce",u),((o=e.prosemirrorView)==null?void 0:o.root)instanceof ShadowRoot?e.prosemirrorView.root.append(a):(i=e.prosemirrorView)==null||i.root.head.appendChild(a);const d=a.sheet,h=(p="")=>`.${s} .bn-block-content${p} .bn-inline-content:has(> .ProseMirror-trailingBreak:only-child):before`;try{const{default:p,emptyDocument:g,...b}=n;for(const[k,E]of Object.entries(b)){const T=`[data-content-type="${k}"]`;d.insertRule(`${h(T)} { content: ${JSON.stringify(E)}; }`)}d.insertRule(`${h("[data-is-only-empty-block]")} { content: ${JSON.stringify(g)}; }`),d.insertRule(`${h("[data-is-empty-and-focused]")} { content: ${JSON.stringify(p)}; }`)}catch(p){console.warn("Failed to insert placeholder CSS rule - this is likely due to the browser not supporting certain CSS pseudo-element selectors (:has, :only-child:, or :before)",p)}return{destroy:()=>{var p,g;((p=e.prosemirrorView)==null?void 0:p.root)instanceof ShadowRoot?e.prosemirrorView.root.removeChild(a):(g=e.prosemirrorView)==null||g.root.head.removeChild(a)}}},props:{decorations:r=>{const{doc:o,selection:i}=r;if(!e.isEditable||!i.empty||i.$from.parent.type.spec.code)return;const s=[];r.doc.content.size===6&&s.push(mt.node(2,4,{"data-is-only-empty-block":"true"}));const a=i.$anchor,u=a.parent;if(u.content.size===0){const d=a.before();s.push(mt.node(d,d+u.nodeSize,{"data-is-empty-and-focused":"true"}))}return et.create(o,s)}}}))}}const hA=new ot("previous-blocks"),QY={index:"index",level:"level",type:"type",depth:"depth","depth-change":"depth-change"};class eW extends pn{static key(){return"previousBlockType"}constructor(){super();let e;this.addProsemirrorPlugin(new Ge({key:hA,view(n){return{update:async(r,o)=>{var i;((i=this.key)==null?void 0:i.getState(r.state).updatedBlocks.size)>0&&(e=setTimeout(()=>{r.dispatch(r.state.tr.setMeta(hA,{clearUpdate:!0}))},0))},destroy:()=>{e&&clearTimeout(e)}}},state:{init(){return{prevTransactionOldBlockAttrs:{},currentTransactionOldBlockAttrs:{},updatedBlocks:new Set}},apply(n,r,o,i){if(r.currentTransactionOldBlockAttrs={},r.updatedBlocks.clear(),!n.docChanged||o.doc.eq(i.doc))return r;const s={},a=ZM(o.doc,h=>h.attrs.id),u=new Map(a.map(h=>[h.node.attrs.id,h])),d=ZM(i.doc,h=>h.attrs.id);for(const h of d){const p=u.get(h.node.attrs.id),g=p?.node.firstChild,b=h.node.firstChild;if(p&&g&&b){const v={index:b.attrs.index,level:b.attrs.level,type:b.type.name,depth:i.doc.resolve(h.pos).depth};let C={index:g.attrs.index,level:g.attrs.level,type:g.type.name,depth:o.doc.resolve(p.pos).depth};s[h.node.attrs.id]=C,n.getMeta("numberedListIndexing")&&(h.node.attrs.id in r.prevTransactionOldBlockAttrs&&(C=r.prevTransactionOldBlockAttrs[h.node.attrs.id]),v.type==="numberedListItem"&&(C.index=v.index)),r.currentTransactionOldBlockAttrs[h.node.attrs.id]=C,JSON.stringify(C)!==JSON.stringify(v)&&(C["depth-change"]=C.depth-v.depth,r.updatedBlocks.add(h.node.attrs.id))}}return r.prevTransactionOldBlockAttrs=s,r}},props:{decorations(n){const r=this.getState(n);if(r.updatedBlocks.size===0)return;const o=[];return n.doc.descendants((i,s)=>{if(!i.attrs.id||!r.updatedBlocks.has(i.attrs.id))return;const a=r.currentTransactionOldBlockAttrs[i.attrs.id],u={};for(const[h,p]of Object.entries(a))u["data-prev-"+QY[h]]=p||"none";const d=mt.node(s,s+i.nodeSize,{...u});o.push(d)}),et.create(n.doc,o)}}}))}}const pA=new ot("blocknote-show-selection");class tW extends pn{constructor(e){super(),V(this,"enabled",!1),this.editor=e,this.addProsemirrorPlugin(new Ge({key:pA,props:{decorations:n=>{const{doc:r,selection:o}=n;if(!this.enabled)return et.empty;const i=mt.inline(o.from,o.to,{"data-show-selection":"true"});return et.create(r,[i])}}}))}static key(){return"showSelection"}setEnabled(e){this.enabled!==e&&(this.enabled=e,this.editor.transact(n=>n.setMeta(pA,{})))}getEnabled(){return this.enabled}}function E4(t,e){for(var n,r;t&&t.parentElement&&t.parentElement!==e.dom&&((n=t.getAttribute)==null?void 0:n.call(t,"data-node-type"))!=="blockContainer";)t=t.parentElement;if(((r=t.getAttribute)==null?void 0:r.call(t,"data-node-type"))==="blockContainer")return{node:t,id:t.getAttribute("data-id")}}let U1=class yp extends Oe{constructor(e,n){super(e,n),V(this,"nodes");const r=e.node();this.nodes=[],e.doc.nodesBetween(e.pos,n.pos,(o,i,s)=>{if(s!==null&&s.eq(r))return this.nodes.push(o),!1})}static create(e,n,r=n){return new yp(e.resolve(n),e.resolve(r))}content(){return new le(X.from(this.nodes),0,0)}eq(e){if(!(e instanceof yp)||this.nodes.length!==e.nodes.length||this.from!==e.from||this.to!==e.to)return!1;for(let n=0;n<this.nodes.length;n++)if(!this.nodes[n].eq(e.nodes[n]))return!1;return!0}map(e,n){const r=n.mapResult(this.from),o=n.mapResult(this.to);return o.deleted?Oe.near(e.resolve(r.pos)):r.deleted?Oe.near(e.resolve(o.pos)):new yp(e.resolve(r.pos),e.resolve(o.pos))}toJSON(){return{type:"multiple-node",anchor:this.anchor,head:this.head}}};Oe.jsonID("multiple-node",U1);let Xr;function nW(t,e){let n,r;const o=e.resolve(t.from).node().type.spec.group==="blockContent",i=e.resolve(t.to).node().type.spec.group==="blockContent",s=Math.min(t.$anchor.depth,t.$head.depth);if(o&&i){const a=t.$from.start(s-1),u=t.$to.end(s-1);n=e.resolve(a-1).pos,r=e.resolve(u+1).pos}else n=t.from,r=t.to;return{from:n,to:r}}function mA(t,e,n=e){e===n&&(n+=t.state.doc.resolve(e+1).node().nodeSize);const r=t.domAtPos(e).node.cloneNode(!0),o=t.domAtPos(e).node,i=(h,p)=>Array.prototype.indexOf.call(h.children,p),s=i(o,t.domAtPos(e+1).node.parentElement),a=i(o,t.domAtPos(n-1).node.parentElement);for(let h=o.childElementCount-1;h>=0;h--)(h>a||h<s)&&r.removeChild(r.children[h]);M4(t.root),Xr=r;const u=Xr.getElementsByTagName("iframe");for(let h=0;h<u.length;h++){const p=u[h],g=p.parentElement;g&&g.removeChild(p)}const d=t.dom.className.split(" ").filter(h=>h!=="ProseMirror"&&h!=="bn-root"&&h!=="bn-editor").join(" ");Xr.className=Xr.className+" bn-drag-preview "+d,t.root instanceof ShadowRoot?t.root.appendChild(Xr):t.root.body.appendChild(Xr)}function M4(t){Xr!==void 0&&(t instanceof ShadowRoot?t.removeChild(Xr):t.body.removeChild(Xr),Xr=void 0)}function rW(t,e,n){if(!t.dataTransfer)return;const r=n.prosemirrorView;if(!r)return;const o=Sr(e.id,r.state.doc);if(!o)throw new Error(`Block with ID ${e.id} not found`);const i=o.posBeforeNode;if(i!=null){const s=r.state.selection,a=r.state.doc,{from:u,to:d}=nW(s,a),h=u<=i&&i<d,p=s.$anchor.node()!==s.$head.node()||s instanceof U1;h&&p?(r.dispatch(r.state.tr.setSelection(U1.create(a,u,d))),mA(r,u,d)):(r.dispatch(r.state.tr.setSelection(ke.create(r.state.doc,i))),mA(r,i));const g=r.state.selection.content(),b=n.pmSchema,v=r.serializeForClipboard(g).dom.innerHTML,C=wg(b,n),k=b4(g.content),E=C.exportBlocks(k,{}),T=Px(E);t.dataTransfer.clearData(),t.dataTransfer.setData("blocknote/html",v),t.dataTransfer.setData("text/html",E),t.dataTransfer.setData("text/plain",T),t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(Xr,0,0)}}const gA=250;function $1(t,e,n=!0){const r=t.root.elementsFromPoint(e.left,e.top);for(const o of r)if(t.dom.contains(o))return n&&o.closest("[data-node-type=columnList]")?$1(t,{left:e.left+50,top:e.top},!1):E4(o,t)}function oW(t,e){if(!e.dom.firstChild)return;const n=e.dom.firstChild.getBoundingClientRect(),r={left:Math.min(Math.max(n.left+10,t.x),n.right-10),top:t.y},o=$1(e,r);if(!o)return;const i=o.node.getBoundingClientRect();return $1(e,{left:i.right-10,top:t.y},!1)}class iW{constructor(e,n,r){V(this,"state"),V(this,"emitUpdate"),V(this,"mousePos"),V(this,"hoveredBlock"),V(this,"menuFrozen",!1),V(this,"isDragOrigin",!1),V(this,"updateState",o=>{this.state=o,this.emitUpdate(this.state)}),V(this,"updateStateFromMousePos",()=>{var o,i,s,a,u;if(this.menuFrozen||!this.mousePos)return;const d=this.findClosestEditorElement({clientX:this.mousePos.x,clientY:this.mousePos.y});if(d?.element!==this.pmView.dom||d.distance>gA){(o=this.state)!=null&&o.show&&(this.state.show=!1,this.updateState(this.state));return}const h=oW(this.mousePos,this.pmView);if(!h||!this.editor.isEditable){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.updateState(this.state));return}if((s=this.state)!=null&&s.show&&(a=this.hoveredBlock)!=null&&a.hasAttribute("data-id")&&((u=this.hoveredBlock)==null?void 0:u.getAttribute("data-id"))===h.id)return;this.hoveredBlock=h.node;const p=h.node.firstChild;if(p&&this.editor.isEditable){const g=p.getBoundingClientRect(),b=h.node.closest("[data-node-type=column]");this.updateState({show:!0,referencePos:new DOMRect(b?b.firstElementChild.getBoundingClientRect().x:this.pmView.dom.firstChild.getBoundingClientRect().x,g.y,g.width,g.height),block:this.editor.getBlock(this.hoveredBlock.getAttribute("data-id"))})}}),V(this,"onDragStart",o=>{var i;const s=(i=o.dataTransfer)==null?void 0:i.getData("blocknote/html");if(!s||this.pmView.dragging)return;const a=document.createElement("div");a.innerHTML=s;const u=To.fromSchema(this.pmView.state.schema).parse(a,{topNode:this.pmView.state.schema.nodes.blockGroup.create()});this.pmView.dragging={slice:new le(u.content,0,0),move:!0}}),V(this,"findClosestEditorElement",o=>{const i=Array.from(this.pmView.root.querySelectorAll(".bn-editor"));if(i.length===0)return null;let s=i[0],a=Number.MAX_VALUE;return i.forEach(u=>{const d=u.querySelector(".bn-block-group").getBoundingClientRect(),h=o.clientX<d.left?d.left-o.clientX:o.clientX>d.right?o.clientX-d.right:0,p=o.clientY<d.top?d.top-o.clientY:o.clientY>d.bottom?o.clientY-d.bottom:0,g=Math.sqrt(Math.pow(h,2)+Math.pow(p,2));g<a&&(a=g,s=u)}),{element:s,distance:a}}),V(this,"onDragOver",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i||!i.isDropPoint){this.closeDropCursor();return}i.isDropPoint&&!i.isDropWithinEditorBounds&&this.dispatchSyntheticEvent(o)}),V(this,"closeDropCursor",()=>{const o=new Event("dragleave",{bubbles:!1});o.synthetic=!0,this.pmView.dom.dispatchEvent(o)}),V(this,"getDragEventContext",o=>{var i;const s=!((i=o.dataTransfer)!=null&&i.types.includes("blocknote/html"))&&!!this.pmView.dragging,a=!!this.isDragOrigin,u=s||a,d=this.findClosestEditorElement(o);if(!d||d.distance>gA)return;const h=d.element===this.pmView.dom,p=h&&d.distance===0;if(!(!h&&!u))return{isDropPoint:h,isDropWithinEditorBounds:p,isDragOrigin:u}}),V(this,"onDrop",o=>{if(o.synthetic)return;const i=this.getDragEventContext(o);if(!i){this.closeDropCursor();return}const{isDropPoint:s,isDropWithinEditorBounds:a,isDragOrigin:u}=i;if(!a&&s&&this.dispatchSyntheticEvent(o),s){if(this.pmView.dragging)return;this.pmView.dispatch(this.pmView.state.tr.setSelection(xe.create(this.pmView.state.tr.doc,this.pmView.state.tr.selection.anchor)));return}else if(u){setTimeout(()=>this.pmView.dispatch(this.pmView.state.tr.deleteSelection()),0);return}}),V(this,"onDragEnd",o=>{o.synthetic||(this.pmView.dragging=null)}),V(this,"onKeyDown",o=>{var i;(i=this.state)!=null&&i.show&&this.editor.isFocused()&&(this.state.show=!1,this.emitUpdate(this.state))}),V(this,"onMouseMove",o=>{var i;if(this.menuFrozen)return;this.mousePos={x:o.clientX,y:o.clientY};const s=this.pmView.dom.getBoundingClientRect(),a=this.mousePos.x>s.left&&this.mousePos.x<s.right&&this.mousePos.y>s.top&&this.mousePos.y<s.bottom,u=this.pmView.dom.parentElement;if(a&&o&&o.target&&!(u===o.target||u.contains(o.target))){(i=this.state)!=null&&i.show&&(this.state.show=!1,this.emitUpdate(this.state));return}this.updateStateFromMousePos()}),V(this,"onScroll",()=>{var o;(o=this.state)!=null&&o.show&&(this.state.referencePos=this.hoveredBlock.getBoundingClientRect(),this.emitUpdate(this.state)),this.updateStateFromMousePos()}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized side menu");r(this.state)},this.pmView.root.addEventListener("dragstart",this.onDragStart),this.pmView.root.addEventListener("dragover",this.onDragOver),this.pmView.root.addEventListener("drop",this.onDrop,!0),this.pmView.root.addEventListener("dragend",this.onDragEnd,!0),Hx(),this.pmView.root.addEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.addEventListener("keydown",this.onKeyDown,!0),n.root.addEventListener("scroll",this.onScroll,!0)}dispatchSyntheticEvent(e){const n=new Event(e.type,e),r=this.pmView.dom.firstChild.getBoundingClientRect();n.clientX=e.clientX,n.clientY=e.clientY,n.clientX=Math.min(Math.max(e.clientX,r.left),r.left+r.width),n.clientY=Math.min(Math.max(e.clientY,r.top),r.top+r.height),n.dataTransfer=e.dataTransfer,n.preventDefault=()=>e.preventDefault(),n.synthetic=!0,this.pmView.dom.dispatchEvent(n)}update(e,n){var r;!n.doc.eq(this.pmView.state.doc)&&(r=this.state)!=null&&r.show&&this.updateStateFromMousePos()}destroy(){var e;(e=this.state)!=null&&e.show&&(this.state.show=!1,this.emitUpdate(this.state)),this.pmView.root.removeEventListener("mousemove",this.onMouseMove,!0),this.pmView.root.removeEventListener("dragstart",this.onDragStart),this.pmView.root.removeEventListener("dragover",this.onDragOver),this.pmView.root.removeEventListener("drop",this.onDrop,!0),this.pmView.root.removeEventListener("dragend",this.onDragEnd,!0),this.pmView.root.removeEventListener("keydown",this.onKeyDown,!0),this.pmView.root.removeEventListener("scroll",this.onScroll,!0)}}const sW=new ot("SideMenuPlugin");class lW extends pn{constructor(e){super(),V(this,"view"),V(this,"blockDragStart",(n,r)=>{this.view&&(this.view.isDragOrigin=!0),rW(n,r,this.editor)}),V(this,"blockDragEnd",()=>{this.editor.prosemirrorView&&M4(this.editor.prosemirrorView.root),this.view&&(this.view.isDragOrigin=!1)}),V(this,"freezeMenu",()=>{this.view.menuFrozen=!0,this.view.state.show=!0,this.view.emitUpdate(this.view.state)}),V(this,"unfreezeMenu",()=>{this.view.menuFrozen=!1,this.view.state.show=!1,this.view.emitUpdate(this.view.state)}),this.editor=e,this.addProsemirrorPlugin(new Ge({key:sW,view:n=>(this.view=new iW(e,n,r=>{this.emit("update",r)}),this.view)}))}static key(){return"sideMenu"}onUpdate(e){return this.on("update",e)}}const Yh=new Map;function aW(t){if(Yh.has(t))return Yh.get(t);const e=new cc;return t._tiptapEditor.on("transaction",({transaction:n})=>{e.appendMapping(n.mapping)}),t._tiptapEditor.on("destroy",()=>{Yh.delete(t)}),Yh.set(t,e),e}function cW(t,e,n="left"){const r=at.getState(t._tiptapEditor.state);if(!r){const i=aW(t),s=i.maps.length;return()=>i.slice(s).map(e,n==="left"?-1:1)}const o=Hd(e+(n==="right"?1:0),r.binding.type,r.binding.mapping);return()=>{const i=at.getState(t._tiptapEditor.state),s=Tl(i.doc,i.binding.type,o,i.binding.mapping);if(s===null)throw new Error("Position not found, cannot track positions");return s+(n==="right"?-1:0)}}const uW=sg(t=>t.type.name==="blockContainer");class dW{constructor(e,n){V(this,"state"),V(this,"emitUpdate"),V(this,"rootEl"),V(this,"pluginState"),V(this,"handleScroll",()=>{var i,s;if((i=this.state)!=null&&i.show){const a=(s=this.rootEl)==null?void 0:s.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);if(!a)return;this.state.referencePos=a.getBoundingClientRect(),this.emitUpdate(this.pluginState.triggerCharacter)}}),V(this,"closeMenu",()=>{this.editor.transact(i=>i.setMeta(sc,null))}),V(this,"clearQuery",()=>{this.pluginState!==void 0&&this.editor._tiptapEditor.chain().focus().deleteRange({from:this.pluginState.queryStartPos()-(this.pluginState.deleteTriggerCharacter?this.pluginState.triggerCharacter.length:0),to:this.editor.transact(i=>i.selection.from)}).run()});var r,o;this.editor=e,this.pluginState=void 0,this.emitUpdate=i=>{var s;if(!this.state)throw new Error("Attempting to update uninitialized suggestions menu");n(i,{...this.state,ignoreQueryLength:(s=this.pluginState)==null?void 0:s.ignoreQueryLength})},this.rootEl=(r=this.editor.prosemirrorView)==null?void 0:r.root,(o=this.rootEl)==null||o.addEventListener("scroll",this.handleScroll,!0)}update(e,n){var r;const o=sc.getState(n),i=sc.getState(e.state),s=o===void 0&&i!==void 0,a=o!==void 0&&i===void 0;if(!s&&!(o!==void 0&&i!==void 0)&&!a)return;if(this.pluginState=a?o:i,a||!this.editor.isEditable){this.state&&(this.state.show=!1),this.emitUpdate(this.pluginState.triggerCharacter);return}const u=(r=this.rootEl)==null?void 0:r.querySelector(`[data-decoration-id="${this.pluginState.decorationId}"]`);this.editor.isEditable&&u&&(this.state={show:!0,referencePos:u.getBoundingClientRect(),query:this.pluginState.query},this.emitUpdate(this.pluginState.triggerCharacter))}destroy(){var e;(e=this.rootEl)==null||e.removeEventListener("scroll",this.handleScroll,!0)}}const sc=new ot("SuggestionMenuPlugin");class fW extends pn{constructor(e){super(),V(this,"view"),V(this,"triggerCharacters",[]),V(this,"addTriggerCharacter",r=>{this.triggerCharacters.push(r)}),V(this,"removeTriggerCharacter",r=>{this.triggerCharacters=this.triggerCharacters.filter(o=>o!==r)}),V(this,"closeMenu",()=>this.view.closeMenu()),V(this,"clearQuery",()=>this.view.clearQuery());const n=this.triggerCharacters;this.addProsemirrorPlugin(new Ge({key:sc,view:()=>(this.view=new dW(e,(r,o)=>{this.emit(`update ${r}`,o)}),this.view),state:{init(){},apply:(r,o,i,s)=>{if(r.getMeta("orderedListIndexing")!==void 0||r.selection.$from.parent.type.spec.code)return o;const a=r.getMeta(sc);if(typeof a=="object"&&a!==null){o&&this.closeMenu();const d=cW(e,s.selection.from-a.triggerCharacter.length);return{triggerCharacter:a.triggerCharacter,deleteTriggerCharacter:a.deleteTriggerCharacter!==!1,queryStartPos:()=>d()+a.triggerCharacter.length,query:"",decorationId:`id_${Math.floor(Math.random()*4294967295)}`,ignoreQueryLength:a?.ignoreQueryLength}}if(o===void 0)return o;if(s.selection.from!==s.selection.to||a===null||r.getMeta("focus")||r.getMeta("blur")||r.getMeta("pointer")||o.triggerCharacter!==void 0&&s.selection.from<o.queryStartPos()||!s.selection.$from.sameParent(s.doc.resolve(o.queryStartPos())))return;const u={...o};return u.query=s.doc.textBetween(o.queryStartPos(),s.selection.from),u}},props:{handleTextInput(r,o,i,s){if(o===i){const a=r.state.doc;for(const u of n){const d=u.length>1?a.textBetween(o-u.length,o)+s:s;if(u===d)return r.dispatch(r.state.tr.insertText(s)),r.dispatch(r.state.tr.setMeta(sc,{triggerCharacter:d}).scrollIntoView()),!0}}return!1},decorations(r){const o=this.getState(r);if(o===void 0)return null;if(!o.deleteTriggerCharacter){const i=uW(r.selection);if(i)return et.create(r.doc,[mt.node(i.pos,i.pos+i.node.nodeSize,{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}return et.create(r.doc,[mt.inline(o.queryStartPos()-o.triggerCharacter.length,o.queryStartPos(),{nodeName:"span",class:"bn-suggestion-decorator","data-decoration-id":o.decorationId})])}}}))}static key(){return"suggestionMenu"}onUpdate(e,n){return this.triggerCharacters.includes(e)||this.addTriggerCharacter(e),this.on(`update ${e}`,n)}get shown(){var e,n;return((n=(e=this.view)==null?void 0:e.state)==null?void 0:n.show)||!1}}const hW=kn.create({name:"insertion",inclusive:!1,excludes:"deletion modification insertion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="insertion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["ins",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"ins",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),pW=kn.create({name:"deletion",inclusive:!1,excludes:"insertion modification deletion",addAttributes(){return{id:{default:null,validate:"number"}}},extendMarkSchema(t){return t.name!=="deletion"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return["del",{"data-id":String(e.attrs.id),"data-inline":String(n),...!n&&{style:"display: contents"}},0]},parseDOM:[{tag:"del",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10)}:!1}}]}}}),mW=kn.create({name:"modification",inclusive:!1,excludes:"deletion insertion",addAttributes(){return{id:{default:null,validate:"number"},type:{validate:"string"},attrName:{default:null,validate:"string|null"},previousValue:{default:null},newValue:{default:null}}},extendMarkSchema(t){return t.name!=="modification"?{}:{blocknoteIgnore:!0,inclusive:!1,toDOM(e,n){return[n?"span":"div",{"data-type":"modification","data-id":String(e.attrs.id),"data-mod-type":e.attrs.type,"data-mod-prev-val":JSON.stringify(e.attrs.previousValue),"data-mod-new-val":JSON.stringify(e.attrs.newValue)},0]},parseDOM:[{tag:"span[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal,newValue:e.dataset.modNewVal}:!1}},{tag:"div[data-type='modification']",getAttrs(e){return e.dataset.id?{id:parseInt(e.dataset.id,10),type:e.dataset.modType,previousValue:e.dataset.modPrevVal}:!1}}]}}});let Jn;function bA(t){Jn||(Jn=document.createElement("div"),Jn.innerHTML="_",Jn.style.opacity="0",Jn.style.height="1px",Jn.style.width="1px",t instanceof Document?t.body.appendChild(Jn):t.appendChild(Jn))}function gW(t){Jn&&(t instanceof Document?t.body.removeChild(Jn):t.removeChild(Jn),Jn=void 0)}function Wh(t){return Array.prototype.indexOf.call(t.parentElement.childNodes,t)}function bW(t){let e=t;for(;e&&e.nodeName!=="TD"&&e.nodeName!=="TH"&&!e.classList.contains("tableWrapper");){if(e.classList.contains("ProseMirror"))return;const n=e.parentNode;if(!n||!(n instanceof Element))return;e=n}return e.nodeName==="TD"||e.nodeName==="TH"?{type:"cell",domNode:e,tbodyNode:e.closest("tbody")}:{type:"wrapper",domNode:e,tbodyNode:e.querySelector("tbody")}}function yW(t,e){const n=e.querySelectorAll(t);for(let r=0;r<n.length;r++)n[r].style.visibility="hidden"}class vW{constructor(e,n,r){V(this,"state"),V(this,"emitUpdate"),V(this,"tableId"),V(this,"tablePos"),V(this,"tableElement"),V(this,"menuFrozen",!1),V(this,"mouseState","up"),V(this,"prevWasEditable",null),V(this,"viewMousedownHandler",()=>{this.mouseState="down"}),V(this,"mouseUpHandler",o=>{this.mouseState="up",this.mouseMoveHandler(o)}),V(this,"mouseMoveHandler",o=>{var i,s,a,u,d,h,p;if(this.menuFrozen||this.mouseState==="selecting"||!(o.target instanceof Element)||!this.pmView.dom.contains(o.target))return;const g=bW(o.target);if(g?.type==="cell"&&this.mouseState==="down"&&!((i=this.state)!=null&&i.draggingState)){this.mouseState="selecting",(s=this.state)!=null&&s.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!g||!this.editor.isEditable){(a=this.state)!=null&&a.show&&(this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate());return}if(!g.tbodyNode)return;const b=g.tbodyNode.getBoundingClientRect(),v=E4(g.domNode,this.pmView);if(!v)return;this.tableElement=v.node;let C;const k=this.editor.transact(N=>Sr(v.id,N.doc));if(!k)throw new Error(`Block with ID ${v.id} not found`);const E=Bt(k.node,this.editor.pmSchema,this.editor.schema.blockSchema,this.editor.schema.inlineContentSchema,this.editor.schema.styleSchema);if(MZ("table",E,this.editor)&&(this.tablePos=k.posBeforeNode+1,C=E),!C)return;this.tableId=v.id;const T=(u=g.domNode.closest(".tableWrapper"))==null?void 0:u.querySelector(".table-widgets-container");if(g?.type==="wrapper"){const N=o.clientY>=b.bottom-1&&o.clientY<b.bottom+20,_=o.clientX>=b.right-1&&o.clientX<b.right+20,O=o.clientX>b.right||o.clientY>b.bottom;this.state={...this.state,show:!0,showAddOrRemoveRowsButton:N,showAddOrRemoveColumnsButton:_,referencePosTable:b,block:C,widgetContainer:T,colIndex:O||(d=this.state)==null?void 0:d.colIndex,rowIndex:O||(h=this.state)==null?void 0:h.rowIndex,referencePosCell:O||(p=this.state)==null?void 0:p.referencePosCell}}else{const N=Wh(g.domNode),_=Wh(g.domNode.parentElement),O=g.domNode.getBoundingClientRect();if(this.state!==void 0&&this.state.show&&this.tableId===v.id&&this.state.rowIndex===_&&this.state.colIndex===N)return;this.state={show:!0,showAddOrRemoveColumnsButton:N===C.content.rows[0].cells.length-1,showAddOrRemoveRowsButton:_===C.content.rows.length-1,referencePosTable:b,block:C,draggingState:void 0,referencePosCell:O,colIndex:N,rowIndex:_,widgetContainer:T}}return this.emitUpdate(),!1}),V(this,"dragOverHandler",o=>{var i;if(((i=this.state)==null?void 0:i.draggingState)===void 0)return;o.preventDefault(),o.dataTransfer.dropEffect="move",yW(".prosemirror-dropcursor-block, .prosemirror-dropcursor-inline",this.pmView.root);const s={left:Math.min(Math.max(o.clientX,this.state.referencePosTable.left+1),this.state.referencePosTable.right-1),top:Math.min(Math.max(o.clientY,this.state.referencePosTable.top+1),this.state.referencePosTable.bottom-1)},a=this.pmView.root.elementsFromPoint(s.left,s.top).filter(C=>C.tagName==="TD"||C.tagName==="TH");if(a.length===0)return;const u=a[0];let d=!1;const h=Wh(u.parentElement),p=Wh(u),g=this.state.draggingState.draggedCellOrientation==="row"?this.state.rowIndex:this.state.colIndex,b=(this.state.draggingState.draggedCellOrientation==="row"?h:p)!==g;(this.state.rowIndex!==h||this.state.colIndex!==p)&&(this.state.rowIndex=h,this.state.colIndex=p,this.state.referencePosCell=u.getBoundingClientRect(),d=!0);const v=this.state.draggingState.draggedCellOrientation==="row"?s.top:s.left;this.state.draggingState.mousePos!==v&&(this.state.draggingState.mousePos=v,d=!0),d&&this.emitUpdate(),b&&this.editor.transact(C=>C.setMeta(Ku,!0))}),V(this,"dropHandler",o=>{if(this.mouseState="up",this.state===void 0||this.state.draggingState===void 0)return!1;if(this.state.rowIndex===void 0||this.state.colIndex===void 0)throw new Error("Attempted to drop table row or column, but no table block was hovered prior.");o.preventDefault();const{draggingState:i,colIndex:s,rowIndex:a}=this.state,u=this.state.block.content.columnWidths;if(i.draggedCellOrientation==="row"){if(!B_(this.state.block,i.originalIndex,a))return!1;const d=nK(this.state.block,i.originalIndex,a);this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,rows:d}})}else{if(!I_(this.state.block,i.originalIndex,s))return!1;const d=tK(this.state.block,i.originalIndex,s),[h]=u.splice(i.originalIndex,1);u.splice(s,0,h),this.editor.updateBlock(this.state.block,{type:"table",content:{...this.state.block.content,columnWidths:u,rows:d}})}return this.editor.setTextCursorPosition(this.state.block.id),!0}),this.editor=e,this.pmView=n,this.emitUpdate=()=>{if(!this.state)throw new Error("Attempting to update uninitialized image toolbar");r(this.state)},n.dom.addEventListener("mousemove",this.mouseMoveHandler),n.dom.addEventListener("mousedown",this.viewMousedownHandler),window.addEventListener("mouseup",this.mouseUpHandler),n.root.addEventListener("dragover",this.dragOverHandler),n.root.addEventListener("drop",this.dropHandler)}update(){var e;if(!this.state||!this.state.show)return;if(this.state.block=this.editor.getBlock(this.state.block.id),!this.state.block||this.state.block.type!=="table"||!((e=this.tableElement)!=null&&e.isConnected)){this.state.show=!1,this.state.showAddOrRemoveRowsButton=!1,this.state.showAddOrRemoveColumnsButton=!1,this.emitUpdate();return}const{height:n,width:r}=Ox(this.state.block);this.state.rowIndex!==void 0&&this.state.colIndex!==void 0&&(this.state.rowIndex>=n&&(this.state.rowIndex=n-1),this.state.colIndex>=r&&(this.state.colIndex=r-1));const o=this.tableElement.querySelector("tbody");if(!o)throw new Error("Table block does not contain a 'tbody' HTML element. This should never happen.");if(this.state.rowIndex!==void 0&&this.state.colIndex!==void 0){const i=o.children[this.state.rowIndex].children[this.state.colIndex];i?this.state.referencePosCell=i.getBoundingClientRect():(this.state.rowIndex=void 0,this.state.colIndex=void 0)}this.state.referencePosTable=o.getBoundingClientRect(),this.emitUpdate()}destroy(){this.pmView.dom.removeEventListener("mousemove",this.mouseMoveHandler),window.removeEventListener("mouseup",this.mouseUpHandler),this.pmView.dom.removeEventListener("mousedown",this.viewMousedownHandler),this.pmView.root.removeEventListener("dragover",this.dragOverHandler),this.pmView.root.removeEventListener("drop",this.dropHandler)}}const Ku=new ot("TableHandlesPlugin");class wW extends pn{constructor(e){super(),V(this,"view"),V(this,"colDragStart",n=>{if(this.view.state===void 0||this.view.state.colIndex===void 0)throw new Error("Attempted to drag table column, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"col",originalIndex:this.view.state.colIndex,mousePos:n.clientX},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Ku,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.colIndex,newIndex:this.view.state.colIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");bA(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Jn,0,0),n.dataTransfer.effectAllowed="move"}),V(this,"rowDragStart",n=>{if(this.view.state===void 0||this.view.state.rowIndex===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState={draggedCellOrientation:"row",originalIndex:this.view.state.rowIndex,mousePos:n.clientY},this.view.emitUpdate(),this.editor.transact(r=>r.setMeta(Ku,{draggedCellOrientation:this.view.state.draggingState.draggedCellOrientation,originalIndex:this.view.state.rowIndex,newIndex:this.view.state.rowIndex,tablePos:this.view.tablePos})),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");bA(this.editor.prosemirrorView.root),n.dataTransfer.setDragImage(Jn,0,0),n.dataTransfer.effectAllowed="copyMove"}),V(this,"dragEnd",()=>{if(this.view.state===void 0)throw new Error("Attempted to drag table row, but no table block was hovered prior.");if(this.view.state.draggingState=void 0,this.view.emitUpdate(),this.editor.transact(n=>n.setMeta(Ku,null)),!this.editor.prosemirrorView)throw new Error("Editor view not initialized.");gW(this.editor.prosemirrorView.root)}),V(this,"freezeHandles",()=>{this.view.menuFrozen=!0}),V(this,"unfreezeHandles",()=>{this.view.menuFrozen=!1}),V(this,"getCellsAtRowHandle",(n,r)=>_1(n,r)),V(this,"getCellsAtColumnHandle",(n,r)=>L1(n,r)),V(this,"setCellSelection",(n,r,o=r)=>{const i=this.view;if(!i)throw new Error("Table handles view not initialized");const s=n.doc.resolve(i.tablePos+1),a=n.doc.resolve(s.posAtIndex(r.row)+1),u=n.doc.resolve(a.posAtIndex(r.col)),d=n.doc.resolve(s.posAtIndex(o.row)+1),h=n.doc.resolve(d.posAtIndex(o.col)),p=n.tr;return p.setSelection(new gt(u,h)),n.apply(p)}),V(this,"addRowOrColumn",(n,r)=>{this.editor.exec((o,i)=>{const s=this.setCellSelection(o,r.orientation==="row"?{row:n,col:0}:{row:0,col:n});return r.orientation==="row"?r.side==="above"?Wz(s,i):Xz(s,i):r.side==="left"?Gz(s,i):qz(s,i)})}),V(this,"removeRowOrColumn",(n,r)=>r==="row"?this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:n,col:0});return Qz(s,i)}):this.editor.exec((o,i)=>{const s=this.setCellSelection(o,{row:0,col:n});return Zz(s,i)})),V(this,"mergeCells",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n.relativeStartCell,n.relativeEndCell):r;return tU(i,o)})),V(this,"splitCell",n=>this.editor.exec((r,o)=>{const i=n?this.setCellSelection(r,n):r;return nU(i,o)})),V(this,"getCellSelection",()=>this.editor.transact(n=>{const r=n.selection;let o=r.$from,i=r.$to;if(P1(r)){const{ranges:v}=r;v.forEach(C=>{o=C.$from.min(o??C.$from),i=C.$to.max(i??C.$to)})}else if(o=n.doc.resolve(r.$from.pos-r.$from.parentOffset-1),i=n.doc.resolve(r.$to.pos-r.$to.parentOffset-1),o.pos===0||i.pos===0)return;const s=n.doc.resolve(o.pos-o.parentOffset-1),a=n.doc.resolve(i.pos-i.parentOffset-1),u=n.doc.resolve(s.pos-s.parentOffset-1),d=o.index(s.depth),h=s.index(u.depth),p=i.index(a.depth),g=a.index(u.depth),b=[];for(let v=h;v<=g;v++)for(let C=d;C<=p;C++)b.push({row:v,col:C});return{from:{row:h,col:d},to:{row:g,col:p},cells:b}})),V(this,"getMergeDirection",n=>this.editor.transact(r=>{const o=P1(r.selection)?r.selection:void 0;if(!o||!n||o.ranges.length<=1)return;const i=this.getCellSelection();if(i)return iK(i.from,i.to,n)?"vertical":"horizontal"})),V(this,"cropEmptyRowsOrColumns",(n,r)=>rK(n,r)),V(this,"addRowsOrColumns",(n,r,o)=>oK(n,r,o)),this.editor=e,this.addProsemirrorPlugin(new Ge({key:Ku,view:n=>(this.view=new vW(e,n,r=>{this.emit("update",r)}),this.view),props:{decorations:n=>{if(this.view===void 0||this.view.state===void 0||this.view.state.draggingState===void 0||this.view.tablePos===void 0)return;const r=this.view.state.draggingState.draggedCellOrientation==="row"?this.view.state.rowIndex:this.view.state.colIndex;if(r===void 0)return;const o=[],{block:i,draggingState:s}=this.view.state,{originalIndex:a,draggedCellOrientation:u}=s;if(r===a||!i||u==="row"&&!B_(i,a,r)||u==="col"&&!I_(i,a,r))return et.create(n.doc,o);const d=n.doc.resolve(this.view.tablePos+1);return this.view.state.draggingState.draggedCellOrientation==="row"?_1(this.view.state.block,r).forEach(({row:h,col:p})=>{const g=n.doc.resolve(d.posAtIndex(h)+1),b=n.doc.resolve(g.posAtIndex(p)+1),v=b.node(),C=b.pos+(r>a?v.nodeSize-2:0);o.push(mt.widget(C,()=>{const k=document.createElement("div");return k.className="bn-table-drop-cursor",k.style.left="0",k.style.right="0",r>a?k.style.bottom="-2px":k.style.top="-3px",k.style.height="4px",k}))}):L1(this.view.state.block,r).forEach(({row:h,col:p})=>{const g=n.doc.resolve(d.posAtIndex(h)+1),b=n.doc.resolve(g.posAtIndex(p)+1),v=b.node(),C=b.pos+(r>a?v.nodeSize-2:0);o.push(mt.widget(C,()=>{const k=document.createElement("div");return k.className="bn-table-drop-cursor",k.style.top="0",k.style.bottom="0",r>a?k.style.right="-2px":k.style.left="-3px",k.style.width="4px",k}))}),et.create(n.doc,o)}}}))}static key(){return"tableHandles"}onUpdate(e){return this.on("update",e)}}const xW=St.create({name:"textAlignment",addGlobalAttributes(){return[{types:["paragraph","heading","bulletListItem","numberedListItem","checkListItem","tableCell","tableHeader"],attributes:{textAlignment:{default:"left",parseHTML:t=>t.getAttribute("data-text-alignment"),renderHTML:t=>t.textAlignment==="left"?{}:{"data-text-alignment":t.textAlignment}}}}]}}),CW=St.create({name:"blockTextColor",addGlobalAttributes(){return[{types:["blockContainer","tableCell","tableHeader"],attributes:{textColor:{default:Gt.textColor.default,parseHTML:t=>t.hasAttribute("data-text-color")?t.getAttribute("data-text-color"):Gt.textColor.default,renderHTML:t=>t.textColor===Gt.textColor.default?{}:{"data-text-color":t.textColor}}}}]}}),SW=St.create({name:"trailingNode",addProseMirrorPlugins(){const t=new ot(this.name);return[new Ge({key:t,appendTransaction:(e,n,r)=>{const{doc:o,tr:i,schema:s}=r,a=t.getState(r),u=o.content.size-2,d=s.nodes.blockContainer,h=s.nodes.paragraph;if(a)return i.insert(u,d.create(void 0,h.create()))},state:{init:(e,n)=>{},apply:(e,n)=>{if(!e.docChanged)return n;let r=e.doc.lastChild;if(!r||r.type.name!=="blockGroup")throw new Error("Expected blockGroup");if(r=r.lastChild,!r||r.type.name!=="blockContainer")return!0;const o=r.firstChild;if(!o)throw new Error("Expected blockContent");return r.nodeSize>4||o.type.spec.content!=="inline*"}}})]}}),kW={blockColor:"data-block-color",blockStyle:"data-block-style",id:"data-id",depth:"data-depth",depthChange:"data-depth-change"},EW=_o.create({name:"blockContainer",group:"blockGroupChild bnBlock",content:"blockContent blockGroup?",priority:50,defining:!0,marks:"insertion modification deletion",parseHTML(){return[{tag:"div[data-node-type="+this.name+"]",getAttrs:t=>{if(typeof t=="string")return!1;const e={};for(const[n,r]of Object.entries(kW))t.getAttribute(r)&&(e[n]=t.getAttribute(r));return e}},{tag:'div[data-node-type="blockOuter"]',skip:!0}]},renderHTML({HTMLAttributes:t}){var e;const n=document.createElement("div");n.className="bn-block-outer",n.setAttribute("data-node-type","blockOuter");for(const[i,s]of Object.entries(t))i!=="class"&&n.setAttribute(i,s);const r={...((e=this.options.domAttributes)==null?void 0:e.block)||{},...t},o=document.createElement("div");o.className=_t("bn-block",r.class),o.setAttribute("data-node-type",this.name);for(const[i,s]of Object.entries(r))i!=="class"&&o.setAttribute(i,s);return n.appendChild(o),{dom:n,contentDOM:o}}}),MW=_o.create({name:"blockGroup",group:"childContainer",content:"blockGroupChild+",marks:"deletion insertion modification",parseHTML(){return[{tag:"div",getAttrs:t=>typeof t=="string"?!1:t.getAttribute("data-node-type")==="blockGroup"?null:!1}]},renderHTML({HTMLAttributes:t}){var e;const n={...((e=this.options.domAttributes)==null?void 0:e.blockGroup)||{},...t},r=document.createElement("div");r.className=_t("bn-block-group",n.class),r.setAttribute("data-node-type","blockGroup");for(const[o,i]of Object.entries(n))o!=="class"&&r.setAttribute(o,i);return{dom:r,contentDOM:r}}}),TW=_o.create({name:"doc",topNode:!0,content:"blockGroup",marks:"insertion modification deletion"});class AW extends pn{constructor({editor:e,collaboration:n}){super(e),V(this,"editor"),V(this,"collaboration"),V(this,"forkedState"),this.editor=e,this.collaboration=n}static key(){return"ForkYDocPlugin"}findTypeInOtherYdoc(e,n){const r=e.doc;if(e._item===null){const o=Array.from(r.share.keys()).find(i=>r.share.get(i)===e);if(o==null)throw new Error("type does not exist in other ydoc");return n.get(o,e.constructor)}else{const o=e._item,i=n.store.clients.get(o.id.client)??[],s=Gr(i,o.id.clock);return i[s].content.type}}get isForkedFromRemote(){return this.forkedState!==void 0}fork(){var e;if(this.isForkedFromRemote)return;const n=(e=this.collaboration)==null?void 0:e.fragment;if(!n)throw new Error("No fragment to fork from");const r=new Hs;NT(r,OT(n.doc));const o=this.findTypeInOtherYdoc(n,r);this.forkedState={undoStack:Vr.getState(this.editor.prosemirrorState).undoManager.undoStack,originalFragment:n,forkedFragment:o},this.editor._tiptapEditor.unregisterPlugin([Gu,Vr,at]),this.editor._tiptapEditor.registerPlugin(new V1(o).plugins[0]),this.editor._tiptapEditor.registerPlugin(new z1({editor:this.editor}).plugins[0]),this.emit("forked",!0)}merge({keepChanges:e}){if(!this.forkedState)return;this.editor._tiptapEditor.unregisterPlugin(at),this.editor._tiptapEditor.unregisterPlugin(Vr);const{originalFragment:n,forkedFragment:r,undoStack:o}=this.forkedState;if(this.editor.extensions.ySyncPlugin=new V1(n),this.editor.extensions.yCursorPlugin=new w4(this.collaboration),this.editor.extensions.yUndoPlugin=new z1({editor:this.editor}),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.ySyncPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yCursorPlugin.plugins[0]),this.editor._tiptapEditor.registerPlugin(this.editor.extensions.yUndoPlugin.plugins[0]),Vr.getState(this.editor.prosemirrorState).undoManager.undoStack=o,e){const i=OT(r.doc,YF(n.doc));NT(n.doc,i,this.editor)}this.forkedState=void 0,this.emit("forked",!1)}}const NW=t=>{var e;const n={},r=OW(t);for(const i of r)n[i.name]=i;t.collaboration&&(n.ySyncPlugin=new V1(t.collaboration.fragment),n.yUndoPlugin=new z1({editor:t.editor}),(e=t.collaboration.provider)!=null&&e.awareness&&(n.yCursorPlugin=new w4(t.collaboration)),n.forkYDocPlugin=new AW({editor:t.editor,collaboration:t.collaboration})),n.formattingToolbar=new zY(t.editor),n.linkToolbar=new ZY(t.editor),n.sideMenu=new lW(t.editor),n.suggestionMenus=new fW(t.editor),n.filePanel=new PY(t.editor),n.placeholder=new JY(t.editor,t.placeholders),(t.animations??!0)&&(n.animations=new eW),t.tableHandles&&(n.tableHandles=new wW(t.editor)),n.nodeSelectionKeyboard=new WY,n.blockChange=new DY,n.showSelection=new tW(t.editor),t.comments&&(n.comments=new IY(t.editor,t.comments.threadStore,x4.name));const o=t.disableExtensions||[];for(const i of o)delete n[i];return n};let yA=!1;const OW=t=>{const e=[Bu.ClipboardTextSerializer,Bu.Commands,Bu.Editable,Bu.FocusEvents,Bu.Tabindex,DU,St.create({name:"dropCursor",addProseMirrorPlugins:()=>[t.dropCursor({width:5,color:"#ddeeff",editor:t.editor})]}),mg.configure({types:["blockContainer","columnList","column"],setIdAttribute:t.setIdAttribute}),UY,p$,hW,pW,mW,h$.extend({inclusive:!1}).configure({defaultProtocol:k4,protocols:yA?[]:S4}),...Object.values(t.styleSpecs).map(n=>n.implementation.mark.configure({editor:t.editor})),CW,RY,xW,St.create({name:"OverrideEscape",addKeyboardShortcuts(){return{Escape:()=>t.editor.suggestionMenus.shown?!1:this.editor.commands.blur()}}}),TW,EW.configure({editor:t.editor,domAttributes:t.domAttributes}),GY.configure({editor:t.editor,tabBehavior:t.tabBehavior}),MW.configure({domAttributes:t.domAttributes}),...Object.values(t.inlineContentSpecs).filter(n=>n.config!=="link"&&n.config!=="text").map(n=>n.implementation.node.configure({editor:t.editor})),...Object.values(t.blockSpecs).flatMap(n=>[...(n.implementation.requiredExtensions||[]).map(r=>r.configure({editor:t.editor,domAttributes:t.domAttributes})),n.implementation.node.configure({editor:t.editor,domAttributes:t.domAttributes})]),OY(t.editor),AY(t.editor,t.pasteHandler||(n=>n.defaultPasteHandler())),dY(t.editor),...t.trailingBlock===void 0||t.trailingBlock?[SW]:[],...t.comments?[x4]:[]];return yA=!0,t.collaboration||e.push(UU),e};function RW(t,e){const n=[];return t.forEach((r,o,i)=>{i!==e&&n.push(r)}),X.from(n)}function DW(t,e){const n=[];for(let r=0;r<t.childCount;r++)if(t.child(r).type.name==="tableRow")if(n.length>0&&n[n.length-1].type.name==="table"){const o=n[n.length-1],i=o.copy(o.content.addToEnd(t.child(r)));n[n.length-1]=i}else{const o=e.nodes.table.createChecked(void 0,t.child(r));n.push(o)}else n.push(t.child(r));return t=X.from(n),t}function _W(t,e){let n=X.from(t.content);if(n=DW(n,e.state.schema),!LW(n,e))return new le(n,t.openStart,t.openEnd);for(let r=0;r<n.childCount;r++)if(n.child(r).type.spec.group==="blockContent"){const o=[n.child(r)];if(r+1<n.childCount&&n.child(r+1).type.name==="blockGroup"){const s=n.child(r+1).child(0).child(0);(s.type.name==="bulletListItem"||s.type.name==="numberedListItem"||s.type.name==="checkListItem")&&(o.push(n.child(r+1)),n=RW(n,r+1))}const i=e.state.schema.nodes.blockContainer.createChecked(void 0,o);n=n.replaceChild(r,i)}return new le(n,t.openStart,t.openEnd)}function LW(t,e){var n,r;const o=t.childCount===1,i=((n=t.firstChild)==null?void 0:n.type.spec.content)==="inline*",s=((r=t.firstChild)==null?void 0:r.type.spec.content)==="tableRow+";if(o){if(i)return!1;if(s){const a=Nt(e.state);if(a.isBlockContainer)return a.blockContent.node.type.spec.content!=="tableRow+"}}return!0}const F1=class extends Q9{constructor(e,n){super({...e,content:void 0}),V(this,"_state"),V(this,"mount",(a,u,d)=>{u?(this.options.element=u,this.createViewAlternative(a,d)):(this.destroy(),this.isInitialized=!1)});const r=this.schema;let o;const i=r.nodes.doc.createAndFill;r.nodes.doc.createAndFill=(...a)=>{if(o)return o;const u=i.apply(r.nodes.doc,a),d=JSON.parse(JSON.stringify(u.toJSON()));return d.content[0].content[0].attrs.id="initialBlockId",o=fi.fromJSON(r,d),o};let s;try{const a=e?.content.map(u=>Kl(u,this.schema,n).toJSON());s=zp({type:"doc",content:[{type:"blockGroup",content:a}]},this.schema,this.options.parseOptions)}catch(a){throw console.error("Error creating document from blocks passed as `initialContent`. Caused by exception: ",a),new Error("Error creating document from blocks passed as `initialContent`:\n"+ +JSON.stringify(e.content))}this._state=ml.create({doc:s,schema:this.schema})}get state(){return this.view&&(this._state=this.view.state),this._state}dispatch(e){if(!this.view){this._state=this.state.apply(e),this.emit("transaction",{editor:this,transaction:e});return}if(this.view.isDestroyed)return;if(this.isCapturingTransaction){this.dispatchTransaction(e);return}const{state:n,transactions:r}=this.state.applyTransaction(e),o=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),o&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&(this.emit("update",{editor:this,transaction:e}),this.emit("v3-update",{editor:this,transaction:e,appendedTransactions:r.slice(1)}))}forceEnablePlugins(){if(this.view)throw new Error("forcePluginsEnabled called after view has been initialized");this._state=this.state.reconfigure({plugins:this.extensionManager.plugins})}createViewAlternative(e,n){this.contentComponent=n;const r={};this.extensionManager.extensions.forEach(i=>{i.type==="mark"&&i.config.addMarkView&&(r[i.name]=i.config.addMarkView(e))}),this.view=new Ow({mount:this.options.element},{...this.options.editorProps,dispatchTransaction:this.dispatch.bind(this),state:this.state,markViews:r,nodeViews:this.extensionManager.nodeViews});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.commands.focus(this.options.autofocus||this.options.element.getAttribute("data-bn-autofocus")==="true",{scrollIntoView:!1}),this.emit("create",{editor:this}),this.isInitialized=!0}};V(F1,"create",(t,e)=>{var n,r;const o=(n=globalThis?.window)==null?void 0:n.setTimeout;typeof((r=globalThis?.window)==null?void 0:r.setTimeout)<"u"&&(globalThis.window.setTimeout=()=>0);try{return new F1(t,e)}finally{o&&(globalThis.window.setTimeout=o)}});let T4=F1;T4.prototype.createView=function(){this.options.onPaste=this.options.onDrop=void 0};const BW={enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!1};let IW=class A4 extends Vx{constructor(e){var n,r,o,i,s,a,u,d,h,p,g,b,v,C,k,E;super(),V(this,"pmSchema"),V(this,"extensions",{}),V(this,"headless",!1),V(this,"_tiptapEditor"),V(this,"elementRenderer",null),V(this,"blockCache",new WeakMap),V(this,"dictionary"),V(this,"schema"),V(this,"blockImplementations"),V(this,"inlineContentImplementations"),V(this,"styleImplementations"),V(this,"formattingToolbar"),V(this,"linkToolbar"),V(this,"sideMenu"),V(this,"suggestionMenus"),V(this,"filePanel"),V(this,"tableHandles"),V(this,"comments"),V(this,"showSelectionPlugin"),V(this,"forkYDocPlugin"),V(this,"uploadFile"),V(this,"onUploadStartCallbacks",[]),V(this,"onUploadEndCallbacks",[]),V(this,"resolveFileUrl"),V(this,"resolveUsers"),V(this,"settings"),V(this,"activeTransaction",null),V(this,"mount",(P,W)=>{this._tiptapEditor.mount(this,P,W)}),this.options=e;const T=e;if(T.onEditorContentChange)throw new Error("onEditorContentChange initialization option is deprecated, use <BlockNoteView onChange={...} />, the useEditorChange(...) hook, or editor.onChange(...)");if(T.onTextCursorPositionChange)throw new Error("onTextCursorPositionChange initialization option is deprecated, use <BlockNoteView onSelectionChange={...} />, the useEditorSelectionChange(...) hook, or editor.onSelectionChange(...)");if(T.onEditorReady)throw new Error("onEditorReady is deprecated. Editor is immediately ready for use after creation.");if(T.editable)throw new Error("editable initialization option is deprecated, use <BlockNoteView editable={true/false} />, or alternatively editor.isEditable = true/false");this.dictionary=e.dictionary||Fq,this.settings={tables:{splitCells:((n=e?.tables)==null?void 0:n.splitCells)??!1,cellBackgroundColor:((r=e?.tables)==null?void 0:r.cellBackgroundColor)??!1,cellTextColor:((o=e?.tables)==null?void 0:o.cellTextColor)??!1,headers:((i=e?.tables)==null?void 0:i.headers)??!1},codeBlock:{indentLineWithTab:((s=e?.codeBlock)==null?void 0:s.indentLineWithTab)??!0,defaultLanguage:((a=e?.codeBlock)==null?void 0:a.defaultLanguage)??"text",supportedLanguages:((u=e?.codeBlock)==null?void 0:u.supportedLanguages)??{},createHighlighter:((d=e?.codeBlock)==null?void 0:d.createHighlighter)??void 0},heading:{levels:((h=e?.heading)==null?void 0:h.levels)??[1,2,3]}};const N={defaultStyles:!0,schema:e.schema||Eg.create(),_headless:!1,...e,placeholders:{...this.dictionary.placeholders,...e.placeholders}};if(N.comments&&!N.resolveUsers)throw new Error("resolveUsers is required when using comments");this.resolveUsers=N.resolveUsers,this.schema=N.schema,this.blockImplementations=N.schema.blockSpecs,this.inlineContentImplementations=N.schema.inlineContentSpecs,this.styleImplementations=N.schema.styleSpecs,this.extensions=NW({editor:this,domAttributes:N.domAttributes||{},blockSpecs:this.schema.blockSpecs,styleSpecs:this.schema.styleSpecs,inlineContentSpecs:this.schema.inlineContentSpecs,collaboration:N.collaboration,trailingBlock:N.trailingBlock,disableExtensions:N.disableExtensions,setIdAttribute:N.setIdAttribute,animations:N.animations??!0,tableHandles:Nn("table",this),dropCursor:this.options.dropCursor??Uq,placeholders:N.placeholders,tabBehavior:N.tabBehavior,comments:N.comments,pasteHandler:N.pasteHandler}),(((p=N._tiptapOptions)==null?void 0:p.extensions)||[]).forEach(P=>{this.extensions[P.name]=P});for(let P of N.extensions||[]){typeof P=="function"&&(P=P(this));const W=P.constructor.key();if(!W)throw new Error(`Extension ${P.constructor.name} does not have a key method`);if(this.extensions[W])throw new Error(`Extension ${P.constructor.name} already exists with key ${W}`);this.extensions[W]=P}if(Object.entries(N._extensions||{}).forEach(([P,W])=>{const ie=typeof W=="function"?W(this):W;if(!("plugin"in ie)){this.extensions[P]=ie;return}this.extensions[P]=new class extends pn{static key(){return P}constructor(){super(),this.addProsemirrorPlugin(ie.plugin)}get priority(){return ie.priority}}}),this.formattingToolbar=this.extensions.formattingToolbar,this.linkToolbar=this.extensions.linkToolbar,this.sideMenu=this.extensions.sideMenu,this.suggestionMenus=this.extensions.suggestionMenus,this.filePanel=this.extensions.filePanel,this.tableHandles=this.extensions.tableHandles,this.comments=this.extensions.comments,this.showSelectionPlugin=this.extensions.showSelection,this.forkYDocPlugin=this.extensions.forkYDocPlugin,N.uploadFile){const P=N.uploadFile;this.uploadFile=async(W,ie)=>{this.onUploadStartCallbacks.forEach(ge=>ge.apply(this,[ie]));try{return await P(W,ie)}finally{this.onUploadEndCallbacks.forEach(ge=>ge.apply(this,[ie]))}}}this.resolveFileUrl=N.resolveFileUrl,this.headless=N._headless;const _="ySyncPlugin"in this.extensions||"liveblocksExtension"in this.extensions;_&&N.initialContent&&console.warn("When using Collaboration, initialContent might cause conflicts, because changes should come from the collaboration provider");const O=N.initialContent||(_?[{type:"paragraph",id:"initialBlockId"}]:[{type:"paragraph",id:mg.options.generateID()}]);if(!Array.isArray(O)||O.length===0)throw new Error("initialContent must be a non-empty array of blocks, received: "+O);const $=[...Object.entries(this.extensions).map(([P,W])=>{if(W instanceof St||W instanceof _o||W instanceof kn)return W;if(!(W instanceof pn&&!W.plugins.length))return St.create({name:P,priority:W.priority,addProseMirrorPlugins:()=>W.plugins})})].filter(P=>P!==void 0),H={...BW,...N._tiptapOptions,content:O,extensions:$,editorProps:{...(g=N._tiptapOptions)==null?void 0:g.editorProps,attributes:{tabIndex:"0",...(v=(b=N._tiptapOptions)==null?void 0:b.editorProps)==null?void 0:v.attributes,...(C=N.domAttributes)==null?void 0:C.editor,class:_t("bn-editor",N.defaultStyles?"bn-default-styles":"",((E=(k=N.domAttributes)==null?void 0:k.editor)==null?void 0:E.class)||"")},transformPasted:_W}};this.headless?this.pmSchema=E9(H.extensions):(this._tiptapEditor=T4.create(H,this.schema.styleSchema),this.pmSchema=this._tiptapEditor.schema),this.pmSchema.cached.blockNoteEditor=this,this.emit("create")}static create(e={}){return new A4(e)}exec(e){if(this.activeTransaction)throw new Error("`exec` should not be called within a `transact` call, move the `exec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,o=>this._tiptapEditor.dispatch(o),r)}canExec(e){if(this.activeTransaction)throw new Error("`canExec` should not be called within a `transact` call, move the `canExec` call outside of the `transact` call");const n=this._tiptapEditor.state,r=this._tiptapEditor.view;return e(n,void 0,r)}transact(e){if(this.activeTransaction)return e(this.activeTransaction);try{this.activeTransaction=this._tiptapEditor.state.tr;const n=e(this.activeTransaction),r=this.activeTransaction;return this.activeTransaction=null,r&&(r.docChanged||r.selectionSet||r.scrolledIntoView||r.storedMarksSet||!r.isGeneric)&&this._tiptapEditor.dispatch(r),n}finally{this.activeTransaction=null}}extension(e,n=e.key()){const r=this.extensions[n];if(!r)throw new Error(`Extension ${n} not found`);return r}get prosemirrorState(){if(this.activeTransaction)throw new Error("`prosemirrorState` should not be called within a `transact` call, move the `prosemirrorState` call outside of the `transact` call or use `editor.transact` to read the current editor state");return this._tiptapEditor.state}get prosemirrorView(){return this._tiptapEditor.view}get domElement(){var e;return(e=this.prosemirrorView)==null?void 0:e.dom}isFocused(){var e;return((e=this.prosemirrorView)==null?void 0:e.hasFocus())||!1}focus(){var e;(e=this.prosemirrorView)==null||e.focus()}onUploadStart(e){return this.onUploadStartCallbacks.push(e),()=>{const n=this.onUploadStartCallbacks.indexOf(e);n>-1&&this.onUploadStartCallbacks.splice(n,1)}}onUploadEnd(e){return this.onUploadEndCallbacks.push(e),()=>{const n=this.onUploadEndCallbacks.indexOf(e);n>-1&&this.onUploadEndCallbacks.splice(n,1)}}get topLevelBlocks(){return this.document}get document(){return this.transact(e=>Jq(e.doc,this.pmSchema))}getBlock(e){return this.transact(n=>FZ(n.doc,e))}getPrevBlock(e){return this.transact(n=>GZ(n.doc,e))}getNextBlock(e){return this.transact(n=>qZ(n.doc,e))}getParentBlock(e){return this.transact(n=>KZ(n.doc,e))}forEachBlock(e,n=!1){const r=this.document.slice();n&&r.reverse();function o(i){for(const s of i){if(e(s)===!1)return!1;const a=n?s.children.slice().reverse():s.children;if(!o(a))return!1}return!0}o(r)}onEditorContentChange(e){this._tiptapEditor.on("update",e)}onEditorSelectionChange(e){this._tiptapEditor.on("selectionUpdate",e)}getTextCursorPosition(){return this.transact(e=>JZ(e))}setTextCursorPosition(e,n="start"){return this.transact(r=>f4(r,e,n))}getSelection(){return this.transact(e=>YZ(e))}getSelectionCutBlocks(){return this.transact(e=>XZ(e))}setSelection(e,n){return this.transact(r=>WZ(r,e,n))}get isEditable(){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return!1}return this._tiptapEditor.isEditable===void 0?!0:this._tiptapEditor.isEditable}set isEditable(e){if(!this._tiptapEditor){if(!this.headless)throw new Error("no editor, but also not headless?");return}this._tiptapEditor.options.editable!==e&&this._tiptapEditor.setEditable(e)}insertBlocks(e,n,r="before"){return this.transact(o=>uK(o,e,n,r))}updateBlock(e,n){return this.transact(r=>fK(r,e,n))}removeBlocks(e){return this.transact(n=>QT(n,e,[]).removedBlocks)}replaceBlocks(e,n){return this.transact(r=>QT(r,e,n))}undo(){return this.options.collaboration?this.exec(Hq):this.exec(qw)}redo(){return this.options.collaboration?this.exec(Pq):this.exec(Kw)}insertInlineContent(e,{updateSelection:n=!1}={}){const r=lo(e,this.pmSchema);this.transact(o=>{ZZ(o,{from:o.selection.from,to:o.selection.to},r,{updateSelection:n})})}getActiveStyles(){return this.transact(e=>{const n={},r=e.selection.$to.marks();for(const o of r){const i=this.schema.styleSchema[o.type.name];if(!i){o.type.name!=="link"&&!o.type.spec.blocknoteIgnore&&console.warn("mark not found in styleschema",o.type.name);continue}i.propSchema==="boolean"?n[i.type]=!0:n[i.type]=o.attrs.stringValue}return n})}addStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.setMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.setMark(n,{stringValue:r});else throw new Ro(o.propSchema)}}removeStyles(e){for(const n of Object.keys(e))this._tiptapEditor.commands.unsetMark(n)}toggleStyles(e){for(const[n,r]of Object.entries(e)){const o=this.schema.styleSchema[n];if(!o)throw new Error(`style ${n} not found in styleSchema`);if(o.propSchema==="boolean")this._tiptapEditor.commands.toggleMark(n);else if(o.propSchema==="string")this._tiptapEditor.commands.toggleMark(n,{stringValue:r});else throw new Ro(o.propSchema)}}getSelectedText(){return this.transact(e=>e.doc.textBetween(e.selection.from,e.selection.to))}getSelectedLinkUrl(){return this._tiptapEditor.getAttributes("link").href}createLink(e,n){if(e==="")return;const r=this.pmSchema.mark("link",{href:e});this.transact(o=>{const{from:i,to:s}=o.selection;n?o.insertText(n,i,s).addMark(i,i+n.length,r):o.setSelection(xe.create(o.doc,s)).addMark(i,s,r)})}canNestBlock(){return UZ(this)}nestBlock(){d4(this)}canUnnestBlock(){return $Z(this)}unnestBlock(){zZ(this)}moveBlocksUp(){return PZ(this)}moveBlocksDown(){return jZ(this)}async blocksToHTMLLossy(e=this.document){return wg(this.pmSchema,this).exportBlocks(e,{})}async blocksToFullHTML(e){return bK(this.pmSchema,this).serializeBlocks(e,{})}async tryParseHTMLToBlocks(e){return p4(e,this.pmSchema)}async blocksToMarkdownLossy(e=this.document){return tY(e,this.pmSchema,this,{})}async tryParseMarkdownToBlocks(e){return aY(e,this.pmSchema)}updateCollaborationUserInfo(e){if(!this.options.collaboration)throw new Error("Cannot update collaboration user info when collaboration is disabled.");this.extensions.yCursorPlugin.updateUser(e)}onBeforeChange(e){return this.headless?()=>{}:this.extensions.blockChange.subscribe(n=>e(this,n))}onChange(e){if(this.headless)return;const n=({transaction:r,appendedTransactions:o})=>{e(this,{getChanges:()=>P_(r,o)})};return this._tiptapEditor.on("v3-update",n),()=>{this._tiptapEditor.off("v3-update",n)}}onSelectionChange(e,n){if(this.headless)return;const r=o=>{o.transaction.getMeta(at)&&!n||e(this)};return this._tiptapEditor.on("selectionUpdate",r),()=>{this._tiptapEditor.off("selectionUpdate",r)}}onCreate(e){return this.on("create",e),()=>{this.off("create",e)}}getSelectionBoundingBox(){if(!this.prosemirrorView)return;const{selection:e}=this.prosemirrorState,{ranges:n}=e,r=Math.min(...n.map(i=>i.$from.pos)),o=Math.max(...n.map(i=>i.$to.pos));if(r1(e)){const i=this.prosemirrorView.nodeDOM(r);if(i)return i.getBoundingClientRect()}return Up(this.prosemirrorView,r,o)}get isEmpty(){const e=this.document;return e.length===0||e.length===1&&e[0].type==="paragraph"&&e[0].content.length===0}openSuggestionMenu(e,n){this.prosemirrorView&&(this.focus(),this.transact(r=>{n!=null&&n.deleteTriggerCharacter&&r.insertText(e),r.scrollIntoView().setMeta(this.suggestionMenus.plugins[0],{triggerCharacter:e,deleteTriggerCharacter:n?.deleteTriggerCharacter||!1,ignoreQueryLength:n?.ignoreQueryLength||!1})}))}getForceSelectionVisible(){return this.showSelectionPlugin.getEnabled()}setForceSelectionVisible(e){this.showSelectionPlugin.setEnabled(e)}convertHtmlToBlockNoteHtml(e){return h4(e.trim()).innerHTML}pasteHTML(e,n=!1){var r;let o=e;n||(o=this.convertHtmlToBlockNoteHtml(e)),o&&((r=this.prosemirrorView)==null||r.pasteHTML(o))}pasteText(e){var n;return(n=this.prosemirrorView)==null?void 0:n.pasteText(e)}async pasteMarkdown(e){return this.pasteHTML(await m4(e))}},cv;async function HW(){return cv||(cv=(async()=>{const[t,e]=await Promise.all([Wn(()=>import("./module.js"),[]),Wn(()=>import("./native.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),cv)}async function PW(t,e){if(!EZ("text",t))return[];const{emojiData:n,emojiMart:r}=await HW();return(e.trim()===""?Object.values(n.emojis):await r.SearchIndex.search(e)).map(o=>({id:o.skins[0].native,onItemClick:()=>t.insertInlineContent(o.skins[0].native+" ")}))}var N4={exports:{}},uv={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vA;function jW(){if(vA)return uv;vA=1;var t=_e;function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function a(p,g){var b=g(),v=r({inst:{value:b,getSnapshot:g}}),C=v[0].inst,k=v[1];return i(function(){C.value=b,C.getSnapshot=g,u(C)&&k({inst:C})},[p,b,g]),o(function(){return u(C)&&k({inst:C}),p(function(){u(C)&&k({inst:C})})},[p]),s(b),b}function u(p){var g=p.getSnapshot;p=p.value;try{var b=g();return!n(p,b)}catch{return!0}}function d(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:a;return uv.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,uv}N4.exports=jW();var O4=N4.exports;const VW=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},zW=({contentComponent:t})=>{const e=O4.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return _e.createElement(_e.Fragment,null,Object.values(e))};function UW(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:cP.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}class $W extends _e.Component{constructor(e){var n;super(e),this.editorContentRef=_e.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=UW(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return _e.createElement(_e.Fragment,null,_e.createElement("div",{ref:VW(n,this.editorContentRef),...r}),e?.contentComponent&&_e.createElement(zW,{contentComponent:e.contentComponent}))}}const FW=S.forwardRef((t,e)=>{const n=_e.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return _e.createElement($W,{key:n,innerRef:e,...t})});_e.memo(FW);var dv={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wA;function GW(){if(wA)return dv;wA=1;var t=_e,e=O4;function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,u=t.useDebugValue;return dv.useSyncExternalStoreWithSelector=function(d,h,p,g,b){var v=i(null);if(v.current===null){var C={hasValue:!1,value:null};v.current=C}else C=v.current;v=a(function(){function E($){if(!T){if(T=!0,N=$,$=g($),b!==void 0&&C.hasValue){var H=C.value;if(b(H,$))return _=H}return _=$}if(H=_,r(N,$))return H;var P=g($);return b!==void 0&&b(H,P)?H:(N=$,_=P)}var T=!1,N,_,O=p===void 0?null:p;return[function(){return E(h())},O===null?void 0:function(){return E(O())}]},[h,p,g,b]);var k=o(d,v[0],v[1]);return s(function(){C.hasValue=!0,C.value=k},[k]),u(k),k},dv}GW();const qW=S.createContext({editor:null});qW.Consumer;const R4=S.createContext({onDragStart:void 0}),D4=()=>S.useContext(R4),KW=_e.forwardRef((t,e)=>{const{onDragStart:n}=D4(),r=t.as||"div";return _e.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});function xA(t){return!!(typeof t=="function"&&t.prototype&&t.prototype.isReactComponent)}function CA(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.forward_ref)"||t.$$typeof.description==="react.forward_ref"))}function ZW(t){return!!(typeof t=="object"&&t.$$typeof&&(t.$$typeof.toString()==="Symbol(react.memo)"||t.$$typeof.description==="react.memo"))}function YW(t){if(xA(t)||CA(t))return!0;if(ZW(t)){const e=t.type;if(e)return xA(e)||CA(e)}return!1}function WW(){try{if(S.version)return parseInt(S.version.split(".")[0],10)>=19}catch{}return!1}class XW{constructor(e,{editor:n,props:r={},as:o="div",className:i=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=n,this.props=r,this.element=document.createElement(o),this.element.classList.add("react-renderer"),i&&this.element.classList.add(...i.split(" ")),this.editor.isInitialized?vr.flushSync(()=>{this.render()}):queueMicrotask(()=>{this.render()})}render(){var e;const n=this.component,r=this.props,o=this.editor,i=WW(),s=YW(n),a={...r};a.ref&&!(i||s)&&delete a.ref,!a.ref&&(i||s)&&(a.ref=u=>{this.ref=u}),this.reactElement=_e.createElement(n,{...a}),(e=o?.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const n=this.editor;(e=n?.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(n=>{this.element.setAttribute(n,e[n])})}}class JW extends ez{constructor(e,n,r){if(super(e,n,r),!this.node.isLeaf){this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.dataset.nodeViewWrapper="",this.contentDOMElement.style.whiteSpace="inherit";const o=this.dom.querySelector("[data-node-view-content]");if(!o)return;o.appendChild(this.contentDOMElement)}}mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(d={})=>this.updateAttributes(d),deleteNode:()=>this.deleteNode(),ref:S.createRef()};if(!this.component.displayName){const d=h=>h.charAt(0).toUpperCase()+h.substring(1);this.component.displayName=d(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:d=>{d&&this.contentDOMElement&&d.firstChild!==this.contentDOMElement&&(d.hasAttribute("data-node-view-wrapper")&&d.removeAttribute("data-node-view-wrapper"),d.appendChild(this.contentDOMElement))}},i=this.component,s=S.memo(d=>_e.createElement(R4.Provider,{value:o},S.createElement(i,d)));s.displayName="ReactNodeView";let a=this.node.isInline?"span":"div";this.options.as&&(a=this.options.as);const{className:u=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new XW(s,{editor:this.editor,props:e,as:a,className:`node-${this.node.type.name} ${u}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:n}=this.editor.state.selection,r=this.getPos();if(typeof r=="number")if(e<=r&&n>=r+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,n,r){const o=i=>{this.renderer.updateProps(i),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const i=this.node,s=this.decorations,a=this.innerDecorations;return this.node=e,this.decorations=n,this.innerDecorations=r,this.options.update({oldNode:i,oldDecorations:s,newNode:e,newDecorations:n,oldInnerDecorations:a,innerDecorations:r,updateProps:()=>o({node:e,decorations:n,innerDecorations:r})})}return e===this.node&&this.decorations===n&&this.innerDecorations===r||(this.node=e,this.decorations=n,this.innerDecorations=r,o({node:e,decorations:n,innerDecorations:r})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const n=this.editor.extensionManager.attributes,r=jp(this.node,n);e=this.options.attrs({node:this.node,HTMLAttributes:r})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function QW(t,e){return n=>n.editor.contentComponent?new JW(t,n,e):{}}const _4=S.createContext(void 0);function Mi(t){return S.useContext(_4)}function Re(t){const e=Mi();if(!(e!=null&&e.editor))throw new Error("useBlockNoteEditor was called outside of a BlockNoteContext provider or BlockNoteView component");return e.editor}function zx(t,e,n){const r=Mi();e||(e=r?.editor),S.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onSelectionChange(t,n)},[t,e,n])}function eX(t,e){const n=Re();e=e||n;const[r,o]=S.useState(()=>{if(t)return e.getSelectionBoundingBox()}),i=S.useCallback(()=>{if(!t)return;const s=e.getSelectionBoundingBox();o(s)},[e,t]);return zx(i,e,!0),S.useEffect(()=>{o(t?e.getSelectionBoundingBox():void 0)},[t,e]),r}function tX(t){return t.getBoundingClientRect!==void 0}function js(t,e,n,r){const{refs:o,update:i,context:s,floatingStyles:a,isPositioned:u}=mw({open:t,...r}),{isMounted:d,styles:h}=gw(s),p=typeof r?.canDismiss=="object"?r.canDismiss:{enabled:r?.canDismiss},g=pj(s,p),{getReferenceProps:b,getFloatingProps:v}=gj([g]);return S.useEffect(()=>{i()},[e,i]),S.useEffect(()=>{e!==null&&(e instanceof HTMLElement||tX(e)?o.setReference(e):o.setReference({getBoundingClientRect:()=>e}))},[e,o]),S.useMemo(()=>({isMounted:d,ref:o.setFloating,setReference:o.setReference,style:{display:"flex",...h,...a,zIndex:n},getFloatingProps:v,getReferenceProps:b,isPositioned:u}),[u,a,d,o.setFloating,o.setReference,h,n,v,b])}function Ti(t){const[e,n]=S.useState();return S.useEffect(()=>t(r=>{n({...r})}),[t]),e}const L4=S.createContext(void 0);function Ne(){return S.useContext(L4)}const Mg=(t={},e=[])=>S.useMemo(()=>{const n=IW.create(t);return window&&(window.ProseMirror=n._tiptapEditor),n},e);function Ve(){return Mi().editor.dictionary}function Ux(t,e){const n=Mi();e||(e=n?.editor),S.useEffect(()=>{if(!e)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");return e.onChange(t)},[t,e])}const $x=t=>{const[e,n]=S.useState(!1),[r,o]=S.useState(t.editor.isEmpty),i=Ne();Ux(()=>{o(t.editor.isEmpty)},t.editor);const s=S.useCallback(()=>{n(!0)},[]),a=S.useCallback(()=>{n(!1)},[]);return S.useEffect(()=>{t.editable&&t.autoFocus&&t.editor.focus()},[t.autoFocus,t.editable,t.editor]),w.jsxs(w.Fragment,{children:[w.jsx(i.Comments.Editor,{autoFocus:t.autoFocus,className:"bn-comment-editor",editor:t.editor,onFocus:s,onBlur:a,editable:t.editable}),t.actions&&w.jsx("div",{className:"bn-comment-actions-wrapper",children:w.jsx(t.actions,{isFocused:e,isEmpty:r})})]})},nX=Ho(kr(kg.paragraph.implementation.node.config),{}),{textColor:Kse,backgroundColor:Zse,...rX}=Ix,Fx=Eg.create({blockSpecs:{paragraph:nX},styleSpecs:rX});function oX(){const t=Re();if(!t.comments)throw new Error("Comments plugin not found");const e=t.comments,n=Ne(),r=Ve(),o=Mg({trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.new_comment}},schema:Fx});return w.jsx(n.Comments.Card,{className:"bn-thread",children:w.jsx($x,{autoFocus:!0,editable:!0,editor:o,actions:({isEmpty:i})=>w.jsx(n.Generic.Toolbar.Root,{className:_t("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:w.jsx(n.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:"Save",variant:"compact",isDisabled:i,onClick:async()=>{await e.createThread({initialComment:{body:o.document}}),e.stopPendingComment()},children:"Save"})})})})}const iX=t=>{const e=Re();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=e.comments;S.useEffect(()=>{const h=n.onUpdate(p=>e.setForceSelectionVisible(p.pendingComment));return()=>h()},[n,e]);const r=Ti(n.onUpdate.bind(n)),o=eX(r?.pendingComment),{isMounted:i,ref:s,style:a,getFloatingProps:u}=js(r?.pendingComment||!1,o||null,5e3,{placement:"bottom",middleware:[Si(10),Gd(),Ls()],onOpenChange:h=>{h||(n.stopPendingComment(),e.focus())},...t.floatingOptions});if(!i||!r)return null;const d=t.floatingComposer||oX;return w.jsx("div",{ref:s,style:a,...u(),children:w.jsx(d,{})})};var B4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},SA=_e.createContext&&_e.createContext(B4),sX=["attr","size","title"];function lX(t,e){if(t==null)return{};var n=aX(t,e),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)r=i[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aX(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Nm(){return Nm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nm.apply(this,arguments)}function kA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function Om(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kA(Object(n),!0).forEach(function(r){cX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cX(t,e,n){return e=uX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uX(t){var e=dX(t,"string");return typeof e=="symbol"?e:e+""}function dX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I4(t){return t&&t.map((e,n)=>_e.createElement(e.tag,Om({key:n},e.attr),I4(e.child)))}function De(t){return e=>_e.createElement(fX,Nm({attr:Om({},t.attr)},e),I4(t.child))}function fX(t){var e=n=>{var{attr:r,size:o,title:i}=t,s=lX(t,sX),a=o||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),_e.createElement("svg",Nm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:u,style:Om(Om({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&_e.createElement("title",null,i),t.children)};return SA!==void 0?_e.createElement(SA.Consumer,null,n=>e(n)):e(B4)}function hX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 7V11L2 6L8 1V5H13C17.4183 5 21 8.58172 21 13C21 17.4183 17.4183 21 13 21H4V19H13C16.3137 19 19 16.3137 19 13C19 9.68629 16.3137 7 13 7H8Z"},child:[]}]})(t)}function H4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.29117 20.8242L2 22L3.17581 16.7088C2.42544 15.3056 2 13.7025 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C10.2975 22 8.6944 21.5746 7.29117 20.8242ZM7.58075 18.711L8.23428 19.0605C9.38248 19.6745 10.6655 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 13.3345 4.32549 14.6175 4.93949 15.7657L5.28896 16.4192L4.63416 19.3658L7.58075 18.711Z"},child:[]}]})(t)}function pX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M7.24264 17.9967H3V13.754L14.435 2.319C14.8256 1.92848 15.4587 1.92848 15.8492 2.319L18.6777 5.14743C19.0682 5.53795 19.0682 6.17112 18.6777 6.56164L7.24264 17.9967ZM3 19.9967H21V21.9967H3V19.9967Z"},child:[]}]})(t)}function mX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M23 12L15.9289 19.0711L14.5147 17.6569L20.1716 12L14.5147 6.34317L15.9289 4.92896L23 12ZM3.82843 12L9.48528 17.6569L8.07107 19.0711L1 12L8.07107 4.92896L9.48528 6.34317L3.82843 12Z"},child:[]}]})(t)}function Gx(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 8L9.00319 2H19.9978C20.5513 2 21 2.45531 21 2.9918V21.0082C21 21.556 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5501 3 20.9932V8ZM10 4V9H5V20H19V4H10Z"},child:[]}]})(t)}function gX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM5 19H19V21H5V19ZM3 14H21V16H3V14ZM5 9H19V11H5V9Z"},child:[]}]})(t)}function bX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM3 14H21V16H3V14ZM3 9H21V11H3V9Z"},child:[]}]})(t)}function yX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H17V21H3V19ZM3 14H21V16H3V14ZM3 9H17V11H3V9Z"},child:[]}]})(t)}function vX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM7 19H21V21H7V19ZM3 14H21V16H3V14ZM7 9H21V11H7V9Z"},child:[]}]})(t)}function wX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 11H12.5C13.8807 11 15 9.88071 15 8.5C15 7.11929 13.8807 6 12.5 6H8V11ZM18 15.5C18 17.9853 15.9853 20 13.5 20H6V4H12.5C14.9853 4 17 6.01472 17 8.5C17 9.70431 16.5269 10.7981 15.7564 11.6058C17.0979 12.3847 18 13.837 18 15.5ZM8 13V18H13.5C14.8807 18 16 16.8807 16 15.5C16 14.1193 14.8807 13 13.5 13H8Z"},child:[]}]})(t)}function xX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3.41436 5.99995L5.70726 3.70706L4.29304 2.29285L0.585938 5.99995L4.29304 9.70706L5.70726 8.29285L3.41436 5.99995ZM9.58594 5.99995L7.29304 3.70706L8.70726 2.29285L12.4144 5.99995L8.70726 9.70706L7.29304 8.29285L9.58594 5.99995ZM14.0002 2.99995H21.0002C21.5524 2.99995 22.0002 3.44767 22.0002 3.99995V20C22.0002 20.5522 21.5524 21 21.0002 21H3.00015C2.44787 21 2.00015 20.5522 2.00015 20V12H4.00015V19H20.0002V4.99995H14.0002V2.99995Z"},child:[]}]})(t)}function EA(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5.55397 22H3.3999L10.9999 3H12.9999L20.5999 22H18.4458L16.0458 16H7.95397L5.55397 22ZM8.75397 14H15.2458L11.9999 5.88517L8.75397 14Z"},child:[]}]})(t)}function Rm(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM21.0005 8V20H19.0005L19 10.204L17 10.74V8.67L19.5005 8H21.0005Z"},child:[]}]})(t)}function Dm(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 8C20.5711 8 22.25 9.67893 22.25 11.75C22.25 12.6074 21.9623 13.3976 21.4781 14.0292L21.3302 14.2102L18.0343 18H22V20H15L14.9993 18.444L19.8207 12.8981C20.0881 12.5908 20.25 12.1893 20.25 11.75C20.25 10.7835 19.4665 10 18.5 10C17.5818 10 16.8288 10.7071 16.7558 11.6065L16.75 11.75H14.75C14.75 9.67893 16.4289 8 18.5 8Z"},child:[]}]})(t)}function _m(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8L21.9984 10L19.4934 12.883C21.0823 13.3184 22.25 14.7728 22.25 16.5C22.25 18.5711 20.5711 20.25 18.5 20.25C16.674 20.25 15.1528 18.9449 14.8184 17.2166L16.7821 16.8352C16.9384 17.6413 17.6481 18.25 18.5 18.25C19.4665 18.25 20.25 17.4665 20.25 16.5C20.25 15.5335 19.4665 14.75 18.5 14.75C18.214 14.75 17.944 14.8186 17.7056 14.9403L16.3992 13.3932L19.3484 10H15V8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function P4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 20H11V13H4V20H2V4H4V11H11V4H13V20ZM22 8V16H23.5V18H22V20H20V18H14.5V16.66L19.5 8H22ZM20 11.133L17.19 16H20V11.133Z"},child:[]}]})(t)}function j4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 8V10H17.6769L17.2126 12.6358C17.5435 12.5472 17.8912 12.5 18.25 12.5C20.4591 12.5 22.25 14.2909 22.25 16.5C22.25 18.7091 20.4591 20.5 18.25 20.5C16.4233 20.5 14.8827 19.2756 14.4039 17.6027L16.3271 17.0519C16.5667 17.8881 17.3369 18.5 18.25 18.5C19.3546 18.5 20.25 17.6046 20.25 16.5C20.25 15.3954 19.3546 14.5 18.25 14.5C17.6194 14.5 17.057 14.7918 16.6904 15.2478L14.8803 14.3439L16 8H22ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4Z"},child:[]}]})(t)}function V4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21.097 8L18.499 12.5C20.7091 12.5 22.5 14.2909 22.5 16.5C22.5 18.7091 20.7091 20.5 18.5 20.5C16.2909 20.5 14.5 18.7091 14.5 16.5C14.5 15.7636 14.699 15.0737 15.0461 14.4811L18.788 8H21.097ZM4 4V11H11V4H13V20H11V13H4V20H2V4H4ZM18.5 14.5C17.3954 14.5 16.5 15.3954 16.5 16.5C16.5 17.6046 17.3954 18.5 18.5 18.5C19.6046 18.5 20.5 17.6046 20.5 16.5C20.5 15.3954 19.6046 14.5 18.5 14.5Z"},child:[]}]})(t)}function CX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM3 12.5L7 9V16L3 12.5Z"},child:[]}]})(t)}function SX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 4H21V6H3V4ZM3 19H21V21H3V19ZM11 14H21V16H11V14ZM11 9H21V11H11V9ZM7 12.5L3 16V9L7 12.5Z"},child:[]}]})(t)}function MA(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 5H11V19H8V21H16V19H13V5H16V3H8V5ZM2 7C1.44772 7 1 7.44772 1 8V16C1 16.5523 1.44772 17 2 17H8V15H3V9H8V7H2ZM16 9H21V15H16V17H22C22.5523 17 23 16.5523 23 16V8C23 7.44772 22.5523 7 22 7H16V9Z"},child:[]}]})(t)}function kX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M15 20H7V18H9.92661L12.0425 6H9V4H17V6H14.0734L11.9575 18H15V20Z"},child:[]}]})(t)}function EX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 17H22V19H19V22H17V17ZM7 7H2V5H5V2H7V7ZM18.364 15.5355L16.9497 14.1213L18.364 12.7071C20.3166 10.7545 20.3166 7.58866 18.364 5.63604C16.4113 3.68342 13.2455 3.68342 11.2929 5.63604L9.87868 7.05025L8.46447 5.63604L9.87868 4.22183C12.6123 1.48816 17.0445 1.48816 19.7782 4.22183C22.5118 6.9555 22.5118 11.3877 19.7782 14.1213L18.364 15.5355ZM15.5355 18.364L14.1213 19.7782C11.3877 22.5118 6.9555 22.5118 4.22183 19.7782C1.48816 17.0445 1.48816 12.6123 4.22183 9.87868L5.63604 8.46447L7.05025 9.87868L5.63604 11.2929C3.68342 13.2455 3.68342 16.4113 5.63604 18.364C7.58866 20.3166 10.7545 20.3166 12.7071 18.364L14.1213 16.9497L15.5355 18.364ZM14.8284 7.75736L16.2426 9.17157L9.17157 16.2426L7.75736 14.8284L14.8284 7.75736Z"},child:[]}]})(t)}function z4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18.3638 15.5355L16.9496 14.1213L18.3638 12.7071C20.3164 10.7545 20.3164 7.58866 18.3638 5.63604C16.4112 3.68341 13.2453 3.68341 11.2927 5.63604L9.87849 7.05025L8.46428 5.63604L9.87849 4.22182C12.6122 1.48815 17.0443 1.48815 19.778 4.22182C22.5117 6.95549 22.5117 11.3876 19.778 14.1213L18.3638 15.5355ZM15.5353 18.364L14.1211 19.7782C11.3875 22.5118 6.95531 22.5118 4.22164 19.7782C1.48797 17.0445 1.48797 12.6123 4.22164 9.87868L5.63585 8.46446L7.05007 9.87868L5.63585 11.2929C3.68323 13.2455 3.68323 16.4113 5.63585 18.364C7.58847 20.3166 10.7543 20.3166 12.7069 18.364L14.1211 16.9497L15.5353 18.364ZM14.8282 7.75736L16.2425 9.17157L9.17139 16.2426L7.75717 14.8284L14.8282 7.75736Z"},child:[]}]})(t)}function U4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8.00008 6V9H5.00008V6H8.00008ZM3.00008 4V11H10.0001V4H3.00008ZM13.0001 4H21.0001V6H13.0001V4ZM13.0001 11H21.0001V13H13.0001V11ZM13.0001 18H21.0001V20H13.0001V18ZM10.7072 16.2071L9.29297 14.7929L6.00008 18.0858L4.20718 16.2929L2.79297 17.7071L6.00008 20.9142L10.7072 16.2071Z"},child:[]}]})(t)}function $4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM5 3V6H6V7H3V6H4V4H3V3H5ZM3 14V11.5H5V11H3V10H6V12.5H4V13H6V14H3ZM5 19.5H3V18.5H5V18H3V17H6V21H3V20H5V19.5ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function F4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 4H21V6H8V4ZM4.5 6.5C3.67157 6.5 3 5.82843 3 5C3 4.17157 3.67157 3.5 4.5 3.5C5.32843 3.5 6 4.17157 6 5C6 5.82843 5.32843 6.5 4.5 6.5ZM4.5 13.5C3.67157 13.5 3 12.8284 3 12C3 11.1716 3.67157 10.5 4.5 10.5C5.32843 10.5 6 11.1716 6 12C6 12.8284 5.32843 13.5 4.5 13.5ZM4.5 20.4C3.67157 20.4 3 19.7284 3 18.9C3 18.0716 3.67157 17.4 4.5 17.4C5.32843 17.4 6 18.0716 6 18.9C6 19.7284 5.32843 20.4 4.5 20.4ZM8 11H21V13H8V11ZM8 18H21V20H8V18Z"},child:[]}]})(t)}function MX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM11 5H5V10.999H7V9L10 12L7 15V13H5V19H11V17H13V19H19V13H17V15L14 12L17 9V10.999H19V5H13V7H11V5ZM13 13V15H11V13H13ZM13 9V11H11V9H13Z"},child:[]}]})(t)}function TX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20C20.5523 3 21 3.44772 21 4V20ZM19 11V5H13.001V7H15L12 10L9 7H11V5H5V11H7V13H5V19H11V17H9L12 14L15 17H13.001V19H19V13H17V11H19ZM11 13H9V11H11V13ZM15 13H13V11H15V13Z"},child:[]}]})(t)}function G4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 4H3V6H21V4ZM21 11H8V13H21V11ZM21 18H8V20H21V18ZM5 11H3V20H5V11Z"},child:[]}]})(t)}function AX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.1538 14C17.3846 14.5161 17.5 15.0893 17.5 15.7196C17.5 17.0625 16.9762 18.1116 15.9286 18.867C14.8809 19.6223 13.4335 20 11.5862 20C9.94674 20 8.32335 19.6185 6.71592 18.8555V16.6009C8.23538 17.4783 9.7908 17.917 11.3822 17.917C13.9333 17.917 15.2128 17.1846 15.2208 15.7196C15.2208 15.0939 15.0049 14.5598 14.5731 14.1173C14.5339 14.0772 14.4939 14.0381 14.4531 14H3V12H21V14H17.1538ZM13.076 11H7.62908C7.4566 10.8433 7.29616 10.6692 7.14776 10.4778C6.71592 9.92084 6.5 9.24559 6.5 8.45207C6.5 7.21602 6.96583 6.165 7.89749 5.299C8.82916 4.43299 10.2706 4 12.2219 4C13.6934 4 15.1009 4.32808 16.4444 4.98426V7.13591C15.2448 6.44921 13.9293 6.10587 12.4978 6.10587C10.0187 6.10587 8.77917 6.88793 8.77917 8.45207C8.77917 8.87172 8.99709 9.23796 9.43293 9.55079C9.86878 9.86362 10.4066 10.1135 11.0463 10.3004C11.6665 10.4816 12.3431 10.7148 13.076 11H13.076Z"},child:[]}]})(t)}function NX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 10V14H19V10H13ZM11 10H5V14H11V10ZM13 19H19V16H13V19ZM11 19V16H5V19H11ZM13 5V8H19V5H13ZM11 5H5V8H11V5ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3Z"},child:[]}]})(t)}function qx(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M13 6V21H11V6H5V4H19V6H13Z"},child:[]}]})(t)}function OX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M8 3V12C8 14.2091 9.79086 16 12 16C14.2091 16 16 14.2091 16 12V3H18V12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12V3H8ZM4 20H20V22H4V20Z"},child:[]}]})(t)}function RX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V3.9934ZM8 5V19H16V5H8ZM4 5V7H6V5H4ZM18 5V7H20V5H18ZM4 9V11H6V9H4ZM18 9V11H20V9H18ZM4 13V15H6V13H4ZM18 13V15H20V13H18ZM4 17V19H6V17H4ZM18 17V19H20V17H18Z"},child:[]}]})(t)}function q4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 11.1005L7 9.1005L12.5 14.6005L16 11.1005L19 14.1005V5H5V11.1005ZM4 3H20C20.5523 3 21 3.44772 21 4V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3ZM15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10Z"},child:[]}]})(t)}function DX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M21 15V18H24V20H21V23H19V20H16V18H19V15H21ZM21.0082 3C21.556 3 22 3.44495 22 3.9934L22.0007 13.3417C21.3749 13.1204 20.7015 13 20 13V5H4L4.001 19L13.2929 9.70715C13.6528 9.34604 14.22 9.31823 14.6123 9.62322L14.7065 9.70772L18.2521 13.2586C15.791 14.0069 14 16.2943 14 19C14 19.7015 14.1204 20.3749 14.3417 21.0007L2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082ZM8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7Z"},child:[]}]})(t)}function _X(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M20 3C20.5523 3 21 3.44772 21 4V5.757L19 7.757V5H5V13.1L9 9.1005L13.328 13.429L12.0012 14.7562L11.995 18.995L16.2414 19.0012L17.571 17.671L18.8995 19H19V16.242L21 14.242V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V4C3 3.44772 3.44772 3 4 3H20ZM21.7782 7.80761L23.1924 9.22183L15.4142 17L13.9979 16.9979L14 15.5858L21.7782 7.80761ZM15.5 7C16.3284 7 17 7.67157 17 8.5C17 9.32843 16.3284 10 15.5 10C14.6716 10 14 9.32843 14 8.5C14 7.67157 14.6716 7 15.5 7Z"},child:[]}]})(t)}function K4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 18V20H2V18H22ZM2 3.5L10 8.5L2 13.5V3.5ZM22 11V13H12V11H22ZM22 4V6H12V4H22Z"},child:[]}]})(t)}function LX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3.9934C3 3.44476 3.44495 3 3.9934 3H20.0066C20.5552 3 21 3.44495 21 3.9934V20.0066C21 20.5552 20.5551 21 20.0066 21H3.9934C3.44476 21 3 20.5551 3 20.0066V3.9934ZM10.6219 8.41459C10.5562 8.37078 10.479 8.34741 10.4 8.34741C10.1791 8.34741 10 8.52649 10 8.74741V15.2526C10 15.3316 10.0234 15.4088 10.0672 15.4745C10.1897 15.6583 10.4381 15.708 10.6219 15.5854L15.5008 12.3328C15.5447 12.3035 15.5824 12.2658 15.6117 12.2219C15.7343 12.0381 15.6846 11.7897 15.5008 11.6672L10.6219 8.41459Z"},child:[]}]})(t)}function Z4(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M2 16.0001H5.88889L11.1834 20.3319C11.2727 20.405 11.3846 20.4449 11.5 20.4449C11.7761 20.4449 12 20.2211 12 19.9449V4.05519C12 3.93977 11.9601 3.8279 11.887 3.73857C11.7121 3.52485 11.3971 3.49335 11.1834 3.66821L5.88889 8.00007H2C1.44772 8.00007 1 8.44778 1 9.00007V15.0001C1 15.5524 1.44772 16.0001 2 16.0001ZM23 12C23 15.292 21.5539 18.2463 19.2622 20.2622L17.8445 18.8444C19.7758 17.1937 21 14.7398 21 12C21 9.26016 19.7758 6.80629 17.8445 5.15557L19.2622 3.73779C21.5539 5.75368 23 8.70795 23 12ZM18 12C18 10.0883 17.106 8.38548 15.7133 7.28673L14.2842 8.71584C15.3213 9.43855 16 10.64 16 12C16 13.36 15.3213 14.5614 14.2842 15.2841L15.7133 16.7132C17.106 15.6145 18 13.9116 18 12Z"},child:[]}]})(t)}function BX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"},child:[]}]})(t)}function IX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9.9997 15.1709L19.1921 5.97852L20.6063 7.39273L9.9997 17.9993L3.63574 11.6354L5.04996 10.2212L9.9997 15.1709Z"},child:[]}]})(t)}function HX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function PX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM9 11V17H11V11H9ZM13 11V17H15V11H13ZM9 4V6H15V4H9Z"},child:[]}]})(t)}function jX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M4 19H20V12H22V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V12H4V19ZM14 9H19L12 16L5 9H10V3H14V9Z"},child:[]}]})(t)}function VX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M10 6V8H5V19H16V14H18V20C18 20.5523 17.5523 21 17 21H4C3.44772 21 3 20.5523 3 20V7C3 6.44772 3.44772 6 4 6H10ZM21 3V12L17.206 8.207L11.2071 14.2071L9.79289 12.7929L15.792 6.793L12 3H21Z"},child:[]}]})(t)}function zX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M5 10C3.9 10 3 10.9 3 12C3 13.1 3.9 14 5 14C6.1 14 7 13.1 7 12C7 10.9 6.1 10 5 10ZM19 10C17.9 10 17 10.9 17 12C17 13.1 17.9 14 19 14C20.1 14 21 13.1 21 12C21 10.9 20.1 10 19 10ZM12 10C10.9 10 10 10.9 10 12C10 13.1 10.9 14 12 14C13.1 14 14 13.1 14 12C14 10.9 13.1 10 12 10Z"},child:[]}]})(t)}function UX(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM8 13C8 15.2091 9.79086 17 12 17C14.2091 17 16 15.2091 16 13H8ZM8 11C8.82843 11 9.5 10.3284 9.5 9.5C9.5 8.67157 8.82843 8 8 8C7.17157 8 6.5 8.67157 6.5 9.5C6.5 10.3284 7.17157 11 8 11ZM16 11C16.8284 11 17.5 10.3284 17.5 9.5C17.5 8.67157 16.8284 8 16 8C15.1716 8 14.5 8.67157 14.5 9.5C14.5 10.3284 15.1716 11 16 11Z"},child:[]}]})(t)}function TA(t){return De({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22ZM12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20ZM8 13H16C16 15.2091 14.2091 17 12 17C9.79086 17 8 15.2091 8 13ZM8 11C7.17157 11 6.5 10.3284 6.5 9.5C6.5 8.67157 7.17157 8 8 8C8.82843 8 9.5 8.67157 9.5 9.5C9.5 10.3284 8.82843 11 8 11ZM16 11C15.1716 11 14.5 10.3284 14.5 9.5C14.5 8.67157 15.1716 8 16 8C16.8284 8 17.5 8.67157 17.5 9.5C17.5 10.3284 16.8284 11 16 11Z"},child:[]}]})(t)}let fv;async function $X(){return fv||(fv=(async()=>{const[t,e]=await Promise.all([Wn(()=>import("./module.js"),[]),Wn(()=>import("./native.js"),[])]),n="default"in t?t.default:t,r="default"in e?e.default:e;return await n.init({data:r}),{emojiMart:n,emojiData:r}})(),fv)}function FX(t){const e=S.useRef(null),n=S.useRef(null);return n.current&&n.current.update(t),S.useEffect(()=>((async()=>{const{emojiMart:r}=await $X();n.current=new r.Picker({...t,ref:e})})(),()=>{n.current=null}),[]),_e.createElement("div",{ref:e})}const AA=t=>{const[e,n]=S.useState(!1),r=Ne(),o=Mi();return w.jsxs(r.Generic.Popover.Root,{opened:e,children:[w.jsx(r.Generic.Popover.Trigger,{children:w.jsx("div",{onClick:i=>{i.preventDefault(),i.stopPropagation(),n(!e)},style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t.children})}),w.jsx(r.Generic.Popover.Content,{variant:"panel-popover",children:w.jsx(FX,{perLine:7,onClickOutside:()=>n(!1),onEmojiSelect:i=>{t.onEmojiSelect(i),n(!1)},theme:o?.colorSchemePreference})})]})};function GX(t,e){return Kx(t,[e]).get(e)}function Kx(t,e){const n=t.comments;if(!n)throw new Error("Comments plugin not found");const r=n.userStore,o=S.useCallback(()=>{const a=new Map;for(const u of e){const d=r.getUser(u);d&&a.set(u,d)}return a},[r,e]),i=S.useMemo(()=>({current:o()}),[o]),s=S.useCallback(a=>{const u=r.subscribe(d=>{i.current=o(),a()});return r.loadUsers(e),u},[r,o,e,i]);return S.useSyncExternalStore(s,()=>i.current)}const qX=t=>{const e=Ne(),n=Ve(),r=Re();if(!r.comments)throw new Error("ReactionBadge must be used inside a BlockNote editor with comments enabled");const o=t.comment.reactions.find(u=>u.emoji===t.emoji);if(!o)throw new Error("Trying to render reaction badge for non-existing reaction");const[i,s]=S.useState([]),a=Kx(r,i);return w.jsx(e.Generic.Badge.Root,{className:_t("bn-badge","bn-comment-reaction"),text:o.userIds.length.toString(),icon:o.emoji,isSelected:r.comments.threadStore.auth.canDeleteReaction(t.comment,o.emoji),onClick:()=>t.onReactionSelect(o.emoji),onMouseEnter:()=>s(o.userIds),mainTooltip:n.comments.reactions.reacted_by,secondaryTooltip:`${Array.from(a.values()).map(u=>u.username).join(`
`)}`},o.emoji)},KX=({comment:t,thread:e,showResolveButton:n})=>{const r=Ve(),o=Mg({initialContent:t.body,trailingBlock:!1,dictionary:{...r,placeholders:{emptyDocument:r.placeholders.edit_comment}},schema:Fx},[t.body]),i=Ne(),[s,a]=S.useState(!1),u=Re();if(!u.comments)throw new Error("Comments plugin not found");const d=u.comments.threadStore,h=S.useCallback(()=>{a(!0)},[]),p=S.useCallback(()=>{o.replaceBlocks(o.document,t.body),a(!1)},[o,t.body]),g=S.useCallback(async P=>{await d.updateComment({commentId:t.id,comment:{body:o.document},threadId:e.id}),a(!1)},[t,e.id,o,d]),b=S.useCallback(async()=>{await d.deleteComment({commentId:t.id,threadId:e.id})},[t,e.id,d]),v=S.useCallback(async P=>{d.auth.canAddReaction(t,P)?await d.addReaction({threadId:e.id,commentId:t.id,emoji:P}):d.auth.canDeleteReaction(t,P)&&await d.deleteReaction({threadId:e.id,commentId:t.id,emoji:P})},[d,t,e.id]),C=S.useCallback(async()=>{await d.resolveThread({threadId:e.id})},[e.id,d]),k=S.useCallback(async()=>{await d.unresolveThread({threadId:e.id})},[e.id,d]),E=GX(u,t.userId);if(!t.body)return null;let T;const N=d.auth.canAddReaction(t),_=d.auth.canDeleteComment(t),O=d.auth.canUpdateComment(t),$=n&&(e.resolved?d.auth.canUnresolveThread(e):d.auth.canResolveThread(e));s||(T=w.jsxs(i.Generic.Toolbar.Root,{className:_t("bn-action-toolbar","bn-comment-actions"),variant:"action-toolbar",children:[N&&w.jsx(AA,{onEmojiSelect:P=>v(P.native),children:w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.add_reaction,variant:"compact",children:w.jsx(TA,{size:16})},"add-reaction")}),$&&(e.resolved?w.jsx(i.Generic.Toolbar.Button,{mainTooltip:"Re-open",variant:"compact",onClick:k,children:w.jsx(hX,{size:16})},"reopen"):w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.resolve,variant:"compact",onClick:C,children:w.jsx(IX,{size:16})},"resolve")),(_||O)&&w.jsxs(i.Generic.Menu.Root,{position:"bottom-start",children:[w.jsx(i.Generic.Menu.Trigger,{children:w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.actions.more_actions,variant:"compact",children:w.jsx(zX,{size:16})},"more-actions")}),w.jsxs(i.Generic.Menu.Dropdown,{className:"bn-menu-dropdown",children:[O&&w.jsx(i.Generic.Menu.Item,{icon:w.jsx(pX,{}),onClick:h,children:r.comments.actions.edit_comment},"edit-comment"),_&&w.jsx(i.Generic.Menu.Item,{icon:w.jsx(PX,{}),onClick:b,children:r.comments.actions.delete_comment},"delete-comment")]})]})]}));const H=t.createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(!t.body)throw new Error("soft deletes are not yet supported");return w.jsx(i.Comments.Comment,{authorInfo:E??"loading",timeString:H,edited:t.updatedAt.getTime()!==t.createdAt.getTime(),showActions:"hover",actions:T,className:"bn-thread-comment",children:w.jsx($x,{autoFocus:s,editor:o,editable:s,actions:t.reactions.length>0||s?({isEmpty:P})=>w.jsxs(w.Fragment,{children:[t.reactions.length>0&&!s&&w.jsxs(i.Generic.Badge.Group,{className:_t("bn-badge-group","bn-comment-reactions"),children:[t.reactions.map(W=>w.jsx(qX,{comment:t,emoji:W.emoji,onReactionSelect:v},W.emoji)),w.jsx(AA,{onEmojiSelect:W=>v(W.native),children:w.jsx(i.Generic.Badge.Root,{className:_t("bn-badge","bn-comment-add-reaction"),text:"+",icon:w.jsx(TA,{size:16}),mainTooltip:r.comments.actions.add_reaction})})]}),s&&w.jsxs(i.Generic.Toolbar.Root,{variant:"action-toolbar",className:_t("bn-action-toolbar","bn-comment-actions"),children:[w.jsx(i.Generic.Toolbar.Button,{mainTooltip:r.comments.save_button_text,variant:"compact",onClick:g,isDisabled:P,children:r.comments.save_button_text}),w.jsx(i.Generic.Toolbar.Button,{className:"bn-button",mainTooltip:r.comments.cancel_button_text,variant:"compact",onClick:p,children:r.comments.cancel_button_text})]})]}):void 0})})},ZX=({thread:t,maxCommentsBeforeCollapse:e})=>{const n=Ne(),r=Ve(),o=Re(),i=Kx(o,t.resolvedBy?[t.resolvedBy]:[]),s=t.comments.map((a,u)=>w.jsx(KX,{thread:t,comment:a,showResolveButton:u===0},a.id));if(t.resolved&&t.resolvedUpdatedAt&&t.resolvedBy){if(!i.get(t.resolvedBy))throw new Error(`User ${t.resolvedBy} resolved thread ${t.id}, but their data could not be found.`);const a=t.comments.findLastIndex(u=>t.resolvedUpdatedAt.getTime()>u.createdAt.getTime())+1;s.splice(a,0,w.jsx(n.Comments.Comment,{className:"bn-thread-comment",authorInfo:t.resolvedBy&&i.get(t.resolvedBy)||"loading",timeString:t.resolvedUpdatedAt.toLocaleDateString(void 0,{month:"short",day:"numeric"}),edited:!1,showActions:!1,children:w.jsx("div",{className:"bn-resolved-text",children:r.comments.sidebar.marked_as_resolved})},"resolved-comment"))}return e&&s.length>e&&s.splice(1,s.length-2,w.jsx(n.Comments.ExpandSectionsPrompt,{className:"bn-thread-expand-prompt",children:r.comments.sidebar.more_replies(t.comments.length-2)},"expand-prompt")),s},Y4=({thread:t,selected:e,referenceText:n,maxCommentsBeforeCollapse:r,onFocus:o,onBlur:i,tabIndex:s})=>{const a=Ne(),u=Ve(),d=Re().comments;if(!d)throw new Error("Comments plugin not found");const h=Mg({trailingBlock:!1,dictionary:{...u,placeholders:{emptyDocument:u.placeholders.comment_reply}},schema:Fx}),p=S.useCallback(async()=>{await d.threadStore.addComment({comment:{body:h.document},threadId:t.id}),h.removeBlocks(h.document)},[d,h,t.id]);return w.jsxs(a.Comments.Card,{className:"bn-thread",headerText:n,onFocus:o,onBlur:i,selected:e,tabIndex:s,children:[w.jsx(a.Comments.CardSection,{className:"bn-thread-comments",children:w.jsx(ZX,{thread:t,maxCommentsBeforeCollapse:e?void 0:r||5})}),e&&w.jsx(a.Comments.CardSection,{className:"bn-thread-composer",children:w.jsx($x,{autoFocus:!1,editable:!0,editor:h,actions:({isEmpty:g})=>g?null:w.jsx(a.Generic.Toolbar.Root,{variant:"action-toolbar",className:_t("bn-action-toolbar","bn-comment-actions"),children:w.jsx(a.Generic.Toolbar.Button,{mainTooltip:u.comments.save_button_text,variant:"compact",isDisabled:g,onClick:p,children:u.comments.save_button_text})})})})]})};function YX(t){const e=t.comments;if(!e)throw new Error("Comments plugin not found");const n=e.threadStore,r=S.useRef(void 0);r.current||(r.current=n.getThreads());const o=S.useCallback(i=>n.subscribe(s=>{r.current=s,i()}),[n]);return S.useSyncExternalStore(o,()=>r.current)}const WX=t=>{const e=Re();if(!e.comments)throw new Error("FloatingComposerController can only be used when BlockNote editor has enabled comments");const n=Ti(e.comments.onUpdate.bind(e.comments)),{isMounted:r,ref:o,style:i,getFloatingProps:s,setReference:a}=js(!!(n!=null&&n.selectedThreadId),null,5e3,{placement:"bottom",middleware:[Si(10),Gd(),Ls()],onOpenChange:p=>{var g;p||((g=e.comments)==null||g.selectThread(void 0),e.focus())},...t.floatingOptions}),u=S.useCallback(()=>{var p;if(!(n!=null&&n.selectedThreadId))return;const g=(p=e.domElement)==null?void 0:p.querySelector(`[data-bn-thread-id="${n?.selectedThreadId}"]`);g&&a(g)},[a,e,n?.selectedThreadId]);S.useEffect(()=>{if(n!=null&&n.selectedThreadId)return e.onChange(()=>{u()})},[e,u,n?.selectedThreadId]),S.useLayoutEffect(u,[u]);const d=YX(e);if(!r||!n||!n.selectedThreadId)return null;const h=t.floatingThread||Y4;return w.jsx("div",{ref:o,style:i,...s(),children:w.jsx(h,{thread:d.get(n.selectedThreadId),selected:!0})})},XX=t=>{const e=Ne(),n=Ve(),{block:r}=t,o=Re(),[i,s]=S.useState(""),a=S.useCallback(h=>{s(h.currentTarget.value)},[]),u=S.useCallback(h=>{h.key==="Enter"&&(h.preventDefault(),o.updateBlock(r,{props:{name:WT(i),url:i}}))},[o,r,i]),d=S.useCallback(()=>{o.updateBlock(r,{props:{name:WT(i),url:i}})},[o,r,i]);return w.jsxs(e.FilePanel.TabPanel,{className:"bn-tab-panel",children:[w.jsx(e.FilePanel.TextInput,{className:"bn-text-input",placeholder:n.file_panel.embed.url_placeholder,value:i,onChange:a,onKeyDown:u,"data-test":"embed-input"}),w.jsx(e.FilePanel.Button,{className:"bn-button",onClick:d,"data-test":"embed-input-button",children:n.file_panel.embed.embed_button[r.type]||n.file_panel.embed.embed_button.file})]})},JX=t=>{var e;const n=Ne(),r=Ve(),{block:o,setLoading:i}=t,s=Re(),[a,u]=S.useState(!1);S.useEffect(()=>{a&&setTimeout(()=>{u(!1)},3e3)},[a]);const d=S.useCallback(g=>{if(g===null)return;async function b(v){if(i(!0),s.uploadFile!==void 0)try{let C=await s.uploadFile(v,o.id);typeof C=="string"&&(C={props:{name:v.name,url:C}}),s.updateBlock(o,C)}catch{u(!0)}finally{i(!1)}}b(g)},[o,s,i]),h=s.schema.blockSchema[o.type],p=h.isFileBlock&&(e=h.fileBlockAccept)!=null&&e.length?h.fileBlockAccept.join(","):"*/*";return w.jsxs(n.FilePanel.TabPanel,{className:"bn-tab-panel",children:[w.jsx(n.FilePanel.FileInput,{className:"bn-file-input","data-test":"upload-input",accept:p,placeholder:r.file_panel.upload.file_placeholder[o.type]||r.file_panel.upload.file_placeholder.file,value:null,onChange:d}),a&&w.jsx("div",{className:"bn-error-text",children:r.file_panel.upload.upload_error})]})},W4=t=>{const e=Ne(),n=Ve(),r=Re(),[o,i]=S.useState(!1),s=t.tabs??[...r.uploadFile!==void 0?[{name:n.file_panel.upload.title,tabPanel:w.jsx(JX,{block:t.block,setLoading:i})}]:[],{name:n.file_panel.embed.title,tabPanel:w.jsx(XX,{block:t.block})}],[a,u]=S.useState(t.defaultOpenTab||s[0].name);return w.jsx(e.FilePanel.Root,{className:"bn-panel",defaultOpenTab:a,openTab:a,setOpenTab:u,tabs:s,loading:o})},QX=t=>{const e=Re();if(!e.filePanel)throw new Error("FileToolbarController can only be used when BlockNote editor schema contains file block");const n=Ti(e.filePanel.onUpdate.bind(e.filePanel)),{isMounted:r,ref:o,style:i,getFloatingProps:s}=js(n?.show||!1,n?.referencePos||null,5e3,{placement:"bottom",middleware:[Si(10),Ls()],onOpenChange:p=>{p||(e.filePanel.closeMenu(),e.focus())},...t.floatingOptions});if(!r||!n)return null;const{show:a,referencePos:u,...d}=n,h=t.filePanel||W4;return w.jsx("div",{ref:o,style:i,...s(),children:w.jsx(h,{...d})})};function eJ(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Vs(t,e){Ux(t,e),zx(t,e)}function Zx(t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function rr(t){const e=Mi();if(t||(t=e?.editor),!t)throw new Error("'editor' is required, either from BlockNoteContext or as a function argument");const n=t,[r,o]=S.useState(()=>{var s;return((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block]}),i=S.useCallback(()=>{var s;return o(((s=n.getSelection())==null?void 0:s.blocks)||[n.getTextCursorPosition().block])},[n]);return Vs(i,n),r}const tJ={bold:wX,italic:kX,underline:OX,strike:AX,code:mX};function nJ(t,e){return t in e.schema.styleSchema&&e.schema.styleSchema[t].type===t&&e.schema.styleSchema[t].propSchema==="boolean"}const Xh=t=>{const e=Ve(),n=Ne(),r=Re(),o=nJ(t.basicTextStyle,r),i=rr(r),[s,a]=S.useState(t.basicTextStyle in r.getActiveStyles());Vs(()=>{o&&a(t.basicTextStyle in r.getActiveStyles())},r);const u=h=>{if(r.focus(),!!o){if(r.schema.styleSchema[h].propSchema!=="boolean")throw new Error("can only toggle boolean styles");r.toggleStyles({[h]:!0})}};if(!S.useMemo(()=>o?!!i.find(h=>h.content!==void 0):!1,[o,i])||!r.isEditable)return null;const d=tJ[t.basicTextStyle];return w.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":t.basicTextStyle,onClick:()=>u(t.basicTextStyle),isSelected:s,label:e.formatting_toolbar[t.basicTextStyle].tooltip,mainTooltip:e.formatting_toolbar[t.basicTextStyle].tooltip,secondaryTooltip:hr(e.formatting_toolbar[t.basicTextStyle].secondary_tooltip,e.generic.ctrl_shortcut),icon:w.jsx(d,{})})},G1=t=>{const e=t.textColor||"default",n=t.backgroundColor||"default",r=t.size||16,o=S.useMemo(()=>({pointerEvents:"none",fontSize:(r*.75).toString()+"px",height:r.toString()+"px",lineHeight:r.toString()+"px",textAlign:"center",width:r.toString()+"px"}),[r]);return w.jsx("div",{className:"bn-color-icon","data-background-color":n,"data-text-color":e,style:o,children:"A"})},NA=["default","gray","brown","red","orange","yellow","green","blue","purple","pink"],Tg=t=>{const e=Ne(),n=Ve();return w.jsxs(w.Fragment,{children:[w.jsx(()=>t.text?w.jsxs(w.Fragment,{children:[w.jsx(e.Generic.Menu.Label,{children:n.color_picker.text_title}),NA.map(r=>w.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.text.setColor(r)},"data-test":"text-color-"+r,icon:w.jsx(G1,{textColor:r,size:t.iconSize}),checked:t.text.color===r,children:n.color_picker.colors[r]},"text-color-"+r))]}):null,{}),w.jsx(()=>t.background?w.jsxs(w.Fragment,{children:[w.jsx(e.Generic.Menu.Label,{children:n.color_picker.background_title}),NA.map(r=>w.jsx(e.Generic.Menu.Item,{onClick:()=>{t.onClick&&t.onClick(),t.background.setColor(r)},"data-test":"background-color-"+r,icon:w.jsx(G1,{backgroundColor:r,size:t.iconSize}),checked:t.background.color===r,children:n.color_picker.colors[r]},"background-color-"+r))]}):null,{})]})};function OA(t,e){return`${t}Color`in e.schema.styleSchema&&e.schema.styleSchema[`${t}Color`].type===`${t}Color`&&e.schema.styleSchema[`${t}Color`].propSchema==="string"}const rJ=()=>{const t=Ne(),e=Ve(),n=Re(),r=OA("text",n),o=OA("background",n),i=rr(n),[s,a]=S.useState(r&&n.getActiveStyles().textColor||"default"),[u,d]=S.useState(o&&n.getActiveStyles().backgroundColor||"default");Vs(()=>{r&&a(n.getActiveStyles().textColor||"default"),o&&d(n.getActiveStyles().backgroundColor||"default")},n);const h=S.useCallback(g=>{if(!r)throw Error("Tried to set text color, but style does not exist in editor schema.");g==="default"?n.removeStyles({textColor:g}):n.addStyles({textColor:g}),setTimeout(()=>{n.focus()})},[n,r]),p=S.useCallback(g=>{if(!o)throw Error("Tried to set background color, but style does not exist in editor schema.");g==="default"?n.removeStyles({backgroundColor:g}):n.addStyles({backgroundColor:g}),setTimeout(()=>{n.focus()})},[o,n]);return!S.useMemo(()=>{if(!r&&!o)return!1;for(const g of i)if(g.content!==void 0)return!0;return!1},[o,i,r])||!n.isEditable?null:w.jsxs(t.Generic.Menu.Root,{children:[w.jsx(t.Generic.Menu.Trigger,{children:w.jsx(t.FormattingToolbar.Button,{className:"bn-button","data-test":"colors",label:e.formatting_toolbar.colors.tooltip,mainTooltip:e.formatting_toolbar.colors.tooltip,icon:w.jsx(G1,{textColor:s,backgroundColor:u,size:20})})}),w.jsx(t.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(Tg,{text:r?{color:s,setColor:h}:void 0,background:o?{color:u,setColor:p}:void 0})})]})},RA=t=>{for(const e of S4)if(t.startsWith(e))return t;return`${k4}://${t}`},X4=t=>{const e=Ne(),n=Ve(),{url:r,text:o,editLink:i,showTextField:s}=t,[a,u]=S.useState(r),[d,h]=S.useState(o);S.useEffect(()=>{u(r),h(o)},[o,r]);const p=S.useCallback(C=>{C.key==="Enter"&&(C.preventDefault(),i(RA(a),d))},[i,a,d]),g=S.useCallback(C=>u(C.currentTarget.value),[]),b=S.useCallback(C=>h(C.currentTarget.value),[]),v=S.useCallback(()=>i(RA(a),d),[i,a,d]);return w.jsxs(e.Generic.Form.Root,{children:[w.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"url",icon:w.jsx(z4,{}),autoFocus:!0,placeholder:n.link_toolbar.form.url_placeholder,value:a,onKeyDown:p,onChange:g,onSubmit:v}),s!==!1&&w.jsx(e.Generic.Form.TextInput,{className:"bn-text-input",name:"title",icon:w.jsx(qx,{}),placeholder:n.link_toolbar.form.title_placeholder,value:d,onKeyDown:p,onChange:b,onSubmit:v})]})};function oJ(t){return"link"in t.schema.inlineContentSchema&&t.schema.inlineContentSchema.link==="link"}const iJ=()=>{var t;const e=Re(),n=Ne(),r=Ve(),o=oJ(e),i=rr(e),[s,a]=S.useState(!1),[u,d]=S.useState(e.getSelectedLinkUrl()||""),[h,p]=S.useState(e.getSelectedText());Vs(()=>{p(e.getSelectedText()||""),d(e.getSelectedLinkUrl()||"")},e),S.useEffect(()=>{var v;const C=k=>{(k.ctrlKey||k.metaKey)&&k.key==="k"&&(a(!0),k.preventDefault())};return(v=e.prosemirrorView)==null||v.dom.addEventListener("keydown",C),()=>{var k;(k=e.prosemirrorView)==null||k.dom.removeEventListener("keydown",C)}},[(t=e.prosemirrorView)==null?void 0:t.dom]);const g=S.useCallback(v=>{e.createLink(v),e.focus()},[e]),b=e.transact(v=>P1(v.selection));return!S.useMemo(()=>{if(!o)return!1;for(const v of i)if(v.content===void 0)return!1;return!b},[o,i,b])||!("link"in e.schema.inlineContentSchema)||!e.isEditable?null:w.jsxs(n.Generic.Popover.Root,{opened:s,children:[w.jsx(n.Generic.Popover.Trigger,{children:w.jsx(n.FormattingToolbar.Button,{className:"bn-button","data-test":"createLink",label:r.formatting_toolbar.link.tooltip,mainTooltip:r.formatting_toolbar.link.tooltip,secondaryTooltip:hr(r.formatting_toolbar.link.secondary_tooltip,r.generic.ctrl_shortcut),icon:w.jsx(z4,{}),onClick:()=>a(!0)})}),w.jsx(n.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(X4,{url:u,text:h,editLink:g,showTextField:!1})})]})},sJ=()=>{const t=Ve(),e=Ne(),n=Re(),[r,o]=S.useState(),i=rr(n),s=S.useMemo(()=>{if(i.length!==1)return;const d=i[0];if(of(d,n))return o(d.props.caption),d},[n,i]),a=S.useCallback(d=>{s&&d.key==="Enter"&&(d.preventDefault(),n.updateBlock(s,{props:{caption:r}}))},[r,n,s]),u=S.useCallback(d=>o(d.currentTarget.value),[]);return!s||sf(s,n)||!n.isEditable?null:w.jsxs(e.Generic.Popover.Root,{children:[w.jsx(e.Generic.Popover.Trigger,{children:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_caption.tooltip,mainTooltip:t.formatting_toolbar.file_caption.tooltip,icon:w.jsx(MA,{}),isSelected:s.props.caption!==""})}),w.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(e.Generic.Form.Root,{children:w.jsx(e.Generic.Form.TextInput,{name:"file-caption",icon:w.jsx(MA,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_caption.input_placeholder,onKeyDown:a,onChange:u})})})]})},lJ=()=>{const t=Ve(),e=Ne(),n=Re(),r=rr(n),o=S.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(of(s,n))return s},[n,r]),i=S.useCallback(()=>{n.focus(),n.removeBlocks([o])},[n,o]);return!o||sf(o,n)||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,mainTooltip:t.formatting_toolbar.file_delete.tooltip[o.type]||t.formatting_toolbar.file_delete.tooltip.file,icon:w.jsx(HX,{}),onClick:i})},aJ=()=>{const t=Ve(),e=Ne(),n=Re(),[r,o]=S.useState(),i=rr(n),s=S.useMemo(()=>{if(i.length!==1)return;const d=i[0];if(of(d,n))return o(d.props.name),d},[n,i]),a=S.useCallback(d=>{s&&d.key==="Enter"&&(d.preventDefault(),n.updateBlock(s,{props:{name:r}}))},[r,n,s]),u=S.useCallback(d=>o(d.currentTarget.value),[]);return!s||sf(s,n)||!n.isEditable?null:w.jsxs(e.Generic.Popover.Root,{children:[w.jsx(e.Generic.Popover.Trigger,{children:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_rename.tooltip[s.type]||t.formatting_toolbar.file_rename.tooltip.file,mainTooltip:t.formatting_toolbar.file_rename.tooltip[s.type]||t.formatting_toolbar.file_rename.tooltip.file,icon:w.jsx(EA,{})})}),w.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(e.Generic.Form.Root,{children:w.jsx(e.Generic.Form.TextInput,{name:"file-name",icon:w.jsx(EA,{}),value:r||"",autoFocus:!0,placeholder:t.formatting_toolbar.file_rename.input_placeholder[s.type]||t.formatting_toolbar.file_rename.input_placeholder.file,onKeyDown:a,onChange:u})})})]})},cJ=()=>{const t=Ve(),e=Ne(),n=Re(),r=rr(n),[o,i]=S.useState(!1);S.useEffect(()=>{i(!1)},[r]);const s=r.length===1?r[0]:void 0;return s===void 0||!of(s,n)||!n.isEditable?null:w.jsxs(e.Generic.Popover.Root,{opened:o,position:"bottom",children:[w.jsx(e.Generic.Popover.Trigger,{children:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",onClick:()=>i(!o),isSelected:o,mainTooltip:t.formatting_toolbar.file_replace.tooltip[s.type]||t.formatting_toolbar.file_replace.tooltip.file,label:t.formatting_toolbar.file_replace.tooltip[s.type]||t.formatting_toolbar.file_replace.tooltip.file,icon:w.jsx(_X,{})})}),w.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-panel-popover",variant:"panel-popover",children:w.jsx(W4,{block:s})})]})},uJ=()=>{const t=Ve(),e=Ne(),n=Re(),r=rr(n),[o,i]=S.useState(()=>n.canNestBlock());Vs(()=>{i(n.canNestBlock())},n);const s=S.useCallback(()=>{n.focus(),n.nestBlock()},[n]);return!S.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"nestBlock",onClick:s,isDisabled:!o,label:t.formatting_toolbar.nest.tooltip,mainTooltip:t.formatting_toolbar.nest.tooltip,secondaryTooltip:hr(t.formatting_toolbar.nest.secondary_tooltip,t.generic.ctrl_shortcut),icon:w.jsx(SX,{})})},dJ=()=>{const t=Ve(),e=Ne(),n=Re(),r=rr(n),[o,i]=S.useState(()=>n.canUnnestBlock());Vs(()=>{i(n.canUnnestBlock())},n);const s=S.useCallback(()=>{n.focus(),n.unnestBlock()},[n]);return!S.useMemo(()=>!r.find(a=>n.schema.blockSchema[a.type].content!=="inline"),[n.schema.blockSchema,r])||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":"unnestBlock",onClick:s,isDisabled:!o,label:t.formatting_toolbar.unnest.tooltip,mainTooltip:t.formatting_toolbar.unnest.tooltip,secondaryTooltip:hr(t.formatting_toolbar.unnest.secondary_tooltip,t.generic.ctrl_shortcut),icon:w.jsx(CX,{})})},fJ=t=>[{name:t.slash_menu.paragraph.title,type:"paragraph",icon:qx,isSelected:e=>e.type==="paragraph"},{name:t.slash_menu.heading.title,type:"heading",props:{level:1},icon:Rm,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1},{name:t.slash_menu.heading_2.title,type:"heading",props:{level:2},icon:Dm,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2},{name:t.slash_menu.heading_3.title,type:"heading",props:{level:3},icon:_m,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3},{name:t.slash_menu.heading_4.title,type:"heading",props:{level:4},icon:P4,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===4},{name:t.slash_menu.heading_5.title,type:"heading",props:{level:5},icon:j4,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===5},{name:t.slash_menu.heading_6.title,type:"heading",props:{level:6},icon:V4,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===6},{name:t.slash_menu.toggle_heading.title,type:"heading",props:{level:1,isToggleable:!0},icon:Rm,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===1&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.toggle_heading_2.title,type:"heading",props:{level:2,isToggleable:!0},icon:Dm,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===2&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.toggle_heading_3.title,type:"heading",props:{level:3,isToggleable:!0},icon:_m,isSelected:e=>e.type==="heading"&&"level"in e.props&&e.props.level===3&&"isToggleable"in e.props&&e.props.isToggleable},{name:t.slash_menu.quote.title,type:"quote",icon:G4,isSelected:e=>e.type==="quote"},{name:t.slash_menu.toggle_list.title,type:"toggleListItem",icon:K4,isSelected:e=>e.type==="toggleListItem"},{name:t.slash_menu.bullet_list.title,type:"bulletListItem",icon:F4,isSelected:e=>e.type==="bulletListItem"},{name:t.slash_menu.numbered_list.title,type:"numberedListItem",icon:$4,isSelected:e=>e.type==="numberedListItem"},{name:t.slash_menu.check_list.title,type:"checkListItem",icon:U4,isSelected:e=>e.type==="checkListItem"}],hJ=t=>{const e=Ne(),n=Ve(),r=Re(),o=rr(r),[i,s]=S.useState(r.getTextCursorPosition().block),a=S.useMemo(()=>(t.items||fJ(n)).filter(h=>h.type in r.schema.blockSchema),[r,n,t.items]),u=S.useMemo(()=>a.find(h=>h.type===i.type)!==void 0,[i.type,a]),d=S.useMemo(()=>{const h=p=>{r.focus(),r.transact(()=>{for(const g of o)r.updateBlock(g,{type:p.type,props:p.props})})};return a.map(p=>{const g=p.icon;return{text:p.name,icon:w.jsx(g,{size:16}),onClick:()=>h(p),isSelected:p.isSelected(i)}})},[i,a,r,o]);return Vs(()=>{s(r.getTextCursorPosition().block)},r),!u||!r.isEditable?null:w.jsx(e.FormattingToolbar.Select,{className:"bn-select",items:d})},pJ=()=>{const t=Ve(),e=Ne(),n=Re(),r=S.useCallback(()=>{var o;(o=n.comments)==null||o.startPendingComment(),n.formattingToolbar.closeMenu()},[n]);return n.comments?w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:w.jsx(H4,{}),onClick:r}):null},mJ=()=>{const t=Ve(),e=Ne(),n=Re(),r=S.useCallback(()=>{n._tiptapEditor.chain().focus().addPendingComment().run()},[n]);return!n._tiptapEditor.commands.addPendingComment||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.comment.tooltip,mainTooltip:t.formatting_toolbar.comment.tooltip,icon:w.jsx(H4,{}),onClick:r})};function q1(t,e){try{const n=new URL(t,e);if(n.protocol!=="javascript:")return n.href}catch{}return"#"}const gJ=()=>{const t=Ve(),e=Ne(),n=Re(),r=rr(n),o=S.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(of(s,n))return s},[n,r]),i=S.useCallback(()=>{o&&o.props.url&&(n.focus(),n.resolveFileUrl?n.resolveFileUrl(o.props.url).then(s=>window.open(q1(s,window.location.href))):window.open(q1(o.props.url,window.location.href)))},[n,o]);return!o||sf(o,n)?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,mainTooltip:t.formatting_toolbar.file_download.tooltip[o.type]||t.formatting_toolbar.file_download.tooltip.file,icon:w.jsx(jX,{}),onClick:i})},bJ=()=>{const t=Ve(),e=Ne(),n=Re(),r=rr(n),o=S.useMemo(()=>{if(r.length!==1)return;const s=r[0];if(TZ(s,n))return s},[n,r]),i=S.useCallback(()=>{o&&n.updateBlock(o,{props:{showPreview:!o.props.showPreview}})},[n,o]);return!o||sf(o,n)||!n.isEditable?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:"Toggle preview",mainTooltip:t.formatting_toolbar.file_preview_toggle.tooltip,icon:w.jsx(DX,{}),isSelected:o.props.showPreview,onClick:i})},yJ=()=>{const t=Ve(),e=Ne(),n=Re(),r=rr(n),o=S.useMemo(()=>{var s;if(r.length!==1)return;const a=r[0];if(a.type==="table")return(s=n.tableHandles)==null?void 0:s.getMergeDirection(a)},[n,r]),i=S.useCallback(()=>{var s;(s=n.tableHandles)==null||s.mergeCells()},[n]);return!n.isEditable||o===void 0||!n.settings.tables.splitCells?null:w.jsx(e.FormattingToolbar.Button,{className:"bn-button",label:t.formatting_toolbar.table_cell_merge.tooltip,mainTooltip:t.formatting_toolbar.table_cell_merge.tooltip,icon:o==="horizontal"?w.jsx(MX,{}):w.jsx(TX,{}),onClick:i})},vJ={left:yX,center:gX,right:vX,justify:bX},hv=t=>{const e=Ne(),n=Ve(),r=Re(),o=rr(r),i=S.useMemo(()=>{var u;const d=o[0];if(H1("textAlignment",d,r))return d.props.textAlignment;if(d.type==="table"){const h=(u=r.tableHandles)==null?void 0:u.getCellSelection();if(!h)return;const p=h.cells.map(({row:b,col:v})=>Rs(d.content.rows[b].cells[v]).props.textAlignment),g=p[0];if(p.every(b=>b===g))return g}},[r,o]),s=S.useCallback(u=>{var d;r.focus();for(const h of o)if(Wa("textAlignment",h.type,r))r.updateBlock(h,{props:{textAlignment:u}});else if(h.type==="table"){const p=(d=r.tableHandles)==null?void 0:d.getCellSelection();if(!p)continue;const g=h.content.rows.map(b=>({...b,cells:b.cells.map(v=>Rs(v))}));p.cells.forEach(({row:b,col:v})=>{g[b].cells[v].props.textAlignment=u}),r.updateBlock(h,{type:"table",content:{...h.content,type:"tableContent",rows:g}}),r.setTextCursorPosition(h)}},[r,o]);if(!S.useMemo(()=>!!o.find(u=>"textAlignment"in u.props||u.type==="table"&&u.children),[o])||!r.isEditable)return null;const a=vJ[t.textAlignment];return w.jsx(e.FormattingToolbar.Button,{className:"bn-button","data-test":`alignText${t.textAlignment.slice(0,1).toUpperCase()+t.textAlignment.slice(1)}`,onClick:()=>s(t.textAlignment),isSelected:i===t.textAlignment,label:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,mainTooltip:n.formatting_toolbar[`align_${t.textAlignment}`].tooltip,icon:w.jsx(a,{})})},J4=t=>[w.jsx(hJ,{items:t},"blockTypeSelect"),w.jsx(yJ,{},"tableCellMergeButton"),w.jsx(sJ,{},"fileCaptionButton"),w.jsx(cJ,{},"replaceFileButton"),w.jsx(aJ,{},"fileRenameButton"),w.jsx(lJ,{},"fileDeleteButton"),w.jsx(gJ,{},"fileDownloadButton"),w.jsx(bJ,{},"filePreviewButton"),w.jsx(Xh,{basicTextStyle:"bold"},"boldStyleButton"),w.jsx(Xh,{basicTextStyle:"italic"},"italicStyleButton"),w.jsx(Xh,{basicTextStyle:"underline"},"underlineStyleButton"),w.jsx(Xh,{basicTextStyle:"strike"},"strikeStyleButton"),w.jsx(hv,{textAlignment:"left"},"textAlignLeftButton"),w.jsx(hv,{textAlignment:"center"},"textAlignCenterButton"),w.jsx(hv,{textAlignment:"right"},"textAlignRightButton"),w.jsx(rJ,{},"colorStyleButton"),w.jsx(uJ,{},"nestBlockButton"),w.jsx(dJ,{},"unnestBlockButton"),w.jsx(iJ,{},"createLinkButton"),w.jsx(pJ,{},"addCommentButton"),w.jsx(mJ,{},"addTiptapCommentButton")],Q4=t=>{const e=Ne();return w.jsx(e.FormattingToolbar.Root,{className:"bn-toolbar bn-formatting-toolbar",children:t.children||J4(t.blockTypeSelectItems)})},DA=t=>{switch(t){case"left":return"top-start";case"center":return"top";case"right":return"top-end";default:return"top-start"}},e3=t=>{const e=S.useRef(null),n=Re(),[r,o]=S.useState(()=>{const g=n.getTextCursorPosition().block;return"textAlignment"in g.props?DA(g.props.textAlignment):"top-start"});Vs(()=>{const g=n.getTextCursorPosition().block;"textAlignment"in g.props?o(DA(g.props.textAlignment)):o("top-start")},n);const i=Ti(n.formattingToolbar.onUpdate.bind(n.formattingToolbar)),{isMounted:s,ref:a,style:u,getFloatingProps:d}=js(i?.show||!1,i?.referencePos||null,3e3,{placement:r,middleware:[Si(10),Gd(),Ls()],onOpenChange:(g,b)=>{g||(n.formattingToolbar.closeMenu(),n.focus())},canDismiss:{enabled:!0,escapeKey:!0,outsidePress:g=>{var b;const v=(b=n._tiptapEditor)==null?void 0:b.view;return!v||!g.target?!1:!eJ(g,v.dom.parentElement)}},...t.floatingOptions}),h=S.useMemo(()=>Zx([e,a]),[e,a]);if(!s||!i)return null;if(!i.show&&e.current)return w.jsx("div",{ref:h,style:u,dangerouslySetInnerHTML:{__html:e.current.innerHTML}});const p=t.formattingToolbar||Q4;return w.jsx("div",{ref:h,style:u,...d(),children:w.jsx(p,{})})},wJ=t=>{const e=Ne(),n=Ve();return w.jsx(e.LinkToolbar.Button,{className:"bn-button",label:n.link_toolbar.delete.tooltip,mainTooltip:n.link_toolbar.delete.tooltip,isSelected:!1,onClick:t.deleteLink,icon:w.jsx(EX,{})})},xJ=t=>{const e=Ne(),n=Ve();return w.jsxs(e.Generic.Popover.Root,{children:[w.jsx(e.Generic.Popover.Trigger,{children:w.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.edit.tooltip,isSelected:!1,children:n.link_toolbar.edit.text})}),w.jsx(e.Generic.Popover.Content,{className:"bn-popover-content bn-form-popover",variant:"form-popover",children:w.jsx(X4,{...t})})]})},CJ=t=>{const e=Ne(),n=Ve();return w.jsx(e.LinkToolbar.Button,{className:"bn-button",mainTooltip:n.link_toolbar.open.tooltip,label:n.link_toolbar.open.tooltip,isSelected:!1,onClick:()=>{window.open(q1(t.url,window.location.href),"_blank")},icon:w.jsx(VX,{})})},SJ=t=>{const e=Ne();return t.children?w.jsx(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",children:t.children}):w.jsxs(e.LinkToolbar.Root,{className:"bn-toolbar bn-link-toolbar",onMouseEnter:t.stopHideTimer,onMouseLeave:t.startHideTimer,children:[w.jsx(xJ,{url:t.url,text:t.text,editLink:t.editLink}),w.jsx(CJ,{url:t.url}),w.jsx(wJ,{deleteLink:t.deleteLink})]})},kJ=t=>{const e=Re(),n={deleteLink:e.linkToolbar.deleteLink,editLink:e.linkToolbar.editLink,startHideTimer:e.linkToolbar.startHideTimer,stopHideTimer:e.linkToolbar.stopHideTimer},r=Ti(e.linkToolbar.onUpdate.bind(e.linkToolbar)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=js(r?.show||!1,r?.referencePos||null,4e3,{placement:"top-start",middleware:[Si(10),Ls()],onOpenChange:g=>{g||(e.linkToolbar.closeMenu(),e.focus())},...t.floatingOptions});if(!o||!r)return null;const{show:u,referencePos:d,...h}=r,p=t.linkToolbar||SJ;return w.jsx("div",{ref:i,style:s,...a(),children:w.jsx(p,{...h,...n})})};function EJ(t){return De({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8Z"},child:[]},{tag:"path",attr:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8Z"},child:[]}]})(t)}const MJ=t=>{const e=Ne(),n=Ve(),r=Re(),o=S.useCallback(()=>{const i=t.block.content;if(i!==void 0&&Array.isArray(i)&&i.length===0)r.setTextCursorPosition(t.block),r.openSuggestionMenu("/");else{const s=r.insertBlocks([{type:"paragraph"}],t.block,"after")[0];r.setTextCursorPosition(s),r.openSuggestionMenu("/")}},[r,t.block]);return w.jsx(e.SideMenu.Button,{className:"bn-button",label:n.side_menu.add_block_label,icon:w.jsx(EJ,{size:24,onClick:o,"data-test":"dragHandleAdd"})})};function t3(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function TJ(t){return De({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m7 10 5 5 5-5z"},child:[]}]})(t)}const AJ=t=>{const e=Ne(),n=Re();return!Wa("textColor",t.block.type,n)&&!Wa("backgroundColor",t.block.type,n)?null:w.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[w.jsx(e.Generic.Menu.Trigger,{sub:!0,children:w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children})}),w.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(Tg,{iconSize:18,text:Wa("textColor",t.block.type,n)&&H1("textColor",t.block,n)?{color:t.block.props.textColor,setColor:r=>n.updateBlock(t.block,{type:t.block.type,props:{textColor:r}})}:void 0,background:Wa("backgroundColor",t.block.type,n)&&H1("backgroundColor",t.block,n)?{color:t.block.props.backgroundColor,setColor:r=>n.updateBlock(t.block,{props:{backgroundColor:r}})}:void 0})})]})},NJ=t=>{const e=Ne(),n=Re();return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",onClick:()=>n.removeBlocks([t.block]),children:t.children})},OJ=t=>{const e=Ne(),n=Re();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerRows;return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{const o=n.getBlock(t.block.id);o&&n.updateBlock(o,{...o,content:{...o.content,headerRows:r?void 0:1}})},children:t.children})},RJ=t=>{const e=Ne(),n=Re();if(t.block.type!=="table"||!n.settings.tables.headers)return null;const r=!!t.block.content.headerCols;return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:r,onClick:()=>{n.updateBlock(t.block,{type:"table",content:{...t.block.content,type:"tableContent",headerCols:r?void 0:1}})},children:t.children})},DJ=t=>{const e=Ne(),n=Ve();return w.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||w.jsxs(w.Fragment,{children:[w.jsx(NJ,{...t,children:n.drag_handle.delete_menuitem}),w.jsx(AJ,{...t,children:n.drag_handle.colors_menuitem}),w.jsx(OJ,{...t,children:n.drag_handle.header_row_menuitem}),w.jsx(RJ,{...t,children:n.drag_handle.header_column_menuitem})]})})},_J=t=>{const e=Ne(),n=Ve(),r=t.dragHandleMenu||DJ;return w.jsxs(e.Generic.Menu.Root,{onOpenChange:o=>{o?t.freezeMenu():t.unfreezeMenu()},position:"left",children:[w.jsx(e.Generic.Menu.Trigger,{children:w.jsx(e.SideMenu.Button,{label:n.side_menu.drag_handle_label,draggable:!0,onDragStart:o=>t.blockDragStart(o,t.block),onDragEnd:t.blockDragEnd,className:"bn-button",icon:w.jsx(t3,{size:24,"data-test":"dragHandle"})})}),w.jsx(r,{block:t.block,children:t.children})]})},LJ=t=>{const e=Ne(),n=S.useMemo(()=>{const r={"data-block-type":t.block.type};return t.block.type==="heading"&&(r["data-level"]=t.block.props.level.toString()),t.editor.schema.blockSchema[t.block.type].isFileBlock&&(t.block.props.url?r["data-url"]="true":r["data-url"]="false"),r},[t.block,t.editor.schema.blockSchema]);return w.jsx(e.SideMenu.Root,{className:"bn-side-menu",...n,children:t.children||w.jsxs(w.Fragment,{children:[w.jsx(MJ,{...t}),w.jsx(_J,{...t})]})})},BJ=t=>{const e=Re(),n={blockDragStart:e.sideMenu.blockDragStart,blockDragEnd:e.sideMenu.blockDragEnd,freezeMenu:e.sideMenu.freezeMenu,unfreezeMenu:e.sideMenu.unfreezeMenu},r=Ti(e.sideMenu.onUpdate.bind(e.sideMenu)),{isMounted:o,ref:i,style:s,getFloatingProps:a}=js(r?.show||!1,r?.referencePos||null,1e3,{placement:"left-start",...t.floatingOptions});if(!o||!r)return null;const{show:u,referencePos:d,...h}=r,p=t.sideMenu||LJ;return w.jsx("div",{ref:i,style:s,...a(),children:w.jsx(p,{...h,...n,editor:e})})};async function IJ(t,e){return(await PW(t,e)).map(({id:n,onItemClick:r})=>({id:n,onItemClick:r,icon:n}))}function HJ(t){const e=Ne(),n=Ve(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s,columns:a}=t,u=o==="loading-initial"||o==="loading"?w.jsx(e.GridSuggestionMenu.Loader,{className:"bn-grid-suggestion-menu-loader",columns:a}):null,d=S.useMemo(()=>{const h=[];for(let p=0;p<r.length;p++){const g=r[p];h.push(w.jsx(e.GridSuggestionMenu.Item,{className:"bn-grid-suggestion-menu-item",item:g,id:`bn-grid-suggestion-menu-item-${p}`,isSelected:p===i,onClick:()=>s?.(g)},g.id))}return h},[e,r,s,i]);return w.jsxs(e.GridSuggestionMenu.Root,{id:"bn-grid-suggestion-menu",columns:a,className:"bn-grid-suggestion-menu",children:[u,d,d.length===0&&t.loadingState==="loaded"&&w.jsx(e.GridSuggestionMenu.EmptyItem,{className:"bn-grid-suggestion-menu-empty-item",columns:a,children:n.suggestion_menu.no_items_title})]})}function n3(t,e,n,r=3){const o=S.useRef(0);S.useEffect(()=>{e!==void 0&&(t.length>0?o.current=e.length:e.length-o.current>r&&n())},[n,r,t.length,e])}function r3(t,e){const[n,r]=S.useState([]),[o,i]=S.useState(!1),s=S.useRef(void 0),a=S.useRef(void 0);return S.useEffect(()=>{const u=t;s.current=t,i(!0),e(t).then(d=>{s.current===u&&(r(d),i(!1),a.current=u)})},[t,e]),{items:n||[],usedQuery:a.current,loadingState:a.current===void 0?"loading-initial":o?"loading":"loaded"}}function PJ(t,e,n,r,o){const[i,s]=S.useState(0),a=r!==void 0&&r>1;return S.useEffect(()=>{var u;const d=h=>(h.key==="ArrowLeft"&&(h.preventDefault(),n.length&&s((i-1+n.length)%n.length)),h.key==="ArrowRight"&&(h.preventDefault(),n.length&&s((i+1+n.length)%n.length)),h.key==="ArrowUp"?(h.preventDefault(),n.length&&s((i-r+n.length)%n.length),!0):h.key==="ArrowDown"?(h.preventDefault(),n.length&&s((i+r)%n.length),!0):h.key==="Enter"&&!h.isComposing?(h.stopPropagation(),h.preventDefault(),n.length&&o?.(n[i]),!0):!1);return(u=t.domElement)==null||u.addEventListener("keydown",d,!0),()=>{var h;(h=t.domElement)==null||h.removeEventListener("keydown",d,!0)}},[t.domElement,n,i,o,r,a]),S.useEffect(()=>{s(0)},[e]),{selectedIndex:n.length===0?void 0:i}}function jJ(t){const e=Mi().setContentEditableProps,n=Re(),{getItems:r,gridSuggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:u,columns:d}=t,h=S.useCallback(C=>{a(),s(),u?.(C)},[u,a,s]),{items:p,usedQuery:g,loadingState:b}=r3(i,r);n3(p,g,a);const{selectedIndex:v}=PJ(n,i,p,d,h);return S.useEffect(()=>(e(C=>({...C,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(C=>({...C,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),S.useEffect(()=>(e(C=>({...C,"aria-activedescendant":v?"bn-suggestion-menu-item-"+v:void 0})),()=>{e(C=>({...C,"aria-activedescendant":void 0}))}),[e,v]),w.jsx(o,{items:p,onItemClick:h,loadingState:b,selectedIndex:v,columns:d})}function VJ(t){const e=Re(),{triggerCharacter:n,gridSuggestionMenuComponent:r,columns:o,minQueryLength:i,onItemClick:s,getItems:a,floatingOptions:u}=t,d=S.useMemo(()=>s||(T=>{T.onItemClick(e)}),[e,s]),h=S.useMemo(()=>a||(async T=>await IJ(e,T)),[e,a]),p={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},g=S.useCallback(T=>e.suggestionMenus.onUpdate(n,T),[e.suggestionMenus,n]),b=Ti(g),{isMounted:v,ref:C,style:k,getFloatingProps:E}=js(b?.show||!1,b?.referencePos||null,2e3,{placement:"bottom-start",middleware:[Si(10),Ls(),Gm({apply({availableHeight:T,elements:N}){Object.assign(N.floating.style,{maxHeight:`${T-10}px`})}})],onOpenChange(T){T||e.suggestionMenus.closeMenu()},...u});return!v||!b||!(b!=null&&b.ignoreQueryLength)&&i&&(b.query.startsWith(" ")||b.query.length<i)?null:w.jsx("div",{ref:C,style:k,...E(),children:w.jsx(jJ,{query:b.query,closeMenu:p.closeMenu,clearQuery:p.clearQuery,getItems:h,columns:o,gridSuggestionMenuComponent:r||HJ,onItemClick:d})})}function zJ(t){const e=Ne(),n=Ve(),{items:r,loadingState:o,selectedIndex:i,onItemClick:s}=t,a=o==="loading-initial"||o==="loading"?w.jsx(e.SuggestionMenu.Loader,{className:"bn-suggestion-menu-loader"}):null,u=S.useMemo(()=>{let d;const h=[];for(let p=0;p<r.length;p++){const g=r[p];g.group!==d&&(d=g.group,h.push(w.jsx(e.SuggestionMenu.Label,{className:"bn-suggestion-menu-label",children:d},d))),h.push(w.jsx(e.SuggestionMenu.Item,{className:_t("bn-suggestion-menu-item",g.size==="small"?"bn-suggestion-menu-item-small":""),item:g,id:`bn-suggestion-menu-item-${p}`,isSelected:p===i,onClick:()=>s?.(g)},g.title))}return h},[e,r,s,i]);return w.jsxs(e.SuggestionMenu.Root,{id:"bn-suggestion-menu",className:"bn-suggestion-menu",children:[u,u.length===0&&(t.loadingState==="loading"||t.loadingState==="loaded")&&w.jsx(e.SuggestionMenu.EmptyItem,{className:"bn-suggestion-menu-item",children:n.suggestion_menu.no_items_title}),a]})}function UJ(t,e){const[n,r]=S.useState(0);return{selectedIndex:n,setSelectedIndex:r,handler:o=>{if(o.key==="ArrowUp")return o.preventDefault(),t.length&&r((n-1+t.length)%t.length),!0;if(o.key==="ArrowDown")return o.preventDefault(),t.length&&r((n+1)%t.length),!0;const i=$J(o)?o.nativeEvent.isComposing:o.isComposing;return o.key==="Enter"&&!i?(o.preventDefault(),o.stopPropagation(),t.length&&e?.(t[n]),!0):!1}}}function $J(t){return t.nativeEvent!==void 0}function FJ(t,e,n,r,o){const{selectedIndex:i,setSelectedIndex:s,handler:a}=UJ(n,r);return S.useEffect(()=>{var u;return(u=t.domElement)==null||u.addEventListener("keydown",a,!0),()=>{var d;(d=t.domElement)==null||d.removeEventListener("keydown",a,!0)}},[t.domElement,n,i,r,o,a]),S.useEffect(()=>{s(0)},[e,s]),{selectedIndex:n.length===0?void 0:i}}function GJ(t){const e=Mi().setContentEditableProps,n=Re(),{getItems:r,suggestionMenuComponent:o,query:i,clearQuery:s,closeMenu:a,onItemClick:u}=t,d=S.useCallback(v=>{a(),s(),u?.(v)},[u,a,s]),{items:h,usedQuery:p,loadingState:g}=r3(i,r);n3(h,p,a);const{selectedIndex:b}=FJ(n,i,h,d);return S.useEffect(()=>(e(v=>({...v,"aria-expanded":!0,"aria-controls":"bn-suggestion-menu"})),()=>{e(v=>({...v,"aria-expanded":!1,"aria-controls":void 0}))}),[e]),S.useEffect(()=>(e(v=>({...v,"aria-activedescendant":b?"bn-suggestion-menu-item-"+b:void 0})),()=>{e(v=>({...v,"aria-activedescendant":void 0}))}),[e,b]),w.jsx(o,{items:h,onItemClick:d,loadingState:g,selectedIndex:b})}const qJ={heading:Rm,heading_2:Dm,heading_3:_m,heading_4:P4,heading_5:j4,heading_6:V4,toggle_heading:Rm,toggle_heading_2:Dm,toggle_heading_3:_m,quote:G4,toggle_list:K4,numbered_list:$4,bullet_list:F4,check_list:U4,paragraph:qx,table:NX,image:q4,video:RX,audio:Z4,file:Gx,emoji:UX,code_block:xX};function KJ(t){return NZ(t).map(e=>{const n=qJ[e.key];return{...e,icon:w.jsx(n,{size:18})}})}function ZJ(t){const e=Re(),{triggerCharacter:n,suggestionMenuComponent:r,minQueryLength:o,onItemClick:i,getItems:s,floatingOptions:a}=t,u=S.useMemo(()=>i||(E=>{E.onItemClick(e)}),[e,i]),d=S.useMemo(()=>s||(async E=>OZ(KJ(e),E)),[e,s]),h={closeMenu:e.suggestionMenus.closeMenu,clearQuery:e.suggestionMenus.clearQuery},p=S.useCallback(E=>e.suggestionMenus.onUpdate(n,E),[e.suggestionMenus,n]),g=Ti(p),{isMounted:b,ref:v,style:C,getFloatingProps:k}=js(g?.show||!1,g?.referencePos||null,2e3,{placement:"bottom-start",middleware:[Si(10),Ls({mainAxis:!0,crossAxis:!1}),Gd(),Gm({apply({availableHeight:E,elements:T}){Object.assign(T.floating.style,{maxHeight:`${E-10}px`})}})],onOpenChange(E){E||e.suggestionMenus.closeMenu()},...a});return!b||!g||!(g!=null&&g.ignoreQueryLength)&&o&&(g.query.startsWith(" ")||g.query.length<o)?null:w.jsx("div",{ref:v,style:C,...k(),children:w.jsx(GJ,{query:g.query,closeMenu:h.closeMenu,clearQuery:h.clearQuery,getItems:d,suggestionMenuComponent:r||zJ,onItemClick:u})})}const YJ=(t,e=.3)=>{const n=Math.floor(t)+e,r=Math.ceil(t)-e;return t>=n&&t<=r?Math.round(t):t<n?Math.floor(t):Math.ceil(t)},WJ=t=>{const e=Ne(),n=S.useRef(!1),[r,o]=S.useState(),i=S.useCallback(a=>{t.onMouseDown(),o({originalContent:t.block.content,originalCroppedContent:{rows:t.editor.tableHandles.cropEmptyRowsOrColumns(t.block,t.orientation==="addOrRemoveColumns"?"columns":"rows")},startPos:t.orientation==="addOrRemoveColumns"?a.clientX:a.clientY}),n.current=!1,a.preventDefault()},[t]),s=S.useCallback(()=>{n.current||t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns(t.block,"columns",1):t.editor.tableHandles.addRowsOrColumns(t.block,"rows",1)}})},[t.block,t.orientation,t.editor]);return S.useEffect(()=>{const a=u=>{var d,h;if(!r)throw new Error("editingState is undefined");n.current=!0;const p=(t.orientation==="addOrRemoveColumns"?u.clientX:u.clientY)-r.startPos,g=t.orientation==="addOrRemoveColumns"?((d=r.originalCroppedContent.rows[0])==null?void 0:d.cells.length)??0:r.originalCroppedContent.rows.length,b=t.orientation==="addOrRemoveColumns"?((h=r.originalContent.rows[0])==null?void 0:h.cells.length)??0:r.originalContent.rows.length,v=t.orientation==="addOrRemoveColumns"?t.block.content.rows[0].cells.length:t.block.content.rows.length,C=b+YJ(p/(t.orientation==="addOrRemoveColumns"?Bx:dZ),.3);C>=g&&C>0&&C!==v&&(t.editor.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:t.orientation==="addOrRemoveColumns"?t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"columns",C-g):t.editor.tableHandles.addRowsOrColumns({type:"table",content:r.originalCroppedContent},"rows",C-g)}}),t.block.content&&t.editor.setTextCursorPosition(t.block))};return r&&window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[r,t.block,t.editor,t.orientation]),S.useEffect(()=>{const a=t.onMouseUp,u=()=>{o(void 0),a()};return r&&window.addEventListener("mouseup",u),()=>{window.removeEventListener("mouseup",u)}},[r,t.onMouseUp]),t.editor.isEditable?w.jsx(e.TableHandle.ExtendButton,{className:_t("bn-extend-button",t.orientation==="addOrRemoveColumns"?"bn-extend-button-add-remove-columns":"bn-extend-button-add-remove-rows",r!==null?"bn-extend-button-editing":""),onClick:s,onMouseDown:i,children:t.children||w.jsx(BX,{size:18,"data-test":"extendButton"})}):null},_A=t=>{const e=Ne(),n=Ve(),r=Re().tableHandles;return r?w.jsx(e.Generic.Menu.Item,{onClick:()=>{r.addRowOrColumn(t.index,t.orientation==="row"?{orientation:"row",side:t.side}:{orientation:"column",side:t.side})},children:n.table_handle[`add_${t.side}_menuitem`]}):null},XJ=t=>{const e=Ne(),n=Ve(),r=Re().tableHandles;return r?w.jsx(e.Generic.Menu.Item,{onClick:()=>{r.removeRowOrColumn(t.index,t.orientation)},children:t.orientation==="row"?n.table_handle.delete_row_menuitem:n.table_handle.delete_column_menuitem}):null},JJ=t=>{const e=Ne(),n=Ve(),r=Re(),o=r.tableHandles,i=S.useMemo(()=>!o||!t.block?[]:t.orientation==="row"?o.getCellsAtRowHandle(t.block,t.index):o.getCellsAtColumnHandle(t.block,t.index),[t.block,t.index,t.orientation,o]),s=(u,d)=>{const h=t.block.content.rows.map(p=>({...p,cells:p.cells.map(g=>Rs(g))}));i.forEach(({row:p,col:g})=>{d==="text"?h[p].cells[g].props.textColor=u:h[p].cells[g].props.backgroundColor=u}),r.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:h}}),r.setTextCursorPosition(t.block)};if(!i||!i[0]||!o||r.settings.tables.cellTextColor===!1&&r.settings.tables.cellBackgroundColor===!1)return null;const a=Rs(i[0].cell);return w.jsxs(e.Generic.Menu.Root,{position:"right",sub:!0,children:[w.jsx(e.Generic.Menu.Trigger,{sub:!0,children:w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||n.drag_handle.colors_menuitem})}),w.jsx(e.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(Tg,{iconSize:18,text:r.settings.tables.cellTextColor?{color:i.every(({cell:u})=>Ds(u)&&u.props.textColor===a.props.textColor)?a.props.textColor:"default",setColor:u=>{s(u,"text")}}:void 0,background:r.settings.tables.cellBackgroundColor?{color:i.every(({cell:u})=>Ds(u)&&u.props.backgroundColor===a.props.backgroundColor)?a.props.backgroundColor:"default",setColor:u=>s(u,"background")}:void 0})})]})},QJ=t=>{const e=Ne(),n=Ve(),r=Re();if(!r.tableHandles||t.index!==0||t.orientation!=="row"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerRows;return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(t.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerRows:o?void 0:1}})},children:n.drag_handle.header_row_menuitem})},eQ=t=>{const e=Ne(),n=Ve(),r=Re();if(!r.tableHandles||t.index!==0||t.orientation!=="column"||!r.settings.tables.headers)return null;const o=!!t.block.content.headerCols;return w.jsx(e.Generic.Menu.Item,{className:"bn-menu-item",checked:o,onClick:()=>{const i=r.getBlock(t.block.id);i&&r.updateBlock(i,{...i,content:{...i.content,headerCols:o?void 0:1}})},children:n.drag_handle.header_column_menuitem})},tQ=t=>{const e=Ne();return w.jsx(e.Generic.Menu.Dropdown,{className:"bn-table-handle-menu",children:t.children||w.jsxs(w.Fragment,{children:[w.jsx(XJ,{orientation:t.orientation,block:t.block,index:t.index}),w.jsx(_A,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"above":"left"}),w.jsx(_A,{orientation:t.orientation,block:t.block,index:t.index,side:t.orientation==="row"?"below":"right"}),w.jsx(QJ,{orientation:t.orientation,block:t.block,index:t.index}),w.jsx(eQ,{orientation:t.orientation,block:t.block,index:t.index}),w.jsx(JJ,{orientation:t.orientation,block:t.block,index:t.index})]})})},nQ=t=>{const e=Ne(),[n,r]=S.useState(!1),o=t.tableHandleMenu||tQ,i=S.useMemo(()=>{const s=t.editor.tableHandles;return!s||!t.block||t.block.type!=="table"?!1:t.orientation==="column"?s.getCellsAtColumnHandle(t.block,t.index).every(({cell:a})=>Vl(a)===1):s.getCellsAtRowHandle(t.block,t.index).every(({cell:a})=>jd(a)===1)},[t.block,t.editor.tableHandles,t.index,t.orientation]);return w.jsxs(e.Generic.Menu.Root,{onOpenChange:s=>{s?(t.freezeHandles(),t.hideOtherSide()):(t.unfreezeHandles(),t.showOtherSide(),t.editor.focus())},position:"right",children:[w.jsx(e.Generic.Menu.Trigger,{children:w.jsx(e.TableHandle.Root,{className:_t("bn-table-handle",n?"bn-table-handle-dragging":"",i?"":"bn-table-handle-not-draggable"),draggable:i,onDragStart:s=>{r(!0),t.dragStart(s)},onDragEnd:()=>{t.dragEnd(),r(!1)},style:t.orientation==="column"?{transform:"rotate(0.25turn)"}:void 0,children:t.children||w.jsx(t3,{size:24,"data-test":"tableHandle"})})}),vr.createPortal(w.jsx(o,{orientation:t.orientation,block:t.block,index:t.index}),t.menuContainer)]})};function LA(t,e,n){const{refs:r,update:o,context:i,floatingStyles:s}=mw({open:e,placement:t==="addOrRemoveColumns"?"right":"bottom",middleware:[Gm({apply({rects:d,elements:h}){Object.assign(h.floating.style,t==="addOrRemoveColumns"?{height:`${d.reference.height}px`}:{width:`${d.reference.width}px`})}})]}),{isMounted:a,styles:u}=gw(i);return S.useEffect(()=>{o()},[n,o]),S.useEffect(()=>{n!==null&&r.setReference({getBoundingClientRect:()=>n})},[t,n,r]),S.useMemo(()=>({isMounted:a,ref:r.setFloating,style:{display:"flex",...u,...s}}),[s,a,r.setFloating,u])}function rQ(t,e,n){const r=LA("addOrRemoveRows",e,n),o=LA("addOrRemoveColumns",t,n);return S.useMemo(()=>({addOrRemoveRowsButton:r,addOrRemoveColumnsButton:o}),[o,r])}function oQ(t,e,n){return n&&n.draggedCellOrientation==="row"?new DOMRect(e.x,n.mousePos,e.width,0):new DOMRect(e.x,t.y,e.width,t.height)}function iQ(t,e,n){return n&&n.draggedCellOrientation==="col"?new DOMRect(n.mousePos,e.y,0,e.height):new DOMRect(t.x,e.y,t.width,e.height)}function sQ(t){return new DOMRect(t.x,t.y,t.width,0)}function pv(t,e,n,r,o){const{refs:i,update:s,context:a,floatingStyles:u}=mw({open:e,placement:t==="row"?"left":t==="col"?"top":"bottom-end",middleware:[Si(t==="row"?-10:t==="col"?-12:{mainAxis:1,crossAxis:-1})]}),{isMounted:d,styles:h}=gw(a);return S.useEffect(()=>{s()},[n,r,s]),S.useEffect(()=>{n===null||r===null||o&&t==="cell"||i.setReference({getBoundingClientRect:()=>(t==="row"?oQ:t==="col"?iQ:sQ)(n,r,o)})},[o,t,n,r,i]),S.useMemo(()=>({isMounted:d,ref:i.setFloating,style:{display:"flex",...h,...u}}),[u,d,i.setFloating,h])}function lQ(t,e,n,r){const o=pv("row",t,e,n,r),i=pv("col",t,e,n,r),s=pv("cell",t,e,n,r);return S.useMemo(()=>({rowHandle:o,colHandle:i,cellHandle:s}),[i,o,s])}const aQ=t=>{var e,n;const r=Ne(),o=Ve(),i=Re(),s=(u,d)=>{const h=t.block.content.rows.map(p=>({...p,cells:p.cells.map(g=>Rs(g))}));d==="text"?h[t.rowIndex].cells[t.colIndex].props.textColor=u:h[t.rowIndex].cells[t.colIndex].props.backgroundColor=u,i.updateBlock(t.block,{type:"table",content:{...t.block.content,rows:h}}),i.setTextCursorPosition(t.block)},a=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!a||i.settings.tables.cellTextColor===!1&&i.settings.tables.cellBackgroundColor===!1?null:w.jsxs(r.Generic.Menu.Root,{position:"right",sub:!0,children:[w.jsx(r.Generic.Menu.Trigger,{sub:!0,children:w.jsx(r.Generic.Menu.Item,{className:"bn-menu-item",subTrigger:!0,children:t.children||o.drag_handle.colors_menuitem})}),w.jsx(r.Generic.Menu.Dropdown,{sub:!0,className:"bn-menu-dropdown bn-color-picker-dropdown",children:w.jsx(Tg,{iconSize:18,text:i.settings.tables.cellTextColor?{color:Ds(a)?a.props.textColor:"default",setColor:u=>s(u,"text")}:void 0,background:i.settings.tables.cellBackgroundColor?{color:Ds(a)?a.props.backgroundColor:"default",setColor:u=>s(u,"background")}:void 0})})]})},cQ=t=>{var e,n;const r=Ne(),o=Ve(),i=Re(),s=(n=(e=t.block.content.rows[t.rowIndex])==null?void 0:e.cells)==null?void 0:n[t.colIndex];return!s||!Ds(s)||jd(s)===1&&Vl(s)===1||!i.settings.tables.splitCells?null:w.jsx(r.Generic.Menu.Item,{onClick:()=>{var a;(a=i.tableHandles)==null||a.splitCell({row:t.rowIndex,col:t.colIndex})},children:o.table_handle.split_cell_menuitem})},uQ=t=>{const e=Ne();return w.jsx(e.Generic.Menu.Dropdown,{className:"bn-menu-dropdown bn-drag-handle-menu",children:t.children||w.jsxs(w.Fragment,{children:[w.jsx(cQ,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),w.jsx(aQ,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex})]})})},dQ=t=>{const e=Ne(),n=t.tableCellMenu||uQ;return!t.editor.settings.tables.splitCells&&!t.editor.settings.tables.cellBackgroundColor&&!t.editor.settings.tables.cellTextColor?null:w.jsxs(e.Generic.Menu.Root,{onOpenChange:r=>{r?t.freezeHandles():(t.unfreezeHandles(),t.editor.focus())},position:"right",children:[w.jsx(e.Generic.Menu.Trigger,{children:w.jsx(e.Generic.Menu.Button,{className:"bn-table-cell-handle",children:t.children||w.jsx(TJ,{size:12,"data-test":"tableCellHandle"})})}),vr.createPortal(w.jsx(n,{block:t.block,rowIndex:t.rowIndex,colIndex:t.colIndex}),t.menuContainer)]})},fQ=t=>{var e,n;const r=Re(),[o,i]=S.useState(null);if(!r.tableHandles)throw new Error("TableHandlesController can only be used when BlockNote editor schema contains table block");const s={rowDragStart:r.tableHandles.rowDragStart,colDragStart:r.tableHandles.colDragStart,dragEnd:r.tableHandles.dragEnd,freezeHandles:r.tableHandles.freezeHandles,unfreezeHandles:r.tableHandles.unfreezeHandles},{freezeHandles:a,unfreezeHandles:u}=s,d=S.useCallback(()=>{a(),O(!0),N(!0)},[a]),h=S.useCallback(()=>{u(),O(!1),N(!1)},[u]),p=Ti(r.tableHandles.onUpdate.bind(r.tableHandles)),g=S.useMemo(()=>{var W,ie;return p!=null&&p.draggingState?{draggedCellOrientation:(W=p?.draggingState)==null?void 0:W.draggedCellOrientation,mousePos:(ie=p?.draggingState)==null?void 0:ie.mousePos}:void 0},[p?.draggingState,(e=p?.draggingState)==null?void 0:e.draggedCellOrientation,(n=p?.draggingState)==null?void 0:n.mousePos]),{rowHandle:b,colHandle:v,cellHandle:C}=lQ(p?.show||!1,p?.referencePosCell||null,p?.referencePosTable||null,g),{addOrRemoveColumnsButton:k,addOrRemoveRowsButton:E}=rQ(p?.showAddOrRemoveColumnsButton||!1,p?.showAddOrRemoveRowsButton||!1,p?.referencePosTable||null),[T,N]=S.useState(!1),[_,O]=S.useState(!1);if(!p)return null;const $=t.tableHandle||nQ,H=t.extendButton||WJ,P=t.tableCellHandle||dQ;return w.jsxs(w.Fragment,{children:[w.jsx("div",{ref:i}),w.jsxs(cj,{root:p.widgetContainer,children:[!T&&o&&b.isMounted&&p.rowIndex!==void 0&&w.jsx("div",{ref:b.ref,style:b.style,children:w.jsx($,{editor:r,orientation:"row",showOtherSide:()=>O(!1),hideOtherSide:()=>O(!0),index:p.rowIndex,block:p.block,dragStart:s.rowDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),!_&&o&&v.isMounted&&p.colIndex!==void 0&&w.jsx("div",{ref:v.ref,style:v.style,children:w.jsx($,{editor:r,orientation:"column",showOtherSide:()=>N(!1),hideOtherSide:()=>N(!0),index:p.colIndex,block:p.block,dragStart:s.colDragStart,dragEnd:s.dragEnd,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles,menuContainer:o})}),o&&C.isMounted&&p.colIndex!==void 0&&p.rowIndex!==void 0&&w.jsx("div",{ref:C.ref,style:C.style,children:w.jsx(P,{editor:r,block:p.block,rowIndex:p.rowIndex,colIndex:p.colIndex,menuContainer:o,freezeHandles:s.freezeHandles,unfreezeHandles:s.unfreezeHandles})}),w.jsx("div",{ref:E.ref,style:E.style,children:w.jsx(H,{editor:r,orientation:"addOrRemoveRows",block:p.block,onMouseDown:d,onMouseUp:h})}),w.jsx("div",{ref:k.ref,style:k.style,children:w.jsx(H,{editor:r,orientation:"addOrRemoveColumns",block:p.block,onMouseDown:d,onMouseUp:h})})]})]})};function hQ(t){const e=Re();if(!e)throw new Error("BlockNoteDefaultUI must be used within a BlockNoteContext.Provider");return w.jsxs(w.Fragment,{children:[t.formattingToolbar!==!1&&w.jsx(e3,{}),t.linkToolbar!==!1&&w.jsx(kJ,{}),t.slashMenu!==!1&&w.jsx(ZJ,{triggerCharacter:"/"}),t.emojiPicker!==!1&&w.jsx(VJ,{triggerCharacter:":",columns:10,minQueryLength:2}),t.sideMenu!==!1&&w.jsx(BJ,{}),e.filePanel&&t.filePanel!==!1&&w.jsx(QX,{}),e.tableHandles&&t.tableHandles!==!1&&w.jsx(fQ,{}),e.comments&&t.comments!==!1&&w.jsxs(w.Fragment,{children:[w.jsx(iX,{}),w.jsx(WX,{})]})]})}const pQ=()=>{const t=S.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: dark)")},[]),e=S.useMemo(()=>{var s;return(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: light)")},[]),n=t?.matches,r=e?.matches,[o,i]=S.useState(n?"dark":r?"light":"no-preference");return S.useEffect(()=>{i(n?"dark":r?"light":"no-preference")},[n,r]),S.useEffect(()=>{if(typeof t?.addEventListener=="function"){const s=({matches:u})=>u&&i("dark"),a=({matches:u})=>u&&i("light");return t?.addEventListener("change",s),e?.addEventListener("change",a),()=>{t?.removeEventListener("change",s),e?.removeEventListener("change",a)}}else{const s=()=>i(t.matches?"dark":e.matches?"light":"no-preference");return t?.addEventListener("change",s),e?.addEventListener("change",s),()=>{t?.removeEventListener("change",s),e?.removeEventListener("change",s)}}},[t,e]),o},o3=S.createContext(void 0);function mQ(){return S.useContext(o3)}function gQ(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:vr.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}const bQ=({contentComponent:t})=>{const e=S.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return w.jsx(w.Fragment,{children:Object.values(e)})},yQ=S.forwardRef((t,e)=>{const[n,r]=S.useState();return S.useImperativeHandle(e,()=>(o,i)=>{vr.flushSync(()=>{r({node:o,container:i})}),r(void 0)},[]),w.jsx(w.Fragment,{children:n&&vr.createPortal(n.node,n.container)})}),BA=()=>{};function vQ(t,e){const{editor:n,className:r,theme:o,children:i,editable:s,onSelectionChange:a,onChange:u,formattingToolbar:d,linkToolbar:h,slashMenu:p,emojiPicker:g,sideMenu:b,filePanel:v,tableHandles:C,comments:k,autoFocus:E,renderEditor:T=!n.headless,...N}=t,[_,O]=S.useState(),$=Mi(),H=pQ(),P=$?.colorSchemePreference||H,W=o||(P==="dark"?"dark":"light");Ux(u||BA,n),zx(a||BA,n),S.useEffect(()=>{n.isEditable=s!==!1},[s,n]);const ie=S.useCallback(fe=>{n.elementRenderer=fe},[n]),ge=S.useMemo(()=>({...$,editor:n,setContentEditableProps:O}),[$,n]),ne=S.useMemo(()=>({editorProps:{autoFocus:E,contentEditableProps:_},defaultUIProps:{formattingToolbar:d,linkToolbar:h,slashMenu:p,emojiPicker:g,sideMenu:b,filePanel:v,tableHandles:C,comments:k}}),[E,_,d,h,p,g,b,v,C,k]);return w.jsx(_4.Provider,{value:ge,children:w.jsxs(o3.Provider,{value:ne,children:[w.jsx(yQ,{ref:ie}),w.jsx(wQ,{className:r,renderEditor:T,editorColorScheme:W,ref:e,...N,children:i})]})})}const wQ=_e.forwardRef(({className:t,renderEditor:e,editorColorScheme:n,children:r,...o},i)=>w.jsx("div",{className:_t("bn-container",n,t),"data-color-scheme":n,...o,ref:i,children:e?w.jsx(CQ,{children:r}):r})),xQ=_e.forwardRef(vQ),CQ=t=>{const e=mQ(),n=Re(),r=S.useMemo(()=>gQ(),[]),o=S.useCallback(i=>{n.mount(i,r)},[n,r]);return w.jsxs(w.Fragment,{children:[w.jsx(bQ,{contentComponent:r}),w.jsx(SQ,{...e.editorProps,...t,mount:o}),w.jsx(hQ,{...e.defaultUIProps}),t.children]})},SQ=t=>{const{autoFocus:e,mount:n,contentEditableProps:r}=t;return w.jsx("div",{"aria-autocomplete":"list","aria-haspopup":"listbox","data-bn-autofocus":e,ref:n,...r})};function IA(t,e){let n;const r=document.createElement("div");let o;if(e!=null&&e.elementRenderer)e.elementRenderer(t(u=>n=u||void 0),r);else{if(!(e!=null&&e.headless))throw new Error("elementRenderer not available, expected headless editor");o=TN.createRoot(r),vr.flushSync(()=>{o.render(t(u=>n=u||void 0))})}if(!r.childElementCount)return console.warn("ReactInlineContentSpec: renderHTML() failed"),{dom:document.createElement("span")};n?.setAttribute("data-tmp-find","true");const i=r.cloneNode(!0),s=i.firstElementChild,a=i.querySelector("[data-tmp-find]");return a?.removeAttribute("data-tmp-find"),o?.unmount(),{dom:s,contentDOM:a||void 0}}function mv(t){var e;return w.jsx(KW,{onDragOver:n=>n.preventDefault(),...Object.fromEntries(Object.entries(t.domAttributes||{}).filter(([n])=>n!=="class")),className:_t("bn-block-content",((e=t.domAttributes)==null?void 0:e.class)||""),"data-content-type":t.blockType,...Object.fromEntries(Object.entries(t.blockProps).filter(([n,r])=>{const o=t.propSchema[n];return!kx.includes(n)&&r!==o.default}).map(([n,r])=>[Am(n),r])),"data-file-block":t.isFileBlock===!0||void 0,children:t.children})}function Ag(t,e){const n=kr({name:t.type,content:t.content==="inline"?"inline*":"",group:"blockContent",selectable:t.isSelectable??!0,isolating:!0,addAttributes(){return tf(t.propSchema)},parseHTML(){return N_(t,e.parse)},renderHTML({HTMLAttributes:r}){const o=document.createElement("div");return qu({dom:o,contentDOM:t.content==="inline"?o:void 0},t.type,{},t.propSchema,t.isFileBlock,r)},addNodeView(){return r=>{const o=QW(i=>{var s;const a=this.options.editor,u=gg(i.getPos,a,this.editor,t.type),d=((s=this.options.domAttributes)==null?void 0:s.blockContent)||{},h=D4().nodeViewContentRef;if(!h)throw new Error("nodeViewContentRef is not set");const p=e.render;return w.jsx(mv,{blockType:u.type,blockProps:u.props,propSchema:t.propSchema,isFileBlock:t.isFileBlock,domAttributes:d,children:w.jsx(p,{block:u,editor:a,contentRef:g=>{h(g),g&&(g.className=_t("bn-inline-content",g.className))}})})},{className:"bn-react-node-view-renderer"})(r);return t.isSelectable===!1&&A_(o,this.editor),o}}});return Ex(t,{node:n,toInternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=e.render;return IA(u=>w.jsx(mv,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:s,children:w.jsx(a,{block:r,editor:o,contentRef:d=>{u(d),d&&(d.className=_t("bn-inline-content",d.className))}})}),o)},toExternalHTML:(r,o)=>{var i;const s=((i=n.options.domAttributes)==null?void 0:i.blockContent)||{},a=e.toExternalHTML||e.render;return IA(u=>w.jsx(mv,{blockType:r.type,blockProps:r.props,propSchema:t.propSchema,domAttributes:s,children:w.jsx(a,{block:r,editor:o,contentRef:d=>{u(d),d&&(d.className=_t("bn-inline-content",d.className))}})}),o)}})}function Yx(t){const e=Re(),[n,r]=S.useState("loading"),[o,i]=S.useState();if(S.useEffect(()=>{let s=!0;return(async()=>{let a="";r("loading");try{a=e.resolveFileUrl?await e.resolveFileUrl(t):t}catch{r("error");return}s&&(r("loaded"),i(a))})(),()=>{s=!1}},[e,t]),n!=="loaded")return{loadingState:n};if(!o)throw new Error("Finished fetching file but did not get download URL.");return{loadingState:n,downloadUrl:o}}const Wx=t=>w.jsxs("figure",{children:[t.children,w.jsx("figcaption",{children:t.caption})]});function kQ(t){const e=Re();S.useEffect(()=>e.onUploadEnd(t),[t,e])}function EQ(t){const e=Re();S.useEffect(()=>e.onUploadStart(t),[t,e])}function i3(t){const[e,n]=S.useState(!1);return EQ(r=>{r===t&&n(!0)}),kQ(r=>{r===t&&n(!1)}),e}const MQ=t=>{const e=Ve(),n=S.useCallback(o=>{o.preventDefault()},[]),r=S.useCallback(()=>{t.editor.transact(o=>o.setMeta(t.editor.filePanel.plugins[0],{block:t.block}))},[t.block,t.editor]);return w.jsxs("div",{className:"bn-add-file-button",onMouseDown:n,onClick:r,children:[w.jsx("div",{className:"bn-add-file-button-icon",children:t.buttonIcon||w.jsx(Gx,{size:24})}),w.jsx("div",{className:"bn-add-file-button-text",children:t.buttonText||e.file_blocks.file.add_button_text})]})},TQ=t=>w.jsxs("div",{className:"bn-file-name-with-icon",contentEditable:!1,draggable:!1,children:[w.jsx("div",{className:"bn-file-icon",children:w.jsx(Gx,{size:24})}),w.jsx("p",{className:"bn-file-name",children:t.block.props.name})]}),Xx=t=>{const e=i3(t.block.id);return w.jsx("div",{className:"bn-file-block-content-wrapper",onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,style:t.style,children:e?w.jsx("div",{className:"bn-file-loading-preview",children:"Loading..."}):t.block.props.url===""?w.jsx(MQ,{...t}):w.jsxs(w.Fragment,{children:[t.block.props.showPreview===!1||!t.children?w.jsx(TQ,{...t}):t.children,t.block.props.caption&&w.jsx("p",{className:"bn-file-caption",children:t.block.props.caption})]})})},Ng=t=>w.jsxs("div",{children:[t.children,w.jsx("p",{children:t.caption})]}),AQ=t=>{const e=Yx(t.block.props.url);return w.jsx("audio",{className:"bn-audio",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},NQ=t=>{if(!t.block.props.url)return w.jsx("p",{children:"Add audio"});const e=t.block.props.showPreview?w.jsx("audio",{src:t.block.props.url}):w.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?w.jsx(Wx,{caption:t.block.props.caption,children:e}):w.jsx(Ng,{caption:t.block.props.caption,children:e}):e},OQ=t=>w.jsx(Xx,{...t,buttonText:t.editor.dictionary.file_blocks.audio.add_button_text,buttonIcon:w.jsx(Z4,{size:24}),children:w.jsx(AQ,{...t})});Ag(G_,{render:OQ,parse:q_,toExternalHTML:NQ});const RQ=t=>{if(!t.block.props.url)return w.jsx("p",{children:"Add file"});const e=w.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?w.jsx(Ng,{caption:t.block.props.caption,children:e}):e},DQ=t=>w.jsx(Xx,{...t});Ag(K_,{render:DQ,parse:Z_,toExternalHTML:RQ});const s3=t=>{const[e,n]=S.useState(void 0),[r,o]=S.useState(t.block.props.previewWidth),[i,s]=S.useState(!1),a=S.useRef(null);S.useEffect(()=>{const b=C=>{var k,E;let T;t.block.props.textAlignment==="center"?e.handleUsed==="left"?T=e.initialWidth+(e.initialClientX-C.clientX)*2:T=e.initialWidth+(C.clientX-e.initialClientX)*2:e.handleUsed==="left"?T=e.initialWidth+e.initialClientX-C.clientX:T=e.initialWidth+C.clientX-e.initialClientX,o(Math.min(Math.max(T,64),((E=(k=t.editor.domElement)==null?void 0:k.firstElementChild)==null?void 0:E.clientWidth)||Number.MAX_VALUE))},v=()=>{n(void 0),t.editor.updateBlock(t.block,{props:{previewWidth:r}})};return e&&(window.addEventListener("mousemove",b),window.addEventListener("mouseup",v)),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",v)}},[t,e,r]);const u=S.useCallback(()=>{t.editor.isEditable&&s(!0)},[t.editor.isEditable]),d=S.useCallback(()=>{s(!1)},[]),h=S.useCallback(b=>{b.preventDefault(),n({handleUsed:"left",initialWidth:a.current.clientWidth,initialClientX:b.clientX})},[]),p=S.useCallback(b=>{b.preventDefault(),n({handleUsed:"right",initialWidth:a.current.clientWidth,initialClientX:b.clientX})},[]),g=i3(t.block.id);return w.jsx(Xx,{...t,onMouseEnter:u,onMouseLeave:d,style:t.block.props.url&&!g&&t.block.props.showPreview?{width:r?`${r}px`:"fit-content"}:void 0,children:w.jsxs("div",{className:"bn-visual-media-wrapper",ref:a,children:[t.children,(i||e)&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"bn-resize-handle",style:{left:"4px"},onMouseDown:h}),w.jsx("div",{className:"bn-resize-handle",style:{right:"4px"},onMouseDown:p})]})]})})},_Q=t=>{const e=Yx(t.block.props.url);return w.jsx("img",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,alt:t.block.props.caption||"BlockNote image",contentEditable:!1,draggable:!1})},LQ=t=>{if(!t.block.props.url)return w.jsx("p",{children:"Add image"});const e=t.block.props.showPreview?w.jsx("img",{src:t.block.props.url,alt:t.block.props.name||t.block.props.caption||"BlockNote image",width:t.block.props.previewWidth}):w.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?w.jsx(Wx,{caption:t.block.props.caption,children:e}):w.jsx(Ng,{caption:t.block.props.caption,children:e}):e},BQ=t=>w.jsx(s3,{...t,buttonText:t.editor.dictionary.file_blocks.image.add_button_text,buttonIcon:w.jsx(q4,{size:24}),children:w.jsx(_Q,{...t})});Ag(J_,{render:BQ,parse:Q_,toExternalHTML:LQ});const IQ=t=>{const e=Yx(t.block.props.url);return w.jsx("video",{className:"bn-visual-media",src:e.loadingState==="loading"?t.block.props.url:e.downloadUrl,controls:!0,contentEditable:!1,draggable:!1})},HQ=t=>{if(!t.block.props.url)return w.jsx("p",{children:"Add video"});const e=t.block.props.showPreview?w.jsx("video",{src:t.block.props.url}):w.jsx("a",{href:t.block.props.url,children:t.block.props.name||t.block.props.url});return t.block.props.caption?t.block.props.showPreview?w.jsx(Wx,{caption:t.block.props.caption,children:e}):w.jsx(Ng,{caption:t.block.props.caption,children:e}):e},PQ=t=>w.jsx(s3,{...t,buttonText:t.editor.dictionary.file_blocks.video.add_button_text,buttonIcon:w.jsx(LX,{size:24}),children:w.jsx(IQ,{...t})});Ag(r4,{render:PQ,parse:o4,toExternalHTML:HQ});_e.memo(({thread:t,selectedThreadId:e,editor:n,maxCommentsBeforeCollapse:r,referenceText:o})=>{const i=S.useCallback(a=>{var u;a.target.closest(".bn-action-toolbar")||(u=n.comments)==null||u.selectThread(t.id)},[n.comments,t.id]),s=S.useCallback(a=>{var u;if(!a.relatedTarget||a.relatedTarget.closest(".bn-action-toolbar"))return;const d=a.target instanceof Node?a.target:null,h=a.relatedTarget instanceof Node?a.relatedTarget.closest(".bn-thread"):null;(!d||!h||!h.contains(d))&&((u=n.comments)==null||u.selectThread(void 0))},[n.comments]);return w.jsx(Y4,{thread:t,selected:t.id===e,referenceText:o,maxCommentsBeforeCollapse:r,onFocus:i,onBlur:s,tabIndex:0})});function jQ(t){return t.currentTarget instanceof HTMLElement&&t.relatedTarget instanceof HTMLElement?t.currentTarget.contains(t.relatedTarget):!1}function VQ({onBlur:t,onFocus:e}={}){const n=S.useRef(null),[r,o]=S.useState(!1),i=S.useRef(!1),s=d=>{o(d),i.current=d},a=d=>{i.current||(s(!0),e?.(d))},u=d=>{i.current&&!jQ(d)&&(s(!1),t?.(d))};return S.useEffect(()=>{const d=n.current;if(d)return d.addEventListener("focusin",a),d.addEventListener("focusout",u),()=>{d?.removeEventListener("focusin",a),d?.removeEventListener("focusout",u)}},[a,u]),{ref:n,focused:r}}function l3(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),o=n.top<r.top,i=n.bottom>r.bottom;return o&&i?"both":o?"top":i?"bottom":"none"}var lf=t=>t.type==="checkbox",wl=t=>t instanceof Date,Hn=t=>t==null;const a3=t=>typeof t=="object";var qt=t=>!Hn(t)&&!Array.isArray(t)&&a3(t)&&!wl(t),zQ=t=>qt(t)&&t.target?lf(t.target)?t.target.checked:t.target.value:t,UQ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,$Q=(t,e)=>t.has(UQ(e)),FQ=t=>{const e=t.constructor&&t.constructor.prototype;return qt(e)&&e.hasOwnProperty("isPrototypeOf")},Jx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Jx&&(t instanceof Blob||r))&&(n||qt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!FQ(t))e=t;else for(const o in t)t.hasOwnProperty(o)&&(e[o]=cn(t[o]));else return t;return e}var Og=t=>/^\w*$/.test(t),Wt=t=>t===void 0,Qx=t=>Array.isArray(t)?t.filter(Boolean):[],eC=t=>Qx(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ee=(t,e,n)=>{if(!e||!qt(t))return n;const r=(Og(e)?[e]:eC(e)).reduce((o,i)=>Hn(o)?o:o[i],t);return Wt(r)||r===t?Wt(t[e])?n:t[e]:r},wo=t=>typeof t=="boolean",Rt=(t,e,n)=>{let r=-1;const o=Og(e)?[e]:eC(e),i=o.length,s=i-1;for(;++r<i;){const a=o[r];let u=n;if(r!==s){const d=t[a];u=qt(d)||Array.isArray(d)?d:isNaN(+o[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=u,t=t[a]}};const HA={BLUR:"blur",FOCUS_OUT:"focusout"},Qr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ii={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},tC=_e.createContext(null);tC.displayName="HookFormContext";const GQ=()=>_e.useContext(tC),qQ=t=>{const{children:e,...n}=t;return _e.createElement(tC.Provider,{value:n},e)};var KQ=(t,e,n,r=!0)=>{const o={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(o,i,{get:()=>{const s=i;return e._proxyFormState[s]!==Qr.all&&(e._proxyFormState[s]=!r||Qr.all),t[s]}});return o};const ZQ=typeof window<"u"?_e.useLayoutEffect:_e.useEffect;var ko=t=>typeof t=="string",YQ=(t,e,n,r,o)=>ko(t)?(r&&e.watch.add(t),Ee(n,t,o)):Array.isArray(t)?t.map(i=>(r&&e.watch.add(i),Ee(n,i))):(r&&(e.watchAll=!0),n),K1=t=>Hn(t)||!a3(t);function ps(t,e,n=new WeakSet){if(K1(t)||K1(e))return t===e;if(wl(t)&&wl(e))return t.getTime()===e.getTime();const r=Object.keys(t),o=Object.keys(e);if(r.length!==o.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const i of r){const s=t[i];if(!o.includes(i))return!1;if(i!=="ref"){const a=e[i];if(wl(s)&&wl(a)||qt(s)&&qt(a)||Array.isArray(s)&&Array.isArray(a)?!ps(s,a,n):s!==a)return!1}}return!0}var WQ=(t,e,n,r,o)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:o||!0}}:{},ud=t=>Array.isArray(t)?t:[t],PA=()=>{let t=[];return{get observers(){return t},next:o=>{for(const i of t)i.next&&i.next(o)},subscribe:o=>(t.push(o),{unsubscribe:()=>{t=t.filter(i=>i!==o)}}),unsubscribe:()=>{t=[]}}},Xn=t=>qt(t)&&!Object.keys(t).length,nC=t=>t.type==="file",eo=t=>typeof t=="function",Lm=t=>{if(!Jx)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},c3=t=>t.type==="select-multiple",rC=t=>t.type==="radio",XQ=t=>rC(t)||lf(t),gv=t=>Lm(t)&&t.isConnected;function JQ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Wt(t)?r++:t[e[r++]];return t}function QQ(t){for(const e in t)if(t.hasOwnProperty(e)&&!Wt(t[e]))return!1;return!0}function Yt(t,e){const n=Array.isArray(e)?e:Og(e)?[e]:eC(e),r=n.length===1?t:JQ(t,n),o=n.length-1,i=n[o];return r&&delete r[i],o!==0&&(qt(r)&&Xn(r)||Array.isArray(r)&&QQ(r))&&Yt(t,n.slice(0,-1)),t}var u3=t=>{for(const e in t)if(eo(t[e]))return!0;return!1};function Bm(t,e={}){const n=Array.isArray(t);if(qt(t)||n)for(const r in t)Array.isArray(t[r])||qt(t[r])&&!u3(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Bm(t[r],e[r])):Hn(t[r])||(e[r]=!0);return e}function d3(t,e,n){const r=Array.isArray(t);if(qt(t)||r)for(const o in t)Array.isArray(t[o])||qt(t[o])&&!u3(t[o])?Wt(e)||K1(n[o])?n[o]=Array.isArray(t[o])?Bm(t[o],[]):{...Bm(t[o])}:d3(t[o],Hn(e)?{}:e[o],n[o]):n[o]=!ps(t[o],e[o]);return n}var Hu=(t,e)=>d3(t,e,Bm(e));const jA={value:!1,isValid:!1},VA={value:!0,isValid:!0};var f3=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Wt(t[0].attributes.value)?Wt(t[0].value)||t[0].value===""?VA:{value:t[0].value,isValid:!0}:VA:jA}return jA},h3=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Wt(t)?t:e?t===""?NaN:t&&+t:n&&ko(t)?new Date(t):r?r(t):t;const zA={isValid:!1,value:null};var p3=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,zA):zA;function UA(t){const e=t.ref;return nC(e)?e.files:rC(e)?p3(t.refs).value:c3(e)?[...e.selectedOptions].map(({value:n})=>n):lf(e)?f3(t.refs).value:h3(Wt(e.value)?t.ref.value:e.value,t)}var eee=(t,e,n,r)=>{const o={};for(const i of t){const s=Ee(e,i);s&&Rt(o,i,s._f)}return{criteriaMode:n,names:[...t],fields:o,shouldUseNativeValidation:r}},Im=t=>t instanceof RegExp,Pu=t=>Wt(t)?t:Im(t)?t.source:qt(t)?Im(t.value)?t.value.source:t.value:t,$A=t=>({isOnSubmit:!t||t===Qr.onSubmit,isOnBlur:t===Qr.onBlur,isOnChange:t===Qr.onChange,isOnAll:t===Qr.all,isOnTouch:t===Qr.onTouched});const FA="AsyncFunction";var tee=t=>!!t&&!!t.validate&&!!(eo(t.validate)&&t.validate.constructor.name===FA||qt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===FA)),nee=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),GA=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const dd=(t,e,n,r)=>{for(const o of n||Object.keys(t)){const i=Ee(t,o);if(i){const{_f:s,...a}=i;if(s){if(s.refs&&s.refs[0]&&e(s.refs[0],o)&&!r)return!0;if(s.ref&&e(s.ref,s.name)&&!r)return!0;if(dd(a,e))break}else if(qt(a)&&dd(a,e))break}}};function qA(t,e,n){const r=Ee(t,n);if(r||Og(n))return{error:r,name:n};const o=n.split(".");for(;o.length;){const i=o.join("."),s=Ee(e,i),a=Ee(t,i);if(s&&!Array.isArray(s)&&n!==i)return{name:n};if(a&&a.type)return{name:i,error:a};if(a&&a.root&&a.root.type)return{name:`${i}.root`,error:a.root};o.pop()}return{name:n}}var ree=(t,e,n,r)=>{n(t);const{name:o,...i}=t;return Xn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(s=>e[s]===(!r||Qr.all))},oee=(t,e,n)=>!t||!e||t===e||ud(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),iee=(t,e,n,r,o)=>o.isOnAll?!1:!n&&o.isOnTouch?!(e||t):(n?r.isOnBlur:o.isOnBlur)?!t:(n?r.isOnChange:o.isOnChange)?t:!0,see=(t,e)=>!Qx(Ee(t,e)).length&&Yt(t,e),lee=(t,e,n)=>{const r=ud(Ee(t,n));return Rt(r,"root",e[n]),Rt(t,n,r),t},vp=t=>ko(t);function KA(t,e,n="validate"){if(vp(t)||Array.isArray(t)&&t.every(vp)||wo(t)&&!t)return{type:n,message:vp(t)?t:"",ref:e}}var za=t=>qt(t)&&!Im(t)?t:{value:t,message:""},ZA=async(t,e,n,r,o,i)=>{const{ref:s,refs:a,required:u,maxLength:d,minLength:h,min:p,max:g,pattern:b,validate:v,name:C,valueAsNumber:k,mount:E}=t._f,T=Ee(n,C);if(!E||e.has(C))return{};const N=a?a[0]:s,_=ne=>{o&&N.reportValidity&&(N.setCustomValidity(wo(ne)?"":ne||""),N.reportValidity())},O={},$=rC(s),H=lf(s),P=$||H,W=(k||nC(s))&&Wt(s.value)&&Wt(T)||Lm(s)&&s.value===""||T===""||Array.isArray(T)&&!T.length,ie=WQ.bind(null,C,r,O),ge=(ne,fe,he,oe=ii.maxLength,B=ii.minLength)=>{const Y=ne?fe:he;O[C]={type:ne?oe:B,message:Y,ref:s,...ie(ne?oe:B,Y)}};if(i?!Array.isArray(T)||!T.length:u&&(!P&&(W||Hn(T))||wo(T)&&!T||H&&!f3(a).isValid||$&&!p3(a).isValid)){const{value:ne,message:fe}=vp(u)?{value:!!u,message:u}:za(u);if(ne&&(O[C]={type:ii.required,message:fe,ref:N,...ie(ii.required,fe)},!r))return _(fe),O}if(!W&&(!Hn(p)||!Hn(g))){let ne,fe;const he=za(g),oe=za(p);if(!Hn(T)&&!isNaN(T)){const B=s.valueAsNumber||T&&+T;Hn(he.value)||(ne=B>he.value),Hn(oe.value)||(fe=B<oe.value)}else{const B=s.valueAsDate||new Date(T),Y=R=>new Date(new Date().toDateString()+" "+R),J=s.type=="time",Z=s.type=="week";ko(he.value)&&T&&(ne=J?Y(T)>Y(he.value):Z?T>he.value:B>new Date(he.value)),ko(oe.value)&&T&&(fe=J?Y(T)<Y(oe.value):Z?T<oe.value:B<new Date(oe.value))}if((ne||fe)&&(ge(!!ne,he.message,oe.message,ii.max,ii.min),!r))return _(O[C].message),O}if((d||h)&&!W&&(ko(T)||i&&Array.isArray(T))){const ne=za(d),fe=za(h),he=!Hn(ne.value)&&T.length>+ne.value,oe=!Hn(fe.value)&&T.length<+fe.value;if((he||oe)&&(ge(he,ne.message,fe.message),!r))return _(O[C].message),O}if(b&&!W&&ko(T)){const{value:ne,message:fe}=za(b);if(Im(ne)&&!T.match(ne)&&(O[C]={type:ii.pattern,message:fe,ref:s,...ie(ii.pattern,fe)},!r))return _(fe),O}if(v){if(eo(v)){const ne=await v(T,n),fe=KA(ne,N);if(fe&&(O[C]={...fe,...ie(ii.validate,fe.message)},!r))return _(fe.message),O}else if(qt(v)){let ne={};for(const fe in v){if(!Xn(ne)&&!r)break;const he=KA(await v[fe](T,n),N,fe);he&&(ne={...he,...ie(fe,he.message)},_(he.message),r&&(O[C]=ne))}if(!Xn(ne)&&(O[C]={ref:N,...ne},!r))return O}}return _(!0),O};const aee={mode:Qr.onSubmit,reValidateMode:Qr.onChange,shouldFocusError:!0};function cee(t={}){let e={...aee,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:eo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},o=qt(e.defaultValues)||qt(e.values)?cn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:cn(o),s={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...h};const g={array:PA(),state:PA()},b=e.criteriaMode===Qr.all,v=L=>F=>{clearTimeout(d),d=setTimeout(L,F)},C=async L=>{if(!e.disabled&&(h.isValid||p.isValid||L)){const F=e.resolver?Xn((await H()).errors):await W(r,!0);F!==n.isValid&&g.state.next({isValid:F})}},k=(L,F)=>{!e.disabled&&(h.isValidating||h.validatingFields||p.isValidating||p.validatingFields)&&((L||Array.from(a.mount)).forEach(ee=>{ee&&(F?Rt(n.validatingFields,ee,F):Yt(n.validatingFields,ee))}),g.state.next({validatingFields:n.validatingFields,isValidating:!Xn(n.validatingFields)}))},E=(L,F=[],ee,be,pe=!0,de=!0)=>{if(be&&ee&&!e.disabled){if(s.action=!0,de&&Array.isArray(Ee(r,L))){const Me=ee(Ee(r,L),be.argA,be.argB);pe&&Rt(r,L,Me)}if(de&&Array.isArray(Ee(n.errors,L))){const Me=ee(Ee(n.errors,L),be.argA,be.argB);pe&&Rt(n.errors,L,Me),see(n.errors,L)}if((h.touchedFields||p.touchedFields)&&de&&Array.isArray(Ee(n.touchedFields,L))){const Me=ee(Ee(n.touchedFields,L),be.argA,be.argB);pe&&Rt(n.touchedFields,L,Me)}(h.dirtyFields||p.dirtyFields)&&(n.dirtyFields=Hu(o,i)),g.state.next({name:L,isDirty:ge(L,F),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Rt(i,L,F)},T=(L,F)=>{Rt(n.errors,L,F),g.state.next({errors:n.errors})},N=L=>{n.errors=L,g.state.next({errors:n.errors,isValid:!1})},_=(L,F,ee,be)=>{const pe=Ee(r,L);if(pe){const de=Ee(i,L,Wt(ee)?Ee(o,L):ee);Wt(de)||be&&be.defaultChecked||F?Rt(i,L,F?de:UA(pe._f)):he(L,de),s.mount&&C()}},O=(L,F,ee,be,pe)=>{let de=!1,Me=!1;const Pe={name:L};if(!e.disabled){if(!ee||be){(h.isDirty||p.isDirty)&&(Me=n.isDirty,n.isDirty=Pe.isDirty=ge(),de=Me!==Pe.isDirty);const tt=ps(Ee(o,L),F);Me=!!Ee(n.dirtyFields,L),tt?Yt(n.dirtyFields,L):Rt(n.dirtyFields,L,!0),Pe.dirtyFields=n.dirtyFields,de=de||(h.dirtyFields||p.dirtyFields)&&Me!==!tt}if(ee){const tt=Ee(n.touchedFields,L);tt||(Rt(n.touchedFields,L,ee),Pe.touchedFields=n.touchedFields,de=de||(h.touchedFields||p.touchedFields)&&tt!==ee)}de&&pe&&g.state.next(Pe)}return de?Pe:{}},$=(L,F,ee,be)=>{const pe=Ee(n.errors,L),de=(h.isValid||p.isValid)&&wo(F)&&n.isValid!==F;if(e.delayError&&ee?(u=v(()=>T(L,ee)),u(e.delayError)):(clearTimeout(d),u=null,ee?Rt(n.errors,L,ee):Yt(n.errors,L)),(ee?!ps(pe,ee):pe)||!Xn(be)||de){const Me={...be,...de&&wo(F)?{isValid:F}:{},errors:n.errors,name:L};n={...n,...Me},g.state.next(Me)}},H=async L=>{k(L,!0);const F=await e.resolver(i,e.context,eee(L||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return k(L),F},P=async L=>{const{errors:F}=await H(L);if(L)for(const ee of L){const be=Ee(F,ee);be?Rt(n.errors,ee,be):Yt(n.errors,ee)}else n.errors=F;return F},W=async(L,F,ee={valid:!0})=>{for(const be in L){const pe=L[be];if(pe){const{_f:de,...Me}=pe;if(de){const Pe=a.array.has(de.name),tt=pe._f&&tee(pe._f);tt&&h.validatingFields&&k([be],!0);const kt=await ZA(pe,a.disabled,i,b,e.shouldUseNativeValidation&&!F,Pe);if(tt&&h.validatingFields&&k([be]),kt[de.name]&&(ee.valid=!1,F))break;!F&&(Ee(kt,de.name)?Pe?lee(n.errors,kt,de.name):Rt(n.errors,de.name,kt[de.name]):Yt(n.errors,de.name))}!Xn(Me)&&await W(Me,F,ee)}}return ee.valid},ie=()=>{for(const L of a.unMount){const F=Ee(r,L);F&&(F._f.refs?F._f.refs.every(ee=>!gv(ee)):!gv(F._f.ref))&&ue(L)}a.unMount=new Set},ge=(L,F)=>!e.disabled&&(L&&F&&Rt(i,L,F),!ps(R(),o)),ne=(L,F,ee)=>YQ(L,a,{...s.mount?i:Wt(F)?o:ko(L)?{[L]:F}:F},ee,F),fe=L=>Qx(Ee(s.mount?i:o,L,e.shouldUnregister?Ee(o,L,[]):[])),he=(L,F,ee={})=>{const be=Ee(r,L);let pe=F;if(be){const de=be._f;de&&(!de.disabled&&Rt(i,L,h3(F,de)),pe=Lm(de.ref)&&Hn(F)?"":F,c3(de.ref)?[...de.ref.options].forEach(Me=>Me.selected=pe.includes(Me.value)):de.refs?lf(de.ref)?de.refs.forEach(Me=>{(!Me.defaultChecked||!Me.disabled)&&(Array.isArray(pe)?Me.checked=!!pe.find(Pe=>Pe===Me.value):Me.checked=pe===Me.value||!!pe)}):de.refs.forEach(Me=>Me.checked=Me.value===pe):nC(de.ref)?de.ref.value="":(de.ref.value=pe,de.ref.type||g.state.next({name:L,values:cn(i)})))}(ee.shouldDirty||ee.shouldTouch)&&O(L,pe,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&Z(L)},oe=(L,F,ee)=>{for(const be in F){if(!F.hasOwnProperty(be))return;const pe=F[be],de=L+"."+be,Me=Ee(r,de);(a.array.has(L)||qt(pe)||Me&&!Me._f)&&!wl(pe)?oe(de,pe,ee):he(de,pe,ee)}},B=(L,F,ee={})=>{const be=Ee(r,L),pe=a.array.has(L),de=cn(F);Rt(i,L,de),pe?(g.array.next({name:L,values:cn(i)}),(h.isDirty||h.dirtyFields||p.isDirty||p.dirtyFields)&&ee.shouldDirty&&g.state.next({name:L,dirtyFields:Hu(o,i),isDirty:ge(L,de)})):be&&!be._f&&!Hn(de)?oe(L,de,ee):he(L,de,ee),GA(L,a)&&g.state.next({...n,name:L}),g.state.next({name:s.mount?L:void 0,values:cn(i)})},Y=async L=>{s.mount=!0;const F=L.target;let ee=F.name,be=!0;const pe=Ee(r,ee),de=tt=>{be=Number.isNaN(tt)||wl(tt)&&isNaN(tt.getTime())||ps(tt,Ee(i,ee,tt))},Me=$A(e.mode),Pe=$A(e.reValidateMode);if(pe){let tt,kt;const Jl=F.type?UA(pe._f):zQ(L),uo=L.type===HA.BLUR||L.type===HA.FOCUS_OUT,Xg=!nee(pe._f)&&!e.resolver&&!Ee(n.errors,ee)&&!pe._f.deps||iee(uo,Ee(n.touchedFields,ee),n.isSubmitted,Pe,Me),Ni=GA(ee,a,uo);Rt(i,ee,Jl),uo?(!F||!F.readOnly)&&(pe._f.onBlur&&pe._f.onBlur(L),u&&u(0)):pe._f.onChange&&pe._f.onChange(L);const Oi=O(ee,Jl,uo),jo=!Xn(Oi)||Ni;if(!uo&&g.state.next({name:ee,type:L.type,values:cn(i)}),Xg)return(h.isValid||p.isValid)&&(e.mode==="onBlur"?uo&&C():uo||C()),jo&&g.state.next({name:ee,...Ni?{}:Oi});if(!uo&&Ni&&g.state.next({...n}),e.resolver){const{errors:Gs}=await H([ee]);if(de(Jl),be){const qs=qA(n.errors,r,ee),bf=qA(Gs,r,qs.name||ee);tt=bf.error,ee=bf.name,kt=Xn(Gs)}}else k([ee],!0),tt=(await ZA(pe,a.disabled,i,b,e.shouldUseNativeValidation))[ee],k([ee]),de(Jl),be&&(tt?kt=!1:(h.isValid||p.isValid)&&(kt=await W(r,!0)));be&&(pe._f.deps&&Z(pe._f.deps),$(ee,kt,tt,Oi))}},J=(L,F)=>{if(Ee(n.errors,F)&&L.focus)return L.focus(),1},Z=async(L,F={})=>{let ee,be;const pe=ud(L);if(e.resolver){const de=await P(Wt(L)?L:pe);ee=Xn(de),be=L?!pe.some(Me=>Ee(de,Me)):ee}else L?(be=(await Promise.all(pe.map(async de=>{const Me=Ee(r,de);return await W(Me&&Me._f?{[de]:Me}:Me)}))).every(Boolean),!(!be&&!n.isValid)&&C()):be=ee=await W(r);return g.state.next({...!ko(L)||(h.isValid||p.isValid)&&ee!==n.isValid?{}:{name:L},...e.resolver||!L?{isValid:ee}:{},errors:n.errors}),F.shouldFocus&&!be&&dd(r,J,L?pe:a.mount),be},R=L=>{const F={...s.mount?i:o};return Wt(L)?F:ko(L)?Ee(F,L):L.map(ee=>Ee(F,ee))},K=(L,F)=>({invalid:!!Ee((F||n).errors,L),isDirty:!!Ee((F||n).dirtyFields,L),error:Ee((F||n).errors,L),isValidating:!!Ee(n.validatingFields,L),isTouched:!!Ee((F||n).touchedFields,L)}),ae=L=>{L&&ud(L).forEach(F=>Yt(n.errors,F)),g.state.next({errors:L?n.errors:{}})},ce=(L,F,ee)=>{const be=(Ee(r,L,{_f:{}})._f||{}).ref,pe=Ee(n.errors,L)||{},{ref:de,message:Me,type:Pe,...tt}=pe;Rt(n.errors,L,{...tt,...F,ref:be}),g.state.next({name:L,errors:n.errors,isValid:!1}),ee&&ee.shouldFocus&&be&&be.focus&&be.focus()},ve=(L,F)=>eo(L)?g.state.subscribe({next:ee=>"values"in ee&&L(ne(void 0,F),ee)}):ne(L,F,!0),Ie=L=>g.state.subscribe({next:F=>{oee(L.name,F.name,L.exact)&&ree(F,L.formState||h,En,L.reRenderRoot)&&L.callback({values:{...i},...n,...F,defaultValues:o})}}).unsubscribe,me=L=>(s.mount=!0,p={...p,...L.formState},Ie({...L,formState:p})),ue=(L,F={})=>{for(const ee of L?ud(L):a.mount)a.mount.delete(ee),a.array.delete(ee),F.keepValue||(Yt(r,ee),Yt(i,ee)),!F.keepError&&Yt(n.errors,ee),!F.keepDirty&&Yt(n.dirtyFields,ee),!F.keepTouched&&Yt(n.touchedFields,ee),!F.keepIsValidating&&Yt(n.validatingFields,ee),!e.shouldUnregister&&!F.keepDefaultValue&&Yt(o,ee);g.state.next({values:cn(i)}),g.state.next({...n,...F.keepDirty?{isDirty:ge()}:{}}),!F.keepIsValid&&C()},Te=({disabled:L,name:F})=>{(wo(L)&&s.mount||L||a.disabled.has(F))&&(L?a.disabled.add(F):a.disabled.delete(F))},ct=(L,F={})=>{let ee=Ee(r,L);const be=wo(F.disabled)||wo(e.disabled);return Rt(r,L,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:L}},name:L,mount:!0,...F}}),a.mount.add(L),ee?Te({disabled:wo(F.disabled)?F.disabled:e.disabled,name:L}):_(L,!0,F.value),{...be?{disabled:F.disabled||e.disabled}:{},...e.progressive?{required:!!F.required,min:Pu(F.min),max:Pu(F.max),minLength:Pu(F.minLength),maxLength:Pu(F.maxLength),pattern:Pu(F.pattern)}:{},name:L,onChange:Y,onBlur:Y,ref:pe=>{if(pe){ct(L,F),ee=Ee(r,L);const de=Wt(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,Me=XQ(de),Pe=ee._f.refs||[];if(Me?Pe.find(tt=>tt===de):de===ee._f.ref)return;Rt(r,L,{_f:{...ee._f,...Me?{refs:[...Pe.filter(gv),de,...Array.isArray(Ee(o,L))?[{}]:[]],ref:{type:de.type,name:L}}:{ref:de}}}),_(L,!1,void 0,de)}else ee=Ee(r,L,{}),ee._f&&(ee._f.mount=!1),(e.shouldUnregister||F.shouldUnregister)&&!($Q(a.array,L)&&s.action)&&a.unMount.add(L)}}},rt=()=>e.shouldFocusError&&dd(r,J,a.mount),st=L=>{wo(L)&&(g.state.next({disabled:L}),dd(r,(F,ee)=>{const be=Ee(r,ee);be&&(F.disabled=be._f.disabled||L,Array.isArray(be._f.refs)&&be._f.refs.forEach(pe=>{pe.disabled=be._f.disabled||L}))},0,!1))},vt=(L,F)=>async ee=>{let be;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let pe=cn(i);if(g.state.next({isSubmitting:!0}),e.resolver){const{errors:de,values:Me}=await H();n.errors=de,pe=cn(Me)}else await W(r);if(a.disabled.size)for(const de of a.disabled)Yt(pe,de);if(Yt(n.errors,"root"),Xn(n.errors)){g.state.next({errors:{}});try{await L(pe,ee)}catch(de){be=de}}else F&&await F({...n.errors},ee),rt(),setTimeout(rt);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Xn(n.errors)&&!be,submitCount:n.submitCount+1,errors:n.errors}),be)throw be},rn=(L,F={})=>{Ee(r,L)&&(Wt(F.defaultValue)?B(L,cn(Ee(o,L))):(B(L,F.defaultValue),Rt(o,L,cn(F.defaultValue))),F.keepTouched||Yt(n.touchedFields,L),F.keepDirty||(Yt(n.dirtyFields,L),n.isDirty=F.defaultValue?ge(L,cn(Ee(o,L))):ge()),F.keepError||(Yt(n.errors,L),h.isValid&&C()),g.state.next({...n}))},Fn=(L,F={})=>{const ee=L?cn(L):o,be=cn(ee),pe=Xn(L),de=pe?o:be;if(F.keepDefaultValues||(o=ee),!F.keepValues){if(F.keepDirtyValues){const Me=new Set([...a.mount,...Object.keys(Hu(o,i))]);for(const Pe of Array.from(Me))Ee(n.dirtyFields,Pe)?Rt(de,Pe,Ee(i,Pe)):B(Pe,Ee(de,Pe))}else{if(Jx&&Wt(L))for(const Me of a.mount){const Pe=Ee(r,Me);if(Pe&&Pe._f){const tt=Array.isArray(Pe._f.refs)?Pe._f.refs[0]:Pe._f.ref;if(Lm(tt)){const kt=tt.closest("form");if(kt){kt.reset();break}}}}if(F.keepFieldsRef)for(const Me of a.mount)B(Me,Ee(de,Me));else r={}}i=e.shouldUnregister?F.keepDefaultValues?cn(o):{}:cn(de),g.array.next({values:{...de}}),g.state.next({values:{...de}})}a={mount:F.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!h.isValid||!!F.keepIsValid||!!F.keepDirtyValues,s.watch=!!e.shouldUnregister,g.state.next({submitCount:F.keepSubmitCount?n.submitCount:0,isDirty:pe?!1:F.keepDirty?n.isDirty:!!(F.keepDefaultValues&&!ps(L,o)),isSubmitted:F.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:pe?{}:F.keepDirtyValues?F.keepDefaultValues&&i?Hu(o,i):n.dirtyFields:F.keepDefaultValues&&L?Hu(o,L):F.keepDirty?n.dirtyFields:{},touchedFields:F.keepTouched?n.touchedFields:{},errors:F.keepErrors?n.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},Ai=(L,F)=>Fn(eo(L)?L(i):L,F),Fs=(L,F={})=>{const ee=Ee(r,L),be=ee&&ee._f;if(be){const pe=be.refs?be.refs[0]:be.ref;pe.focus&&(pe.focus(),F.shouldSelect&&eo(pe.select)&&pe.select())}},En=L=>{n={...n,...L}},Bc={control:{register:ct,unregister:ue,getFieldState:K,handleSubmit:vt,setError:ce,_subscribe:Ie,_runSchema:H,_focusError:rt,_getWatch:ne,_getDirty:ge,_setValid:C,_setFieldArray:E,_setDisabledField:Te,_setErrors:N,_getFieldArray:fe,_reset:Fn,_resetDefaultValues:()=>eo(e.defaultValues)&&e.defaultValues().then(L=>{Ai(L,e.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:ie,_disableForm:st,_subjects:g,_proxyFormState:h,get _fields(){return r},get _formValues(){return i},get _state(){return s},set _state(L){s=L},get _defaultValues(){return o},get _names(){return a},set _names(L){a=L},get _formState(){return n},get _options(){return e},set _options(L){e={...e,...L}}},subscribe:me,trigger:Z,register:ct,handleSubmit:vt,watch:ve,setValue:B,getValues:R,reset:Ai,resetField:rn,clearErrors:ae,unregister:ue,setError:ce,setFocus:Fs,getFieldState:K};return{...Bc,formControl:Bc}}function uee(t={}){const e=_e.useRef(void 0),n=_e.useRef(void 0),[r,o]=_e.useState({isDirty:!1,isValidating:!1,isLoading:eo(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:eo(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!eo(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:s,...a}=cee(t);e.current={...a,formState:r}}const i=e.current.control;return i._options=t,ZQ(()=>{const s=i._subscribe({formState:i._proxyFormState,callback:()=>o({...i._formState}),reRenderRoot:!0});return o(a=>({...a,isReady:!0})),i._formState.isReady=!0,s},[i]),_e.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),_e.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),_e.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),_e.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),_e.useEffect(()=>{if(i._proxyFormState.isDirty){const s=i._getDirty();s!==r.isDirty&&i._subjects.state.next({isDirty:s})}},[i,r.isDirty]),_e.useEffect(()=>{t.values&&!ps(t.values,n.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),n.current=t.values,o(s=>({...s}))):i._resetDefaultValues()},[i,t.values]),_e.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),e.current.formState=KQ(r,i),e.current}function Po(t,e=[]){let n=[];function r(i,s){const a=S.createContext(s),u=n.length;n=[...n,s];const d=p=>{const{scope:g,children:b,...v}=p,C=g?.[t]?.[u]||a,k=S.useMemo(()=>v,Object.values(v));return w.jsx(C.Provider,{value:k,children:b})};d.displayName=i+"Provider";function h(p,g){const b=g?.[t]?.[u]||a,v=S.useContext(b);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[d,h]}const o=()=>{const i=n.map(s=>S.createContext(s));return function(a){const u=a?.[t]||i;return S.useMemo(()=>({[`__scope${t}`]:{...a,[t]:u}}),[a,u])}};return o.scopeName=t,[r,dee(o,...e)]}function dee(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const s=r.reduce((a,{useScope:u,scopeName:d})=>{const p=u(i)[`__scope${d}`];return{...a,...p}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function qr(t){const e=S.useRef(t);return S.useEffect(()=>{e.current=t}),S.useMemo(()=>(...n)=>e.current?.(...n),[])}var mn=globalThis?.document?S.useLayoutEffect:()=>{};function YA(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Rg(...t){return e=>{let n=!1;const r=t.map(o=>{const i=YA(o,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let o=0;o<r.length;o++){const i=r[o];typeof i=="function"?i():YA(t[o],null)}}}}function bt(...t){return S.useCallback(Rg(...t),t)}function Ul(t){const e=fee(t),n=S.forwardRef((r,o)=>{const{children:i,...s}=r,a=S.Children.toArray(i),u=a.find(pee);if(u){const d=u.props.children,h=a.map(p=>p===u?S.Children.count(d)>1?S.Children.only(null):S.isValidElement(d)?d.props.children:null:p);return w.jsx(e,{...s,ref:o,children:S.isValidElement(d)?S.cloneElement(d,void 0,h):null})}return w.jsx(e,{...s,ref:o,children:i})});return n.displayName=`${t}.Slot`,n}var m3=Ul("Slot");function fee(t){const e=S.forwardRef((n,r)=>{const{children:o,...i}=n;if(S.isValidElement(o)){const s=gee(o),a=mee(i,o.props);return o.type!==S.Fragment&&(a.ref=r?Rg(r,s):s),S.cloneElement(o,a)}return S.Children.count(o)>1?S.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var g3=Symbol("radix.slottable");function hee(t){const e=({children:n})=>w.jsx(w.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=g3,e}function pee(t){return S.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===g3}function mee(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...a)=>{const u=i(...a);return o(...a),u}:o&&(n[r]=o):r==="style"?n[r]={...o,...i}:r==="className"&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}function gee(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var bee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qe=bee.reduce((t,e)=>{const n=Ul(`Primitive.${e}`),r=S.forwardRef((o,i)=>{const{asChild:s,...a}=o,u=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),w.jsx(u,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function b3(t,e){t&&vr.flushSync(()=>t.dispatchEvent(e))}var bv={exports:{}},yv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA;function yee(){if(WA)return yv;WA=1;var t=Vm();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,i=t.useLayoutEffect,s=t.useDebugValue;function a(p,g){var b=g(),v=r({inst:{value:b,getSnapshot:g}}),C=v[0].inst,k=v[1];return i(function(){C.value=b,C.getSnapshot=g,u(C)&&k({inst:C})},[p,b,g]),o(function(){return u(C)&&k({inst:C}),p(function(){u(C)&&k({inst:C})})},[p]),s(b),b}function u(p){var g=p.getSnapshot;p=p.value;try{var b=g();return!n(p,b)}catch{return!0}}function d(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:a;return yv.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,yv}var XA;function vee(){return XA||(XA=1,bv.exports=yee()),bv.exports}var wee=vee();function xee(){return wee.useSyncExternalStore(Cee,()=>!0,()=>!1)}function Cee(){return()=>{}}var oC="Avatar",[See,Yse]=Po(oC),[kee,y3]=See(oC),v3=S.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[o,i]=S.useState("idle");return w.jsx(kee,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:i,children:w.jsx(qe.span,{...r,ref:e})})});v3.displayName=oC;var w3="AvatarImage",x3=S.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:o=()=>{},...i}=t,s=y3(w3,n),a=Eee(r,i),u=qr(d=>{o(d),s.onImageLoadingStatusChange(d)});return mn(()=>{a!=="idle"&&u(a)},[a,u]),a==="loaded"?w.jsx(qe.img,{...i,ref:e,src:r}):null});x3.displayName=w3;var C3="AvatarFallback",S3=S.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...o}=t,i=y3(C3,n),[s,a]=S.useState(r===void 0);return S.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(u)}},[r]),s&&i.imageLoadingStatus!=="loaded"?w.jsx(qe.span,{...o,ref:e}):null});S3.displayName=C3;function JA(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Eee(t,{referrerPolicy:e,crossOrigin:n}){const r=xee(),o=S.useRef(null),i=r?(o.current||(o.current=new window.Image),o.current):null,[s,a]=S.useState(()=>JA(i,t));return mn(()=>{a(JA(i,t))},[i,t]),mn(()=>{const u=p=>()=>{a(p)};if(!i)return;const d=u("loaded"),h=u("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),s}var k3=v3,E3=x3,M3=S3;function T3(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=T3(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function A3(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=T3(t))&&(r&&(r+=" "),r+=e);return r}const iC="-",Mee=t=>{const e=Aee(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(iC);return a[0]===""&&a.length!==1&&a.shift(),N3(a,e)||Tee(s)},getConflictingClassGroupIds:(s,a)=>{const u=n[s]||[];return a&&r[s]?[...u,...r[s]]:u}}},N3=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?N3(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=t.join(iC);return e.validators.find(({validator:s})=>s(i))?.classGroupId},QA=/^\[(.+)\]$/,Tee=t=>{if(QA.test(t)){const e=QA.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Aee=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Oee(Object.entries(t.classGroups),n).forEach(([i,s])=>{Z1(s,r,i,e)}),r},Z1=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const i=o===""?e:eN(e,o);i.classGroupId=n;return}if(typeof o=="function"){if(Nee(o)){Z1(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{Z1(s,eN(e,i),n,r)})})},eN=(t,e)=>{let n=t;return e.split(iC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Nee=t=>t.isThemeGetter,Oee=(t,e)=>e?t.map(([n,r])=>{const o=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([s,a])=>[e+s,a])):i);return[n,o]}):t,Ree=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},O3="!",Dee=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],i=e.length,s=a=>{const u=[];let d=0,h=0,p;for(let k=0;k<a.length;k++){let E=a[k];if(d===0){if(E===o&&(r||a.slice(k,k+i)===e)){u.push(a.slice(h,k)),h=k+i;continue}if(E==="/"){p=k;continue}}E==="["?d++:E==="]"&&d--}const g=u.length===0?a:a.substring(h),b=g.startsWith(O3),v=b?g.substring(1):g,C=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:b,baseClassName:v,maybePostfixModifierPosition:C}};return n?a=>n({className:a,parseClassName:s}):s},_ee=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Lee=t=>({cache:Ree(t.cacheSize),parseClassName:Dee(t),...Mee(t)}),Bee=/\s+/,Iee=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,i=[],s=t.trim().split(Bee);let a="";for(let u=s.length-1;u>=0;u-=1){const d=s[u],{modifiers:h,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:b}=n(d);let v=!!b,C=r(v?g.substring(0,b):g);if(!C){if(!v){a=d+(a.length>0?" "+a:a);continue}if(C=r(g),!C){a=d+(a.length>0?" "+a:a);continue}v=!1}const k=_ee(h).join(":"),E=p?k+O3:k,T=E+C;if(i.includes(T))continue;i.push(T);const N=o(C,v);for(let _=0;_<N.length;++_){const O=N[_];i.push(E+O)}a=d+(a.length>0?" "+a:a)}return a};function Hee(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=R3(e))&&(r&&(r+=" "),r+=n);return r}const R3=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=R3(t[r]))&&(n&&(n+=" "),n+=e);return n};function tN(t,...e){let n,r,o,i=s;function s(u){const d=e.reduce((h,p)=>p(h),t());return n=Lee(d),r=n.cache.get,o=n.cache.set,i=a,a(u)}function a(u){const d=r(u);if(d)return d;const h=Iee(u,n);return o(u,h),h}return function(){return i(Hee.apply(null,arguments))}}const Tt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},D3=/^\[(?:([a-z-]+):)?(.+)\]$/i,Pee=/^\d+\/\d+$/,jee=new Set(["px","full","screen"]),Vee=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zee=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Uee=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,$ee=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Fee=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,si=t=>lc(t)||jee.has(t)||Pee.test(t),ns=t=>_c(t,"length",Jee),lc=t=>!!t&&!Number.isNaN(Number(t)),vv=t=>_c(t,"number",lc),ju=t=>!!t&&Number.isInteger(Number(t)),Gee=t=>t.endsWith("%")&&lc(t.slice(0,-1)),Ue=t=>D3.test(t),rs=t=>Vee.test(t),qee=new Set(["length","size","percentage"]),Kee=t=>_c(t,qee,_3),Zee=t=>_c(t,"position",_3),Yee=new Set(["image","url"]),Wee=t=>_c(t,Yee,ete),Xee=t=>_c(t,"",Qee),Vu=()=>!0,_c=(t,e,n)=>{const r=D3.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},Jee=t=>zee.test(t)&&!Uee.test(t),_3=()=>!1,Qee=t=>$ee.test(t),ete=t=>Fee.test(t),nN=()=>{const t=Tt("colors"),e=Tt("spacing"),n=Tt("blur"),r=Tt("brightness"),o=Tt("borderColor"),i=Tt("borderRadius"),s=Tt("borderSpacing"),a=Tt("borderWidth"),u=Tt("contrast"),d=Tt("grayscale"),h=Tt("hueRotate"),p=Tt("invert"),g=Tt("gap"),b=Tt("gradientColorStops"),v=Tt("gradientColorStopPositions"),C=Tt("inset"),k=Tt("margin"),E=Tt("opacity"),T=Tt("padding"),N=Tt("saturate"),_=Tt("scale"),O=Tt("sepia"),$=Tt("skew"),H=Tt("space"),P=Tt("translate"),W=()=>["auto","contain","none"],ie=()=>["auto","hidden","clip","visible","scroll"],ge=()=>["auto",Ue,e],ne=()=>[Ue,e],fe=()=>["",si,ns],he=()=>["auto",lc,Ue],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],J=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",Ue],R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[lc,Ue];return{cacheSize:500,separator:":",theme:{colors:[Vu],spacing:[si,ns],blur:["none","",rs,Ue],brightness:K(),borderColor:[t],borderRadius:["none","","full",rs,Ue],borderSpacing:ne(),borderWidth:fe(),contrast:K(),grayscale:Z(),hueRotate:K(),invert:Z(),gap:ne(),gradientColorStops:[t],gradientColorStopPositions:[Gee,ns],inset:ge(),margin:ge(),opacity:K(),padding:ne(),saturate:K(),scale:K(),sepia:Z(),skew:K(),space:ne(),translate:ne()},classGroups:{aspect:[{aspect:["auto","square","video",Ue]}],container:["container"],columns:[{columns:[rs]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),Ue]}],overflow:[{overflow:ie()}],"overflow-x":[{"overflow-x":ie()}],"overflow-y":[{"overflow-y":ie()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[C]}],"inset-x":[{"inset-x":[C]}],"inset-y":[{"inset-y":[C]}],start:[{start:[C]}],end:[{end:[C]}],top:[{top:[C]}],right:[{right:[C]}],bottom:[{bottom:[C]}],left:[{left:[C]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ju,Ue]}],basis:[{basis:ge()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ue]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",ju,Ue]}],"grid-cols":[{"grid-cols":[Vu]}],"col-start-end":[{col:["auto",{span:["full",ju,Ue]},Ue]}],"col-start":[{"col-start":he()}],"col-end":[{"col-end":he()}],"grid-rows":[{"grid-rows":[Vu]}],"row-start-end":[{row:["auto",{span:[ju,Ue]},Ue]}],"row-start":[{"row-start":he()}],"row-end":[{"row-end":he()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ue]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...J()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...J(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...J(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[H]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[H]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ue,e]}],"min-w":[{"min-w":[Ue,e,"min","max","fit"]}],"max-w":[{"max-w":[Ue,e,"none","full","min","max","fit","prose",{screen:[rs]},rs]}],h:[{h:[Ue,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ue,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ue,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ue,e,"auto","min","max","fit"]}],"font-size":[{text:["base",rs,ns]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vv]}],"font-family":[{font:[Vu]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ue]}],"line-clamp":[{"line-clamp":["none",lc,vv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",si,Ue]}],"list-image":[{"list-image":["none",Ue]}],"list-style-type":[{list:["none","disc","decimal",Ue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",si,ns]}],"underline-offset":[{"underline-offset":["auto",si,Ue]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),Zee]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Kee]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Wee]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:B()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[si,Ue]}],"outline-w":[{outline:[si,ns]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[si,ns]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",rs,Xee]}],"shadow-color":[{shadow:[Vu]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",rs,Ue]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[N]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ue]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",Ue]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[ju,Ue]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[$]}],"skew-y":[{"skew-y":[$]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ue]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ne()}],"scroll-mx":[{"scroll-mx":ne()}],"scroll-my":[{"scroll-my":ne()}],"scroll-ms":[{"scroll-ms":ne()}],"scroll-me":[{"scroll-me":ne()}],"scroll-mt":[{"scroll-mt":ne()}],"scroll-mr":[{"scroll-mr":ne()}],"scroll-mb":[{"scroll-mb":ne()}],"scroll-ml":[{"scroll-ml":ne()}],"scroll-p":[{"scroll-p":ne()}],"scroll-px":[{"scroll-px":ne()}],"scroll-py":[{"scroll-py":ne()}],"scroll-ps":[{"scroll-ps":ne()}],"scroll-pe":[{"scroll-pe":ne()}],"scroll-pt":[{"scroll-pt":ne()}],"scroll-pr":[{"scroll-pr":ne()}],"scroll-pb":[{"scroll-pb":ne()}],"scroll-pl":[{"scroll-pl":ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[si,ns,vv]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},tte=(t,{cacheSize:e,prefix:n,separator:r,experimentalParseClassName:o,extend:i={},override:s={}})=>{Zu(t,"cacheSize",e),Zu(t,"prefix",n),Zu(t,"separator",r),Zu(t,"experimentalParseClassName",o);for(const a in s)nte(t[a],s[a]);for(const a in i)rte(t[a],i[a]);return t},Zu=(t,e,n)=>{n!==void 0&&(t[e]=n)},nte=(t,e)=>{if(e)for(const n in e)Zu(t,n,e[n])},rte=(t,e)=>{if(e)for(const n in e){const r=e[n];r!==void 0&&(t[n]=(t[n]||[]).concat(r))}},ote=(t,...e)=>typeof t=="function"?tN(nN,t,...e):tN(()=>tte(nN(),t),...e),rN=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,oN=A3,Dg=(t,e)=>n=>{var r;if(e?.variants==null)return oN(t,n?.class,n?.className);const{variants:o,defaultVariants:i}=e,s=Object.keys(o).map(d=>{const h=n?.[d],p=i?.[d];if(h===null)return null;const g=rN(h)||rN(p);return o[d][g]}),a=n&&Object.entries(n).reduce((d,h)=>{let[p,g]=h;return g===void 0||(d[p]=g),d},{}),u=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:p,className:g,...b}=h;return Object.entries(b).every(v=>{let[C,k]=v;return Array.isArray(k)?k.includes({...i,...a}[C]):{...i,...a}[C]===k})?[...d,p,g]:d},[]);return oN(t,s,u,n?.class,n?.className)};function we(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t?.(o),n===!1||!o.defaultPrevented)return e?.(o)}}var ite=lw[" useInsertionEffect ".trim().toString()]||mn;function Ci({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[o,i,s]=ste({defaultProp:e,onChange:n}),a=t!==void 0,u=a?t:o;{const h=S.useRef(t!==void 0);S.useEffect(()=>{const p=h.current;p!==a&&console.warn(`${r} is changing from ${p?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,r])}const d=S.useCallback(h=>{if(a){const p=lte(h)?h(t):h;p!==t&&s.current?.(p)}else i(h)},[a,t,i,s]);return[u,d]}function ste({defaultProp:t,onChange:e}){const[n,r]=S.useState(t),o=S.useRef(n),i=S.useRef(e);return ite(()=>{i.current=e},[e]),S.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,r,i]}function lte(t){return typeof t=="function"}function sC(t){const e=t+"CollectionProvider",[n,r]=Po(e),[o,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=C=>{const{scope:k,children:E}=C,T=_e.useRef(null),N=_e.useRef(new Map).current;return w.jsx(o,{scope:k,itemMap:N,collectionRef:T,children:E})};s.displayName=e;const a=t+"CollectionSlot",u=Ul(a),d=_e.forwardRef((C,k)=>{const{scope:E,children:T}=C,N=i(a,E),_=bt(k,N.collectionRef);return w.jsx(u,{ref:_,children:T})});d.displayName=a;const h=t+"CollectionItemSlot",p="data-radix-collection-item",g=Ul(h),b=_e.forwardRef((C,k)=>{const{scope:E,children:T,...N}=C,_=_e.useRef(null),O=bt(k,_),$=i(h,E);return _e.useEffect(()=>($.itemMap.set(_,{ref:_,...N}),()=>void $.itemMap.delete(_))),w.jsx(g,{[p]:"",ref:O,children:T})});b.displayName=h;function v(C){const k=i(t+"CollectionConsumer",C);return _e.useCallback(()=>{const T=k.collectionRef.current;if(!T)return[];const N=Array.from(T.querySelectorAll(`[${p}]`));return Array.from(k.itemMap.values()).sort(($,H)=>N.indexOf($.ref.current)-N.indexOf(H.ref.current))},[k.collectionRef,k.itemMap])}return[{Provider:s,Slot:d,ItemSlot:b},v,r]}var ate=S.createContext(void 0);function _g(t){const e=S.useContext(ate);return t||e||"ltr"}function cte(t,e=globalThis?.document){const n=qr(t);S.useEffect(()=>{const r=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var ute="DismissableLayer",Y1="dismissableLayer.update",dte="dismissableLayer.pointerDownOutside",fte="dismissableLayer.focusOutside",iN,L3=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),af=S.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:o,onFocusOutside:i,onInteractOutside:s,onDismiss:a,...u}=t,d=S.useContext(L3),[h,p]=S.useState(null),g=h?.ownerDocument??globalThis?.document,[,b]=S.useState({}),v=bt(e,H=>p(H)),C=Array.from(d.layers),[k]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=C.indexOf(k),T=h?C.indexOf(h):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,_=T>=E,O=mte(H=>{const P=H.target,W=[...d.branches].some(ie=>ie.contains(P));!_||W||(o?.(H),s?.(H),H.defaultPrevented||a?.())},g),$=gte(H=>{const P=H.target;[...d.branches].some(ie=>ie.contains(P))||(i?.(H),s?.(H),H.defaultPrevented||a?.())},g);return cte(H=>{T===d.layers.size-1&&(r?.(H),!H.defaultPrevented&&a&&(H.preventDefault(),a()))},g),S.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(iN=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),sN(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=iN)}},[h,g,n,d]),S.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),sN())},[h,d]),S.useEffect(()=>{const H=()=>b({});return document.addEventListener(Y1,H),()=>document.removeEventListener(Y1,H)},[]),w.jsx(qe.div,{...u,ref:v,style:{pointerEvents:N?_?"auto":"none":void 0,...t.style},onFocusCapture:we(t.onFocusCapture,$.onFocusCapture),onBlurCapture:we(t.onBlurCapture,$.onBlurCapture),onPointerDownCapture:we(t.onPointerDownCapture,O.onPointerDownCapture)})});af.displayName=ute;var hte="DismissableLayerBranch",pte=S.forwardRef((t,e)=>{const n=S.useContext(L3),r=S.useRef(null),o=bt(e,r);return S.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),w.jsx(qe.div,{...t,ref:o})});pte.displayName=hte;function mte(t,e=globalThis?.document){const n=qr(t),r=S.useRef(!1),o=S.useRef(()=>{});return S.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let u=function(){B3(dte,n,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=u,e.addEventListener("click",o.current,{once:!0})):u()}else e.removeEventListener("click",o.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",i),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function gte(t,e=globalThis?.document){const n=qr(t),r=S.useRef(!1);return S.useEffect(()=>{const o=i=>{i.target&&!r.current&&B3(fte,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sN(){const t=new CustomEvent(Y1);document.dispatchEvent(t)}function B3(t,e,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?b3(o,i):o.dispatchEvent(i)}var wv=0;function lC(){S.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??lN()),document.body.insertAdjacentElement("beforeend",t[1]??lN()),wv++,()=>{wv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),wv--}},[])}function lN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var xv="focusScope.autoFocusOnMount",Cv="focusScope.autoFocusOnUnmount",aN={bubbles:!1,cancelable:!0},bte="FocusScope",Lg=S.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:i,...s}=t,[a,u]=S.useState(null),d=qr(o),h=qr(i),p=S.useRef(null),g=bt(e,C=>u(C)),b=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(r){let C=function(N){if(b.paused||!a)return;const _=N.target;a.contains(_)?p.current=_:ss(p.current,{select:!0})},k=function(N){if(b.paused||!a)return;const _=N.relatedTarget;_!==null&&(a.contains(_)||ss(p.current,{select:!0}))},E=function(N){if(document.activeElement===document.body)for(const O of N)O.removedNodes.length>0&&ss(a)};document.addEventListener("focusin",C),document.addEventListener("focusout",k);const T=new MutationObserver(E);return a&&T.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",k),T.disconnect()}}},[r,a,b.paused]),S.useEffect(()=>{if(a){uN.add(b);const C=document.activeElement;if(!a.contains(C)){const E=new CustomEvent(xv,aN);a.addEventListener(xv,d),a.dispatchEvent(E),E.defaultPrevented||(yte(Ste(I3(a)),{select:!0}),document.activeElement===C&&ss(a))}return()=>{a.removeEventListener(xv,d),setTimeout(()=>{const E=new CustomEvent(Cv,aN);a.addEventListener(Cv,h),a.dispatchEvent(E),E.defaultPrevented||ss(C??document.body,{select:!0}),a.removeEventListener(Cv,h),uN.remove(b)},0)}}},[a,d,h,b]);const v=S.useCallback(C=>{if(!n&&!r||b.paused)return;const k=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,E=document.activeElement;if(k&&E){const T=C.currentTarget,[N,_]=vte(T);N&&_?!C.shiftKey&&E===_?(C.preventDefault(),n&&ss(N,{select:!0})):C.shiftKey&&E===N&&(C.preventDefault(),n&&ss(_,{select:!0})):E===T&&C.preventDefault()}},[n,r,b.paused]);return w.jsx(qe.div,{tabIndex:-1,...s,ref:g,onKeyDown:v})});Lg.displayName=bte;function yte(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ss(r,{select:e}),document.activeElement!==n)return}function vte(t){const e=I3(t),n=cN(e,t),r=cN(e.reverse(),t);return[n,r]}function I3(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function cN(t,e){for(const n of t)if(!wte(n,{upTo:e}))return n}function wte(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function xte(t){return t instanceof HTMLInputElement&&"select"in t}function ss(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&xte(t)&&e&&t.select()}}var uN=Cte();function Cte(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=dN(t,e),t.unshift(e)},remove(e){t=dN(t,e),t[0]?.resume()}}}function dN(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Ste(t){return t.filter(e=>e.tagName!=="A")}var kte=lw[" useId ".trim().toString()]||(()=>{}),Ete=0;function ao(t){const[e,n]=S.useState(kte());return mn(()=>{n(r=>r??String(Ete++))},[t]),e?`radix-${e}`:""}var Mte="Arrow",H3=S.forwardRef((t,e)=>{const{children:n,width:r=10,height:o=5,...i}=t;return w.jsx(qe.svg,{...i,ref:e,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:w.jsx("polygon",{points:"0,0 30,0 15,10"})})});H3.displayName=Mte;var Tte=H3;function Ate(t){const[e,n]=S.useState(void 0);return mn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const i=o[0];let s,a;if("borderBoxSize"in i){const u=i.borderBoxSize,d=Array.isArray(u)?u[0]:u;s=d.inlineSize,a=d.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var aC="Popper",[P3,zs]=Po(aC),[Nte,j3]=P3(aC),V3=t=>{const{__scopePopper:e,children:n}=t,[r,o]=S.useState(null);return w.jsx(Nte,{scope:e,anchor:r,onAnchorChange:o,children:n})};V3.displayName=aC;var z3="PopperAnchor",U3=S.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...o}=t,i=j3(z3,n),s=S.useRef(null),a=bt(e,s);return S.useEffect(()=>{i.onAnchorChange(r?.current||s.current)}),r?null:w.jsx(qe.div,{...o,ref:a})});U3.displayName=z3;var cC="PopperContent",[Ote,Rte]=P3(cC),$3=S.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:i="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:g=!1,updatePositionStrategy:b="optimized",onPlaced:v,...C}=t,k=j3(cC,n),[E,T]=S.useState(null),N=bt(e,ue=>T(ue)),[_,O]=S.useState(null),$=Ate(_),H=$?.width??0,P=$?.height??0,W=r+(i!=="center"?"-"+i:""),ie=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},ge=Array.isArray(d)?d:[d],ne=ge.length>0,fe={padding:ie,boundary:ge.filter(_te),altBoundary:ne},{refs:he,floatingStyles:oe,placement:B,isPositioned:Y,middlewareData:J}=FN({strategy:"fixed",placement:W,whileElementsMounted:(...ue)=>BP(...ue,{animationFrame:b==="always"}),elements:{reference:k.anchor},middleware:[Si({mainAxis:o+P,alignmentAxis:s}),u&&Gd({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?qP():void 0,...fe}),u&&Ls({...fe}),Gm({...fe,apply:({elements:ue,rects:Te,availableWidth:ct,availableHeight:rt})=>{const{width:st,height:vt}=Te.reference,rn=ue.floating.style;rn.setProperty("--radix-popper-available-width",`${ct}px`),rn.setProperty("--radix-popper-available-height",`${rt}px`),rn.setProperty("--radix-popper-anchor-width",`${st}px`),rn.setProperty("--radix-popper-anchor-height",`${vt}px`)}}),_&&ZP({element:_,padding:a}),Lte({arrowWidth:H,arrowHeight:P}),g&&KP({strategy:"referenceHidden",...fe})]}),[Z,R]=q3(B),K=qr(v);mn(()=>{Y&&K?.()},[Y,K]);const ae=J.arrow?.x,ce=J.arrow?.y,ve=J.arrow?.centerOffset!==0,[Ie,me]=S.useState();return mn(()=>{E&&me(window.getComputedStyle(E).zIndex)},[E]),w.jsx("div",{ref:he.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:Y?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ie,"--radix-popper-transform-origin":[J.transformOrigin?.x,J.transformOrigin?.y].join(" "),...J.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:w.jsx(Ote,{scope:n,placedSide:Z,onArrowChange:O,arrowX:ae,arrowY:ce,shouldHideArrow:ve,children:w.jsx(qe.div,{"data-side":Z,"data-align":R,...C,ref:N,style:{...C.style,animation:Y?void 0:"none"}})})})});$3.displayName=cC;var F3="PopperArrow",Dte={top:"bottom",right:"left",bottom:"top",left:"right"},G3=S.forwardRef(function(e,n){const{__scopePopper:r,...o}=e,i=Rte(F3,r),s=Dte[i.placedSide];return w.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:w.jsx(Tte,{...o,ref:n,style:{...o.style,display:"block"}})})});G3.displayName=F3;function _te(t){return t!==null}var Lte=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:o}=e,s=o.arrow?.centerOffset!==0,a=s?0:t.arrowWidth,u=s?0:t.arrowHeight,[d,h]=q3(n),p={start:"0%",center:"50%",end:"100%"}[h],g=(o.arrow?.x??0)+a/2,b=(o.arrow?.y??0)+u/2;let v="",C="";return d==="bottom"?(v=s?p:`${g}px`,C=`${-u}px`):d==="top"?(v=s?p:`${g}px`,C=`${r.floating.height+u}px`):d==="right"?(v=`${-u}px`,C=s?p:`${b}px`):d==="left"&&(v=`${r.floating.width+u}px`,C=s?p:`${b}px`),{data:{x:v,y:C}}}});function q3(t){const[e,n="center"]=t.split("-");return[e,n]}var cf=V3,uf=U3,Bg=$3,Ig=G3;function Bte(t,e){return S.useReducer((n,r)=>e[n][r]??n,t)}var Zl=t=>{const{present:e,children:n}=t,r=Ite(e),o=typeof n=="function"?n({present:r.isPresent}):S.Children.only(n),i=bt(r.ref,Hte(o));return typeof n=="function"||r.isPresent?S.cloneElement(o,{ref:i}):null};Zl.displayName="Presence";function Ite(t){const[e,n]=S.useState(),r=S.useRef(null),o=S.useRef(t),i=S.useRef("none"),s=t?"mounted":"unmounted",[a,u]=Bte(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const d=Jh(r.current);i.current=a==="mounted"?d:"none"},[a]),mn(()=>{const d=r.current,h=o.current;if(h!==t){const g=i.current,b=Jh(d);t?u("MOUNT"):b==="none"||d?.display==="none"?u("UNMOUNT"):u(h&&g!==b?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,u]),mn(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,p=b=>{const C=Jh(r.current).includes(b.animationName);if(b.target===e&&C&&(u("ANIMATION_END"),!o.current)){const k=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=k)})}},g=b=>{b.target===e&&(i.current=Jh(r.current))};return e.addEventListener("animationstart",g),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",g),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:S.useCallback(d=>{r.current=d?getComputedStyle(d):null,n(d)},[])}}function Jh(t){return t?.animationName||"none"}function Hte(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Sv="rovingFocusGroup.onEntryFocus",Pte={bubbles:!1,cancelable:!0},df="RovingFocusGroup",[W1,K3,jte]=sC(df),[Vte,Hg]=Po(df,[jte]),[zte,Ute]=Vte(df),Z3=S.forwardRef((t,e)=>w.jsx(W1.Provider,{scope:t.__scopeRovingFocusGroup,children:w.jsx(W1.Slot,{scope:t.__scopeRovingFocusGroup,children:w.jsx($te,{...t,ref:e})})}));Z3.displayName=df;var $te=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...p}=t,g=S.useRef(null),b=bt(e,g),v=_g(i),[C,k]=Ci({prop:s,defaultProp:a??null,onChange:u,caller:df}),[E,T]=S.useState(!1),N=qr(d),_=K3(n),O=S.useRef(!1),[$,H]=S.useState(0);return S.useEffect(()=>{const P=g.current;if(P)return P.addEventListener(Sv,N),()=>P.removeEventListener(Sv,N)},[N]),w.jsx(zte,{scope:n,orientation:r,dir:v,loop:o,currentTabStopId:C,onItemFocus:S.useCallback(P=>k(P),[k]),onItemShiftTab:S.useCallback(()=>T(!0),[]),onFocusableItemAdd:S.useCallback(()=>H(P=>P+1),[]),onFocusableItemRemove:S.useCallback(()=>H(P=>P-1),[]),children:w.jsx(qe.div,{tabIndex:E||$===0?-1:0,"data-orientation":r,...p,ref:b,style:{outline:"none",...t.style},onMouseDown:we(t.onMouseDown,()=>{O.current=!0}),onFocus:we(t.onFocus,P=>{const W=!O.current;if(P.target===P.currentTarget&&W&&!E){const ie=new CustomEvent(Sv,Pte);if(P.currentTarget.dispatchEvent(ie),!ie.defaultPrevented){const ge=_().filter(B=>B.focusable),ne=ge.find(B=>B.active),fe=ge.find(B=>B.id===C),oe=[ne,fe,...ge].filter(Boolean).map(B=>B.ref.current);X3(oe,h)}}O.current=!1}),onBlur:we(t.onBlur,()=>T(!1))})})}),Y3="RovingFocusGroupItem",W3=S.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:i,children:s,...a}=t,u=ao(),d=i||u,h=Ute(Y3,n),p=h.currentTabStopId===d,g=K3(n),{onFocusableItemAdd:b,onFocusableItemRemove:v,currentTabStopId:C}=h;return S.useEffect(()=>{if(r)return b(),()=>v()},[r,b,v]),w.jsx(W1.ItemSlot,{scope:n,id:d,focusable:r,active:o,children:w.jsx(qe.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...a,ref:e,onMouseDown:we(t.onMouseDown,k=>{r?h.onItemFocus(d):k.preventDefault()}),onFocus:we(t.onFocus,()=>h.onItemFocus(d)),onKeyDown:we(t.onKeyDown,k=>{if(k.key==="Tab"&&k.shiftKey){h.onItemShiftTab();return}if(k.target!==k.currentTarget)return;const E=qte(k,h.orientation,h.dir);if(E!==void 0){if(k.metaKey||k.ctrlKey||k.altKey||k.shiftKey)return;k.preventDefault();let N=g().filter(_=>_.focusable).map(_=>_.ref.current);if(E==="last")N.reverse();else if(E==="prev"||E==="next"){E==="prev"&&N.reverse();const _=N.indexOf(k.currentTarget);N=h.loop?Kte(N,_+1):N.slice(_+1)}setTimeout(()=>X3(N))}}),children:typeof s=="function"?s({isCurrentTabStop:p,hasTabStop:C!=null}):s})})});W3.displayName=Y3;var Fte={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Gte(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function qte(t,e,n){const r=Gte(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Fte[r]}function X3(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Kte(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var J3=Z3,Q3=W3,Zte=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ua=new WeakMap,Qh=new WeakMap,ep={},kv=0,e5=function(t){return t&&(t.host||e5(t.parentNode))},Yte=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=e5(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Wte=function(t,e,n,r){var o=Yte(e,Array.isArray(t)?t:[t]);ep[n]||(ep[n]=new WeakMap);var i=ep[n],s=[],a=new Set,u=new Set(o),d=function(p){!p||a.has(p)||(a.add(p),d(p.parentNode))};o.forEach(d);var h=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(g){if(a.has(g))h(g);else try{var b=g.getAttribute(r),v=b!==null&&b!=="false",C=(Ua.get(g)||0)+1,k=(i.get(g)||0)+1;Ua.set(g,C),i.set(g,k),s.push(g),C===1&&v&&Qh.set(g,!0),k===1&&g.setAttribute(n,"true"),v||g.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",g,E)}})};return h(e),a.clear(),kv++,function(){s.forEach(function(p){var g=Ua.get(p)-1,b=i.get(p)-1;Ua.set(p,g),i.set(p,b),g||(Qh.has(p)||p.removeAttribute(r),Qh.delete(p)),b||p.removeAttribute(n)}),kv--,kv||(Ua=new WeakMap,Ua=new WeakMap,Qh=new WeakMap,ep={})}},uC=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=Zte(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),Wte(r,o,n,"aria-hidden")):function(){return null}},xo=function(){return xo=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xo.apply(this,arguments)};function t5(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Xte(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var wp="right-scroll-bar-position",xp="width-before-scroll-bar",Jte="with-scroll-bars-hidden",Qte="--removed-body-scroll-bar-size";function Ev(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function ene(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var o=n.value;o!==r&&(n.value=r,n.callback(r,o))}}}})[0];return n.callback=e,n.facade}var tne=typeof window<"u"?S.useLayoutEffect:S.useEffect,fN=new WeakMap;function nne(t,e){var n=ene(null,function(r){return t.forEach(function(o){return Ev(o,r)})});return tne(function(){var r=fN.get(n);if(r){var o=new Set(r),i=new Set(t),s=n.current;o.forEach(function(a){i.has(a)||Ev(a,null)}),i.forEach(function(a){o.has(a)||Ev(a,s)})}fN.set(n,t)},[t]),n}function rne(t){return t}function one(t,e){e===void 0&&(e=rne);var n=[],r=!1,o={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var s=e(i,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(i),s=n}var u=function(){var h=s;s=[],h.forEach(i)},d=function(){return Promise.resolve().then(u)};d(),n={push:function(h){s.push(h),d()},filter:function(h){return s=s.filter(h),n}}}};return o}function ine(t){t===void 0&&(t={});var e=one(null);return e.options=xo({async:!0,ssr:!1},t),e}var n5=function(t){var e=t.sideCar,n=t5(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return S.createElement(r,xo({},n))};n5.isSideCarExport=!0;function sne(t,e){return t.useMedium(e),n5}var r5=ine(),Mv=function(){},Pg=S.forwardRef(function(t,e){var n=S.useRef(null),r=S.useState({onScrollCapture:Mv,onWheelCapture:Mv,onTouchMoveCapture:Mv}),o=r[0],i=r[1],s=t.forwardProps,a=t.children,u=t.className,d=t.removeScrollBar,h=t.enabled,p=t.shards,g=t.sideCar,b=t.noRelative,v=t.noIsolation,C=t.inert,k=t.allowPinchZoom,E=t.as,T=E===void 0?"div":E,N=t.gapMode,_=t5(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=g,$=nne([n,e]),H=xo(xo({},_),o);return S.createElement(S.Fragment,null,h&&S.createElement(O,{sideCar:r5,removeScrollBar:d,shards:p,noRelative:b,noIsolation:v,inert:C,setCallbacks:i,allowPinchZoom:!!k,lockRef:n,gapMode:N}),s?S.cloneElement(S.Children.only(a),xo(xo({},H),{ref:$})):S.createElement(T,xo({},H,{className:u,ref:$}),a))});Pg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Pg.classNames={fullWidth:xp,zeroRight:wp};var lne=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ane(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=lne();return e&&t.setAttribute("nonce",e),t}function cne(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function une(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var dne=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ane())&&(cne(e,n),une(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fne=function(){var t=dne();return function(e,n){S.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},o5=function(){var t=fne(),e=function(n){var r=n.styles,o=n.dynamic;return t(r,o),null};return e},hne={left:0,top:0,right:0,gap:0},Tv=function(t){return parseInt(t||"",10)||0},pne=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[Tv(n),Tv(r),Tv(o)]},mne=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return hne;var e=pne(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},gne=o5(),ac="data-scroll-locked",bne=function(t,e,n,r){var o=t.left,i=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Jte,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ac,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wp,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(xp,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wp," .").concat(wp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(xp," .").concat(xp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ac,`] {
    `).concat(Qte,": ").concat(a,`px;
  }
`)},hN=function(){var t=parseInt(document.body.getAttribute(ac)||"0",10);return isFinite(t)?t:0},yne=function(){S.useEffect(function(){return document.body.setAttribute(ac,(hN()+1).toString()),function(){var t=hN()-1;t<=0?document.body.removeAttribute(ac):document.body.setAttribute(ac,t.toString())}},[])},vne=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,o=r===void 0?"margin":r;yne();var i=S.useMemo(function(){return mne(o)},[o]);return S.createElement(gne,{styles:bne(i,!e,o,n?"":"!important")})},X1=!1;if(typeof window<"u")try{var tp=Object.defineProperty({},"passive",{get:function(){return X1=!0,!0}});window.addEventListener("test",tp,tp),window.removeEventListener("test",tp,tp)}catch{X1=!1}var $a=X1?{passive:!1}:!1,wne=function(t){return t.tagName==="TEXTAREA"},i5=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!wne(t)&&n[e]==="visible")},xne=function(t){return i5(t,"overflowY")},Cne=function(t){return i5(t,"overflowX")},pN=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var o=s5(t,r);if(o){var i=l5(t,r),s=i[1],a=i[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Sne=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},kne=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},s5=function(t,e){return t==="v"?xne(e):Cne(e)},l5=function(t,e){return t==="v"?Sne(e):kne(e)},Ene=function(t,e){return t==="h"&&e==="rtl"?-1:1},Mne=function(t,e,n,r,o){var i=Ene(t,window.getComputedStyle(e).direction),s=i*r,a=n.target,u=e.contains(a),d=!1,h=s>0,p=0,g=0;do{if(!a)break;var b=l5(t,a),v=b[0],C=b[1],k=b[2],E=C-k-i*v;(v||E)&&s5(t,a)&&(p+=E,g+=v);var T=a.parentNode;a=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!u&&a!==document.body||u&&(e.contains(a)||e===a));return(h&&Math.abs(p)<1||!h&&Math.abs(g)<1)&&(d=!0),d},np=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},mN=function(t){return[t.deltaX,t.deltaY]},gN=function(t){return t&&"current"in t?t.current:t},Tne=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Ane=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Nne=0,Fa=[];function One(t){var e=S.useRef([]),n=S.useRef([0,0]),r=S.useRef(),o=S.useState(Nne++)[0],i=S.useState(o5)[0],s=S.useRef(t);S.useEffect(function(){s.current=t},[t]),S.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var C=Xte([t.lockRef.current],(t.shards||[]).map(gN),!0).filter(Boolean);return C.forEach(function(k){return k.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),C.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var a=S.useCallback(function(C,k){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!s.current.allowPinchZoom;var E=np(C),T=n.current,N="deltaX"in C?C.deltaX:T[0]-E[0],_="deltaY"in C?C.deltaY:T[1]-E[1],O,$=C.target,H=Math.abs(N)>Math.abs(_)?"h":"v";if("touches"in C&&H==="h"&&$.type==="range")return!1;var P=pN(H,$);if(!P)return!0;if(P?O=H:(O=H==="v"?"h":"v",P=pN(H,$)),!P)return!1;if(!r.current&&"changedTouches"in C&&(N||_)&&(r.current=O),!O)return!0;var W=r.current||O;return Mne(W,k,C,W==="h"?N:_)},[]),u=S.useCallback(function(C){var k=C;if(!(!Fa.length||Fa[Fa.length-1]!==i)){var E="deltaY"in k?mN(k):np(k),T=e.current.filter(function(O){return O.name===k.type&&(O.target===k.target||k.target===O.shadowParent)&&Tne(O.delta,E)})[0];if(T&&T.should){k.cancelable&&k.preventDefault();return}if(!T){var N=(s.current.shards||[]).map(gN).filter(Boolean).filter(function(O){return O.contains(k.target)}),_=N.length>0?a(k,N[0]):!s.current.noIsolation;_&&k.cancelable&&k.preventDefault()}}},[]),d=S.useCallback(function(C,k,E,T){var N={name:C,delta:k,target:E,should:T,shadowParent:Rne(E)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(_){return _!==N})},1)},[]),h=S.useCallback(function(C){n.current=np(C),r.current=void 0},[]),p=S.useCallback(function(C){d(C.type,mN(C),C.target,a(C,t.lockRef.current))},[]),g=S.useCallback(function(C){d(C.type,np(C),C.target,a(C,t.lockRef.current))},[]);S.useEffect(function(){return Fa.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:g}),document.addEventListener("wheel",u,$a),document.addEventListener("touchmove",u,$a),document.addEventListener("touchstart",h,$a),function(){Fa=Fa.filter(function(C){return C!==i}),document.removeEventListener("wheel",u,$a),document.removeEventListener("touchmove",u,$a),document.removeEventListener("touchstart",h,$a)}},[]);var b=t.removeScrollBar,v=t.inert;return S.createElement(S.Fragment,null,v?S.createElement(i,{styles:Ane(o)}):null,b?S.createElement(vne,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Rne(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Dne=sne(r5,One);var jg=S.forwardRef(function(t,e){return S.createElement(Pg,xo({},t,{ref:e,sideCar:Dne}))});jg.classNames=Pg.classNames;var J1=["Enter"," "],_ne=["ArrowDown","PageUp","Home"],a5=["ArrowUp","PageDown","End"],Lne=[..._ne,...a5],Bne={ltr:[...J1,"ArrowRight"],rtl:[...J1,"ArrowLeft"]},Ine={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ff="Menu",[zd,Hne,Pne]=sC(ff),[Yl,c5]=Po(ff,[Pne,zs,Hg]),hf=zs(),u5=Hg(),[d5,Wl]=Yl(ff),[jne,pf]=Yl(ff),f5=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:o,onOpenChange:i,modal:s=!0}=t,a=hf(e),[u,d]=S.useState(null),h=S.useRef(!1),p=qr(i),g=_g(o);return S.useEffect(()=>{const b=()=>{h.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>h.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),w.jsx(cf,{...a,children:w.jsx(d5,{scope:e,open:n,onOpenChange:p,content:u,onContentChange:d,children:w.jsx(jne,{scope:e,onClose:S.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:h,dir:g,modal:s,children:r})})})};f5.displayName=ff;var Vne="MenuAnchor",dC=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=hf(n);return w.jsx(uf,{...o,...r,ref:e})});dC.displayName=Vne;var zne="MenuPortal",[Wse,h5]=Yl(zne,{forceMount:void 0}),$r="MenuContent",[Une,fC]=Yl($r),p5=S.forwardRef((t,e)=>{const n=h5($r,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=Wl($r,t.__scopeMenu),s=pf($r,t.__scopeMenu);return w.jsx(zd.Provider,{scope:t.__scopeMenu,children:w.jsx(Zl,{present:r||i.open,children:w.jsx(zd.Slot,{scope:t.__scopeMenu,children:s.modal?w.jsx($ne,{...o,ref:e}):w.jsx(Fne,{...o,ref:e})})})})}),$ne=S.forwardRef((t,e)=>{const n=Wl($r,t.__scopeMenu),r=S.useRef(null),o=bt(e,r);return S.useEffect(()=>{const i=r.current;if(i)return uC(i)},[]),w.jsx(hC,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:we(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Fne=S.forwardRef((t,e)=>{const n=Wl($r,t.__scopeMenu);return w.jsx(hC,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Gne=Ul("MenuContent.ScrollLock"),hC=S.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:g,onDismiss:b,disableOutsideScroll:v,...C}=t,k=Wl($r,n),E=pf($r,n),T=hf(n),N=u5(n),_=Hne(n),[O,$]=S.useState(null),H=S.useRef(null),P=bt(e,H,k.onContentChange),W=S.useRef(0),ie=S.useRef(""),ge=S.useRef(0),ne=S.useRef(null),fe=S.useRef("right"),he=S.useRef(0),oe=v?jg:S.Fragment,B=v?{as:Gne,allowPinchZoom:!0}:void 0,Y=Z=>{const R=ie.current+Z,K=_().filter(ue=>!ue.disabled),ae=document.activeElement,ce=K.find(ue=>ue.ref.current===ae)?.textValue,ve=K.map(ue=>ue.textValue),Ie=rre(ve,R,ce),me=K.find(ue=>ue.textValue===Ie)?.ref.current;(function ue(Te){ie.current=Te,window.clearTimeout(W.current),Te!==""&&(W.current=window.setTimeout(()=>ue(""),1e3))})(R),me&&setTimeout(()=>me.focus())};S.useEffect(()=>()=>window.clearTimeout(W.current),[]),lC();const J=S.useCallback(Z=>fe.current===ne.current?.side&&ire(Z,ne.current?.area),[]);return w.jsx(Une,{scope:n,searchRef:ie,onItemEnter:S.useCallback(Z=>{J(Z)&&Z.preventDefault()},[J]),onItemLeave:S.useCallback(Z=>{J(Z)||(H.current?.focus(),$(null))},[J]),onTriggerLeave:S.useCallback(Z=>{J(Z)&&Z.preventDefault()},[J]),pointerGraceTimerRef:ge,onPointerGraceIntentChange:S.useCallback(Z=>{ne.current=Z},[]),children:w.jsx(oe,{...B,children:w.jsx(Lg,{asChild:!0,trapped:o,onMountAutoFocus:we(i,Z=>{Z.preventDefault(),H.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:w.jsx(af,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:g,onDismiss:b,children:w.jsx(J3,{asChild:!0,...N,dir:E.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:$,onEntryFocus:we(u,Z=>{E.isUsingKeyboardRef.current||Z.preventDefault()}),preventScrollOnEntryFocus:!0,children:w.jsx(Bg,{role:"menu","aria-orientation":"vertical","data-state":R5(k.open),"data-radix-menu-content":"",dir:E.dir,...T,...C,ref:P,style:{outline:"none",...C.style},onKeyDown:we(C.onKeyDown,Z=>{const K=Z.target.closest("[data-radix-menu-content]")===Z.currentTarget,ae=Z.ctrlKey||Z.altKey||Z.metaKey,ce=Z.key.length===1;K&&(Z.key==="Tab"&&Z.preventDefault(),!ae&&ce&&Y(Z.key));const ve=H.current;if(Z.target!==ve||!Lne.includes(Z.key))return;Z.preventDefault();const me=_().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);a5.includes(Z.key)&&me.reverse(),tre(me)}),onBlur:we(t.onBlur,Z=>{Z.currentTarget.contains(Z.target)||(window.clearTimeout(W.current),ie.current="")}),onPointerMove:we(t.onPointerMove,Ud(Z=>{const R=Z.target,K=he.current!==Z.clientX;if(Z.currentTarget.contains(R)&&K){const ae=Z.clientX>he.current?"right":"left";fe.current=ae,he.current=Z.clientX}}))})})})})})})});p5.displayName=$r;var qne="MenuGroup",pC=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(qe.div,{role:"group",...r,ref:e})});pC.displayName=qne;var Kne="MenuLabel",m5=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(qe.div,{...r,ref:e})});m5.displayName=Kne;var Hm="MenuItem",bN="menu.itemSelect",Vg=S.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...o}=t,i=S.useRef(null),s=pf(Hm,t.__scopeMenu),a=fC(Hm,t.__scopeMenu),u=bt(e,i),d=S.useRef(!1),h=()=>{const p=i.current;if(!n&&p){const g=new CustomEvent(bN,{bubbles:!0,cancelable:!0});p.addEventListener(bN,b=>r?.(b),{once:!0}),b3(p,g),g.defaultPrevented?d.current=!1:s.onClose()}};return w.jsx(g5,{...o,ref:u,disabled:n,onClick:we(t.onClick,h),onPointerDown:p=>{t.onPointerDown?.(p),d.current=!0},onPointerUp:we(t.onPointerUp,p=>{d.current||p.currentTarget?.click()}),onKeyDown:we(t.onKeyDown,p=>{const g=a.searchRef.current!=="";n||g&&p.key===" "||J1.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Vg.displayName=Hm;var g5=S.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...i}=t,s=fC(Hm,n),a=u5(n),u=S.useRef(null),d=bt(e,u),[h,p]=S.useState(!1),[g,b]=S.useState("");return S.useEffect(()=>{const v=u.current;v&&b((v.textContent??"").trim())},[i.children]),w.jsx(zd.ItemSlot,{scope:n,disabled:r,textValue:o??g,children:w.jsx(Q3,{asChild:!0,...a,focusable:!r,children:w.jsx(qe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:d,onPointerMove:we(t.onPointerMove,Ud(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:we(t.onPointerLeave,Ud(v=>s.onItemLeave(v))),onFocus:we(t.onFocus,()=>p(!0)),onBlur:we(t.onBlur,()=>p(!1))})})})}),Zne="MenuCheckboxItem",b5=S.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...o}=t;return w.jsx(C5,{scope:t.__scopeMenu,checked:n,children:w.jsx(Vg,{role:"menuitemcheckbox","aria-checked":Pm(n)?"mixed":n,...o,ref:e,"data-state":bC(n),onSelect:we(o.onSelect,()=>r?.(Pm(n)?!0:!n),{checkForDefaultPrevented:!1})})})});b5.displayName=Zne;var y5="MenuRadioGroup",[Yne,Wne]=Yl(y5,{value:void 0,onValueChange:()=>{}}),v5=S.forwardRef((t,e)=>{const{value:n,onValueChange:r,...o}=t,i=qr(r);return w.jsx(Yne,{scope:t.__scopeMenu,value:n,onValueChange:i,children:w.jsx(pC,{...o,ref:e})})});v5.displayName=y5;var w5="MenuRadioItem",x5=S.forwardRef((t,e)=>{const{value:n,...r}=t,o=Wne(w5,t.__scopeMenu),i=n===o.value;return w.jsx(C5,{scope:t.__scopeMenu,checked:i,children:w.jsx(Vg,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":bC(i),onSelect:we(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});x5.displayName=w5;var mC="MenuItemIndicator",[C5,Xne]=Yl(mC,{checked:!1}),S5=S.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...o}=t,i=Xne(mC,n);return w.jsx(Zl,{present:r||Pm(i.checked)||i.checked===!0,children:w.jsx(qe.span,{...o,ref:e,"data-state":bC(i.checked)})})});S5.displayName=mC;var Jne="MenuSeparator",k5=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return w.jsx(qe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});k5.displayName=Jne;var Qne="MenuArrow",E5=S.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,o=hf(n);return w.jsx(Ig,{...o,...r,ref:e})});E5.displayName=Qne;var gC="MenuSub",[ere,M5]=Yl(gC),T5=t=>{const{__scopeMenu:e,children:n,open:r=!1,onOpenChange:o}=t,i=Wl(gC,e),s=hf(e),[a,u]=S.useState(null),[d,h]=S.useState(null),p=qr(o);return S.useEffect(()=>(i.open===!1&&p(!1),()=>p(!1)),[i.open,p]),w.jsx(cf,{...s,children:w.jsx(d5,{scope:e,open:r,onOpenChange:p,content:d,onContentChange:h,children:w.jsx(ere,{scope:e,contentId:ao(),triggerId:ao(),trigger:a,onTriggerChange:u,children:n})})})};T5.displayName=gC;var Yu="MenuSubTrigger",A5=S.forwardRef((t,e)=>{const n=Wl(Yu,t.__scopeMenu),r=pf(Yu,t.__scopeMenu),o=M5(Yu,t.__scopeMenu),i=fC(Yu,t.__scopeMenu),s=S.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:u}=i,d={__scopeMenu:t.__scopeMenu},h=S.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return S.useEffect(()=>h,[h]),S.useEffect(()=>{const p=a.current;return()=>{window.clearTimeout(p),u(null)}},[a,u]),w.jsx(dC,{asChild:!0,...d,children:w.jsx(g5,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":R5(n.open),...t,ref:Rg(e,o.onTriggerChange),onClick:p=>{t.onClick?.(p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:we(t.onPointerMove,Ud(p=>{i.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:we(t.onPointerLeave,Ud(p=>{h();const g=n.content?.getBoundingClientRect();if(g){const b=n.content?.dataset.side,v=b==="right",C=v?-5:5,k=g[v?"left":"right"],E=g[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:p.clientX+C,y:p.clientY},{x:k,y:g.top},{x:E,y:g.top},{x:E,y:g.bottom},{x:k,y:g.bottom}],side:b}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(p),p.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:we(t.onKeyDown,p=>{const g=i.searchRef.current!=="";t.disabled||g&&p.key===" "||Bne[r.dir].includes(p.key)&&(n.onOpenChange(!0),n.content?.focus(),p.preventDefault())})})})});A5.displayName=Yu;var N5="MenuSubContent",O5=S.forwardRef((t,e)=>{const n=h5($r,t.__scopeMenu),{forceMount:r=n.forceMount,...o}=t,i=Wl($r,t.__scopeMenu),s=pf($r,t.__scopeMenu),a=M5(N5,t.__scopeMenu),u=S.useRef(null),d=bt(e,u);return w.jsx(zd.Provider,{scope:t.__scopeMenu,children:w.jsx(Zl,{present:r||i.open,children:w.jsx(zd.Slot,{scope:t.__scopeMenu,children:w.jsx(hC,{id:a.contentId,"aria-labelledby":a.triggerId,...o,ref:d,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{s.isUsingKeyboardRef.current&&u.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:we(t.onFocusOutside,h=>{h.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:we(t.onEscapeKeyDown,h=>{s.onClose(),h.preventDefault()}),onKeyDown:we(t.onKeyDown,h=>{const p=h.currentTarget.contains(h.target),g=Ine[s.dir].includes(h.key);p&&g&&(i.onOpenChange(!1),a.trigger?.focus(),h.preventDefault())})})})})})});O5.displayName=N5;function R5(t){return t?"open":"closed"}function Pm(t){return t==="indeterminate"}function bC(t){return Pm(t)?"indeterminate":t?"checked":"unchecked"}function tre(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function nre(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function rre(t,e,n){const o=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let s=nre(t,Math.max(i,0));o.length===1&&(s=s.filter(d=>d!==n));const u=s.find(d=>d.toLowerCase().startsWith(o.toLowerCase()));return u!==n?u:void 0}function ore(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],u=e[s],d=a.x,h=a.y,p=u.x,g=u.y;h>r!=g>r&&n<(p-d)*(r-h)/(g-h)+d&&(o=!o)}return o}function ire(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return ore(n,e)}function Ud(t){return e=>e.pointerType==="mouse"?t(e):void 0}var sre=f5,lre=dC,are=p5,cre=pC,ure=m5,dre=Vg,fre=b5,hre=v5,pre=x5,mre=S5,gre=k5,bre=E5,yre=T5,vre=A5,wre=O5,zg="DropdownMenu",[xre,Xse]=Po(zg,[c5]),$n=c5(),[Cre,D5]=xre(zg),_5=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:o,defaultOpen:i,onOpenChange:s,modal:a=!0}=t,u=$n(e),d=S.useRef(null),[h,p]=Ci({prop:o,defaultProp:i??!1,onChange:s,caller:zg});return w.jsx(Cre,{scope:e,triggerId:ao(),triggerRef:d,contentId:ao(),open:h,onOpenChange:p,onOpenToggle:S.useCallback(()=>p(g=>!g),[p]),modal:a,children:w.jsx(sre,{...u,open:h,onOpenChange:p,dir:r,modal:a,children:n})})};_5.displayName=zg;var L5="DropdownMenuTrigger",B5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=t,i=D5(L5,n),s=$n(n);return w.jsx(lre,{asChild:!0,...s,children:w.jsx(qe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:Rg(e,i.triggerRef),onPointerDown:we(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:we(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});B5.displayName=L5;var I5="DropdownMenuContent",H5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=D5(I5,n),i=$n(n),s=S.useRef(!1);return w.jsx(are,{id:o.contentId,"aria-labelledby":o.triggerId,...i,...r,ref:e,onCloseAutoFocus:we(t.onCloseAutoFocus,a=>{s.current||o.triggerRef.current?.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:we(t.onInteractOutside,a=>{const u=a.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,h=u.button===2||d;(!o.modal||h)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});H5.displayName=I5;var Sre="DropdownMenuGroup",kre=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(cre,{...o,...r,ref:e})});kre.displayName=Sre;var Ere="DropdownMenuLabel",P5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(ure,{...o,...r,ref:e})});P5.displayName=Ere;var Mre="DropdownMenuItem",j5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(dre,{...o,...r,ref:e})});j5.displayName=Mre;var Tre="DropdownMenuCheckboxItem",V5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(fre,{...o,...r,ref:e})});V5.displayName=Tre;var Are="DropdownMenuRadioGroup",Nre=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(hre,{...o,...r,ref:e})});Nre.displayName=Are;var Ore="DropdownMenuRadioItem",z5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(pre,{...o,...r,ref:e})});z5.displayName=Ore;var Rre="DropdownMenuItemIndicator",U5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(mre,{...o,...r,ref:e})});U5.displayName=Rre;var Dre="DropdownMenuSeparator",$5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(gre,{...o,...r,ref:e})});$5.displayName=Dre;var _re="DropdownMenuArrow",Lre=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(bre,{...o,...r,ref:e})});Lre.displayName=_re;var Bre=t=>{const{__scopeDropdownMenu:e,children:n,open:r,onOpenChange:o,defaultOpen:i}=t,s=$n(e),[a,u]=Ci({prop:r,defaultProp:i??!1,onChange:o,caller:"DropdownMenuSub"});return w.jsx(yre,{...s,open:a,onOpenChange:u,children:n})},Ire="DropdownMenuSubTrigger",F5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(vre,{...o,...r,ref:e})});F5.displayName=Ire;var Hre="DropdownMenuSubContent",G5=S.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,o=$n(n);return w.jsx(wre,{...o,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});G5.displayName=Hre;var Pre=_5,jre=B5,q5=H5,K5=P5,Z5=j5,Y5=V5,W5=z5,X5=U5,J5=$5,Vre=Bre,Q5=F5,eL=G5;/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zre=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ure=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),yN=t=>{const e=Ure(t);return e.charAt(0).toUpperCase()+e.slice(1)},tL=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),$re=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fre={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gre=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:i,iconNode:s,...a},u)=>S.createElement("svg",{ref:u,...Fre,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tL("lucide",o),...!i&&!$re(a)&&{"aria-hidden":"true"},...a},[...s.map(([d,h])=>S.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=(t,e)=>{const n=S.forwardRef(({className:r,...o},i)=>S.createElement(Gre,{ref:i,iconNode:e,className:tL(`lucide-${zre(yN(t))}`,`lucide-${t}`,r),...o}));return n.displayName=yN(t),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qre=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nL=mf("check",qre);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kre=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rL=mf("chevron-down",Kre);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zre=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oL=mf("chevron-right",Zre);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yre=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Wre=mf("chevron-up",Yre);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Jre=mf("circle",Xre);var Qre="Label",iL=S.forwardRef((t,e)=>w.jsx(qe.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));iL.displayName=Qre;var sL=iL,Ug="Popover",[lL,Jse]=Po(Ug,[zs]),gf=zs(),[eoe,Xl]=lL(Ug),aL=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:o,onOpenChange:i,modal:s=!1}=t,a=gf(e),u=S.useRef(null),[d,h]=S.useState(!1),[p,g]=Ci({prop:r,defaultProp:o??!1,onChange:i,caller:Ug});return w.jsx(cf,{...a,children:w.jsx(eoe,{scope:e,contentId:ao(),triggerRef:u,open:p,onOpenChange:g,onOpenToggle:S.useCallback(()=>g(b=>!b),[g]),hasCustomAnchor:d,onCustomAnchorAdd:S.useCallback(()=>h(!0),[]),onCustomAnchorRemove:S.useCallback(()=>h(!1),[]),modal:s,children:n})})};aL.displayName=Ug;var cL="PopoverAnchor",toe=S.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Xl(cL,n),i=gf(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:a}=o;return S.useEffect(()=>(s(),()=>a()),[s,a]),w.jsx(uf,{...i,...r,ref:e})});toe.displayName=cL;var uL="PopoverTrigger",dL=S.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Xl(uL,n),i=gf(n),s=bt(e,o.triggerRef),a=w.jsx(qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":mL(o.open),...r,ref:s,onClick:we(t.onClick,o.onOpenToggle)});return o.hasCustomAnchor?a:w.jsx(uf,{asChild:!0,...i,children:a})});dL.displayName=uL;var noe="PopoverPortal",[Qse,roe]=lL(noe,{forceMount:void 0}),wc="PopoverContent",fL=S.forwardRef((t,e)=>{const n=roe(wc,t.__scopePopover),{forceMount:r=n.forceMount,...o}=t,i=Xl(wc,t.__scopePopover);return w.jsx(Zl,{present:r||i.open,children:i.modal?w.jsx(ioe,{...o,ref:e}):w.jsx(soe,{...o,ref:e})})});fL.displayName=wc;var ooe=Ul("PopoverContent.RemoveScroll"),ioe=S.forwardRef((t,e)=>{const n=Xl(wc,t.__scopePopover),r=S.useRef(null),o=bt(e,r),i=S.useRef(!1);return S.useEffect(()=>{const s=r.current;if(s)return uC(s)},[]),w.jsx(jg,{as:ooe,allowPinchZoom:!0,children:w.jsx(hL,{...t,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(t.onCloseAutoFocus,s=>{s.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:we(t.onPointerDownOutside,s=>{const a=s.detail.originalEvent,u=a.button===0&&a.ctrlKey===!0,d=a.button===2||u;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:we(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),soe=S.forwardRef((t,e)=>{const n=Xl(wc,t.__scopePopover),r=S.useRef(!1),o=S.useRef(!1);return w.jsx(hL,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||n.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const s=i.target;n.triggerRef.current?.contains(s)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&o.current&&i.preventDefault()}})}),hL=S.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...p}=t,g=Xl(wc,n),b=gf(n);return lC(),w.jsx(Lg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:i,children:w.jsx(af,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:h,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>g.onOpenChange(!1),children:w.jsx(Bg,{"data-state":mL(g.open),role:"dialog",id:g.contentId,...b,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),pL="PopoverClose",loe=S.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=Xl(pL,n);return w.jsx(qe.button,{type:"button",...r,ref:e,onClick:we(t.onClick,()=>o.onOpenChange(!1))})});loe.displayName=pL;var aoe="PopoverArrow",coe=S.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,o=gf(n);return w.jsx(Ig,{...o,...r,ref:e})});coe.displayName=aoe;function mL(t){return t?"open":"closed"}var uoe=aL,doe=dL,gL=fL;function vN(t,[e,n]){return Math.min(n,Math.max(e,t))}function foe(t){const e=S.useRef({value:t,previous:t});return S.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var bL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),hoe="VisuallyHidden",yL=S.forwardRef((t,e)=>w.jsx(qe.span,{...t,ref:e,style:{...bL,...t.style}}));yL.displayName=hoe;var poe=yL,moe=[" ","Enter","ArrowUp","ArrowDown"],goe=[" ","Enter"],$l="Select",[$g,Fg,boe]=sC($l),[Lc,ele]=Po($l,[boe,zs]),Gg=zs(),[yoe,Us]=Lc($l),[voe,woe]=Lc($l),vL=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:o,onOpenChange:i,value:s,defaultValue:a,onValueChange:u,dir:d,name:h,autoComplete:p,disabled:g,required:b,form:v}=t,C=Gg(e),[k,E]=S.useState(null),[T,N]=S.useState(null),[_,O]=S.useState(!1),$=_g(d),[H,P]=Ci({prop:r,defaultProp:o??!1,onChange:i,caller:$l}),[W,ie]=Ci({prop:s,defaultProp:a,onChange:u,caller:$l}),ge=S.useRef(null),ne=k?v||!!k.closest("form"):!0,[fe,he]=S.useState(new Set),oe=Array.from(fe).map(B=>B.props.value).join(";");return w.jsx(cf,{...C,children:w.jsxs(yoe,{required:b,scope:e,trigger:k,onTriggerChange:E,valueNode:T,onValueNodeChange:N,valueNodeHasChildren:_,onValueNodeHasChildrenChange:O,contentId:ao(),value:W,onValueChange:ie,open:H,onOpenChange:P,dir:$,triggerPointerDownPosRef:ge,disabled:g,children:[w.jsx($g.Provider,{scope:e,children:w.jsx(voe,{scope:t.__scopeSelect,onNativeOptionAdd:S.useCallback(B=>{he(Y=>new Set(Y).add(B))},[]),onNativeOptionRemove:S.useCallback(B=>{he(Y=>{const J=new Set(Y);return J.delete(B),J})},[]),children:n})}),ne?w.jsxs(UL,{"aria-hidden":!0,required:b,tabIndex:-1,name:h,autoComplete:p,value:W,onChange:B=>ie(B.target.value),disabled:g,form:v,children:[W===void 0?w.jsx("option",{value:""}):null,Array.from(fe)]},oe):null]})})};vL.displayName=$l;var wL="SelectTrigger",xL=S.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...o}=t,i=Gg(n),s=Us(wL,n),a=s.disabled||r,u=bt(e,s.onTriggerChange),d=Fg(n),h=S.useRef("touch"),[p,g,b]=FL(C=>{const k=d().filter(N=>!N.disabled),E=k.find(N=>N.value===s.value),T=GL(k,C,E);T!==void 0&&s.onValueChange(T.value)}),v=C=>{a||(s.onOpenChange(!0),b()),C&&(s.triggerPointerDownPosRef.current={x:Math.round(C.pageX),y:Math.round(C.pageY)})};return w.jsx(uf,{asChild:!0,...i,children:w.jsx(qe.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":$L(s.value)?"":void 0,...o,ref:u,onClick:we(o.onClick,C=>{C.currentTarget.focus(),h.current!=="mouse"&&v(C)}),onPointerDown:we(o.onPointerDown,C=>{h.current=C.pointerType;const k=C.target;k.hasPointerCapture(C.pointerId)&&k.releasePointerCapture(C.pointerId),C.button===0&&C.ctrlKey===!1&&C.pointerType==="mouse"&&(v(C),C.preventDefault())}),onKeyDown:we(o.onKeyDown,C=>{const k=p.current!=="";!(C.ctrlKey||C.altKey||C.metaKey)&&C.key.length===1&&g(C.key),!(k&&C.key===" ")&&moe.includes(C.key)&&(v(),C.preventDefault())})})})});xL.displayName=wL;var CL="SelectValue",SL=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,children:i,placeholder:s="",...a}=t,u=Us(CL,n),{onValueNodeHasChildrenChange:d}=u,h=i!==void 0,p=bt(e,u.onValueNodeChange);return mn(()=>{d(h)},[d,h]),w.jsx(qe.span,{...a,ref:p,style:{pointerEvents:"none"},children:$L(u.value)?w.jsx(w.Fragment,{children:s}):i})});SL.displayName=CL;var xoe="SelectIcon",kL=S.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...o}=t;return w.jsx(qe.span,{"aria-hidden":!0,...o,ref:e,children:r||"▼"})});kL.displayName=xoe;var Fl="SelectContent",EL=S.forwardRef((t,e)=>{const n=Us(Fl,t.__scopeSelect),[r,o]=S.useState();if(mn(()=>{o(new DocumentFragment)},[]),!n.open){const i=r;return i?vr.createPortal(w.jsx(ML,{scope:t.__scopeSelect,children:w.jsx($g.Slot,{scope:t.__scopeSelect,children:w.jsx("div",{children:t.children})})}),i):null}return w.jsx(TL,{...t,ref:e})});EL.displayName=Fl;var Wr=10,[ML,$s]=Lc(Fl),Coe="SelectContentImpl",Soe=Ul("SelectContent.RemoveScroll"),TL=S.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:i,onPointerDownOutside:s,side:a,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:b,sticky:v,hideWhenDetached:C,avoidCollisions:k,...E}=t,T=Us(Fl,n),[N,_]=S.useState(null),[O,$]=S.useState(null),H=bt(e,ue=>_(ue)),[P,W]=S.useState(null),[ie,ge]=S.useState(null),ne=Fg(n),[fe,he]=S.useState(!1),oe=S.useRef(!1);S.useEffect(()=>{if(N)return uC(N)},[N]),lC();const B=S.useCallback(ue=>{const[Te,...ct]=ne().map(vt=>vt.ref.current),[rt]=ct.slice(-1),st=document.activeElement;for(const vt of ue)if(vt===st||(vt?.scrollIntoView({block:"nearest"}),vt===Te&&O&&(O.scrollTop=0),vt===rt&&O&&(O.scrollTop=O.scrollHeight),vt?.focus(),document.activeElement!==st))return},[ne,O]),Y=S.useCallback(()=>B([P,N]),[B,P,N]);S.useEffect(()=>{fe&&Y()},[fe,Y]);const{onOpenChange:J,triggerPointerDownPosRef:Z}=T;S.useEffect(()=>{if(N){let ue={x:0,y:0};const Te=rt=>{ue={x:Math.abs(Math.round(rt.pageX)-(Z.current?.x??0)),y:Math.abs(Math.round(rt.pageY)-(Z.current?.y??0))}},ct=rt=>{ue.x<=10&&ue.y<=10?rt.preventDefault():N.contains(rt.target)||J(!1),document.removeEventListener("pointermove",Te),Z.current=null};return Z.current!==null&&(document.addEventListener("pointermove",Te),document.addEventListener("pointerup",ct,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Te),document.removeEventListener("pointerup",ct,{capture:!0})}}},[N,J,Z]),S.useEffect(()=>{const ue=()=>J(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[J]);const[R,K]=FL(ue=>{const Te=ne().filter(st=>!st.disabled),ct=Te.find(st=>st.ref.current===document.activeElement),rt=GL(Te,ue,ct);rt&&setTimeout(()=>rt.ref.current.focus())}),ae=S.useCallback((ue,Te,ct)=>{const rt=!oe.current&&!ct;(T.value!==void 0&&T.value===Te||rt)&&(W(ue),rt&&(oe.current=!0))},[T.value]),ce=S.useCallback(()=>N?.focus(),[N]),ve=S.useCallback((ue,Te,ct)=>{const rt=!oe.current&&!ct;(T.value!==void 0&&T.value===Te||rt)&&ge(ue)},[T.value]),Ie=r==="popper"?Q1:AL,me=Ie===Q1?{side:a,sideOffset:u,align:d,alignOffset:h,arrowPadding:p,collisionBoundary:g,collisionPadding:b,sticky:v,hideWhenDetached:C,avoidCollisions:k}:{};return w.jsx(ML,{scope:n,content:N,viewport:O,onViewportChange:$,itemRefCallback:ae,selectedItem:P,onItemLeave:ce,itemTextRefCallback:ve,focusSelectedItem:Y,selectedItemText:ie,position:r,isPositioned:fe,searchRef:R,children:w.jsx(jg,{as:Soe,allowPinchZoom:!0,children:w.jsx(Lg,{asChild:!0,trapped:T.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:we(o,ue=>{T.trigger?.focus({preventScroll:!0}),ue.preventDefault()}),children:w.jsx(af,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:w.jsx(Ie,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:ue=>ue.preventDefault(),...E,...me,onPlaced:()=>he(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:we(E.onKeyDown,ue=>{const Te=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!Te&&ue.key.length===1&&K(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let rt=ne().filter(st=>!st.disabled).map(st=>st.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(rt=rt.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const st=ue.target,vt=rt.indexOf(st);rt=rt.slice(vt+1)}setTimeout(()=>B(rt)),ue.preventDefault()}})})})})})})});TL.displayName=Coe;var koe="SelectItemAlignedPosition",AL=S.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...o}=t,i=Us(Fl,n),s=$s(Fl,n),[a,u]=S.useState(null),[d,h]=S.useState(null),p=bt(e,H=>h(H)),g=Fg(n),b=S.useRef(!1),v=S.useRef(!0),{viewport:C,selectedItem:k,selectedItemText:E,focusSelectedItem:T}=s,N=S.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&d&&C&&k&&E){const H=i.trigger.getBoundingClientRect(),P=d.getBoundingClientRect(),W=i.valueNode.getBoundingClientRect(),ie=E.getBoundingClientRect();if(i.dir!=="rtl"){const st=ie.left-P.left,vt=W.left-st,rn=H.left-vt,Fn=H.width+rn,Ai=Math.max(Fn,P.width),Fs=window.innerWidth-Wr,En=vN(vt,[Wr,Math.max(Wr,Fs-Ai)]);a.style.minWidth=Fn+"px",a.style.left=En+"px"}else{const st=P.right-ie.right,vt=window.innerWidth-W.right-st,rn=window.innerWidth-H.right-vt,Fn=H.width+rn,Ai=Math.max(Fn,P.width),Fs=window.innerWidth-Wr,En=vN(vt,[Wr,Math.max(Wr,Fs-Ai)]);a.style.minWidth=Fn+"px",a.style.right=En+"px"}const ge=g(),ne=window.innerHeight-Wr*2,fe=C.scrollHeight,he=window.getComputedStyle(d),oe=parseInt(he.borderTopWidth,10),B=parseInt(he.paddingTop,10),Y=parseInt(he.borderBottomWidth,10),J=parseInt(he.paddingBottom,10),Z=oe+B+fe+J+Y,R=Math.min(k.offsetHeight*5,Z),K=window.getComputedStyle(C),ae=parseInt(K.paddingTop,10),ce=parseInt(K.paddingBottom,10),ve=H.top+H.height/2-Wr,Ie=ne-ve,me=k.offsetHeight/2,ue=k.offsetTop+me,Te=oe+B+ue,ct=Z-Te;if(Te<=ve){const st=ge.length>0&&k===ge[ge.length-1].ref.current;a.style.bottom="0px";const vt=d.clientHeight-C.offsetTop-C.offsetHeight,rn=Math.max(Ie,me+(st?ce:0)+vt+Y),Fn=Te+rn;a.style.height=Fn+"px"}else{const st=ge.length>0&&k===ge[0].ref.current;a.style.top="0px";const rn=Math.max(ve,oe+C.offsetTop+(st?ae:0)+me)+ct;a.style.height=rn+"px",C.scrollTop=Te-ve+C.offsetTop}a.style.margin=`${Wr}px 0`,a.style.minHeight=R+"px",a.style.maxHeight=ne+"px",r?.(),requestAnimationFrame(()=>b.current=!0)}},[g,i.trigger,i.valueNode,a,d,C,k,E,i.dir,r]);mn(()=>N(),[N]);const[_,O]=S.useState();mn(()=>{d&&O(window.getComputedStyle(d).zIndex)},[d]);const $=S.useCallback(H=>{H&&v.current===!0&&(N(),T?.(),v.current=!1)},[N,T]);return w.jsx(Moe,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:b,onScrollButtonChange:$,children:w.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:w.jsx(qe.div,{...o,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});AL.displayName=koe;var Eoe="SelectPopperPosition",Q1=S.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=Wr,...i}=t,s=Gg(n);return w.jsx(Bg,{...s,...i,ref:e,align:r,collisionPadding:o,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Q1.displayName=Eoe;var[Moe,yC]=Lc(Fl,{}),ew="SelectViewport",NL=S.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...o}=t,i=$s(ew,n),s=yC(ew,n),a=bt(e,i.onViewportChange),u=S.useRef(0);return w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),w.jsx($g.Slot,{scope:n,children:w.jsx(qe.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:we(o.onScroll,d=>{const h=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:g}=s;if(g?.current&&p){const b=Math.abs(u.current-h.scrollTop);if(b>0){const v=window.innerHeight-Wr*2,C=parseFloat(p.style.minHeight),k=parseFloat(p.style.height),E=Math.max(C,k);if(E<v){const T=E+b,N=Math.min(v,T),_=T-N;p.style.height=N+"px",p.style.bottom==="0px"&&(h.scrollTop=_>0?_:0,p.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});NL.displayName=ew;var OL="SelectGroup",[Toe,Aoe]=Lc(OL),Noe=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=ao();return w.jsx(Toe,{scope:n,id:o,children:w.jsx(qe.div,{role:"group","aria-labelledby":o,...r,ref:e})})});Noe.displayName=OL;var RL="SelectLabel",DL=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=Aoe(RL,n);return w.jsx(qe.div,{id:o.id,...r,ref:e})});DL.displayName=RL;var jm="SelectItem",[Ooe,_L]=Lc(jm),LL=S.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:i,...s}=t,a=Us(jm,n),u=$s(jm,n),d=a.value===r,[h,p]=S.useState(i??""),[g,b]=S.useState(!1),v=bt(e,T=>u.itemRefCallback?.(T,r,o)),C=ao(),k=S.useRef("touch"),E=()=>{o||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return w.jsx(Ooe,{scope:n,value:r,disabled:o,textId:C,isSelected:d,onItemTextChange:S.useCallback(T=>{p(N=>N||(T?.textContent??"").trim())},[]),children:w.jsx($g.ItemSlot,{scope:n,value:r,disabled:o,textValue:h,children:w.jsx(qe.div,{role:"option","aria-labelledby":C,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...s,ref:v,onFocus:we(s.onFocus,()=>b(!0)),onBlur:we(s.onBlur,()=>b(!1)),onClick:we(s.onClick,()=>{k.current!=="mouse"&&E()}),onPointerUp:we(s.onPointerUp,()=>{k.current==="mouse"&&E()}),onPointerDown:we(s.onPointerDown,T=>{k.current=T.pointerType}),onPointerMove:we(s.onPointerMove,T=>{k.current=T.pointerType,o?u.onItemLeave?.():k.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:we(s.onPointerLeave,T=>{T.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:we(s.onKeyDown,T=>{u.searchRef?.current!==""&&T.key===" "||(goe.includes(T.key)&&E(),T.key===" "&&T.preventDefault())})})})})});LL.displayName=jm;var Wu="SelectItemText",BL=S.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:o,...i}=t,s=Us(Wu,n),a=$s(Wu,n),u=_L(Wu,n),d=woe(Wu,n),[h,p]=S.useState(null),g=bt(e,E=>p(E),u.onItemTextChange,E=>a.itemTextRefCallback?.(E,u.value,u.disabled)),b=h?.textContent,v=S.useMemo(()=>w.jsx("option",{value:u.value,disabled:u.disabled,children:b},u.value),[u.disabled,u.value,b]),{onNativeOptionAdd:C,onNativeOptionRemove:k}=d;return mn(()=>(C(v),()=>k(v)),[C,k,v]),w.jsxs(w.Fragment,{children:[w.jsx(qe.span,{id:u.textId,...i,ref:g}),u.isSelected&&s.valueNode&&!s.valueNodeHasChildren?vr.createPortal(i.children,s.valueNode):null]})});BL.displayName=Wu;var IL="SelectItemIndicator",HL=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return _L(IL,n).isSelected?w.jsx(qe.span,{"aria-hidden":!0,...r,ref:e}):null});HL.displayName=IL;var tw="SelectScrollUpButton",PL=S.forwardRef((t,e)=>{const n=$s(tw,t.__scopeSelect),r=yC(tw,t.__scopeSelect),[o,i]=S.useState(!1),s=bt(e,r.onScrollButtonChange);return mn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=u.scrollTop>0;i(d)};const u=n.viewport;return a(),u.addEventListener("scroll",a),()=>u.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?w.jsx(VL,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:u}=n;a&&u&&(a.scrollTop=a.scrollTop-u.offsetHeight)}}):null});PL.displayName=tw;var nw="SelectScrollDownButton",jL=S.forwardRef((t,e)=>{const n=$s(nw,t.__scopeSelect),r=yC(nw,t.__scopeSelect),[o,i]=S.useState(!1),s=bt(e,r.onScrollButtonChange);return mn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<d;i(h)};const u=n.viewport;return a(),u.addEventListener("scroll",a),()=>u.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),o?w.jsx(VL,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:u}=n;a&&u&&(a.scrollTop=a.scrollTop+u.offsetHeight)}}):null});jL.displayName=nw;var VL=S.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=t,i=$s("SelectScrollButton",n),s=S.useRef(null),a=Fg(n),u=S.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return S.useEffect(()=>()=>u(),[u]),mn(()=>{a().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[a]),w.jsx(qe.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:we(o.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:we(o.onPointerMove,()=>{i.onItemLeave?.(),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:we(o.onPointerLeave,()=>{u()})})}),Roe="SelectSeparator",zL=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return w.jsx(qe.div,{"aria-hidden":!0,...r,ref:e})});zL.displayName=Roe;var rw="SelectArrow",Doe=S.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,o=Gg(n),i=Us(rw,n),s=$s(rw,n);return i.open&&s.position==="popper"?w.jsx(Ig,{...o,...r,ref:e}):null});Doe.displayName=rw;var _oe="SelectBubbleInput",UL=S.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const o=S.useRef(null),i=bt(r,o),s=foe(e);return S.useEffect(()=>{const a=o.current;if(!a)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(s!==e&&h){const p=new Event("change",{bubbles:!0});h.call(a,e),a.dispatchEvent(p)}},[s,e]),w.jsx(qe.select,{...n,style:{...bL,...n.style},ref:i,defaultValue:e})});UL.displayName=_oe;function $L(t){return t===""||t===void 0}function FL(t){const e=qr(t),n=S.useRef(""),r=S.useRef(0),o=S.useCallback(s=>{const a=n.current+s;e(a),function u(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(a)},[e]),i=S.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,i]}function GL(t,e,n){const o=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let s=Loe(t,Math.max(i,0));o.length===1&&(s=s.filter(d=>d!==n));const u=s.find(d=>d.textValue.toLowerCase().startsWith(o.toLowerCase()));return u!==n?u:void 0}function Loe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Boe=vL,qL=xL,Ioe=SL,Hoe=kL,KL=EL,Poe=NL,ZL=DL,YL=LL,joe=BL,Voe=HL,WL=PL,XL=jL,JL=zL,qg="Tabs",[zoe,tle]=Po(qg,[Hg]),QL=Hg(),[Uoe,vC]=zoe(qg),eB=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:i,orientation:s="horizontal",dir:a,activationMode:u="automatic",...d}=t,h=_g(a),[p,g]=Ci({prop:r,onChange:o,defaultProp:i??"",caller:qg});return w.jsx(Uoe,{scope:n,baseId:ao(),value:p,onValueChange:g,orientation:s,dir:h,activationMode:u,children:w.jsx(qe.div,{dir:h,"data-orientation":s,...d,ref:e})})});eB.displayName=qg;var tB="TabsList",nB=S.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...o}=t,i=vC(tB,n),s=QL(n);return w.jsx(J3,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:w.jsx(qe.div,{role:"tablist","aria-orientation":i.orientation,...o,ref:e})})});nB.displayName=tB;var rB="TabsTrigger",oB=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...i}=t,s=vC(rB,n),a=QL(n),u=lB(s.baseId,r),d=aB(s.baseId,r),h=r===s.value;return w.jsx(Q3,{asChild:!0,...a,focusable:!o,active:h,children:w.jsx(qe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u,...i,ref:e,onMouseDown:we(t.onMouseDown,p=>{!o&&p.button===0&&p.ctrlKey===!1?s.onValueChange(r):p.preventDefault()}),onKeyDown:we(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&s.onValueChange(r)}),onFocus:we(t.onFocus,()=>{const p=s.activationMode!=="manual";!h&&!o&&p&&s.onValueChange(r)})})})});oB.displayName=rB;var iB="TabsContent",sB=S.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:o,children:i,...s}=t,a=vC(iB,n),u=lB(a.baseId,r),d=aB(a.baseId,r),h=r===a.value,p=S.useRef(h);return S.useEffect(()=>{const g=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(g)},[]),w.jsx(Zl,{present:o||h,children:({present:g})=>w.jsx(qe.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:d,tabIndex:0,...s,ref:e,style:{...t.style,animationDuration:p.current?"0s":void 0},children:g&&i})})});sB.displayName=iB;function lB(t,e){return`${t}-trigger-${e}`}function aB(t,e){return`${t}-content-${e}`}var $oe=eB,cB=nB,uB=oB,dB=sB,fB="Toggle",hB=S.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:o,...i}=t,[s,a]=Ci({prop:n,onChange:o,defaultProp:r??!1,caller:fB});return w.jsx(qe.button,{type:"button","aria-pressed":s,"data-state":s?"on":"off","data-disabled":t.disabled?"":void 0,...i,ref:e,onClick:we(t.onClick,()=>{t.disabled||a(!s)})})});hB.displayName=fB;var pB=hB,[Kg,nle]=Po("Tooltip",[zs]),Zg=zs(),mB="TooltipProvider",Foe=700,ow="tooltip.open",[Goe,wC]=Kg(mB),gB=t=>{const{__scopeTooltip:e,delayDuration:n=Foe,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:i}=t,s=S.useRef(!0),a=S.useRef(!1),u=S.useRef(0);return S.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),w.jsx(Goe,{scope:e,isOpenDelayedRef:s,delayDuration:n,onOpen:S.useCallback(()=>{window.clearTimeout(u.current),s.current=!1},[]),onClose:S.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:S.useCallback(d=>{a.current=d},[]),disableHoverableContent:o,children:i})};gB.displayName=mB;var $d="Tooltip",[qoe,Yg]=Kg($d),bB=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:o,onOpenChange:i,disableHoverableContent:s,delayDuration:a}=t,u=wC($d,t.__scopeTooltip),d=Zg(e),[h,p]=S.useState(null),g=ao(),b=S.useRef(0),v=s??u.disableHoverableContent,C=a??u.delayDuration,k=S.useRef(!1),[E,T]=Ci({prop:r,defaultProp:o??!1,onChange:H=>{H?(u.onOpen(),document.dispatchEvent(new CustomEvent(ow))):u.onClose(),i?.(H)},caller:$d}),N=S.useMemo(()=>E?k.current?"delayed-open":"instant-open":"closed",[E]),_=S.useCallback(()=>{window.clearTimeout(b.current),b.current=0,k.current=!1,T(!0)},[T]),O=S.useCallback(()=>{window.clearTimeout(b.current),b.current=0,T(!1)},[T]),$=S.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{k.current=!0,T(!0),b.current=0},C)},[C,T]);return S.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),w.jsx(cf,{...d,children:w.jsx(qoe,{scope:e,contentId:g,open:E,stateAttribute:N,trigger:h,onTriggerChange:p,onTriggerEnter:S.useCallback(()=>{u.isOpenDelayedRef.current?$():_()},[u.isOpenDelayedRef,$,_]),onTriggerLeave:S.useCallback(()=>{v?O():(window.clearTimeout(b.current),b.current=0)},[O,v]),onOpen:_,onClose:O,disableHoverableContent:v,children:n})})};bB.displayName=$d;var iw="TooltipTrigger",yB=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=Yg(iw,n),i=wC(iw,n),s=Zg(n),a=S.useRef(null),u=bt(e,a,o.onTriggerChange),d=S.useRef(!1),h=S.useRef(!1),p=S.useCallback(()=>d.current=!1,[]);return S.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),w.jsx(uf,{asChild:!0,...s,children:w.jsx(qe.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:u,onPointerMove:we(t.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),h.current=!0)}),onPointerLeave:we(t.onPointerLeave,()=>{o.onTriggerLeave(),h.current=!1}),onPointerDown:we(t.onPointerDown,()=>{o.open&&o.onClose(),d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:we(t.onFocus,()=>{d.current||o.onOpen()}),onBlur:we(t.onBlur,o.onClose),onClick:we(t.onClick,o.onClose)})})});yB.displayName=iw;var Koe="TooltipPortal",[rle,Zoe]=Kg(Koe,{forceMount:void 0}),xc="TooltipContent",vB=S.forwardRef((t,e)=>{const n=Zoe(xc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...i}=t,s=Yg(xc,t.__scopeTooltip);return w.jsx(Zl,{present:r||s.open,children:s.disableHoverableContent?w.jsx(wB,{side:o,...i,ref:e}):w.jsx(Yoe,{side:o,...i,ref:e})})}),Yoe=S.forwardRef((t,e)=>{const n=Yg(xc,t.__scopeTooltip),r=wC(xc,t.__scopeTooltip),o=S.useRef(null),i=bt(e,o),[s,a]=S.useState(null),{trigger:u,onClose:d}=n,h=o.current,{onPointerInTransitChange:p}=r,g=S.useCallback(()=>{a(null),p(!1)},[p]),b=S.useCallback((v,C)=>{const k=v.currentTarget,E={x:v.clientX,y:v.clientY},T=eie(E,k.getBoundingClientRect()),N=tie(E,T),_=nie(C.getBoundingClientRect()),O=oie([...N,..._]);a(O),p(!0)},[p]);return S.useEffect(()=>()=>g(),[g]),S.useEffect(()=>{if(u&&h){const v=k=>b(k,h),C=k=>b(k,u);return u.addEventListener("pointerleave",v),h.addEventListener("pointerleave",C),()=>{u.removeEventListener("pointerleave",v),h.removeEventListener("pointerleave",C)}}},[u,h,b,g]),S.useEffect(()=>{if(s){const v=C=>{const k=C.target,E={x:C.clientX,y:C.clientY},T=u?.contains(k)||h?.contains(k),N=!rie(E,s);T?g():N&&(g(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,h,s,d,g]),w.jsx(wB,{...t,ref:i})}),[Woe,Xoe]=Kg($d,{isInside:!1}),Joe=hee("TooltipContent"),wB=S.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:s,...a}=t,u=Yg(xc,n),d=Zg(n),{onClose:h}=u;return S.useEffect(()=>(document.addEventListener(ow,h),()=>document.removeEventListener(ow,h)),[h]),S.useEffect(()=>{if(u.trigger){const p=g=>{g.target?.contains(u.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[u.trigger,h]),w.jsx(af,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:w.jsxs(Bg,{"data-state":u.stateAttribute,...d,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[w.jsx(Joe,{children:r}),w.jsx(Woe,{scope:n,isInside:!0,children:w.jsx(poe,{id:u.contentId,role:"tooltip",children:o||r})})]})})});vB.displayName=xc;var xB="TooltipArrow",Qoe=S.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,o=Zg(n);return Xoe(xB,n).isInside?null:w.jsx(Ig,{...o,...r,ref:e})});Qoe.displayName=xB;function eie(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,o,i)){case i:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function tie(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function nie(t){const{top:e,right:n,bottom:r,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:r},{x:o,y:r}]}function rie(t,e){const{x:n,y:r}=t;let o=!1;for(let i=0,s=e.length-1;i<e.length;s=i++){const a=e[i],u=e[s],d=a.x,h=a.y,p=u.x,g=u.y;h>r!=g>r&&n<(p-d)*(r-h)/(g-h)+d&&(o=!o)}return o}function oie(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),iie(e)}function iie(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const o=t[r];for(;e.length>=2;){const i=e[e.length-1],s=e[e.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const o=t[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(o.y-s.y)>=(i.y-s.y)*(o.x-s.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var sie=gB,lie=bB,aie=yB,CB=vB;const cie=ote({prefix:"bn-"});function ye(...t){return cie(A3(t))}const SB=S.forwardRef(({className:t,...e},n)=>w.jsx(k3,{ref:n,className:ye("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));SB.displayName=k3.displayName;const kB=S.forwardRef(({className:t,...e},n)=>w.jsx(E3,{ref:n,className:ye("aspect-square h-full w-full",t),...e}));kB.displayName=E3.displayName;const EB=S.forwardRef(({className:t,...e},n)=>w.jsx(M3,{ref:n,className:ye("bg-muted flex h-full w-full items-center justify-center rounded-full",t),...e}));EB.displayName=M3.displayName;const uie=Dg("bn-inline-flex bn-items-center bn-rounded-full bn-border bn-px-2.5 bn-py-0.5 bn-text-xs bn-font-semibold bn-transition-colors focus:bn-outline-none focus:bn-ring-2 focus:bn-ring-ring focus:bn-ring-offset-2",{variants:{variant:{default:"bn-border-transparent bn-bg-primary bn-text-primary-foreground hover:bn-bg-primary/80",secondary:"bn-border-transparent bn-bg-secondary bn-text-secondary-foreground hover:bn-bg-secondary/80",destructive:"bn-border-transparent bn-bg-destructive bn-text-destructive-foreground hover:bn-bg-destructive/80",outline:"bn-text-foreground"}},defaultVariants:{variant:"default"}});function die({className:t,variant:e,...n}){return w.jsx("div",{className:ye(uie({variant:e}),t),...n})}const fie=Dg("bn-inline-flex bn-items-center bn-justify-center bn-whitespace-nowrap bn-rounded-md bn-text-sm bn-font-medium bn-ring-offset-background bn-transition-colors focus-visible:bn-outline-none focus-visible:bn-ring-2 focus-visible:bn-ring-ring focus-visible:bn-ring-offset-2 disabled:bn-pointer-events-none disabled:bn-opacity-50",{variants:{variant:{default:"bn-bg-primary bn-text-primary-foreground hover:bn-bg-primary/90",destructive:"bn-bg-destructive bn-text-destructive-foreground hover:bn-bg-destructive/90",outline:"bn-border bn-border-input bn-bg-background hover:bn-bg-accent hover:bn-text-accent-foreground",secondary:"bn-bg-secondary bn-text-secondary-foreground hover:bn-bg-secondary/80",ghost:"hover:bn-bg-accent hover:bn-text-accent-foreground",link:"bn-text-primary bn-underline-offset-4 hover:bn-underline"},size:{default:"bn-h-10 bn-px-4 bn-py-2",sm:"bn-h-9 bn-rounded-md bn-px-3",lg:"bn-h-11 bn-rounded-md bn-px-8",icon:"bn-h-10 bn-w-10"}},defaultVariants:{variant:"default",size:"default"}}),MB=S.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...o},i)=>w.jsx(r?m3:"button",{className:ye(fie({variant:e,size:n,className:t})),ref:i,type:"button",...o}));MB.displayName="Button";const TB=S.forwardRef(({className:t,...e},n)=>w.jsx("div",{ref:n,className:ye("bn-rounded-lg bn-border bn-bg-card bn-text-card-foreground bn-shadow-sm",t),...e}));TB.displayName="Card";const hie=S.forwardRef(({className:t,...e},n)=>w.jsx("div",{ref:n,className:ye("bn-flex bn-flex-col bn-space-y-1.5 bn-p-6",t),...e}));hie.displayName="CardHeader";const pie=S.forwardRef(({className:t,...e},n)=>w.jsx("h3",{ref:n,className:ye("bn-text-2xl bn-font-semibold bn-leading-none bn-tracking-tight",t),...e}));pie.displayName="CardTitle";const mie=S.forwardRef(({className:t,...e},n)=>w.jsx("p",{ref:n,className:ye("bn-text-sm bn-text-muted-foreground",t),...e}));mie.displayName="CardDescription";const AB=S.forwardRef(({className:t,...e},n)=>w.jsx("div",{ref:n,className:ye("bn-p-6 bn-pt-0",t),...e}));AB.displayName="CardContent";const gie=S.forwardRef(({className:t,...e},n)=>w.jsx("div",{ref:n,className:ye("bn-flex bn-items-center bn-p-6 bn-pt-0",t),...e}));gie.displayName="CardFooter";const bie=Pre,yie=jre,vie=Vre,NB=S.forwardRef(({className:t,inset:e,children:n,...r},o)=>w.jsxs(Q5,{ref:o,className:ye("bn-flex bn-cursor-default bn-select-none bn-items-center bn-rounded-sm bn-px-2 bn-py-1.5 bn-text-sm bn-outline-none focus:bn-bg-accent data-[state=open]:bn-bg-accent",e&&"bn-pl-8",t),...r,children:[n,w.jsx(oL,{className:"bn-ml-auto bn-h-4 bn-w-4"})]}));NB.displayName=Q5.displayName;const OB=S.forwardRef(({className:t,...e},n)=>w.jsx(eL,{ref:n,className:ye("bn-z-50 bn-min-w-[8rem] bn-overflow-hidden bn-rounded-md bn-border bn-bg-popover bn-p-1 bn-text-popover-foreground bn-shadow-lg data-[state=open]:bn-animate-in data-[state=closed]:bn-animate-out data-[state=closed]:bn-fade-out-0 data-[state=open]:bn-fade-in-0 data-[state=closed]:bn-zoom-out-95 data-[state=open]:bn-zoom-in-95 data-[side=bottom]:bn-slide-in-from-top-2 data-[side=left]:bn-slide-in-from-right-2 data-[side=right]:bn-slide-in-from-left-2 data-[side=top]:bn-slide-in-from-bottom-2",t),...e}));OB.displayName=eL.displayName;const RB=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>w.jsx(q5,{ref:r,sideOffset:e,className:ye("bn-z-50 bn-min-w-[8rem] bn-overflow-hidden bn-rounded-md bn-border bn-bg-popover bn-p-1 bn-text-popover-foreground bn-shadow-md data-[state=open]:bn-animate-in data-[state=closed]:bn-animate-out data-[state=closed]:bn-fade-out-0 data-[state=open]:bn-fade-in-0 data-[state=closed]:bn-zoom-out-95 data-[state=open]:bn-zoom-in-95 data-[side=bottom]:bn-slide-in-from-top-2 data-[side=left]:bn-slide-in-from-right-2 data-[side=right]:bn-slide-in-from-left-2 data-[side=top]:bn-slide-in-from-bottom-2",t),...n}));RB.displayName=q5.displayName;const DB=S.forwardRef(({className:t,inset:e,...n},r)=>w.jsx(Z5,{ref:r,className:ye("bn-relative bn-flex bn-cursor-default bn-select-none bn-items-center bn-rounded-sm bn-px-2 bn-py-1.5 bn-text-sm bn-outline-none bn-transition-colors focus:bn-bg-accent focus:bn-text-accent-foreground data-[disabled]:bn-pointer-events-none data-[disabled]:bn-opacity-50",e&&"bn-pl-8",t),...n}));DB.displayName=Z5.displayName;const _B=S.forwardRef(({className:t,children:e,checked:n,...r},o)=>w.jsxs(Y5,{ref:o,className:ye("bn-relative bn-flex bn-cursor-default bn-select-none bn-items-center bn-rounded-sm bn-py-1.5 bn-pl-8 bn-pr-2 bn-text-sm bn-outline-none bn-transition-colors focus:bn-bg-accent focus:bn-text-accent-foreground data-[disabled]:bn-pointer-events-none data-[disabled]:bn-opacity-50",t),checked:n,...r,children:[w.jsx("span",{className:"bn-absolute bn-left-2 bn-flex bn-h-3.5 bn-w-3.5 bn-items-center bn-justify-center",children:w.jsx(X5,{children:w.jsx(nL,{className:"bn-h-4 bn-w-4"})})}),e]}));_B.displayName=Y5.displayName;const wie=S.forwardRef(({className:t,children:e,...n},r)=>w.jsxs(W5,{ref:r,className:ye("bn-relative bn-flex bn-cursor-default bn-select-none bn-items-center bn-rounded-sm bn-py-1.5 bn-pl-8 bn-pr-2 bn-text-sm bn-outline-none bn-transition-colors focus:bn-bg-accent focus:bn-text-accent-foreground data-[disabled]:bn-pointer-events-none data-[disabled]:bn-opacity-50",t),...n,children:[w.jsx("span",{className:"bn-absolute bn-left-2 bn-flex bn-h-3.5 bn-w-3.5 bn-items-center bn-justify-center",children:w.jsx(X5,{children:w.jsx(Jre,{className:"bn-h-2 bn-w-2 bn-fill-current"})})}),e]}));wie.displayName=W5.displayName;const LB=S.forwardRef(({className:t,inset:e,...n},r)=>w.jsx(K5,{ref:r,className:ye("bn-px-2 bn-py-1.5 bn-text-sm bn-font-semibold",e&&"bn-pl-8",t),...n}));LB.displayName=K5.displayName;const BB=S.forwardRef(({className:t,...e},n)=>w.jsx(J5,{ref:n,className:ye("bn--mx-1 bn-my-1 bn-h-px bn-bg-muted",t),...e}));BB.displayName=J5.displayName;const xie=Dg("bn-text-sm bn-font-medium bn-leading-none peer-disabled:bn-cursor-not-allowed peer-disabled:bn-opacity-70"),xC=S.forwardRef(({className:t,...e},n)=>w.jsx(sL,{ref:n,className:ye(xie(),t),...e}));xC.displayName=sL.displayName;const Cie=qQ,Sie=S.createContext({}),Wg=()=>{const t=S.useContext(Sie),e=S.useContext(IB),{getFieldState:n,formState:r}=GQ(),o=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...o}},IB=S.createContext({}),kie=S.forwardRef(({className:t,...e},n)=>{const r=S.useId();return w.jsx(IB.Provider,{value:{id:r},children:w.jsx("div",{ref:n,className:ye("bn-space-y-2",t),...e})})});kie.displayName="FormItem";const Eie=S.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:o}=Wg();return w.jsx(xC,{ref:n,className:ye(r&&"bn-text-destructive",t),htmlFor:o,...e})});Eie.displayName="FormLabel";const Mie=S.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:o,formMessageId:i}=Wg();return w.jsx(m3,{ref:e,id:r,"aria-describedby":n?`${o} ${i}`:`${o}`,"aria-invalid":!!n,...t})});Mie.displayName="FormControl";const Tie=S.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=Wg();return w.jsx("p",{ref:n,id:r,className:ye("bn-text-sm bn-text-muted-foreground",t),...e})});Tie.displayName="FormDescription";const Aie=S.forwardRef(({className:t,children:e,...n},r)=>{const{error:o,formMessageId:i}=Wg(),s=o?String(o?.message):e;return s?w.jsx("p",{ref:r,id:i,className:ye("bn-text-sm bn-font-medium bn-text-destructive",t),...n,children:s}):null});Aie.displayName="FormMessage";const HB=S.forwardRef(({className:t,type:e,...n},r)=>w.jsx("input",{type:e,className:ye("bn-flex bn-h-10 bn-w-full bn-rounded-md bn-border bn-border-input bn-bg-background bn-px-3 bn-py-2 bn-text-sm bn-ring-offset-background file:bn-border-0 file:bn-bg-transparent file:bn-text-sm file:bn-font-medium placeholder:bn-text-muted-foreground focus-visible:bn-outline-none focus-visible:bn-ring-2 focus-visible:bn-ring-ring focus-visible:bn-ring-offset-2 disabled:bn-cursor-not-allowed disabled:bn-opacity-50",t),ref:r,...n}));HB.displayName="Input";const Nie=uoe,Oie=doe,PB=S.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},o)=>w.jsx(gL,{ref:o,align:e,sideOffset:n,className:ye("bn-z-50 bn-w-72 bn-rounded-md bn-border bn-bg-popover bn-p-4 bn-text-popover-foreground bn-shadow-md bn-outline-none data-[state=open]:bn-animate-in data-[state=closed]:bn-animate-out data-[state=closed]:bn-fade-out-0 data-[state=open]:bn-fade-in-0 data-[state=closed]:bn-zoom-out-95 data-[state=open]:bn-zoom-in-95 data-[side=bottom]:bn-slide-in-from-top-2 data-[side=left]:bn-slide-in-from-right-2 data-[side=right]:bn-slide-in-from-left-2 data-[side=top]:bn-slide-in-from-bottom-2",t),...r}));PB.displayName=gL.displayName;const Rie=Boe,Die=Ioe,jB=S.forwardRef(({className:t,children:e,...n},r)=>w.jsxs(qL,{ref:r,className:ye("bn-flex bn-h-10 bn-w-full bn-items-center bn-justify-between bn-rounded-md bn-border bn-border-input bn-bg-background bn-px-3 bn-py-2 bn-text-sm bn-ring-offset-background placeholder:bn-text-muted-foreground focus:bn-outline-none focus:bn-ring-2 focus:bn-ring-ring focus:bn-ring-offset-2 disabled:bn-cursor-not-allowed disabled:bn-opacity-50 [&>span]:bn-line-clamp-1",t),...n,children:[e,w.jsx(Hoe,{asChild:!0,children:w.jsx(rL,{className:"bn-h-4 bn-w-4 bn-opacity-50"})})]}));jB.displayName=qL.displayName;const VB=S.forwardRef(({className:t,...e},n)=>w.jsx(WL,{ref:n,className:ye("bn-flex bn-cursor-default bn-items-center bn-justify-center bn-py-1",t),...e,children:w.jsx(Wre,{className:"bn-h-4 bn-w-4"})}));VB.displayName=WL.displayName;const zB=S.forwardRef(({className:t,...e},n)=>w.jsx(XL,{ref:n,className:ye("bn-flex bn-cursor-default bn-items-center bn-justify-center bn-py-1",t),...e,children:w.jsx(rL,{className:"bn-h-4 bn-w-4"})}));zB.displayName=XL.displayName;const UB=S.forwardRef(({className:t,children:e,position:n="popper",...r},o)=>w.jsxs(KL,{ref:o,className:ye("bn-relative bn-z-50 bn-max-h-96 bn-min-w-[8rem] bn-overflow-hidden bn-rounded-md bn-border bn-bg-popover bn-text-popover-foreground bn-shadow-md data-[state=open]:bn-animate-in data-[state=closed]:bn-animate-out data-[state=closed]:bn-fade-out-0 data-[state=open]:bn-fade-in-0 data-[state=closed]:bn-zoom-out-95 data-[state=open]:bn-zoom-in-95 data-[side=bottom]:bn-slide-in-from-top-2 data-[side=left]:bn-slide-in-from-right-2 data-[side=right]:bn-slide-in-from-left-2 data-[side=top]:bn-slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:bn-translate-y-1 data-[side=left]:bn--translate-x-1 data-[side=right]:bn-translate-x-1 data-[side=top]:bn--translate-y-1",t),position:n,...r,children:[w.jsx(VB,{}),w.jsx(Poe,{className:ye("bn-p-1",n==="popper"&&"bn-h-[var(--radix-select-trigger-height)] bn-w-full bn-min-w-[var(--radix-select-trigger-width)]"),children:e}),w.jsx(zB,{})]}));UB.displayName=KL.displayName;const _ie=S.forwardRef(({className:t,...e},n)=>w.jsx(ZL,{ref:n,className:ye("bn-py-1.5 bn-pl-8 bn-pr-2 bn-text-sm bn-font-semibold",t),...e}));_ie.displayName=ZL.displayName;const $B=S.forwardRef(({className:t,children:e,...n},r)=>w.jsxs(YL,{ref:r,className:ye("bn-relative bn-flex bn-w-full bn-cursor-default bn-select-none bn-items-center bn-rounded-sm bn-py-1.5 bn-pl-8 bn-pr-2 bn-text-sm bn-outline-none focus:bn-bg-accent focus:bn-text-accent-foreground data-[disabled]:bn-pointer-events-none data-[disabled]:bn-opacity-50",t),...n,children:[w.jsx("span",{className:"bn-absolute bn-left-2 bn-flex bn-h-3.5 bn-w-3.5 bn-items-center bn-justify-center",children:w.jsx(Voe,{children:w.jsx(nL,{className:"bn-h-4 bn-w-4"})})}),w.jsx(joe,{children:e})]}));$B.displayName=YL.displayName;const Lie=S.forwardRef(({className:t,...e},n)=>w.jsx(JL,{ref:n,className:ye("bn--mx-1 bn-my-1 bn-h-px bn-bg-muted",t),...e}));Lie.displayName=JL.displayName;function Bie({className:t,...e}){return w.jsx("div",{className:ye("bg-primary/10 animate-pulse rounded-md",t),...e})}const Iie=$oe,FB=S.forwardRef(({className:t,...e},n)=>w.jsx(cB,{ref:n,className:ye("bn-inline-flex bn-h-10 bn-items-center bn-justify-center bn-rounded-md bn-bg-muted bn-p-1 bn-text-muted-foreground",t),...e}));FB.displayName=cB.displayName;const GB=S.forwardRef(({className:t,...e},n)=>w.jsx(uB,{ref:n,className:ye("bn-inline-flex bn-items-center bn-justify-center bn-whitespace-nowrap bn-rounded-sm bn-px-3 bn-py-1.5 bn-text-sm bn-font-medium bn-ring-offset-background bn-transition-all focus-visible:bn-outline-none focus-visible:bn-ring-2 focus-visible:bn-ring-ring focus-visible:bn-ring-offset-2 disabled:bn-pointer-events-none disabled:bn-opacity-50 data-[state=active]:bn-bg-background data-[state=active]:bn-text-foreground data-[state=active]:bn-shadow-sm",t),...e}));GB.displayName=uB.displayName;const qB=S.forwardRef(({className:t,...e},n)=>w.jsx(dB,{ref:n,className:ye("bn-mt-2 bn-ring-offset-background focus-visible:bn-outline-none focus-visible:bn-ring-2 focus-visible:bn-ring-ring focus-visible:bn-ring-offset-2",t),...e}));qB.displayName=dB.displayName;const Hie=Dg("bn-inline-flex bn-items-center bn-justify-center bn-rounded-md bn-text-sm bn-font-medium bn-ring-offset-background bn-transition-colors hover:bn-bg-muted hover:bn-text-muted-foreground focus-visible:bn-outline-none focus-visible:bn-ring-2 focus-visible:bn-ring-ring focus-visible:bn-ring-offset-2 disabled:bn-pointer-events-none disabled:bn-opacity-50 data-[state=on]:bn-bg-accent data-[state=on]:bn-text-accent-foreground",{variants:{variant:{default:"bn-bg-transparent",outline:"bn-border bn-border-input bn-bg-transparent hover:bn-bg-accent hover:bn-text-accent-foreground"},size:{default:"bn-h-10 bn-px-3",sm:"bn-h-9 bn-px-2.5",lg:"bn-h-11 bn-px-5"}},defaultVariants:{variant:"default",size:"default"}}),KB=S.forwardRef(({className:t,variant:e,size:n,...r},o)=>w.jsx(pB,{ref:o,className:ye(Hie({variant:e,size:n,className:t})),...r}));KB.displayName=pB.displayName;const Pie=sie,jie=lie,Vie=aie,ZB=S.forwardRef(({className:t,sideOffset:e=4,...n},r)=>w.jsx(CB,{ref:r,sideOffset:e,className:ye("bn-z-50 bn-overflow-hidden bn-rounded-md bn-border bn-bg-popover bn-px-3 bn-py-1.5 bn-text-sm bn-text-popover-foreground bn-shadow-md bn-animate-in bn-fade-in-0 bn-zoom-in-95 data-[state=closed]:bn-animate-out data-[state=closed]:bn-fade-out-0 data-[state=closed]:bn-zoom-out-95 data-[side=bottom]:bn-slide-in-from-top-2 data-[side=left]:bn-slide-in-from-right-2 data-[side=right]:bn-slide-in-from-left-2 data-[side=top]:bn-slide-in-from-bottom-2",t),...n}));ZB.displayName=CB.displayName;const zie={Avatar:{Avatar:SB,AvatarFallback:EB,AvatarImage:kB},Badge:{Badge:die},Button:{Button:MB},Card:{Card:TB,CardContent:AB},DropdownMenu:{DropdownMenu:bie,DropdownMenuCheckboxItem:_B,DropdownMenuContent:RB,DropdownMenuItem:DB,DropdownMenuLabel:LB,DropdownMenuSeparator:BB,DropdownMenuSub:vie,DropdownMenuSubContent:OB,DropdownMenuSubTrigger:NB,DropdownMenuTrigger:yie},Form:{Form:Cie},Input:{Input:HB},Label:{Label:xC},Popover:{Popover:Nie,PopoverContent:PB,PopoverTrigger:Oie},Select:{Select:Rie,SelectContent:UB,SelectItem:$B,SelectTrigger:jB,SelectValue:Die},Skeleton:{Skeleton:Bie},Tabs:{Tabs:Iie,TabsContent:qB,TabsList:FB,TabsTrigger:GB},Toggle:{Toggle:KB},Tooltip:{Tooltip:jie,TooltipContent:ZB,TooltipProvider:Pie,TooltipTrigger:Vie}},YB=S.createContext(void 0);function yt(){return S.useContext(YB)}const Uie=t=>{const{children:e,...n}=t;$e(n);const r=yt(),o=uee();return w.jsx(r.Form.Form,{...o,children:e})},$ie=S.forwardRef((t,e)=>{const{className:n,name:r,label:o,variant:i,icon:s,value:a,autoFocus:u,placeholder:d,disabled:h,onKeyDown:p,onChange:g,onSubmit:b,autoComplete:v,rightSection:C,...k}=t;$e(k);const E=yt();return w.jsxs("div",{className:ye(n,"bn-flex bn-h-10 bn-w-full bn-rounded-md bn-border bn-border-input bn-bg-background bn-px-3 bn-py-2 bn-text-sm bn-ring-offset-background file:bn-border-0 file:bn-bg-transparent file:bn-text-sm file:bn-font-medium placeholder:bn-text-muted-foreground focus-visible:bn-outline-none focus-visible:bn-ring-2 focus-visible:bn-ring-ring focus-visible:bn-ring-offset-2 disabled:bn-cursor-not-allowed disabled:bn-opacity-50","bn-items-center bn-gap-2 bn-text-foreground"),children:[s,w.jsxs("div",{className:"bn-flex-1",children:[o&&w.jsx(E.Label.Label,{htmlFor:o,children:o}),w.jsx(E.Input.Input,{className:ye(n,"bn-border-none bn-p-0 bn-h-auto"),id:o,name:r,autoFocus:u,placeholder:d,disabled:h,value:a,onKeyDown:p,onChange:g,onSubmit:b,ref:e})]}),C]})}),Fie=t=>S.forwardRef((e,n)=>w.jsx(t,{onPointerDown:r=>{r.nativeEvent.fakeEvent||(r.ctrlKey=!0)},onPointerUp:r=>{const o=new PointerEvent("pointerdown",r.nativeEvent);o.fakeEvent=!0,r.target.dispatchEvent(o)},...e,ref:n})),Gie=t=>{const{children:e,onOpenChange:n,position:r,sub:o,...i}=t;$e(i);const s=yt();return o?w.jsx(s.DropdownMenu.DropdownMenuSub,{onOpenChange:n,children:e}):w.jsx(s.DropdownMenu.DropdownMenu,{modal:!1,onOpenChange:n,children:e})},qie=t=>{const{children:e,sub:n,...r}=t;$e(r);const o=yt(),i=S.useMemo(()=>Fie(o.DropdownMenu.DropdownMenuTrigger),[o.DropdownMenu.DropdownMenuTrigger]);return n?w.jsx(o.DropdownMenu.DropdownMenuSubTrigger,{children:e}):w.jsx(i,{asChild:!0,...r,children:e})},Kie=S.forwardRef((t,e)=>{const{className:n,children:r,sub:o,...i}=t;$e(i);const s=yt();return o?w.jsx(s.DropdownMenu.DropdownMenuSubContent,{className:n,ref:e,children:r}):w.jsx(s.DropdownMenu.DropdownMenuContent,{className:n,ref:e,children:r})}),Zie=S.forwardRef((t,e)=>{const{className:n,children:r,icon:o,checked:i,subTrigger:s,onClick:a,...u}=t;$e(u);const d=yt();return s?w.jsxs(w.Fragment,{children:[o,r]}):i!==void 0?w.jsxs(d.DropdownMenu.DropdownMenuCheckboxItem,{className:ye(n,"bn-gap-1",i?"":"bn-px-2"),ref:e,checked:i,onClick:a,...u,children:[o,r]}):w.jsxs(d.DropdownMenu.DropdownMenuItem,{className:n,ref:e,onClick:a,...u,children:[o,r,s&&w.jsx(oL,{className:"bn-ml-auto bn-h-4 bn-w-4"})]})}),Yie=S.forwardRef((t,e)=>{const{className:n,...r}=t;$e(r);const o=yt();return w.jsx(o.DropdownMenu.DropdownMenuSeparator,{className:n,ref:e})}),Wie=S.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;$e(o);const i=yt();return w.jsx(i.DropdownMenu.DropdownMenuLabel,{className:n,ref:e,children:r})}),Xie=S.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:u,label:d,...h}=t;$e(h,!1);const p=yt();return w.jsxs(p.Button.Button,{variant:"ghost",className:ye(n,"bn-text-gray-400"),ref:e,"aria-label":d,onClick:i,onDragStart:a,onDragEnd:s,draggable:u,...h,children:[o,r]})}),Jie=S.forwardRef((t,e)=>{const{className:n,tabs:r,defaultOpenTab:o,openTab:i,setOpenTab:s,loading:a,...u}=t;$e(u);const d=yt();return w.jsxs(d.Tabs.Tabs,{className:ye(n,"bn-bg-popover bn-p-2 bn-rounded-lg"),ref:e,value:i,defaultValue:o,onValueChange:s,children:[w.jsx(d.Tabs.TabsList,{children:r.map(h=>w.jsx(d.Tabs.TabsTrigger,{value:h.name,children:h.name},h.name))}),r.map(h=>w.jsx(d.Tabs.TabsContent,{value:h.name,children:w.jsx(d.Card.Card,{children:w.jsx(d.Card.CardContent,{className:"bn-p-4",children:h.tabPanel})})},h.name))]})}),Qie=S.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return $e(o),w.jsx("div",{className:ye(n,"bn-flex bn-flex-col bn-gap-2 bn-items-start bn-justify-center"),ref:e,children:r})}),ese=S.forwardRef((t,e)=>{const{className:n,value:r,placeholder:o,onKeyDown:i,onChange:s,...a}=t;$e(a);const u=yt();return w.jsx(u.Input.Input,{"data-test":"embed-input",className:ye(n,"bn-w-80"),ref:e,value:r,placeholder:o,onKeyDown:i,onChange:s})}),tse=t=>{const{children:e,opened:n,position:r,...o}=t;$e(o);const i=yt();return w.jsx(i.Popover.Popover,{open:n,children:e})},nse=S.forwardRef((t,e)=>{const{children:n,...r}=t;$e(r);const o=yt();return w.jsx(o.Popover.PopoverTrigger,{ref:e,asChild:!0,children:n})}),rse=S.forwardRef((t,e)=>{const{className:n,variant:r,children:o,...i}=t;$e(i);const s=yt();return w.jsx(s.Popover.PopoverContent,{sideOffset:8,className:ye(n,"bn-flex bn-flex-col bn-gap-2",r==="panel-popover"?"bn-p-0 bn-border-none bn-shadow-none bn-max-w-none bn-w-fit":""),ref:e,children:o})}),ose=S.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return $e(o,!1),w.jsx("div",{className:n,ref:e,...o,children:r})}),ise=S.forwardRef((t,e)=>{const{className:n,children:r,icon:o,onClick:i,onDragEnd:s,onDragStart:a,draggable:u,label:d,...h}=t;$e(h,!1);const p=yt();return w.jsxs(p.Button.Button,{variant:"ghost",className:ye(n,"bn-text-gray-400"),ref:e,"aria-label":d,onClick:i,onDragStart:a,onDragEnd:s,draggable:u,...h,children:[o,r]})}),sse=S.forwardRef((t,e)=>{const{className:n,children:r,id:o,columns:i,...s}=t;return $e(s),w.jsx("div",{className:n,style:{gridTemplateColumns:`repeat(${i}, 1fr)`},ref:e,id:o,role:"grid",children:r})}),lse=S.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...i}=t;return $e(i),w.jsx("div",{className:n,style:{gridColumn:`1 / ${o+1}`},ref:e,children:r})}),ase=S.forwardRef((t,e)=>{const{className:n,children:r,id:o,...i}=t;return $e(i),w.jsx("div",{id:o,role:"listbox",className:ye("bn-z-50 bn-min-w-[8rem] bn-overflow-auto bn-rounded-md bn-border bn-bg-popover bn-p-1 bn-text-popover-foreground bn-shadow-md data-[state=open]:bn-animate-in data-[state=closed]:bn-animate-out data-[state=closed]:bn-fade-out-0 data-[state=open]:bn-fade-in-0 data-[state=closed]:bn-zoom-out-95 data-[state=open]:bn-zoom-in-95 data-[side=bottom]:bn-slide-in-from-top-2 data-[side=left]:bn-slide-in-from-right-2 data-[side=right]:bn-slide-in-from-left-2 data-[side=top]:bn-slide-in-from-bottom-2",n),ref:e,children:r})}),cse=S.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return $e(o),w.jsx("div",{className:ye("bn-relative bn-flex bn-cursor-default bn-select-none bn-items-center bn-rounded-sm bn-px-2 bn-py-1.5 bn-text-sm bn-outline-none bn-transition-colors focus:bn-bg-accent focus:bn-text-accent-foreground data-[disabled]:bn-pointer-events-none data-[disabled]:bn-opacity-50",n),ref:e,children:w.jsx("div",{children:r})})}),use=S.forwardRef((t,e)=>{const n=yt(),{className:r,item:o,isSelected:i,onClick:s,id:a,...u}=t;$e(u);const d=S.useRef(null);return S.useEffect(()=>{if(!d.current||!i)return;const h=l3(d.current,document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu"));h==="top"?d.current.scrollIntoView(!0):h==="bottom"&&d.current.scrollIntoView(!1)},[i]),w.jsxs("div",{className:ye("bn-relative bn-flex bn-cursor-pointer bn-select-none bn-items-center bn-rounded-sm bn-px-2 bn-py-1.5 bn-text-sm bn-outline-none bn-transition-colors focus:bn-bg-accent focus:bn-text-accent-foreground data-[disabled]:bn-pointer-events-none data-[disabled]:bn-opacity-50",t.item.size==="small"?"bn-gap-3 bn-py-1":"",r),ref:Zx([e,d]),id:a,onMouseDown:h=>h.preventDefault(),onClick:s,role:"option","aria-selected":i||void 0,children:[o.icon&&w.jsx("div",{className:ye("bn-p-3",t.item.size==="small"?"bn-p-0":"",r),"data-position":"left",children:o.icon}),w.jsxs("div",{className:"bn-flex-1",children:[w.jsx("div",{className:ye("bn-text-base",t.item.size==="small"?"bn-text-sm":"",r),children:o.title}),w.jsx("div",{className:ye("bn-text-xs",t.item.size==="small"?"bn-hidden":"",r),children:o.subtext})]}),o.badge&&w.jsx("div",{"data-position":"right",className:"bn-text-xs",children:w.jsx(n.Badge.Badge,{variant:"secondary",children:o.badge})})]})}),dse=S.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return $e(o),w.jsx("div",{className:ye("bn-px-2 bn-py-1.5 bn-text-sm bn-font-semibold",n),ref:e,children:r})}),fse=S.forwardRef((t,e)=>{const{className:n,...r}=t;return $e(r),w.jsx("div",{className:ye(n,"bn-animate-spin"),ref:e,children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 -960 960 960",width:"1em",fill:"#e8eaed",children:w.jsx("path",{d:"M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-155.5t86-127Q252-817 325-848.5T480-880q17 0 28.5 11.5T520-840q0 17-11.5 28.5T480-800q-133 0-226.5 93.5T160-480q0 133 93.5 226.5T480-160q133 0 226.5-93.5T800-480q0-17 11.5-28.5T840-520q17 0 28.5 11.5T880-480q0 82-31.5 155t-86 127.5q-54.5 54.5-127 86T480-80Z"})})})}),hse=S.forwardRef((t,e)=>{const{className:n,children:r,onMouseDown:o,onClick:i,...s}=t;$e(s,!1);const a=yt();return w.jsx(a.Button.Button,{variant:"ghost",className:ye(n,"bn-p-0 bn-h-full bn-w-full bn-text-gray-400",n!=null&&n.includes("bn-extend-button-add-remove-columns")?"bn-ml-1":"bn-mt-1",n!=null&&n.includes("bn-extend-button-editing")?"bn-bg-accent bn-text-accent-foreground":""),ref:e,onClick:i,onMouseDown:o,...s,children:r})}),pse=S.forwardRef((t,e)=>{const{className:n,children:r,draggable:o,onDragStart:i,onDragEnd:s,style:a,label:u,...d}=t;$e(d,!1);const h=yt();return w.jsx(h.Button.Button,{variant:"ghost",className:ye(n,"bn-p-0 bn-h-fit bn-w-fit bn-text-gray-400"),ref:e,"aria-label":u,draggable:o,onDragStart:i,onDragEnd:s,style:a,...d,children:r})}),Av=S.forwardRef((t,e)=>{const{className:n,children:r,onMouseEnter:o,onMouseLeave:i,variant:s,...a}=t;$e(a);const u=yt();return w.jsx(u.Tooltip.TooltipProvider,{delayDuration:0,children:w.jsx("div",{className:ye(n,"bn-flex bn-gap-1 bn-p-1 bn-bg-popover bn-text-popover-foreground bn-border bn-rounded-lg bn-shadow-md bn-h-fit",s==="action-toolbar"?"bn-w-fit":""),ref:e,onMouseEnter:o,onMouseLeave:i,children:r})})}),Nv=S.forwardRef((t,e)=>{const{className:n,children:r,mainTooltip:o,secondaryTooltip:i,icon:s,isSelected:a,isDisabled:u,onClick:d,label:h,variant:p,...g}=t;$e(g,!1);const b=yt(),v=a===void 0?w.jsxs(b.Button.Button,{className:ye(n,p==="compact"?"bn-h-6 bn-min-w-6 bn-p-0":""),variant:"ghost",size:p==="compact"?"sm":"default",disabled:u,onClick:d,ref:e,"aria-label":h,...g,children:[s,r]}):w.jsxs(b.Toggle.Toggle,{className:ye(n,"data-[state=open]:bg-accent data-[state=closed]:text-accent-foreground",p==="compact"?"bn-h-6 bn-min-w-6 bn-p-0":""),size:p==="compact"?"sm":"default","aria-label":h,onClick:d,pressed:a,disabled:u,"data-state":a?"on":"off","data-disabled":u,ref:e,...g,children:[s,r]});return w.jsxs(b.Tooltip.Tooltip,{children:[w.jsx(b.Tooltip.TooltipTrigger,{asChild:!0,children:v}),w.jsxs(b.Tooltip.TooltipContent,{className:"bn-flex bn-flex-col bn-items-center bn-whitespace-pre-wrap",children:[w.jsx("span",{children:o}),i&&w.jsx("span",{children:i})]})]})}),Ov=S.forwardRef((t,e)=>{const{className:n,items:r,isDisabled:o,...i}=t;$e(i);const s=yt(),a=d=>w.jsxs("div",{className:"bn-flex bn-gap-1 bn-items-center",children:[d.icon,d.text]}),u=r.filter(d=>d.isSelected)[0];return u?w.jsxs(s.Select.Select,{value:u.text,onValueChange:d=>{var h,p;return(p=(h=r.find(g=>g.text===d)).onClick)==null?void 0:p.call(h)},disabled:o,children:[w.jsx(s.Select.SelectTrigger,{className:"bn-border-none",children:w.jsx(s.Select.SelectValue,{})}),w.jsx(s.Select.SelectContent,{className:n,ref:e,children:r.map(d=>w.jsx(s.Select.SelectItem,{disabled:d.isDisabled,value:d.text,children:w.jsx(a,{...d})},d.text))})]}):null}),mse=S.forwardRef((t,e)=>{const{className:n,children:r,selected:o,headerText:i,onFocus:s,onBlur:a,tabIndex:u,...d}=t;$e(d);const h=yt();return w.jsxs(h.Card.Card,{className:ye(n,"bn-w-[300px]",o?"bn-bg-accent bn-text-accent-foreground":""),onFocus:s,onBlur:a,tabIndex:u,ref:e,children:[i&&w.jsx("div",{className:"bn-px-4 bn-pt-4 bn-italic bn-text-sm",children:i}),r]})}),gse=S.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;return $e(o),w.jsx("div",{className:ye(n,"bn-p-4",n!=null&&n.includes("bn-thread-comments")?"bn-flex bn-flex-col bn-gap-6 bn-border-b":""),ref:e,children:r})}),bse=S.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;$e(o,!1);const i=yt();return w.jsx(i.Button.Button,{className:ye(n,"bn-p-0 bn-w-fit bn-text-foreground bn-bg-transparent hover:bn-bg-transparent"),ref:e,children:r})}),yse=S.forwardRef((t,e)=>{const{authorInfo:n,timeString:r,edited:o,...i}=t,s=Ve();$e(i,!1);const a=yt();return n==="loading"?w.jsxs("div",{className:"bn-flex bn-flex-row bn-flex-nowrap bn-items-center bn-gap-4",children:[w.jsx(a.Skeleton.Skeleton,{className:"bn-size-7 bn-rounded-full bn-bg-neutral-400 bn-animate-pulse"}),w.jsx(a.Skeleton.Skeleton,{className:"bn-h-3 bn-w-32 bn-rounded-full bn-bg-neutral-400 bn-animate-pulse"})]}):w.jsxs("div",{className:"bn-flex bn-flex-row bn-flex-nowrap bn-items-center bn-gap-4",children:[w.jsxs(a.Avatar.Avatar,{children:[w.jsx(a.Avatar.AvatarImage,{src:n.avatarUrl,alt:n.username,className:"bn-h-7 bn-rounded-full"}),w.jsx(a.Avatar.AvatarFallback,{children:n.username[0]})]}),w.jsxs("div",{className:"bn-flex bn-flex-row bn-flex-nowrap bn-items-center bn-gap-2",children:[w.jsx("span",{className:"bn-text-sm bn-font-bold",children:n.username}),w.jsxs("span",{className:"bn-text-xs",children:[r," ",o&&`(${s.comments.edited})`]})]})]})}),vse=S.forwardRef((t,e)=>{const{className:n,showActions:r,authorInfo:o,timeString:i,actions:s,edited:a,children:u,...d}=t;$e(d);const[h,p]=S.useState(!1),{focused:g,ref:b}=VQ(),v=s&&(r===!0||r===void 0||r==="hover"&&h||g);return w.jsxs("div",{ref:e,className:ye(n,"bn-relative bn-flex bn-flex-col bn-gap-2"),onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[v?w.jsx("div",{className:"bn-absolute bn-right-0 bn-top-0 bn-z-10",ref:b,children:s}):null,w.jsx(yse,{...t}),u]})}),wse=S.forwardRef((t,e)=>{const{className:n,onFocus:r,onBlur:o,autoFocus:i,editor:s,editable:a,...u}=t;return $e(u),w.jsx(WB,{autoFocus:i,className:ye(n,""),editor:t.editor,sideMenu:!1,slashMenu:!1,tableHandles:!1,filePanel:!1,formattingToolbar:!1,editable:a,ref:e,onFocus:r,onBlur:o,children:w.jsx(e3,{formattingToolbar:xse})})}),xse=()=>{const t=J4([]).filter(e=>e.key!=="nestBlockButton"&&e.key!=="unnestBlockButton");return w.jsx(Q4,{blockTypeSelectItems:[],children:t})},Cse=S.forwardRef((t,e)=>{const{className:n,text:r,icon:o,isSelected:i,mainTooltip:s,secondaryTooltip:a,onClick:u,onMouseEnter:d,...h}=t;$e(h,!1);const p=yt(),g=w.jsxs(p.Button.Button,{variant:i?"secondary":"outline",className:ye(n,"bn-flex bn-items-center bn-gap-1 bn-rounded-full bn-h-7 bn-px-2.5"),onClick:u,onMouseEnter:d,ref:e,children:[w.jsx("span",{children:o}),w.jsx("span",{children:r})]});return s?w.jsxs(p.Tooltip.Tooltip,{children:[w.jsx(p.Tooltip.TooltipTrigger,{asChild:!0,children:g}),w.jsxs(p.Tooltip.TooltipContent,{className:"bn-flex bn-flex-col bn-items-center bn-whitespace-pre-wrap",children:[w.jsx("span",{children:s}),a&&w.jsx("span",{children:a})]})]}):g}),Sse=S.forwardRef((t,e)=>{const{className:n,children:r,...o}=t;$e(o);const i=yt();return w.jsx(i.Tooltip.TooltipProvider,{delayDuration:0,children:w.jsx("div",{className:ye(n,"bn-flex bn-flex-row bn-flex-wrap bn-gap-1 bn-w-full"),ref:e,children:r})})}),kse=S.forwardRef((t,e)=>{const{className:n,children:r,onClick:o,label:i,...s}=t;$e(s);const a=yt();return w.jsx(a.Button.Button,{type:"submit",className:n,"aria-label":i,ref:e,onClick:o,children:r})}),Ese=S.forwardRef((t,e)=>{const{className:n,accept:r,value:o,placeholder:i,onChange:s,...a}=t;$e(a);const u=yt();return w.jsx(u.Input.Input,{type:"file",className:n,ref:e,accept:r,value:o?o.name:void 0,onChange:async d=>s?.(d.target.files[0]),placeholder:i})}),Mse=S.forwardRef((t,e)=>{const{className:n,isSelected:r,onClick:o,item:i,id:s,...a}=t;$e(a);const u=S.useRef(null);return S.useEffect(()=>{if(!u.current||!r)return;const d=l3(u.current,document.querySelector(".bn-grid-suggestion-menu"));d==="top"?u.current.scrollIntoView(!0):d==="bottom"&&u.current.scrollIntoView(!1)},[r]),w.jsx("div",{className:n,ref:Zx([e,u]),id:s,role:"option",onClick:o,"aria-selected":r||void 0,children:i.icon})}),Tse=S.forwardRef((t,e)=>{const{className:n,children:r,columns:o,...i}=t;return $e(i),w.jsx("div",{className:n,style:{gridColumn:`1 / ${o+1}`},ref:e,children:r})}),Ase={FormattingToolbar:{Root:Av,Button:Nv,Select:Ov},FilePanel:{Root:Jie,Button:kse,FileInput:Ese,TabPanel:Qie,TextInput:ese},LinkToolbar:{Root:Av,Button:Nv,Select:Ov},SideMenu:{Root:ose,Button:ise},SuggestionMenu:{Root:ase,Item:use,EmptyItem:cse,Label:dse,Loader:fse},GridSuggestionMenu:{Root:sse,Item:Mse,EmptyItem:lse,Loader:Tse},TableHandle:{Root:pse,ExtendButton:hse},Comments:{Comment:vse,Editor:wse,Card:mse,CardSection:gse,ExpandSectionsPrompt:bse},Generic:{Badge:{Root:Cse,Group:Sse},Toolbar:{Root:Av,Button:Nv,Select:Ov},Form:{Root:Uie,TextInput:$ie},Menu:{Root:Gie,Trigger:qie,Dropdown:Kie,Divider:Yie,Label:Wie,Item:Zie,Button:Xie},Popover:{Root:tse,Trigger:nse,Content:rse}}},WB=t=>{const{className:e,shadCNComponents:n,...r}=t,o=S.useMemo(()=>({...zie,...n}),[n]);return w.jsx(YB.Provider,{value:o,children:w.jsx(L4.Provider,{value:Ase,children:w.jsx(xQ,{className:_t("bn-shadcn",e||""),...r})})})};function Nse(t){const{children:e,pagePanels:n,blockPanels:r,hasSelection:o,onClose:i}=t,[s,a]=S.useState(!0),[u,d]=S.useState("page"),[h,p]=S.useState(380),g=S.useRef(!1),b=S.useRef(0),v=S.useRef(0),C=300,k=560,E=S.useCallback(O=>{if(!g.current)return;const $=b.current-O.clientX;let H=v.current+$;H<C&&(H=C),H>k&&(H=k),p(H)},[]),T=S.useCallback(()=>{g.current&&(g.current=!1,window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",T))},[E]),N=S.useCallback(O=>{g.current=!0,b.current=O.clientX,v.current=h,window.addEventListener("mousemove",E),window.addEventListener("mouseup",T)},[E,T,h]),_=S.useMemo(()=>w.jsxs("div",{className:"flex gap-1 p-1 rounded-md bg-zinc-800/60",children:[w.jsx("button",{className:"px-3 py-1 text-xs rounded-md transition-colors "+(u==="page"?"bg-zinc-900 shadow-sm":"hover:bg-zinc-800"),onClick:()=>d("page"),children:"Page"}),w.jsx("button",{className:"px-3 py-1 text-xs rounded-md transition-colors disabled:opacity-50 "+(u==="block"?"bg-zinc-900 shadow-sm":"hover:bg-zinc-800"),onClick:()=>o&&d("block"),disabled:!o,children:"Block"})]}),[u,o]);return w.jsxs("div",{className:"flex h-full",children:[w.jsx("div",{className:"flex-1 min-w-0 h-full",children:e}),s&&w.jsxs("div",{className:"relative border-l border-zinc-800 bg-zinc-900",style:{width:h},children:[w.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b backdrop-blur border-zinc-800 bg-zinc-900/80",children:[_,w.jsx("button",{className:"px-2 py-1 text-xs rounded border border-zinc-800 hover:bg-zinc-800",onClick:()=>{a(!1),i&&i()},children:"Hide"})]}),w.jsx("div",{className:"absolute top-0 left-0 w-1 h-full cursor-col-resize",onMouseDown:N}),w.jsx("div",{className:"h-[calc(100%-41px)] overflow-auto p-3",children:u==="page"?w.jsx(wN,{panels:n}):w.jsx(wN,{panels:r})})]}),!s&&w.jsx("button",{className:"px-2 text-xs border-l border-zinc-800 hover:bg-zinc-800",onClick:()=>a(!0),children:"Show"})]})}function wN({panels:t}){const[e,n]=S.useState({});return w.jsx("div",{className:"space-y-2 w-full",children:t.map(r=>w.jsxs("div",{className:"rounded-md border border-zinc-800 bg-zinc-900",children:[w.jsxs("button",{className:"flex justify-between items-center px-3 py-2 w-full text-left",onClick:()=>n(o=>({...o,[r.id]:!o[r.id]})),children:[w.jsx("span",{className:"text-sm font-medium text-zinc-100",children:r.label}),w.jsx("span",{className:"text-xs text-zinc-400",children:e[r.id]?"−":"+"})]}),e[r.id]&&w.jsx("div",{className:"px-3 pb-3 space-y-4",children:r.controls.map(o=>w.jsx(Ose,{control:o},o.id))})]},r.id))})}function Ose({control:t}){return t.kind==="text"?w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs tracking-wide uppercase text-zinc-400",children:t.label}),w.jsx("input",{className:"px-2 py-1 w-full rounded border border-zinc-800 bg-zinc-900 text-zinc-100",value:t.getValue(),onChange:e=>t.setValue(e.target.value)})]}):t.kind==="toggle"?w.jsxs("label",{className:"flex gap-2 items-center text-sm text-zinc-200",children:[w.jsx("input",{type:"checkbox",checked:t.getValue(),onChange:e=>t.setValue(e.target.checked)}),t.label]}):t.kind==="select"?w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs tracking-wide uppercase text-zinc-400",children:t.label}),w.jsx("select",{className:"px-2 py-1 w-full rounded border border-zinc-800 bg-zinc-900 text-zinc-100",value:t.getValue(),onChange:e=>t.setValue(e.target.value),children:t.options.map(e=>w.jsx("option",{value:e.value,children:e.label},e.value))})]}):t.kind==="color"?w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs tracking-wide uppercase text-zinc-400",children:t.label}),w.jsx("input",{className:"p-0 w-10 h-6 rounded border border-zinc-800",type:"color",value:t.getValue(),onChange:e=>t.setValue(e.target.value)})]}):w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs tracking-wide uppercase text-zinc-400",children:t.label}),w.jsx("input",{className:"w-full",type:"range",min:t.min,max:t.max,step:t.step??1,value:t.getValue(),onChange:e=>t.setValue(Number(e.target.value))})]})}function Rse(t){const{children:e,pagePanels:n,blockPanels:r,hasSelection:o,onClose:i}=t,[s,a]=S.useState(!0),[u,d]=S.useState("mail"),[h,p]=S.useState(380),g=S.useRef(!1),b=S.useRef(0),v=S.useRef(0),C=300,k=560,E=S.useCallback(O=>{if(!g.current)return;const $=b.current-O.clientX;let H=v.current+$;H<C&&(H=C),H>k&&(H=k),p(H)},[]),T=S.useCallback(()=>{g.current&&(g.current=!1,window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",T))},[E]),N=S.useCallback(O=>{g.current=!0,b.current=O.clientX,v.current=h,window.addEventListener("mousemove",E),window.addEventListener("mouseup",T)},[E,T,h]),_=S.useMemo(()=>w.jsxs("div",{className:"flex gap-1 p-1 rounded-md bg-zinc-800/60",children:[w.jsx("button",{className:"px-3 py-1 text-xs rounded-md transition-colors "+(u==="mail"?"bg-zinc-900 shadow-sm":"hover:bg-zinc-800"),onClick:()=>d("mail"),children:"Mail"}),w.jsx("button",{className:"px-3 py-1 text-xs rounded-md transition-colors disabled:opacity-50 "+(u==="block"?"bg-zinc-900 shadow-sm":"hover:bg-zinc-800"),onClick:()=>o&&d("block"),disabled:!o,children:"Block"})]}),[u,o]);return w.jsxs("div",{className:"flex h-full",children:[w.jsx("div",{className:"flex-1 min-w-0 h-full",children:e}),s&&w.jsxs("div",{className:"relative border-l border-zinc-800 bg-zinc-900",style:{width:h},children:[w.jsxs("div",{className:"flex justify-between items-center px-3 py-2 border-b backdrop-blur border-zinc-800 bg-zinc-900/80",children:[_,w.jsx("button",{className:"px-2 py-1 text-xs rounded border border-zinc-800 hover:bg-zinc-800",onClick:()=>{a(!1),i&&i()},children:"Hide"})]}),w.jsx("div",{className:"absolute top-0 left-0 w-1 h-full cursor-col-resize",onMouseDown:N}),w.jsx("div",{className:"h-[calc(100%-41px)] overflow-auto p-3",children:u==="mail"?w.jsx(xN,{panels:n}):w.jsx(xN,{panels:r})})]}),!s&&w.jsx("button",{className:"px-2 text-xs border-l border-zinc-800 hover:bg-zinc-800",onClick:()=>a(!0),children:"Show"})]})}function xN({panels:t}){const[e,n]=S.useState({});return w.jsx("div",{className:"space-y-2 w-full",children:t.map(r=>w.jsxs("div",{className:"rounded-md border border-zinc-800 bg-zinc-900",children:[w.jsxs("button",{className:"flex justify-between items-center px-3 py-2 w-full text-left",onClick:()=>n(o=>({...o,[r.id]:!o[r.id]})),children:[w.jsx("span",{className:"text-sm font-medium text-zinc-100",children:r.label}),w.jsx("span",{className:"text-xs text-zinc-400",children:e[r.id]?"−":"+"})]}),e[r.id]&&w.jsx("div",{className:"px-3 pb-3 space-y-4",children:r.controls.map(o=>w.jsx(Dse,{control:o},o.id))})]},r.id))})}function Dse({control:t}){return t.kind==="text"?w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs tracking-wide uppercase text-zinc-400",children:t.label}),w.jsx("input",{className:"px-2 py-1 w-full rounded border border-zinc-800 bg-zinc-900 text-zinc-100",value:t.getValue(),onChange:e=>t.setValue(e.target.value)})]}):t.kind==="toggle"?w.jsxs("label",{className:"flex gap-2 items-center text-sm text-zinc-200",children:[w.jsx("input",{type:"checkbox",checked:t.getValue(),onChange:e=>t.setValue(e.target.checked)}),t.label]}):t.kind==="select"?w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs tracking-wide uppercase text-zinc-400",children:t.label}),w.jsx("select",{className:"px-2 py-1 w-full rounded border border-zinc-800 bg-zinc-900 text-zinc-100",value:t.getValue(),onChange:e=>t.setValue(e.target.value),children:t.options.map(e=>w.jsx("option",{value:e.value,children:e.label},e.value))})]}):t.kind==="color"?w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs tracking-wide uppercase text-zinc-400",children:t.label}),w.jsx("input",{className:"p-0 w-10 h-6 rounded border border-zinc-800",type:"color",value:t.getValue(),onChange:e=>t.setValue(e.target.value)})]}):w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-xs tracking-wide uppercase text-zinc-400",children:t.label}),w.jsx("input",{className:"w-full",type:"range",min:t.min,max:t.max,step:t.step??1,value:t.getValue(),onChange:e=>t.setValue(Number(e.target.value))})]})}function _se({onSave:t,onPublish:e,onDelete:n}){const[r,o]=S.useState(!1),i=S.useRef(null),s="/moox/block-editor/assets/images/logo.png";return S.useEffect(()=>{const a=u=>{i.current&&(i.current.contains(u.target)||o(!1))};return window.addEventListener("click",a),()=>window.removeEventListener("click",a)},[]),w.jsx("div",{className:"sticky top-0 z-20 w-full h-16 border-b backdrop-blur border-zinc-800 bg-zinc-900/80",children:w.jsxs("div",{className:"flex justify-between items-center px-6 h-full",children:[w.jsx("div",{className:"flex gap-3 items-center",children:w.jsx("img",{src:s,alt:"Moox",className:"w-auto h-[1.6rem]"})}),w.jsxs("div",{className:"flex gap-3 items-center",children:[w.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-violet-500 rounded-md shadow-sm hover:bg-violet-500 focus:outline-none focus:ring-2 focus:ring-violet-400",onClick:t,children:"Save"}),w.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md shadow-sm hover:bg-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400",onClick:e,children:"Publish"}),w.jsxs("div",{className:"relative",ref:i,children:[w.jsx("button",{className:"px-3 py-2 text-sm rounded-md border shadow-sm border-zinc-800 bg-zinc-800 text-zinc-100 hover:bg-zinc-700",onClick:a=>{a.stopPropagation(),o(u=>!u)},children:"…"}),r&&w.jsx("div",{className:"absolute right-0 p-1 mt-2 w-44 text-sm rounded-md border shadow-lg border-zinc-800 bg-zinc-900",children:w.jsx("button",{className:"px-3 py-2 w-full text-left text-red-300 rounded hover:bg-zinc-800",onClick:n,children:"Delete"})})]})]})]})})}function Lse({onSave:t,onPublish:e,onDelete:n}){const[r,o]=S.useState(!1),i=S.useRef(null),s="/moox/block-editor/assets/images/logo.png";return S.useEffect(()=>{const a=u=>{i.current&&(i.current.contains(u.target)||o(!1))};return window.addEventListener("click",a),()=>window.removeEventListener("click",a)},[]),w.jsx("div",{className:"sticky top-0 z-20 w-full h-16 border-b backdrop-blur border-zinc-800 bg-zinc-900/80",children:w.jsxs("div",{className:"flex justify-between items-center px-6 h-full",children:[w.jsx("div",{className:"flex gap-3 items-center",children:w.jsx("img",{src:s,alt:"Moox",className:"w-auto h-[1.6rem]"})}),w.jsxs("div",{className:"flex gap-3 items-center",children:[w.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{},children:"Testmail"}),w.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-violet-500 rounded-md shadow-sm hover:bg-violet-500 focus:outline-none focus:ring-2 focus:ring-violet-400",onClick:t,children:"Save"}),w.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-emerald-600 rounded-md shadow-sm hover:bg-emerald-500 focus:outline-none focus:ring-2 focus:ring-emerald-400",onClick:e,children:"Publish"}),w.jsxs("div",{className:"relative",ref:i,children:[w.jsx("button",{className:"px-3 py-2 text-sm rounded-md border shadow-sm border-zinc-800 bg-zinc-800 text-zinc-100 hover:bg-zinc-700",onClick:a=>{a.stopPropagation(),o(u=>!u)},children:"…"}),r&&w.jsx("div",{className:"absolute right-0 p-1 mt-2 w-44 text-sm rounded-md border shadow-lg border-zinc-800 bg-zinc-900",children:w.jsx("button",{className:"px-3 py-2 w-full text-left text-red-300 rounded hover:bg-zinc-800",onClick:n,children:"Delete"})})]})]})]})})}const Bse=Rc({type:"twoColumn",propSchema:{},content:"none",slots:["left","right"]},{render:()=>{const t=document.createElement("div");return t.className="grid grid-cols-2 gap-4 p-4 bg-gray-50 border",{dom:t}}}),Ise={twoColumn:Bse},Hse={};function Pse({mode:t="web"}){const e=Eg.create({blockSpecs:{...kg,...t==="web"?Ise:Hse}}),n=Mg({schema:e,initialContent:t==="mail"?[{type:"paragraph",content:[{type:"text",text:"This is the first paragraph of the brand new Moox Mail Editor. It's a new way to create content for your email templates. The Block Editor is developed using BlockNote, React, Tailwind, and ShadCN. There is TipTap behind the scenes. We also use Maizzle for email development.",styles:{}}]},{type:"heading",props:{level:2},content:[{type:"text",text:"BlockNote and React 🚀",styles:{}}]}]:[{type:"paragraph",content:[{type:"text",text:"This is the first paragraph of the brand new Moox Block Editor. It's a new way to create content for your website. The Block Editor is developed using BlockNote, React, Tailwind, and ShadCN. There is TipTap behind the scenes.",styles:{}}]},{type:"heading",props:{level:2},content:[{type:"text",text:"BlockNote and React 🚀",styles:{}}]}]}),[r,o]=S.useState(t==="mail"?"Moox Mail Editor":"Moox Block Editor"),i=S.useMemo(()=>[{id:"document",label:t==="mail"?"Mail":"Document",controls:[{id:"title",label:"Title",kind:"text",getValue:()=>r,setValue:o}]}],[r,t]),s=t==="web"?_se:Lse,a=t==="web"?Nse:Rse;return w.jsxs("div",{className:"h-full min-h-screen",children:[w.jsx(s,{onSave:()=>{},onPublish:()=>{},onDelete:()=>{}}),w.jsxs(a,{pagePanels:i,blockPanels:[],hasSelection:!1,children:[w.jsx("div",{className:"pt-12 pr-12 pb-6 pl-16",children:w.jsx("input",{className:"mb-4 ml-2 w-full text-5xl font-semibold tracking-tight bg-transparent border-0 outline-none focus:ring-0 text-zinc-100 placeholder-zinc-500",placeholder:"Add title",value:r,onChange:u=>o(u.target.value)})}),w.jsx("div",{className:"min-h-[50vh] pl-5",children:w.jsx(WB,{editor:n})})]})]})}const jse=document.getElementById("block-editor"),Vse=document.getElementById("root"),fd=jse||Vse,CN=fd?.getAttribute("data-mode");fd?.getAttribute("data-initial-content");const zse=new URLSearchParams(window.location.search),SN=zse.get("mode"),kN=["web","mail"],EN=kN.includes(SN)?SN:kN.includes(CN)?CN:null;EN?yH.createRoot(fd).render(w.jsx(_e.StrictMode,{children:w.jsx(Pse,{mode:EN})})):fd&&(fd.innerHTML=`
      <div class="flex justify-center items-center min-h-screen text-white bg-zinc-900">
        <div class="space-y-6 text-center">
          <img src="/images/logo.png" alt="Moox" class="mx-auto mb-16 w-auto h-12" />
          <h1 class="text-4xl font-bold text-zinc-100">Moox Block Editor</h1>
          <p class="text-zinc-400">Wähle deinen Editor-Modus:</p>
          <div class="flex gap-4 justify-center">
            <a href="?mode=web" class="px-6 py-3 font-medium bg-violet-500 rounded-md transition-colors hover:bg-violet-600">
              Web Editor
            </a>
            <a href="?mode=mail" class="px-6 py-3 font-medium bg-blue-500 rounded-md transition-colors hover:bg-violet-600">
              Mail Editor
            </a>
            </div>
          </div>
        </div>
      </div>
    `);export{sw as g};
